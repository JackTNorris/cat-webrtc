(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const a of u.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function r(o){if(o.ep)return;o.ep=!0;const u=n(o);fetch(o.href,u)}})();/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Dp=function(e,t){return Dp=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)r.hasOwnProperty(o)&&(n[o]=r[o])},Dp(e,t)};function U(e,t){Dp(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var Ir=function(){return Ir=Object.assign||function(t){for(var n,r=1,o=arguments.length;r<o;r++){n=arguments[r];for(var u in n)Object.prototype.hasOwnProperty.call(n,u)&&(t[u]=n[u])}return t},Ir.apply(this,arguments)};function k(e,t,n,r){function o(u){return u instanceof n?u:new n(function(a){a(u)})}return new(n||(n=Promise))(function(u,a){function h(v){try{p(r.next(v))}catch(g){a(g)}}function l(v){try{p(r.throw(v))}catch(g){a(g)}}function p(v){v.done?u(v.value):o(v.value).then(h,l)}p((r=r.apply(e,t||[])).next())})}function R(e,t){var n={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},r,o,u,a;return a={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function h(p){return function(v){return l([p,v])}}function l(p){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,o&&(u=p[0]&2?o.return:p[0]?o.throw||((u=o.return)&&u.call(o),0):o.next)&&!(u=u.call(o,p[1])).done)return u;switch(o=0,u&&(p=[p[0]&2,u.value]),p[0]){case 0:case 1:u=p;break;case 4:return n.label++,{value:p[1],done:!1};case 5:n.label++,o=p[1],p=[0];continue;case 7:p=n.ops.pop(),n.trys.pop();continue;default:if(u=n.trys,!(u=u.length>0&&u[u.length-1])&&(p[0]===6||p[0]===2)){n=0;continue}if(p[0]===3&&(!u||p[1]>u[0]&&p[1]<u[3])){n.label=p[1];break}if(p[0]===6&&n.label<u[1]){n.label=u[1],u=p;break}if(u&&n.label<u[2]){n.label=u[2],n.ops.push(p);break}u[2]&&n.ops.pop(),n.trys.pop();continue}p=t.call(e,n)}catch(v){p=[6,v],o=0}finally{r=u=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}}function Oe(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ys(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),o,u=[],a;try{for(;(t===void 0||t-- >0)&&!(o=r.next()).done;)u.push(o.value)}catch(h){a={error:h}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return u}function Ti(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(Ys(arguments[t]));return e}function ae(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var r=Array(e),o=0,t=0;t<n;t++)for(var u=arguments[t],a=0,h=u.length;a<h;a++,o++)r[o]=u[a];return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var z0={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var L=function(e,t){if(!e)throw jo(t)},jo=function(e){return new Error("Firebase Database ("+z0.SDK_VERSION+") INTERNAL ASSERT FAILED: "+e)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Q0=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var o=e.charCodeAt(r);o<128?t[n++]=o:o<2048?(t[n++]=o>>6|192,t[n++]=o&63|128):(o&64512)===55296&&r+1<e.length&&(e.charCodeAt(r+1)&64512)===56320?(o=65536+((o&1023)<<10)+(e.charCodeAt(++r)&1023),t[n++]=o>>18|240,t[n++]=o>>12&63|128,t[n++]=o>>6&63|128,t[n++]=o&63|128):(t[n++]=o>>12|224,t[n++]=o>>6&63|128,t[n++]=o&63|128)}return t},KA=function(e){for(var t=[],n=0,r=0;n<e.length;){var o=e[n++];if(o<128)t[r++]=String.fromCharCode(o);else if(o>191&&o<224){var u=e[n++];t[r++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){var u=e[n++],a=e[n++],h=e[n++],l=((o&7)<<18|(u&63)<<12|(a&63)<<6|h&63)-65536;t[r++]=String.fromCharCode(55296+(l>>10)),t[r++]=String.fromCharCode(56320+(l&1023))}else{var u=e[n++],a=e[n++];t[r++]=String.fromCharCode((o&15)<<12|(u&63)<<6|a&63)}}return t.join("")},bd={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],o=0;o<e.length;o+=3){var u=e[o],a=o+1<e.length,h=a?e[o+1]:0,l=o+2<e.length,p=l?e[o+2]:0,v=u>>2,g=(u&3)<<4|h>>4,m=(h&15)<<2|p>>6,w=p&63;l||(w=64,a||(m=64)),r.push(n[v],n[g],n[m],n[w])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Q0(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):KA(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],o=0;o<e.length;){var u=n[e.charAt(o++)],a=o<e.length,h=a?n[e.charAt(o)]:0;++o;var l=o<e.length,p=l?n[e.charAt(o)]:64;++o;var v=o<e.length,g=v?n[e.charAt(o)]:64;if(++o,u==null||h==null||p==null||g==null)throw Error();var m=u<<2|h>>4;if(r.push(m),p!==64){var w=h<<4&240|p>>2;if(r.push(w),g!==64){var b=p<<6&192|g;r.push(b)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},YA=function(e){var t=Q0(e);return bd.encodeByteArray(t,!0)},Y_=function(e){try{return bd.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K0(e){return $s(void 0,e)}function $s(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:var n=t;return new Date(n.getTime());case Object:e===void 0&&(e={});break;case Array:e=[];break;default:return t}for(var r in t)!t.hasOwnProperty(r)||!$A(r)||(e[r]=$s(e[r],t[r]));return e}function $A(e){return e!=="__proto__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ke=function(){function e(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(n,r){t.resolve=n,t.reject=r})}return e.prototype.wrapCallback=function(t){var n=this;return function(r,o){r?n.reject(r):n.resolve(o),typeof t=="function"&&(n.promise.catch(function(){}),t.length===1?t(r):t(r,o))}},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mi(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Ed(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(mi())}function XA(){try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function JA(){return typeof self=="object"&&self.self===self}function ZA(){var e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function Y0(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function tC(){return mi().indexOf("Electron/")>=0}function eC(){var e=mi();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function nC(){return mi().indexOf("MSAppHost/")>=0}function $0(){return z0.NODE_ADMIN===!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var rC="FirebaseError",iC=function(e){U(t,e);function t(n,r,o){var u=e.call(this,r)||this;return u.code=n,u.customData=o,u.name=rC,Object.setPrototypeOf(u,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(u,Id.prototype.create),u}return t}(Error),Id=function(){function e(t,n,r){this.service=t,this.serviceName=n,this.errors=r}return e.prototype.create=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var o=n[0]||{},u=this.service+"/"+t,a=this.errors[t],h=a?oC(a,o):"Error",l=this.serviceName+": "+h+" ("+u+").",p=new iC(u,l,o);return p},e}();function oC(e,t){return e.replace(sC,function(n,r){var o=t[r];return o!=null?String(o):"<"+r+"?>"})}var sC=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xs(e){return JSON.parse(e)}function Qt(e){return JSON.stringify(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var X0=function(e){var t={},n={},r={},o="";try{var u=e.split(".");t=Xs(Y_(u[0])||""),n=Xs(Y_(u[1])||""),o=u[2],r=n.d||{},delete n.d}catch{}return{header:t,claims:n,data:r,signature:o}},uC=function(e){var t=X0(e),n=t.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},aC=function(e){var t=X0(e).claims;return typeof t=="object"&&t.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xe(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function vn(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]}function Pp(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function lc(e,t,n){var r={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(r[o]=t.call(n,e[o],o,e));return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cC(e){for(var t=[],n=function(l,p){Array.isArray(p)?p.forEach(function(v){t.push(encodeURIComponent(l)+"="+encodeURIComponent(v))}):t.push(encodeURIComponent(l)+"="+encodeURIComponent(p))},r=0,o=Object.entries(e);r<o.length;r++){var u=o[r],a=u[0],h=u[1];n(a,h)}return t.length?"&"+t.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var hC=function(){function e(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return e.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},e.prototype.compress_=function(t,n){n||(n=0);var r=this.W_;if(typeof t=="string")for(var o=0;o<16;o++)r[o]=t.charCodeAt(n)<<24|t.charCodeAt(n+1)<<16|t.charCodeAt(n+2)<<8|t.charCodeAt(n+3),n+=4;else for(var o=0;o<16;o++)r[o]=t[n]<<24|t[n+1]<<16|t[n+2]<<8|t[n+3],n+=4;for(var o=16;o<80;o++){var u=r[o-3]^r[o-8]^r[o-14]^r[o-16];r[o]=(u<<1|u>>>31)&4294967295}for(var a=this.chain_[0],h=this.chain_[1],l=this.chain_[2],p=this.chain_[3],v=this.chain_[4],g,m,o=0;o<80;o++){o<40?o<20?(g=p^h&(l^p),m=1518500249):(g=h^l^p,m=1859775393):o<60?(g=h&l|p&(h|l),m=2400959708):(g=h^l^p,m=3395469782);var u=(a<<5|a>>>27)+g+v+m+r[o]&4294967295;v=p,p=l,l=(h<<30|h>>>2)&4294967295,h=a,a=u}this.chain_[0]=this.chain_[0]+a&4294967295,this.chain_[1]=this.chain_[1]+h&4294967295,this.chain_[2]=this.chain_[2]+l&4294967295,this.chain_[3]=this.chain_[3]+p&4294967295,this.chain_[4]=this.chain_[4]+v&4294967295},e.prototype.update=function(t,n){if(t!=null){n===void 0&&(n=t.length);for(var r=n-this.blockSize,o=0,u=this.buf_,a=this.inbuf_;o<n;){if(a===0)for(;o<=r;)this.compress_(t,o),o+=this.blockSize;if(typeof t=="string"){for(;o<n;)if(u[a]=t.charCodeAt(o),++a,++o,a===this.blockSize){this.compress_(u),a=0;break}}else for(;o<n;)if(u[a]=t[o],++a,++o,a===this.blockSize){this.compress_(u),a=0;break}}this.inbuf_=a,this.total_+=n}},e.prototype.digest=function(){var t=[],n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var r=this.blockSize-1;r>=56;r--)this.buf_[r]=n&255,n/=256;this.compress_(this.buf_);for(var o=0,r=0;r<5;r++)for(var u=24;u>=0;u-=8)t[o]=this.chain_[r]>>u&255,++o;return t},e}();function lC(e,t){var n=new fC(e,t);return n.subscribe.bind(n)}var fC=function(){function e(t,n){var r=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(function(){t(r)}).catch(function(o){r.error(o)})}return e.prototype.next=function(t){this.forEachObserver(function(n){n.next(t)})},e.prototype.error=function(t){this.forEachObserver(function(n){n.error(t)}),this.close(t)},e.prototype.complete=function(){this.forEachObserver(function(t){t.complete()}),this.close()},e.prototype.subscribe=function(t,n,r){var o=this,u;if(t===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");pC(t,["next","error","complete"])?u=t:u={next:t,error:n,complete:r},u.next===void 0&&(u.next=tp),u.error===void 0&&(u.error=tp),u.complete===void 0&&(u.complete=tp);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{o.finalError?u.error(o.finalError):u.complete()}catch{}}),this.observers.push(u),a},e.prototype.unsubscribeOne=function(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))},e.prototype.forEachObserver=function(t){if(!this.finalized)for(var n=0;n<this.observers.length;n++)this.sendOne(n,t)},e.prototype.sendOne=function(t,n){var r=this;this.task.then(function(){if(r.observers!==void 0&&r.observers[t]!==void 0)try{n(r.observers[t])}catch(o){typeof console<"u"&&console.error&&console.error(o)}})},e.prototype.close=function(t){var n=this;this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(function(){n.observers=void 0,n.onNoObservers=void 0}))},e}();function pC(e,t){if(typeof e!="object"||e===null)return!1;for(var n=0,r=t;n<r.length;n++){var o=r[n];if(o in e&&typeof e[o]=="function")return!0}return!1}function tp(){}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var K=function(e,t,n,r){var o;if(r<t?o="at least "+t:r>n&&(o=n===0?"none":"no more than "+n),o){var u=e+" failed: Was called with "+r+(r===1?" argument.":" arguments.")+" Expects "+o+".";throw new Error(u)}};function on(e,t,n){var r="";switch(t){case 1:r=n?"first":"First";break;case 2:r=n?"second":"Second";break;case 3:r=n?"third":"Third";break;case 4:r=n?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}var o=e+" failed: ";return o+=r+" argument ",o}function te(e,t,n,r){if(!(r&&!n)&&typeof n!="function")throw new Error(on(e,t,r)+"must be a valid function.")}function $_(e,t,n,r){if(!(r&&!n)&&(typeof n!="object"||n===null))throw new Error(on(e,t,r)+"must be a valid context object.")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var dC=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var o=e.charCodeAt(r);if(o>=55296&&o<=56319){var u=o-55296;r++,L(r<e.length,"Surrogate pair missing trail surrogate.");var a=e.charCodeAt(r)-56320;o=65536+(u<<10)+a}o<128?t[n++]=o:o<2048?(t[n++]=o>>6|192,t[n++]=o&63|128):o<65536?(t[n++]=o>>12|224,t[n++]=o>>6&63|128,t[n++]=o&63|128):(t[n++]=o>>18|240,t[n++]=o>>12&63|128,t[n++]=o>>6&63|128,t[n++]=o&63|128)}return t},rc=function(e){for(var t=0,n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t},Bo=function(){function e(t,n,r){this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}return e.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},e.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},e.prototype.setServiceProps=function(t){return this.serviceProps=t,this},e}();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var si="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var J0=function(){function e(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}return e.prototype.get=function(t){t===void 0&&(t=si);var n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){var r=new ke;this.instancesDeferred.set(n,r);try{var o=this.getOrInitializeService(n);o&&r.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise},e.prototype.getImmediate=function(t){var n=Ir({identifier:si,optional:!1},t),r=n.identifier,o=n.optional,u=this.normalizeInstanceIdentifier(r);try{var a=this.getOrInitializeService(u);if(!a){if(o)return null;throw Error("Service "+this.name+" is not available")}return a}catch(h){if(o)return null;throw h}},e.prototype.getComponent=function(){return this.component},e.prototype.setComponent=function(t){var n,r;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,yC(t))try{this.getOrInitializeService(si)}catch{}try{for(var o=Oe(this.instancesDeferred.entries()),u=o.next();!u.done;u=o.next()){var a=Ys(u.value,2),h=a[0],l=a[1],p=this.normalizeInstanceIdentifier(h);try{var v=this.getOrInitializeService(p);l.resolve(v)}catch{}}}catch(g){n={error:g}}finally{try{u&&!u.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}},e.prototype.clearInstance=function(t){t===void 0&&(t=si),this.instancesDeferred.delete(t),this.instances.delete(t)},e.prototype.delete=function(){return k(this,void 0,void 0,function(){var t;return R(this,function(n){switch(n.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(Ti(t.filter(function(r){return"INTERNAL"in r}).map(function(r){return r.INTERNAL.delete()}),t.filter(function(r){return"_delete"in r}).map(function(r){return r._delete()})))];case 1:return n.sent(),[2]}})})},e.prototype.isComponentSet=function(){return this.component!=null},e.prototype.isInitialized=function(t){return t===void 0&&(t=si),this.instances.has(t)},e.prototype.getOrInitializeService=function(t){var n=this.instances.get(t);return!n&&this.component&&(n=this.component.instanceFactory(this.container,vC(t)),this.instances.set(t,n)),n||null},e.prototype.normalizeInstanceIdentifier=function(t){return this.component?this.component.multipleInstances?t:si:t},e}();function vC(e){return e===si?void 0:e}function yC(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Z0=function(){function e(t){this.name=t,this.providers=new Map}return e.prototype.addComponent=function(t){var n=this.getProvider(t.name);if(n.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);n.setComponent(t)},e.prototype.addOrOverwriteComponent=function(t){var n=this.getProvider(t.name);n.isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},e.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var n=new J0(t,this);return this.providers.set(t,n),n},e.prototype.getProviders=function(){return Array.from(this.providers.values())},e}();/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */function pn(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var r=Array(e),o=0,t=0;t<n;t++)for(var u=arguments[t],a=0,h=u.length;a<h;a++,o++)r[o]=u[a];return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var oi,Td=[],ft;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(ft||(ft={}));var tb={debug:ft.DEBUG,verbose:ft.VERBOSE,info:ft.INFO,warn:ft.WARN,error:ft.ERROR,silent:ft.SILENT},gC=ft.INFO,mC=(oi={},oi[ft.DEBUG]="log",oi[ft.VERBOSE]="log",oi[ft.INFO]="info",oi[ft.WARN]="warn",oi[ft.ERROR]="error",oi),_C=function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(t<e.logLevel)){var o=new Date().toISOString(),u=mC[t];if(u)console[u].apply(console,pn(["["+o+"]  "+e.name+":"],n));else throw new Error("Attempted to log a message with an invalid logType (value: "+t+")")}},Sd=function(){function e(t){this.name=t,this._logLevel=gC,this._logHandler=_C,this._userLogHandler=null,Td.push(this)}return Object.defineProperty(e.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in ft))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),e.prototype.setLogLevel=function(t){this._logLevel=typeof t=="string"?tb[t]:t},Object.defineProperty(e.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),e.prototype.debug=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,pn([this,ft.DEBUG],t)),this._logHandler.apply(this,pn([this,ft.DEBUG],t))},e.prototype.log=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,pn([this,ft.VERBOSE],t)),this._logHandler.apply(this,pn([this,ft.VERBOSE],t))},e.prototype.info=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,pn([this,ft.INFO],t)),this._logHandler.apply(this,pn([this,ft.INFO],t))},e.prototype.warn=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,pn([this,ft.WARN],t)),this._logHandler.apply(this,pn([this,ft.WARN],t))},e.prototype.error=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,pn([this,ft.ERROR],t)),this._logHandler.apply(this,pn([this,ft.ERROR],t))},e}();function wC(e){Td.forEach(function(t){t.setLogLevel(e)})}function bC(e,t){for(var n=function(a){var h=null;t&&t.level&&(h=tb[t.level]),e===null?a.userLogHandler=null:a.userLogHandler=function(l,p){for(var v=[],g=2;g<arguments.length;g++)v[g-2]=arguments[g];var m=v.map(function(w){if(w==null)return null;if(typeof w=="string")return w;if(typeof w=="number"||typeof w=="boolean")return w.toString();if(w instanceof Error)return w.message;try{return JSON.stringify(w)}catch{return null}}).filter(function(w){return w}).join(" ");p>=(h??l.logLevel)&&e({level:ft[p].toLowerCase(),message:m,args:v,type:l.name})}},r=0,o=Td;r<o.length;r++){var u=o[r];n(u)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var cr,EC=(cr={},cr["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",cr["bad-app-name"]="Illegal App name: '{$appName}",cr["duplicate-app"]="Firebase App named '{$appName}' already exists",cr["app-deleted"]="Firebase App named '{$appName}' already deleted",cr["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",cr["invalid-log-argument"]="First argument to `onLog` must be null or a function.",cr),ho=new Id("app","Firebase",EC),eb="@firebase/app",IC="0.6.15",TC="@firebase/analytics",SC="@firebase/auth",NC="@firebase/database",AC="@firebase/functions",CC="@firebase/installations",RC="@firebase/messaging",OC="@firebase/performance",kC="@firebase/remote-config",DC="@firebase/storage",PC="@firebase/firestore",xC="firebase-wrapper";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ye,fc="[DEFAULT]",LC=(ye={},ye[eb]="fire-core",ye[TC]="fire-analytics",ye[SC]="fire-auth",ye[NC]="fire-rtdb",ye[AC]="fire-fn",ye[CC]="fire-iid",ye[RC]="fire-fcm",ye[OC]="fire-perf",ye[kC]="fire-rc",ye[DC]="fire-gcs",ye[PC]="fire-fst",ye["fire-js"]="fire-js",ye[xC]="fire-js-all",ye);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var wo=new Sd("@firebase/app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ic=function(){function e(t,n,r){var o=this;this.firebase_=r,this.isDeleted_=!1,this.name_=n.name,this.automaticDataCollectionEnabled_=n.automaticDataCollectionEnabled||!1,this.options_=K0(t),this.container=new Z0(n.name),this._addComponent(new Bo("app",function(){return o},"PUBLIC")),this.firebase_.INTERNAL.components.forEach(function(u){return o._addComponent(u)})}return Object.defineProperty(e.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),e.prototype.delete=function(){var t=this;return new Promise(function(n){t.checkDestroyed_(),n()}).then(function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map(function(n){return n.delete()}))}).then(function(){t.isDeleted_=!0})},e.prototype._getService=function(t,n){return n===void 0&&(n=fc),this.checkDestroyed_(),this.container.getProvider(t).getImmediate({identifier:n})},e.prototype._removeServiceInstance=function(t,n){n===void 0&&(n=fc),this.container.getProvider(t).clearInstance(n)},e.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(n){wo.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,n)}},e.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},e.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},e.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw ho.create("app-deleted",{appName:this.name_})},e}();ic.prototype.name&&ic.prototype.options||ic.prototype.delete||console.log("dc");var MC="8.2.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FC(e){var t={},n=new Map,r={__esModule:!0,initializeApp:a,app:u,registerVersion:p,setLogLevel:wC,onLog:v,apps:null,SDK_VERSION:MC,INTERNAL:{registerComponent:l,removeApp:o,components:n,useAsService:g}};r.default=r,Object.defineProperty(r,"apps",{get:h});function o(m){delete t[m]}function u(m){if(m=m||fc,!xe(t,m))throw ho.create("no-app",{appName:m});return t[m]}u.App=e;function a(m,w){if(w===void 0&&(w={}),typeof w!="object"||w===null){var b=w;w={name:b}}var I=w;I.name===void 0&&(I.name=fc);var T=I.name;if(typeof T!="string"||!T)throw ho.create("bad-app-name",{appName:String(T)});if(xe(t,T))throw ho.create("duplicate-app",{appName:T});var C=new e(m,I,r);return t[T]=C,C}function h(){return Object.keys(t).map(function(m){return t[m]})}function l(m){var w=m.name;if(n.has(w))return wo.debug("There were multiple attempts to register component "+w+"."),m.type==="PUBLIC"?r[w]:null;if(n.set(w,m),m.type==="PUBLIC"){var b=function(F){if(F===void 0&&(F=u()),typeof F[w]!="function")throw ho.create("invalid-app-argument",{appName:w});return F[w]()};m.serviceProps!==void 0&&$s(b,m.serviceProps),r[w]=b,e.prototype[w]=function(){for(var F=[],M=0;M<arguments.length;M++)F[M]=arguments[M];var $=this._getService.bind(this,w);return $.apply(this,m.multipleInstances?F:[])}}for(var I=0,T=Object.keys(t);I<T.length;I++){var C=T[I];t[C]._addComponent(m)}return m.type==="PUBLIC"?r[w]:null}function p(m,w,b){var I,T=(I=LC[m])!==null&&I!==void 0?I:m;b&&(T+="-"+b);var C=T.match(/\s|\//),F=w.match(/\s|\//);if(C||F){var M=['Unable to register library "'+T+'" with version "'+w+'":'];C&&M.push('library name "'+T+'" contains illegal characters (whitespace or "/")'),C&&F&&M.push("and"),F&&M.push('version name "'+w+'" contains illegal characters (whitespace or "/")'),wo.warn(M.join(" "));return}l(new Bo(T+"-version",function(){return{library:T,version:w}},"VERSION"))}function v(m,w){if(m!==null&&typeof m!="function")throw ho.create("invalid-log-argument");bC(m,w)}function g(m,w){if(w==="serverAuth")return null;var b=w;return b}return r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nb(){var e=FC(ic);e.INTERNAL=Ir(Ir({},e.INTERNAL),{createFirebaseNamespace:nb,extendNamespace:t,createSubscribe:lC,ErrorFactory:Id,deepExtend:$s});function t(n){$s(e,n)}return e}var Nd=nb();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var VC=function(){function e(t){this.container=t}return e.prototype.getPlatformInfoString=function(){var t=this.container.getProviders();return t.map(function(n){if(UC(n)){var r=n.getImmediate();return r.library+"/"+r.version}else return null}).filter(function(n){return n}).join(" ")},e}();function UC(e){var t=e.getComponent();return t?.type==="VERSION"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jC(e,t){e.INTERNAL.registerComponent(new Bo("platform-logger",function(n){return new VC(n)},"PRIVATE")),e.registerVersion(eb,IC,t),e.registerVersion("fire-js","")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */if(JA()&&self.firebase!==void 0){wo.warn(`
    Warning: Firebase is already defined in the global scope. Please make sure
    Firebase library is only loaded once.
  `);var X_=self.firebase.SDK_VERSION;X_&&X_.indexOf("LITE")>=0&&wo.warn(`
    Warning: You are trying to load Firebase while using Firebase Performance standalone script.
    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
    `)}var BC=Nd.initializeApp;Nd.initializeApp=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return XA()&&wo.warn(`
      Warning: This is a browser-targeted Firebase bundle but it appears it is being
      run in a Node environment.  If running in a Node environment, make sure you
      are using the bundle specified by the "main" field in package.json.
      
      If you are using Webpack, you can specify "main" as the first item in
      "resolve.mainFields":
      https://webpack.js.org/configuration/resolve/#resolvemainfields
      
      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"
      as the first item in "mainFields", e.g. ['main', 'module'].
      https://github.com/rollup/@rollup/plugin-node-resolve
      `),BC.apply(void 0,e)};var Q=Nd;jC(Q);var qC="firebase",WC="8.2.10";/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Q.registerVersion(qC,WC,"app");/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var xp=function(e,t){return xp=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o])},xp(e,t)};function GC(e,t){xp(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}function rb(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}var HC=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},G,Ad=Ad||{},tt=HC||self;function pc(){}function Lp(e){var t=typeof e;return t=t!="object"?t:e?Array.isArray(e)?"array":t:"null",t=="array"||t=="object"&&typeof e.length=="number"}function Eu(e){var t=typeof e;return t=="object"&&e!=null||t=="function"}function zC(e){return Object.prototype.hasOwnProperty.call(e,ep)&&e[ep]||(e[ep]=++QC)}var ep="closure_uid_"+(1e9*Math.random()>>>0),QC=0;function KC(e,t,n){return e.call.apply(e.bind,arguments)}function YC(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var o=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(o,r),e.apply(t,o)}}return function(){return e.apply(t,arguments)}}function he(e,t,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?he=KC:he=YC,he.apply(null,arguments)}function Ga(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),e.apply(this,r)}}function Mn(){return Date.now()}function Te(e,t){function n(){}n.prototype=t.prototype,e.X=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Kb=function(r,o,u){for(var a=Array(arguments.length-2),h=2;h<arguments.length;h++)a[h-2]=arguments[h];return t.prototype[o].apply(r,a)}}function Dr(){this.j=this.j,this.i=this.i}var $C=0;Dr.prototype.j=!1;Dr.prototype.ja=function(){!this.j&&(this.j=!0,this.G(),$C!=0)&&zC(this)};Dr.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var ib=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if(typeof e=="string")return typeof t!="string"||t.length!=1?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},ob=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,o=typeof e=="string"?e.split(""):e,u=0;u<r;u++)u in o&&t.call(n,o[u],u,e)};function XC(e){t:{for(var t=jR,n=e.length,r=typeof e=="string"?e.split(""):e,o=0;o<n;o++)if(o in r&&t.call(void 0,r[o],o,e)){t=o;break t}t=-1}return 0>t?null:typeof e=="string"?e.charAt(t):e[t]}function J_(e){return Array.prototype.concat.apply([],arguments)}function Cd(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function dc(e){return/^[\s\xa0]*$/.test(e)}var Z_=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function me(e,t){return e.indexOf(t)!=-1}function np(e,t){return e<t?-1:e>t?1:0}var _e;t:{var tw=tt.navigator;if(tw){var ew=tw.userAgent;if(ew){_e=ew;break t}}_e=""}function Rd(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function sb(e){var t={};for(var n in e)t[n]=e[n];return t}var nw="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ub(e,t){for(var n,r,o=1;o<arguments.length;o++){r=arguments[o];for(n in r)e[n]=r[n];for(var u=0;u<nw.length;u++)n=nw[u],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function Od(e){return Od[" "](e),e}Od[" "]=pc;function JC(e,t){var n=eR;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}var ZC=me(_e,"Opera"),Tr=me(_e,"Trident")||me(_e,"MSIE"),ab=me(_e,"Edge"),Mp=ab||Tr,cb=me(_e,"Gecko")&&!(me(_e.toLowerCase(),"webkit")&&!me(_e,"Edge"))&&!(me(_e,"Trident")||me(_e,"MSIE"))&&!me(_e,"Edge"),tR=me(_e.toLowerCase(),"webkit")&&!me(_e,"Edge");function hb(){var e=tt.document;return e?e.documentMode:void 0}var vc;t:{var rp="",ip=function(){var e=_e;if(cb)return/rv:([^\);]+)(\)|;)/.exec(e);if(ab)return/Edge\/([\d\.]+)/.exec(e);if(Tr)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e);if(tR)return/WebKit\/(\S+)/.exec(e);if(ZC)return/(?:Version)[ \/]?(\S+)/.exec(e)}();if(ip&&(rp=ip?ip[1]:""),Tr){var op=hb();if(op!=null&&op>parseFloat(rp)){vc=String(op);break t}}vc=rp}var eR={};function lb(e){return JC(e,function(){for(var t=0,n=Z_(String(vc)).split("."),r=Z_(String(e)).split("."),o=Math.max(n.length,r.length),u=0;t==0&&u<o;u++){var a=n[u]||"",h=r[u]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],h=/(\d*)(\D*)(.*)/.exec(h)||["","","",""],a[0].length==0&&h[0].length==0)break;t=np(a[1].length==0?0:parseInt(a[1],10),h[1].length==0?0:parseInt(h[1],10))||np(a[2].length==0,h[2].length==0)||np(a[2],h[2]),a=a[3],h=h[3]}while(t==0)}return 0<=t})}var Fp;if(tt.document&&Tr){var rw=hb();Fp=rw||parseInt(vc,10)||void 0}else Fp=void 0;var fb=Fp,kd=!Tr||9<=Number(fb),nR=Tr&&!lb("9"),rR=function(){if(!tt.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{tt.addEventListener("test",pc,t),tt.removeEventListener("test",pc,t)}catch{}return e}();function le(e,t){this.type=e,this.a=this.target=t,this.defaultPrevented=!1}le.prototype.b=function(){this.defaultPrevented=!0};function Js(e,t){if(le.call(this,e?e.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.a=t,t=e.relatedTarget){if(cb){t:{try{Od(t.nodeName);var o=!0;break t}catch{}o=!1}o||(t=null)}}else n=="mouseover"?t=e.fromElement:n=="mouseout"&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=e.clientX!==void 0?e.clientX:e.pageX,this.clientY=e.clientY!==void 0?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType=typeof e.pointerType=="string"?e.pointerType:iR[e.pointerType]||"",this.c=e,e.defaultPrevented&&this.b()}}Te(Js,le);var iR={2:"touch",3:"pen",4:"mouse"};Js.prototype.b=function(){Js.X.b.call(this);var e=this.c;if(e.preventDefault)e.preventDefault();else if(e.returnValue=!1,nR)try{(e.ctrlKey||112<=e.keyCode&&123>=e.keyCode)&&(e.keyCode=-1)}catch{}};var Iu="closure_listenable_"+(1e6*Math.random()|0),oR=0;function sR(e,t,n,r,o){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ca=o,this.key=++oR,this.Y=this.Z=!1}function Hc(e){e.Y=!0,e.listener=null,e.proxy=null,e.src=null,e.ca=null}function zc(e){this.src=e,this.a={},this.b=0}zc.prototype.add=function(e,t,n,r,o){var u=e.toString();e=this.a[u],e||(e=this.a[u]=[],this.b++);var a=Up(e,t,r,o);return-1<a?(t=e[a],n||(t.Z=!1)):(t=new sR(t,this.src,u,!!r,o),t.Z=n,e.push(t)),t};function Vp(e,t){var n=t.type;if(n in e.a){var r=e.a[n],o=ib(r,t),u;(u=0<=o)&&Array.prototype.splice.call(r,o,1),u&&(Hc(t),e.a[n].length==0&&(delete e.a[n],e.b--))}}function Up(e,t,n,r){for(var o=0;o<e.length;++o){var u=e[o];if(!u.Y&&u.listener==t&&u.capture==!!n&&u.ca==r)return o}return-1}var Dd="closure_lm_"+(1e6*Math.random()|0),sp={};function Pd(e,t,n,r,o){if(r&&r.once)return db(e,t,n,r,o);if(Array.isArray(t)){for(var u=0;u<t.length;u++)Pd(e,t[u],n,r,o);return null}return n=Md(n),e&&e[Iu]?e.va(t,n,Eu(r)?!!r.capture:!!r,o):pb(e,t,n,!1,r,o)}function pb(e,t,n,r,o,u){if(!t)throw Error("Invalid event type");var a=Eu(o)?!!o.capture:!!o;if(a&&!kd)return null;var h=Ld(e);if(h||(e[Dd]=h=new zc(e)),n=h.add(t,n,r,a,u),n.proxy)return n;if(r=uR(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)rR||(o=a),o===void 0&&(o=!1),e.addEventListener(t.toString(),r,o);else if(e.attachEvent)e.attachEvent(yb(t.toString()),r);else if(e.addListener&&e.removeListener)e.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function uR(){var e=aR,t=kd?function(n){return e.call(t.src,t.listener,n)}:function(n){if(n=e.call(t.src,t.listener,n),!n)return n};return t}function db(e,t,n,r,o){if(Array.isArray(t)){for(var u=0;u<t.length;u++)db(e,t[u],n,r,o);return null}return n=Md(n),e&&e[Iu]?e.wa(t,n,Eu(r)?!!r.capture:!!r,o):pb(e,t,n,!0,r,o)}function vb(e,t,n,r,o){if(Array.isArray(t))for(var u=0;u<t.length;u++)vb(e,t[u],n,r,o);else r=Eu(r)?!!r.capture:!!r,n=Md(n),e&&e[Iu]?(e=e.c,t=String(t).toString(),t in e.a&&(u=e.a[t],n=Up(u,n,r,o),-1<n&&(Hc(u[n]),Array.prototype.splice.call(u,n,1),u.length==0&&(delete e.a[t],e.b--)))):e&&(e=Ld(e))&&(t=e.a[t.toString()],e=-1,t&&(e=Up(t,n,r,o)),(n=-1<e?t[e]:null)&&xd(n))}function xd(e){if(typeof e!="number"&&e&&!e.Y){var t=e.src;if(t&&t[Iu])Vp(t.c,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(yb(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Ld(t))?(Vp(n,e),n.b==0&&(n.src=null,t[Dd]=null)):Hc(e)}}}function yb(e){return e in sp?sp[e]:sp[e]="on"+e}function iw(e,t){var n=e.listener,r=e.ca||e.src;return e.Z&&xd(e),n.call(r,t)}function aR(e,t){if(e.Y)return!0;if(!kd){if(!t)t:{t=["window","event"];for(var n=tt,r=0;r<t.length;r++)if(n=n[t[r]],n==null){t=null;break t}t=n}return t=new Js(t,this),iw(e,t)}return iw(e,new Js(t,this))}function Ld(e){return e=e[Dd],e instanceof zc?e:null}var up="__closure_events_fn_"+(1e9*Math.random()>>>0);function Md(e){return typeof e=="function"?e:(e[up]||(e[up]=function(t){return e.handleEvent(t)}),e[up])}function Ke(){Dr.call(this),this.c=new zc(this),this.J=this,this.C=null}Te(Ke,Dr);Ke.prototype[Iu]=!0;G=Ke.prototype;G.addEventListener=function(e,t,n,r){Pd(this,e,t,n,r)};G.removeEventListener=function(e,t,n,r){vb(this,e,t,n,r)};function oe(e,t){var n,r=e.C;if(r)for(n=[];r;r=r.C)n.push(r);if(e=e.J,r=t.type||t,typeof t=="string")t=new le(t,e);else if(t instanceof le)t.target=t.target||e;else{var o=t;t=new le(r,e),ub(t,o)}if(o=!0,n)for(var u=n.length-1;0<=u;u--){var a=t.a=n[u];o=Ha(a,r,!0,t)&&o}if(a=t.a=e,o=Ha(a,r,!0,t)&&o,o=Ha(a,r,!1,t)&&o,n)for(u=0;u<n.length;u++)a=t.a=n[u],o=Ha(a,r,!1,t)&&o}G.G=function(){if(Ke.X.G.call(this),this.c){var e=this.c,t;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)Hc(n[r]);delete e.a[t],e.b--}}this.C=null};G.va=function(e,t,n,r){return this.c.add(String(e),t,!1,n,r)};G.wa=function(e,t,n,r){return this.c.add(String(e),t,!0,n,r)};function Ha(e,t,n,r){if(t=e.c.a[String(t)],!t)return!0;t=t.concat();for(var o=!0,u=0;u<t.length;++u){var a=t[u];if(a&&!a.Y&&a.capture==n){var h=a.listener,l=a.ca||a.src;a.Z&&Vp(e.c,a),o=h.call(l,r)!==!1&&o}}return o&&!r.defaultPrevented}var Fd=tt.JSON.stringify;function gb(){this.b=this.a=null}var mb=new(function(){function e(t,n){this.c=t,this.f=n,this.b=0,this.a=null}return e.prototype.get=function(){var t;return 0<this.b?(this.b--,t=this.a,this.a=t.next,t.next=null):t=this.c(),t},e}())(function(){return new Vd},function(e){e.reset()});gb.prototype.add=function(e,t){var n=mb.get();n.set(e,t),this.b?this.b.next=n:this.a=n,this.b=n};function cR(){var e=wb,t=null;return e.a&&(t=e.a,e.a=e.a.next,e.a||(e.b=null),t.next=null),t}function Vd(){this.next=this.b=this.a=null}Vd.prototype.set=function(e,t){this.a=e,this.b=t,this.next=null};Vd.prototype.reset=function(){this.next=this.b=this.a=null};function hR(e){tt.setTimeout(function(){throw e},0)}function _b(e,t){jp||lR(),Bp||(jp(),Bp=!0),wb.add(e,t)}var jp;function lR(){var e=tt.Promise.resolve(void 0);jp=function(){e.then(fR)}}var Bp=!1,wb=new gb;function fR(){for(var e;e=cR();){try{e.a.call(e.b)}catch(n){hR(n)}var t=mb;t.f(e),100>t.b&&(t.b++,e.next=t.a,t.a=e)}Bp=!1}function Qc(e,t){Ke.call(this),this.b=e||1,this.a=t||tt,this.f=he(this.Za,this),this.g=Mn()}Te(Qc,Ke);G=Qc.prototype;G.aa=!1;G.M=null;G.Za=function(){if(this.aa){var e=Mn()-this.g;0<e&&e<.8*this.b?this.M=this.a.setTimeout(this.f,this.b-e):(this.M&&(this.a.clearTimeout(this.M),this.M=null),oe(this,"tick"),this.aa&&(Ud(this),this.start()))}};G.start=function(){this.aa=!0,this.M||(this.M=this.a.setTimeout(this.f,this.b),this.g=Mn())};function Ud(e){e.aa=!1,e.M&&(e.a.clearTimeout(e.M),e.M=null)}G.G=function(){Qc.X.G.call(this),Ud(this),delete this.a};function jd(e,t,n){if(typeof e=="function")n&&(e=he(e,n));else if(e&&typeof e.handleEvent=="function")e=he(e.handleEvent,e);else throw Error("Invalid listener argument");return 2147483647<Number(t)?-1:tt.setTimeout(e,t||0)}function bb(e){e.a=jd(function(){e.a=null,e.c&&(e.c=!1,bb(e))},e.h);var t=e.b;e.b=null,e.g.apply(null,t)}var pR=function(e){GC(t,e);function t(n,r){var o=e.call(this)||this;return o.g=n,o.h=r,o.b=null,o.c=!1,o.a=null,o}return t.prototype.f=function(n){this.b=arguments,this.a?this.c=!0:bb(this)},t.prototype.G=function(){e.prototype.G.call(this),this.a&&(tt.clearTimeout(this.a),this.a=null,this.c=!1,this.b=null)},t}(Dr);function Zs(e){Dr.call(this),this.b=e,this.a={}}Te(Zs,Dr);var ow=[];function Eb(e,t,n,r){Array.isArray(n)||(n&&(ow[0]=n.toString()),n=ow);for(var o=0;o<n.length;o++){var u=Pd(t,n[o],r||e.handleEvent,!1,e.b||e);if(!u)break;e.a[u.key]=u}}function Ib(e){Rd(e.a,function(t,n){this.a.hasOwnProperty(n)&&xd(t)},e),e.a={}}Zs.prototype.G=function(){Zs.X.G.call(this),Ib(this)};Zs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function Bd(){this.a=!0}function dR(e,t,n,r,o,u){e.info(function(){if(e.a)if(u)for(var a="",h=u.split("&"),l=0;l<h.length;l++){var p=h[l].split("=");if(1<p.length){var v=p[0];p=p[1];var g=v.split("_");a=2<=g.length&&g[1]=="type"?a+(v+"="+p+"&"):a+(v+"=redacted&")}}else a=null;else a=u;return"XMLHTTP REQ ("+r+") [attempt "+o+"]: "+t+`
`+n+`
`+a})}function vR(e,t,n,r,o,u,a){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+o+"]: "+t+`
`+n+`
`+u+" "+a})}function po(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+gR(e,n)+(r?" "+r:"")})}function yR(e,t){e.info(function(){return"TIMEOUT: "+t})}Bd.prototype.info=function(){};function gR(e,t){if(!e.a)return t;if(!t)return null;try{var n=JSON.parse(t);if(n){for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var o=r[1];if(Array.isArray(o)&&!(1>o.length)){var u=o[0];if(u!="noop"&&u!="stop"&&u!="close")for(var a=1;a<o.length;a++)o[a]=""}}}}return Fd(n)}catch{return t}}var Si={},sw=null;function Kc(){return sw=sw||new Ke}Si.Fa="serverreachability";function Tb(e){le.call(this,Si.Fa,e)}Te(Tb,le);function tu(e){var t=Kc();oe(t,new Tb(t))}Si.STAT_EVENT="statevent";function Sb(e,t){le.call(this,Si.STAT_EVENT,e),this.stat=t}Te(Sb,le);function Ee(e){var t=Kc();oe(t,new Sb(t,e))}Si.Ga="timingevent";function Nb(e){le.call(this,Si.Ga,e)}Te(Nb,le);function Tu(e,t){if(typeof e!="function")throw Error("Fn must not be null and must be a function");return tt.setTimeout(function(){e()},t)}var Yc={NO_ERROR:0,$a:1,nb:2,mb:3,hb:4,lb:5,ob:6,Da:7,TIMEOUT:8,rb:9},Ab={fb:"complete",Bb:"success",Ea:"error",Da:"abort",tb:"ready",ub:"readystatechange",TIMEOUT:"timeout",pb:"incrementaldata",sb:"progress",ib:"downloadprogress",Jb:"uploadprogress"};function Cb(){}Cb.prototype.a=null;function uw(e){var t;return(t=e.a)||(t=e.a={}),t}function Rb(){}var Su={OPEN:"a",eb:"b",Ea:"c",qb:"d"};function qd(){le.call(this,"d")}Te(qd,le);function Wd(){le.call(this,"c")}Te(Wd,le);var Ob;function kb(){}Te(kb,Cb);Ob=new kb;function Nu(e,t,n,r){this.g=e,this.c=t,this.f=n,this.S=r||1,this.J=new Zs(this),this.P=mR,e=Mp?125:void 0,this.R=new Qc(e),this.B=null,this.b=!1,this.j=this.l=this.i=this.H=this.u=this.T=this.o=null,this.s=[],this.a=null,this.D=0,this.h=this.m=null,this.N=-1,this.A=!1,this.O=0,this.F=null,this.V=this.C=this.U=this.I=!1}var mR=45e3,Db={},qp={};G=Nu.prototype;G.setTimeout=function(e){this.P=e};function Wp(e,t,n){e.H=1,e.i=Xc(Xn(t)),e.j=n,e.I=!0,Pb(e,null)}function Pb(e,t){e.u=Mn(),Au(e),e.l=Xn(e.i);var n=e.l,r=e.S;Array.isArray(r)||(r=[String(r)]),Ub(n.b,"t",r),e.D=0,e.a=rE(e.g,e.g.C?t:null),0<e.O&&(e.F=new pR(he(e.Ca,e,e.a),e.O)),Eb(e.J,e.a,"readystatechange",e.Xa),t=e.B?sb(e.B):{},e.j?(e.m||(e.m="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.a.ba(e.l,e.m,e.j,t)):(e.m="GET",e.a.ba(e.l,e.m,null,t)),tu(),dR(e.c,e.m,e.l,e.f,e.S,e.j)}G.Xa=function(e){e=e.target;var t=this.F;t&&wr(e)==3?t.f():this.Ca(e)};G.Ca=function(e){try{if(e==this.a)t:{var t=wr(this.a),n=this.a.ua(),r=this.a.W();if(!(3>t||t==3&&!Mp&&!this.a.$())){this.A||t!=4||n==7||(n==8||0>=r?tu(3):tu(2)),$c(this);var o=this.a.W();this.N=o;var u=this.a.$();if(this.b=o==200,vR(this.c,this.m,this.l,this.f,this.S,t,o),this.b){if(this.U&&!this.C){e:{if(this.a){var a,h=this.a;if((a=h.a?h.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!dc(a)){var l=a;break e}}l=null}if(l)po(this.c,this.f,l,"Initial handshake response via X-HTTP-Initial-Response"),this.C=!0,Gp(this,l);else{this.b=!1,this.h=3,Ee(12),go(this),yc(this);break t}}this.I?(xb(this,t,u),Mp&&this.b&&t==3&&(Eb(this.J,this.R,"tick",this.Wa),this.R.start())):(po(this.c,this.f,u,null),Gp(this,u)),t==4&&go(this),this.b&&!this.A&&(t==4?Zb(this.g,this):(this.b=!1,Au(this)))}else o==400&&0<u.indexOf("Unknown SID")?(this.h=3,Ee(12)):(this.h=0,Ee(13)),go(this),yc(this)}}}catch{}finally{}};function xb(e,t,n){for(var r=!0;!e.A&&e.D<n.length;){var o=_R(e,n);if(o==qp){t==4&&(e.h=4,Ee(14),r=!1),po(e.c,e.f,null,"[Incomplete Response]");break}else if(o==Db){e.h=4,Ee(15),po(e.c,e.f,n,"[Invalid Chunk]"),r=!1;break}else po(e.c,e.f,o,null),Gp(e,o)}t==4&&n.length==0&&(e.h=1,Ee(16),r=!1),e.b=e.b&&r,r?0<n.length&&!e.V&&(e.V=!0,t=e.g,t.a==e&&t.U&&!t.F&&(t.c.info("Great, no buffering proxy detected. Bytes received: "+n.length),Xd(t),t.F=!0,Ee(11))):(po(e.c,e.f,n,"[Invalid Chunked Response]"),go(e),yc(e))}G.Wa=function(){if(this.a){var e=wr(this.a),t=this.a.$();this.D<t.length&&($c(this),xb(this,e,t),this.b&&e!=4&&Au(this))}};function _R(e,t){var n=e.D,r=t.indexOf(`
`,n);return r==-1?qp:(n=Number(t.substring(n,r)),isNaN(n)?Db:(r+=1,r+n>t.length?qp:(t=t.substr(r,n),e.D=r+n,t)))}G.cancel=function(){this.A=!0,go(this)};function Au(e){e.T=Mn()+e.P,Lb(e,e.P)}function Lb(e,t){if(e.o!=null)throw Error("WatchDog timer not null");e.o=Tu(he(e.Va,e),t)}function $c(e){e.o&&(tt.clearTimeout(e.o),e.o=null)}G.Va=function(){this.o=null;var e=Mn();0<=e-this.T?(yR(this.c,this.l),this.H!=2&&(tu(),Ee(17)),go(this),this.h=2,yc(this)):Lb(this,this.T-e)};function yc(e){e.g.v==0||e.A||Zb(e.g,e)}function go(e){$c(e);var t=e.F;t&&typeof t.ja=="function"&&t.ja(),e.F=null,Ud(e.R),Ib(e.J),e.a&&(t=e.a,e.a=null,t.abort(),t.ja())}function Gp(e,t){try{var n=e.g;if(n.v!=0&&(n.a==e||Hp(n.b,e))){if(n.I=e.N,!e.C&&Hp(n.b,e)&&n.v==3){try{var r=n.ka.a.parse(t)}catch{r=null}if(Array.isArray(r)&&r.length==3){var o=r;if(o[0]==0){t:if(!n.j){if(n.a)if(n.a.u+3e3<e.u)wc(n),Zc(n);else break t;$d(n),Ee(18)}}else n.oa=o[1],0<n.oa-n.P&&37500>o[2]&&n.H&&n.o==0&&!n.m&&(n.m=Tu(he(n.Sa,n),6e3));if(1>=qb(n.b)&&n.ea){try{n.ea()}catch{}n.ea=void 0}}else ci(n,11)}else if((e.C||n.a==e)&&wc(n),!dc(t))for(t=r=n.ka.a.parse(t),r=0;r<t.length;r++)if(o=t[r],n.P=o[0],o=o[1],n.v==2)if(o[0]=="c"){n.J=o[1],n.ga=o[2];var u=o[3];u!=null&&(n.ha=u,n.c.info("VER="+n.ha));var a=o[4];a!=null&&(n.pa=a,n.c.info("SVER="+n.pa));var h=o[5];if(h!=null&&typeof h=="number"&&0<h){var l=1.5*h;n.D=l,n.c.info("backChannelRequestTimeoutMs_="+l)}l=n;var p=e.a;if(p){var v=p.a?p.a.getResponseHeader("X-Client-Wire-Protocol"):null;if(v){var g=l.b;!g.a&&(me(v,"spdy")||me(v,"quic")||me(v,"h2"))&&(g.f=g.g,g.a=new Set,g.b&&(zd(g,g.b),g.b=null))}if(l.A){var m=p.a?p.a.getResponseHeader("X-HTTP-Session-Id"):null;m&&(l.na=m,Rt(l.B,l.A,m))}}n.v=3,n.f&&n.f.ta(),n.U&&(n.N=Mn()-e.u,n.c.info("Handshake RTT: "+n.N+"ms")),l=n;var w=e;if(l.la=nE(l,l.C?l.ga:null,l.fa),w.C){Wb(l.b,w);var b=w,I=l.D;I&&b.setTimeout(I),b.o&&($c(b),Au(b)),l.a=w}else Xb(l);0<n.g.length&&th(n)}else o[0]!="stop"&&o[0]!="close"||ci(n,7);else n.v==3&&(o[0]=="stop"||o[0]=="close"?o[0]=="stop"?ci(n,7):Yd(n):o[0]!="noop"&&n.f&&n.f.sa(o),n.o=0)}tu(4)}catch{}}function wR(e){if(e.K&&typeof e.K=="function")return e.K();if(typeof e=="string")return e.split("");if(Lp(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}t=[],n=0;for(r in e)t[n++]=e[r];return e=t}function Gd(e,t){if(e.forEach&&typeof e.forEach=="function")e.forEach(t,void 0);else if(Lp(e)||typeof e=="string")ob(e,t,void 0);else{if(e.L&&typeof e.L=="function")var n=e.L();else if(e.K&&typeof e.K=="function")n=void 0;else if(Lp(e)||typeof e=="string"){n=[];for(var r=e.length,o=0;o<r;o++)n.push(o)}else for(o in n=[],r=0,e)n[r++]=o;r=wR(e),o=r.length;for(var u=0;u<o;u++)t.call(void 0,r[u],n&&n[u],e)}}function qo(e,t){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof qo)for(n=e.L(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}G=qo.prototype;G.K=function(){Hd(this);for(var e=[],t=0;t<this.a.length;t++)e.push(this.b[this.a[t]]);return e};G.L=function(){return Hd(this),this.a.concat()};function Hd(e){if(e.c!=e.a.length){for(var t=0,n=0;t<e.a.length;){var r=e.a[t];_i(e.b,r)&&(e.a[n++]=r),t++}e.a.length=n}if(e.c!=e.a.length){var o={};for(n=t=0;t<e.a.length;)r=e.a[t],_i(o,r)||(e.a[n++]=r,o[r]=1),t++;e.a.length=n}}G.get=function(e,t){return _i(this.b,e)?this.b[e]:t};G.set=function(e,t){_i(this.b,e)||(this.c++,this.a.push(e)),this.b[e]=t};G.forEach=function(e,t){for(var n=this.L(),r=0;r<n.length;r++){var o=n[r],u=this.get(o);e.call(t,u,o,this)}};function _i(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var Mb=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function bR(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),o=null;if(0<=r){var u=e[n].substring(0,r);o=e[n].substring(r+1)}else u=e[n];t(u,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}}function wi(e,t){if(this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,e instanceof wi){this.a=t!==void 0?t:e.a,gc(this,e.f),this.j=e.j,mc(this,e.c),_c(this,e.h),this.g=e.g,t=e.b;var n=new eu;n.c=t.c,t.a&&(n.a=new qo(t.a),n.b=t.b),aw(this,n),this.i=e.i}else e&&(n=String(e).match(Mb))?(this.a=!!t,gc(this,n[1]||"",!0),this.j=Hs(n[2]||""),mc(this,n[3]||"",!0),_c(this,n[4]),this.g=Hs(n[5]||"",!0),aw(this,n[6]||"",!0),this.i=Hs(n[7]||"")):(this.a=!!t,this.b=new eu(null,this.a))}wi.prototype.toString=function(){var e=[],t=this.f;t&&e.push(qs(t,cw,!0),":");var n=this.c;return(n||t=="file")&&(e.push("//"),(t=this.j)&&e.push(qs(t,cw,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.h,n!=null&&e.push(":",String(n))),(n=this.g)&&(this.c&&n.charAt(0)!="/"&&e.push("/"),e.push(qs(n,n.charAt(0)=="/"?NR:SR,!0))),(n=this.b.toString())&&e.push("?",n),(n=this.i)&&e.push("#",qs(n,CR)),e.join("")};function Xn(e){return new wi(e)}function gc(e,t,n){e.f=n?Hs(t,!0):t,e.f&&(e.f=e.f.replace(/:$/,""))}function mc(e,t,n){e.c=n?Hs(t,!0):t}function _c(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.h=t}else e.h=null}function aw(e,t,n){t instanceof eu?(e.b=t,RR(e.b,e.a)):(n||(t=qs(t,AR)),e.b=new eu(t,e.a))}function Rt(e,t,n){e.b.set(t,n)}function Xc(e){return Rt(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Mn()).toString(36)),e}function ER(e){return e instanceof wi?Xn(e):new wi(e,void 0)}function IR(e,t,n,r){var o=new wi(null,void 0);return e&&gc(o,e),t&&mc(o,t),n&&_c(o,n),r&&(o.g=r),o}function Hs(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function qs(e,t,n){return typeof e=="string"?(e=encodeURI(e).replace(t,TR),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function TR(e){return e=e.charCodeAt(0),"%"+(e>>4&15).toString(16)+(e&15).toString(16)}var cw=/[#\/\?@]/g,SR=/[#\?:]/g,NR=/[#\?]/g,AR=/[#\?@]/g,CR=/#/g;function eu(e,t){this.b=this.a=null,this.c=e||null,this.f=!!t}function Pr(e){e.a||(e.a=new qo,e.b=0,e.c&&bR(e.c,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}G=eu.prototype;G.add=function(e,t){Pr(this),this.c=null,e=Wo(this,e);var n=this.a.get(e);return n||this.a.set(e,n=[]),n.push(t),this.b+=1,this};function Fb(e,t){Pr(e),t=Wo(e,t),_i(e.a.b,t)&&(e.c=null,e.b-=e.a.get(t).length,e=e.a,_i(e.b,t)&&(delete e.b[t],e.c--,e.a.length>2*e.c&&Hd(e)))}function Vb(e,t){return Pr(e),t=Wo(e,t),_i(e.a.b,t)}G.forEach=function(e,t){Pr(this),this.a.forEach(function(n,r){ob(n,function(o){e.call(t,o,r,this)},this)},this)};G.L=function(){Pr(this);for(var e=this.a.K(),t=this.a.L(),n=[],r=0;r<t.length;r++)for(var o=e[r],u=0;u<o.length;u++)n.push(t[r]);return n};G.K=function(e){Pr(this);var t=[];if(typeof e=="string")Vb(this,e)&&(t=J_(t,this.a.get(Wo(this,e))));else{e=this.a.K();for(var n=0;n<e.length;n++)t=J_(t,e[n])}return t};G.set=function(e,t){return Pr(this),this.c=null,e=Wo(this,e),Vb(this,e)&&(this.b-=this.a.get(e).length),this.a.set(e,[t]),this.b+=1,this};G.get=function(e,t){return e?(e=this.K(e),0<e.length?String(e[0]):t):t};function Ub(e,t,n){Fb(e,t),0<n.length&&(e.c=null,e.a.set(Wo(e,t),Cd(n)),e.b+=n.length)}G.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var e=[],t=this.a.L(),n=0;n<t.length;n++){var r=t[n],o=encodeURIComponent(String(r));r=this.K(r);for(var u=0;u<r.length;u++){var a=o;r[u]!==""&&(a+="="+encodeURIComponent(String(r[u]))),e.push(a)}}return this.c=e.join("&")};function Wo(e,t){return t=String(t),e.f&&(t=t.toLowerCase()),t}function RR(e,t){t&&!e.f&&(Pr(e),e.c=null,e.a.forEach(function(n,r){var o=r.toLowerCase();r!=o&&(Fb(this,r),Ub(this,o,n))},e)),e.f=t}var OR=function(){function e(t,n){this.b=t,this.a=n}return e}();function jb(e){this.g=e||kR,tt.PerformanceNavigationTiming?(e=tt.performance.getEntriesByType("navigation"),e=0<e.length&&(e[0].nextHopProtocol=="hq"||e[0].nextHopProtocol=="h2")):e=!!(tt.ia&&tt.ia.ya&&tt.ia.ya()&&tt.ia.ya().Lb),this.f=e?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}var kR=10;function Bb(e){return e.b?!0:e.a?e.a.size>=e.f:!1}function qb(e){return e.b?1:e.a?e.a.size:0}function Hp(e,t){return e.b?e.b==t:e.a?e.a.has(t):!1}function zd(e,t){e.a?e.a.add(t):e.b=t}function Wb(e,t){e.b&&e.b==t?e.b=null:e.a&&e.a.has(t)&&e.a.delete(t)}jb.prototype.cancel=function(){var e,t;if(this.c=Gb(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&this.a.size!==0){try{for(var n=rb(this.a.values()),r=n.next();!r.done;r=n.next()){var o=r.value;o.cancel()}}catch(u){e={error:u}}finally{try{r&&!r.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}this.a.clear()}};function Gb(e){var t,n;if(e.b!=null)return e.c.concat(e.b.s);if(e.a!=null&&e.a.size!==0){var r=e.c;try{for(var o=rb(e.a.values()),u=o.next();!u.done;u=o.next()){var a=u.value;r=r.concat(a.s)}}catch(h){t={error:h}}finally{try{u&&!u.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return r}return Cd(e.c)}function Qd(){}Qd.prototype.stringify=function(e){return tt.JSON.stringify(e,void 0)};Qd.prototype.parse=function(e){return tt.JSON.parse(e,void 0)};function DR(){this.a=new Qd}function PR(e,t,n){var r=n||"";try{Gd(e,function(o,u){var a=o;Eu(o)&&(a=Fd(o)),t.push(r+u+"="+encodeURIComponent(a))})}catch(o){throw t.push(r+"type="+encodeURIComponent("_badmap")),o}}function xR(e,t){var n=new Bd;if(tt.Image){var r=new Image;r.onload=Ga(za,n,r,"TestLoadImage: loaded",!0,t),r.onerror=Ga(za,n,r,"TestLoadImage: error",!1,t),r.onabort=Ga(za,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=Ga(za,n,r,"TestLoadImage: timeout",!1,t),tt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}function za(e,t,n,r,o){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,o(r)}catch{}}var LR=tt.JSON.parse;function Xt(e){Ke.call(this),this.headers=new qo,this.H=e||null,this.b=!1,this.s=this.a=null,this.B="",this.h=0,this.f="",this.g=this.A=this.l=this.u=!1,this.o=0,this.m=null,this.I=MR,this.D=this.F=!1}Te(Xt,Ke);var MR="",FR=/^https?$/i,VR=["POST","PUT"];G=Xt.prototype;G.ba=function(e,t,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.B+"; newUri="+e);t=t?t.toUpperCase():"GET",this.B=e,this.f="",this.h=0,this.u=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=this.H?uw(this.H):uw(Ob),this.a.onreadystatechange=he(this.za,this);try{this.A=!0,this.a.open(t,String(e),!0),this.A=!1}catch(u){hw(this,u);return}e=n||"";var o=new qo(this.headers);r&&Gd(r,function(u,a){o.set(a,u)}),r=XC(o.L()),n=tt.FormData&&e instanceof tt.FormData,!(0<=ib(VR,t))||r||n||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach(function(u,a){this.a.setRequestHeader(a,u)},this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{Qb(this),0<this.o&&((this.D=UR(this.a))?(this.a.timeout=this.o,this.a.ontimeout=he(this.xa,this)):this.m=jd(this.xa,this.o,this)),this.l=!0,this.a.send(e),this.l=!1}catch(u){hw(this,u)}};function UR(e){return Tr&&lb(9)&&typeof e.timeout=="number"&&e.ontimeout!==void 0}function jR(e){return e.toLowerCase()=="content-type"}G.xa=function(){typeof Ad<"u"&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,oe(this,"timeout"),this.abort(8))};function hw(e,t){e.b=!1,e.a&&(e.g=!0,e.a.abort(),e.g=!1),e.f=t,e.h=5,Hb(e),Jc(e)}function Hb(e){e.u||(e.u=!0,oe(e,"complete"),oe(e,"error"))}G.abort=function(e){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=e||7,oe(this,"complete"),oe(this,"abort"),Jc(this))};G.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),Jc(this,!0)),Xt.X.G.call(this)};G.za=function(){this.j||(this.A||this.l||this.g?zb(this):this.Ua())};G.Ua=function(){zb(this)};function zb(e){if(e.b&&typeof Ad<"u"&&(!e.s[1]||wr(e)!=4||e.W()!=2)){if(e.l&&wr(e)==4)jd(e.za,0,e);else if(oe(e,"readystatechange"),wr(e)==4){e.b=!1;try{{var t=e.W();t:switch(t){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var n=!0;break t;default:n=!1}var r;if(!(r=n)){var o;if(o=t===0){var u=String(e.B).match(Mb)[1]||null;if(!u&&tt.self&&tt.self.location){var a=tt.self.location.protocol;u=a.substr(0,a.length-1)}o=!FR.test(u?u.toLowerCase():"")}r=o}var h=r}if(h)oe(e,"complete"),oe(e,"success");else{e.h=6;try{var l=2<wr(e)?e.a.statusText:""}catch{l=""}e.f=l+" ["+e.W()+"]",Hb(e)}}finally{Jc(e)}}}}function Jc(e,t){if(e.a){Qb(e);var n=e.a,r=e.s[0]?pc:null;e.a=null,e.s=null,t||oe(e,"ready");try{n.onreadystatechange=r}catch{}}}function Qb(e){e.a&&e.D&&(e.a.ontimeout=null),e.m&&(tt.clearTimeout(e.m),e.m=null)}function wr(e){return e.a?e.a.readyState:0}G.W=function(){try{return 2<wr(this)?this.a.status:-1}catch{return-1}};G.$=function(){try{return this.a?this.a.responseText:""}catch{return""}};G.Pa=function(e){if(this.a){var t=this.a.responseText;return e&&t.indexOf(e)==0&&(t=t.substring(e.length)),LR(t)}};G.ua=function(){return this.h};G.Qa=function(){return typeof this.f=="string"?this.f:String(this.f)};function BR(e){var t="";return Rd(e,function(n,r){t+=r,t+=":",t+=n,t+=`\r
`}),t}function Kd(e,t,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=BR(n),typeof e=="string"?n!=null&&encodeURIComponent(String(n)):Rt(e,t,n))}function Ls(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Kb(e){this.pa=0,this.g=[],this.c=new Bd,this.ga=this.la=this.B=this.fa=this.a=this.na=this.A=this.V=this.i=this.O=this.l=null,this.Oa=this.R=0,this.La=Ls("failFast",!1,e),this.H=this.m=this.j=this.h=this.f=null,this.S=!0,this.I=this.oa=this.P=-1,this.T=this.o=this.u=0,this.Ha=Ls("baseRetryDelayMs",5e3,e),this.Ra=Ls("retryDelaySeedMs",1e4,e),this.Ma=Ls("forwardChannelMaxRetries",2,e),this.ma=Ls("forwardChannelRequestTimeoutMs",2e4,e),this.Na=e&&e.g||void 0,this.D=void 0,this.C=e&&e.supportsCrossDomainXhr||!1,this.J="",this.b=new jb(e&&e.concurrentRequestLimit),this.ka=new DR,this.da=e&&e.fastHandshake||!1,this.Ia=e&&e.b||!1,e&&e.f&&(this.c.a=!1),e&&e.forceLongPolling&&(this.S=!1),this.U=!this.da&&this.S&&e&&e.detectBufferingProxy||!1,this.ea=void 0,this.N=0,this.F=!1,this.s=null,(this.Ka=e&&e.c||!1)&&this.c.info("Opt-in to enable Chrome Origin Trials.")}G=Kb.prototype;G.ha=8;G.v=1;function Yd(e){if(Yb(e),e.v==3){var t=e.R++,n=Xn(e.B);Rt(n,"SID",e.J),Rt(n,"RID",t),Rt(n,"TYPE","terminate"),Cu(e,n),t=new Nu(e,e.c,t,void 0),t.H=2,t.i=Xc(Xn(n)),n=!1,tt.navigator&&tt.navigator.sendBeacon&&(n=tt.navigator.sendBeacon(t.i.toString(),"")),!n&&tt.Image&&(new Image().src=t.i,n=!0),n||(t.a=rE(t.g,null),t.a.ba(t.i)),t.u=Mn(),Au(t)}eE(e)}function Zc(e){e.a&&(Xd(e),e.a.cancel(),e.a=null)}function Yb(e){Zc(e),e.j&&(tt.clearTimeout(e.j),e.j=null),wc(e),e.b.cancel(),e.h&&(typeof e.h=="number"&&tt.clearTimeout(e.h),e.h=null)}function ap(e,t){e.g.push(new OR(e.Oa++,t)),e.v==3&&th(e)}function th(e){Bb(e.b)||e.h||(e.h=!0,_b(e.Ba,e),e.u=0)}function qR(e,t){return qb(e.b)>=e.b.f-(e.h?1:0)?!1:e.h?(e.g=t.s.concat(e.g),!0):e.v==1||e.v==2||e.u>=(e.La?0:e.Ma)?!1:(e.h=Tu(he(e.Ba,e,t),tE(e,e.u)),e.u++,!0)}G.Ba=function(e){if(this.h)if(this.h=null,this.v==1){if(!e){this.R=Math.floor(1e5*Math.random()),e=this.R++;var t=new Nu(this,this.c,e,void 0),n=this.l;this.O&&(n?(n=sb(n),ub(n,this.O)):n=this.O),this.i===null&&(t.B=n);var r;if(this.da)t:{for(var o=r=0;o<this.g.length;o++){e:{var u=this.g[o];if("__data__"in u.a&&(u=u.a.__data__,typeof u=="string")){u=u.length;break e}u=void 0}if(u===void 0)break;if(r+=u,4096<r){r=o;break t}if(r===4096||o===this.g.length-1){r=o+1;break t}}r=1e3}else r=1e3;r=$b(this,t,r),o=Xn(this.B),Rt(o,"RID",e),Rt(o,"CVER",22),this.A&&Rt(o,"X-HTTP-Session-Id",this.A),Cu(this,o),this.i&&n&&Kd(o,this.i,n),zd(this.b,t),this.Ia&&Rt(o,"TYPE","init"),this.da?(Rt(o,"$req",r),Rt(o,"SID","null"),t.U=!0,Wp(t,o,null)):Wp(t,o,r),this.v=2}}else this.v==3&&(e?lw(this,e):this.g.length==0||Bb(this.b)||lw(this))};function lw(e,t){var n;t?n=t.f:n=e.R++;var r=Xn(e.B);Rt(r,"SID",e.J),Rt(r,"RID",n),Rt(r,"AID",e.P),Cu(e,r),e.i&&e.l&&Kd(r,e.i,e.l),n=new Nu(e,e.c,n,e.u+1),e.i===null&&(n.B=e.l),t&&(e.g=t.s.concat(e.g)),t=$b(e,n,1e3),n.setTimeout(Math.round(.5*e.ma)+Math.round(.5*e.ma*Math.random())),zd(e.b,n),Wp(n,r,t)}function Cu(e,t){e.f&&Gd({},function(n,r){Rt(t,r,n)})}function $b(e,t,n){n=Math.min(e.g.length,n);var r=e.f?he(e.f.Ja,e.f,e):null;t:for(var o=e.g,u=-1;;){var a=["count="+n];u==-1?0<n?(u=o[0].b,a.push("ofs="+u)):u=0:a.push("ofs="+u);for(var h=!0,l=0;l<n;l++){var p=o[l].b,v=o[l].a;if(p-=u,0>p)u=Math.max(0,o[l].b-100),h=!1;else try{PR(v,a,"req"+p+"_")}catch{r&&r(v)}}if(h){r=a.join("&");break t}}return e=e.g.splice(0,n),t.s=e,r}function Xb(e){e.a||e.j||(e.T=1,_b(e.Aa,e),e.o=0)}function $d(e){return e.a||e.j||3<=e.o?!1:(e.T++,e.j=Tu(he(e.Aa,e),tE(e,e.o)),e.o++,!0)}G.Aa=function(){if(this.j=null,Jb(this),this.U&&!(this.F||this.a==null||0>=this.N)){var e=2*this.N;this.c.info("BP detection timer enabled: "+e),this.s=Tu(he(this.Ta,this),e)}};G.Ta=function(){this.s&&(this.s=null,this.c.info("BP detection timeout reached."),this.c.info("Buffering proxy detected and switch to long-polling!"),this.H=!1,this.F=!0,Ee(10),Zc(this),Jb(this))};function Xd(e){e.s!=null&&(tt.clearTimeout(e.s),e.s=null)}function Jb(e){e.a=new Nu(e,e.c,"rpc",e.T),e.i===null&&(e.a.B=e.l),e.a.O=0;var t=Xn(e.la);Rt(t,"RID","rpc"),Rt(t,"SID",e.J),Rt(t,"CI",e.H?"0":"1"),Rt(t,"AID",e.P),Cu(e,t),Rt(t,"TYPE","xmlhttp"),e.i&&e.l&&Kd(t,e.i,e.l),e.D&&e.a.setTimeout(e.D);var n=e.a;e=e.ga,n.H=1,n.i=Xc(Xn(t)),n.j=null,n.I=!0,Pb(n,e)}G.Sa=function(){this.m!=null&&(this.m=null,Zc(this),$d(this),Ee(19))};function wc(e){e.m!=null&&(tt.clearTimeout(e.m),e.m=null)}function Zb(e,t){var n=null;if(e.a==t){wc(e),Xd(e),e.a=null;var r=2}else if(Hp(e.b,t))n=t.s,Wb(e.b,t),r=1;else return;if(e.I=t.N,e.v!=0){if(t.b)if(r==1){n=t.j?t.j.length:0,t=Mn()-t.u;var o=e.u;r=Kc(),oe(r,new Nb(r)),th(e)}else Xb(e);else if(o=t.h,o==3||o==0&&0<e.I||!(r==1&&qR(e,t)||r==2&&$d(e)))switch(n&&0<n.length&&(t=e.b,t.c=t.c.concat(n)),o){case 1:ci(e,5);break;case 4:ci(e,10);break;case 3:ci(e,6);break;default:ci(e,2)}}}function tE(e,t){var n=e.Ha+Math.floor(Math.random()*e.Ra);return e.f||(n*=2),n*t}function ci(e,t){if(e.c.info("Error code "+t),t==2){var n=null;e.f&&(n=null);var r=he(e.Ya,e);n||(n=new wi("//www.google.com/images/cleardot.gif"),tt.location&&tt.location.protocol=="http"||gc(n,"https"),Xc(n)),xR(n.toString(),r)}else Ee(2);e.v=0,e.f&&e.f.ra(t),eE(e),Yb(e)}G.Ya=function(e){e?(this.c.info("Successfully pinged google.com"),Ee(2)):(this.c.info("Failed to ping google.com"),Ee(1))};function eE(e){e.v=0,e.I=-1,e.f&&((Gb(e.b).length!=0||e.g.length!=0)&&(e.b.c.length=0,Cd(e.g),e.g.length=0),e.f.qa())}function nE(e,t,n){var r=ER(n);if(r.c!="")t&&mc(r,t+"."+r.c),_c(r,r.h);else{var o=tt.location;r=IR(o.protocol,t?t+"."+o.hostname:o.hostname,+o.port,n)}return e.V&&Rd(e.V,function(u,a){Rt(r,a,u)}),t=e.A,n=e.na,t&&n&&Rt(r,t,n),Rt(r,"VER",e.ha),Cu(e,r),r}function rE(e,t){if(t&&!e.C)throw Error("Can't create secondary domain capable XhrIo object.");return t=new Xt(e.Na),t.F=e.C,t}function iE(){}G=iE.prototype;G.ta=function(){};G.sa=function(){};G.ra=function(){};G.qa=function(){};G.Ja=function(){};function bc(){if(Tr&&!(10<=Number(fb)))throw Error("Environmental error: no available transport.")}bc.prototype.a=function(e,t){return new Ye(e,t)};function Ye(e,t){Ke.call(this),this.a=new Kb(t),this.o=e,this.b=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.a.l=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.a&&(e?e["X-WebChannel-Client-Profile"]=t.a:e={"X-WebChannel-Client-Profile":t.a}),this.a.O=e,(e=t&&t.httpHeadersOverwriteParam)&&!dc(e)&&(this.a.i=e),this.m=t&&t.supportsCrossDomainXhr||!1,this.l=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!dc(t)&&(this.a.A=t,e=this.b,e!==null&&t in e&&(e=this.b,t in e&&delete e[t])),this.f=new Go(this)}Te(Ye,Ke);Ye.prototype.g=function(){this.a.f=this.f,this.m&&(this.a.C=!0);var e=this.a,t=this.o,n=this.b||void 0;Ee(0),e.fa=t,e.V=n||{},e.H=e.S,e.B=nE(e,null,e.fa),th(e)};Ye.prototype.close=function(){Yd(this.a)};Ye.prototype.h=function(e){if(typeof e=="string"){var t={};t.__data__=e,ap(this.a,t)}else this.l?(t={},t.__data__=Fd(e),ap(this.a,t)):ap(this.a,e)};Ye.prototype.G=function(){this.a.f=null,delete this.f,Yd(this.a),delete this.a,Ye.X.G.call(this)};function oE(e){qd.call(this);var t=e.__sm__;if(t){t:{for(var n in t){e=n;break t}e=void 0}(this.c=e)?(e=this.c,this.data=t!==null&&e in t?t[e]:void 0):this.data=t}else this.data=e}Te(oE,qd);function sE(){Wd.call(this),this.status=1}Te(sE,Wd);function Go(e){this.a=e}Te(Go,iE);Go.prototype.ta=function(){oe(this.a,"a")};Go.prototype.sa=function(e){oe(this.a,new oE(e))};Go.prototype.ra=function(e){oe(this.a,new sE)};Go.prototype.qa=function(){oe(this.a,"b")};bc.prototype.createWebChannel=bc.prototype.a;Ye.prototype.send=Ye.prototype.h;Ye.prototype.open=Ye.prototype.g;Ye.prototype.close=Ye.prototype.close;Yc.NO_ERROR=0;Yc.TIMEOUT=8;Yc.HTTP_ERROR=6;Ab.COMPLETE="complete";Rb.EventType=Su;Su.OPEN="a";Su.CLOSE="b";Su.ERROR="c";Su.MESSAGE="d";Ke.prototype.listen=Ke.prototype.va;Xt.prototype.listenOnce=Xt.prototype.wa;Xt.prototype.getLastError=Xt.prototype.Qa;Xt.prototype.getLastErrorCode=Xt.prototype.ua;Xt.prototype.getStatus=Xt.prototype.W;Xt.prototype.getResponseJson=Xt.prototype.Pa;Xt.prototype.getResponseText=Xt.prototype.$;Xt.prototype.send=Xt.prototype.ba;var WR=function(){return new bc},GR=function(){return Kc()},cp=Yc,HR=Ab,zR=Si,fw={gb:0,jb:1,kb:2,Db:3,Ib:4,Fb:5,Gb:6,Eb:7,Cb:8,Hb:9,PROXY:10,NOPROXY:11,Ab:12,wb:13,xb:14,vb:15,yb:16,zb:17,bb:18,ab:19,cb:20},Qa=Rb,QR=Xt;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var KR=function(e,t,n,r,o,u){this.t=e,this.persistenceKey=t,this.host=n,this.ssl=r,this.forceLongPolling=o,this.i=u},Ec=function(){function e(t,n){this.projectId=t,this.database=n||"(default)"}return Object.defineProperty(e.prototype,"o",{get:function(){return this.database==="(default)"},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database},e}(),gn=new Sd("@firebase/firestore");function zp(){return gn.logLevel}function V(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(gn.logLevel<=ft.DEBUG){var r=t.map(Jd);gn.debug.apply(gn,ae(["Firestore (8.2.9): "+e],r))}}function Gt(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(gn.logLevel<=ft.ERROR){var r=t.map(Jd);gn.error.apply(gn,ae(["Firestore (8.2.9): "+e],r))}}function Qp(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(gn.logLevel<=ft.WARN){var r=t.map(Jd);gn.warn.apply(gn,ae(["Firestore (8.2.9): "+e],r))}}function Jd(e){if(typeof e=="string")return e;try{return t=e,JSON.stringify(t)}catch{return e}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W(e){e===void 0&&(e="Unexpected state");var t="FIRESTORE (8.2.9) INTERNAL ASSERTION FAILED: "+e;throw Gt(t),new Error(t)}function Y(e,t){e||W()}function j(e,t){return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YR(e){var t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var uE=function(){function e(){}return e.u=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/t.length)*t.length,r="";r.length<20;)for(var o=YR(40),u=0;u<o.length;++u)r.length<20&&o[u]<n&&(r+=t.charAt(o[u]%t.length));return r},e}();function at(e,t){return e<t?-1:e>t?1:0}function bo(e,t,n){return e.length===t.length&&e.every(function(r,o){return n(r,t[o])})}function aE(e){return e+"\0"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Le=function(){function e(t){this.h=t}return e.fromBase64String=function(t){return new e(atob(t))},e.fromUint8Array=function(t){return new e(function(n){for(var r="",o=0;o<n.length;++o)r+=String.fromCharCode(n[o]);return r}(t))},e.prototype.toBase64=function(){return t=this.h,btoa(t);var t},e.prototype.toUint8Array=function(){return function(t){for(var n=new Uint8Array(t.length),r=0;r<t.length;r++)n[r]=t.charCodeAt(r);return n}(this.h)},e.prototype.l=function(){return 2*this.h.length},e.prototype._=function(t){return at(this.h,t.h)},e.prototype.isEqual=function(t){return this.h===t.h},e}();Le.T=new Le("");var N={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},D=function(e){function t(n,r){var o=this;return(o=e.call(this,r)||this).code=n,o.message=r,o.name="FirebaseError",o.toString=function(){return o.name+": [code="+o.code+"]: "+o.message},o}return U(t,e),t}(Error),bi=function(){function e(t){this.I=t}return e.fromBase64String=function(t){try{return new e(Le.fromBase64String(t))}catch(n){throw new D(N.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}},e.fromUint8Array=function(t){return new e(Le.fromUint8Array(t))},e.prototype.toBase64=function(){return this.I.toBase64()},e.prototype.toUint8Array=function(){return this.I.toUint8Array()},e.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},e.prototype.isEqual=function(t){return this.I.isEqual(t.I)},e}(),qe=function(){function e(t){this.uid=t}return e.prototype.m=function(){return this.uid!=null},e.prototype.A=function(){return this.m()?"uid:"+this.uid:"anonymous-user"},e.prototype.isEqual=function(t){return t.uid===this.uid},e}();qe.UNAUTHENTICATED=new qe(null),qe.R=new qe("google-credentials-uid"),qe.P=new qe("first-party-uid");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $R=function(e,t){this.user=t,this.type="OAuth",this.g={},this.g.Authorization="Bearer "+e},pw=function(){function e(){this.V=null}return e.prototype.getToken=function(){return Promise.resolve(null)},e.prototype.p=function(){},e.prototype.v=function(t){this.V=t,t(qe.UNAUTHENTICATED)},e.prototype.S=function(){this.V=null},e}(),XR=function(){function e(t){var n=this;this.D=null,this.currentUser=qe.UNAUTHENTICATED,this.C=!1,this.N=0,this.V=null,this.forceRefresh=!1,this.D=function(){n.N++,n.currentUser=n.$(),n.C=!0,n.V&&n.V(n.currentUser)},this.N=0,this.auth=t.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.D):(this.D(null),t.get().then(function(r){n.auth=r,n.D&&n.auth.addAuthTokenListener(n.D)},function(){}))}return e.prototype.getToken=function(){var t=this,n=this.N,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(function(o){return t.N!==n?(V("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):o?(Y(typeof o.accessToken=="string"),new $R(o.accessToken,t.currentUser)):null}):Promise.resolve(null)},e.prototype.p=function(){this.forceRefresh=!0},e.prototype.v=function(t){this.V=t,this.C&&t(this.currentUser)},e.prototype.S=function(){this.auth&&this.auth.removeAuthTokenListener(this.D),this.D=null,this.V=null},e.prototype.$=function(){var t=this.auth&&this.auth.getUid();return Y(t===null||typeof t=="string"),new qe(t)},e}(),JR=function(){function e(t,n){this.F=t,this.O=n,this.type="FirstParty",this.user=qe.P}return Object.defineProperty(e.prototype,"g",{get:function(){var t={"X-Goog-AuthUser":this.O},n=this.F.auth.getAuthHeaderValueForFirstParty([]);return n&&(t.Authorization=n),t},enumerable:!1,configurable:!0}),e}(),ZR=function(){function e(t,n){this.F=t,this.O=n}return e.prototype.getToken=function(){return Promise.resolve(new JR(this.F,this.O))},e.prototype.v=function(t){t(qe.P)},e.prototype.S=function(){},e.prototype.p=function(){},e}(),He=function(){function e(t,n){var r=this;this.previousValue=t,n&&(n.k=function(o){return r.M(o)},this.L=function(o){return n.B(o)})}return e.prototype.M=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},e.prototype.next=function(){var t=++this.previousValue;return this.L&&this.L(t),t},e}();He.q=-1;var Pe=function(){function e(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new D(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new D(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new D(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new D(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return e.now=function(){return e.fromMillis(Date.now())},e.fromDate=function(t){return e.fromMillis(t.getTime())},e.fromMillis=function(t){var n=Math.floor(t/1e3);return new e(n,1e6*(t-1e3*n))},e.prototype.toDate=function(){return new Date(this.toMillis())},e.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},e.prototype.U=function(t){return this.seconds===t.seconds?at(this.nanoseconds,t.nanoseconds):at(this.seconds,t.seconds)},e.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},e.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},e.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},e.prototype.valueOf=function(){var t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},e}(),st=function(){function e(t){this.timestamp=t}return e.K=function(t){return new e(t)},e.min=function(){return new e(new Pe(0,0))},e.prototype._=function(t){return this.timestamp.U(t.timestamp)},e.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},e.prototype.W=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},e.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},e.prototype.j=function(){return this.timestamp},e}(),cE=function(){function e(t,n,r){n===void 0?n=0:n>t.length&&W(),r===void 0?r=t.length-n:r>t.length-n&&W(),this.segments=t,this.offset=n,this.G=r}return Object.defineProperty(e.prototype,"length",{get:function(){return this.G},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return e.H(this,t)===0},e.prototype.child=function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach(function(r){n.push(r)}):n.push(t),this.J(n)},e.prototype.limit=function(){return this.offset+this.length},e.prototype.Y=function(t){return t=t===void 0?1:t,this.J(this.segments,this.offset+t,this.length-t)},e.prototype.X=function(){return this.J(this.segments,this.offset,this.length-1)},e.prototype.Z=function(){return this.segments[this.offset]},e.prototype.tt=function(){return this.get(this.length-1)},e.prototype.get=function(t){return this.segments[this.offset+t]},e.prototype.et=function(){return this.length===0},e.prototype.nt=function(t){if(t.length<this.length)return!1;for(var n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0},e.prototype.st=function(t){if(this.length+1!==t.length)return!1;for(var n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0},e.prototype.forEach=function(t){for(var n=this.offset,r=this.limit();n<r;n++)t(this.segments[n])},e.prototype.it=function(){return this.segments.slice(this.offset,this.limit())},e.H=function(t,n){for(var r=Math.min(t.length,n.length),o=0;o<r;o++){var u=t.get(o),a=n.get(o);if(u<a)return-1;if(u>a)return 1}return t.length<n.length?-1:t.length>n.length?1:0},e}(),vt=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return U(t,e),t.prototype.J=function(n,r,o){return new t(n,r,o)},t.prototype.rt=function(){return this.it().join("/")},t.prototype.toString=function(){return this.rt()},t.ot=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];for(var o=[],u=0,a=n;u<a.length;u++){var h=a[u];if(h.indexOf("//")>=0)throw new D(N.INVALID_ARGUMENT,"Invalid segment ("+h+"). Paths must not contain // in them.");o.push.apply(o,h.split("/").filter(function(l){return l.length>0}))}return new t(o)},t.ct=function(){return new t([])},t}(cE),tO=/^[_a-zA-Z][_a-zA-Z0-9]*$/,_n=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return U(t,e),t.prototype.J=function(n,r,o){return new t(n,r,o)},t.at=function(n){return tO.test(n)},t.prototype.rt=function(){return this.it().map(function(n){return n=n.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.at(n)||(n="`"+n+"`"),n}).join(".")},t.prototype.toString=function(){return this.rt()},t.prototype.ut=function(){return this.length===1&&this.get(0)==="__name__"},t.ht=function(){return new t(["__name__"])},t.lt=function(n){for(var r=[],o="",u=0,a=function(){if(o.length===0)throw new D(N.INVALID_ARGUMENT,"Invalid field path ("+n+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");r.push(o),o=""},h=!1;u<n.length;){var l=n[u];if(l==="\\"){if(u+1===n.length)throw new D(N.INVALID_ARGUMENT,"Path has trailing escape character: "+n);var p=n[u+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new D(N.INVALID_ARGUMENT,"Path has invalid escape sequence: "+n);o+=p,u+=2}else l==="`"?(h=!h,u++):l!=="."||h?(o+=l,u++):(a(),u++)}if(a(),h)throw new D(N.INVALID_ARGUMENT,"Unterminated ` in path: "+n);return new t(r)},t.ct=function(){return new t([])},t}(cE),H=function(){function e(t){this.path=t}return e._t=function(t){return new e(vt.ot(t))},e.ft=function(t){return new e(vt.ot(t).Y(5))},e.prototype.dt=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},e.prototype.isEqual=function(t){return t!==null&&vt.H(this.path,t.path)===0},e.prototype.toString=function(){return this.path.toString()},e.H=function(t,n){return vt.H(t.path,n.path)},e.wt=function(t){return t.length%2==0},e.Et=function(t){return new e(new vt(t.slice()))},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dw(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Ru(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function hE(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Eo=function(){function e(t){this.fields=t,t.sort(_n.H)}return e.prototype.Tt=function(t){for(var n=0,r=this.fields;n<r.length;n++)if(r[n].nt(t))return!0;return!1},e.prototype.isEqual=function(t){return bo(this.fields,t.fields,function(n,r){return n.isEqual(r)})},e}(),eO=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sr(e){if(Y(!!e),typeof e=="string"){var t=0,n=eO.exec(e);if(Y(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var o=new Date(e);return{seconds:Math.floor(o.getTime()/1e3),nanos:t}}return{seconds:Wt(e.seconds),nanos:Wt(e.nanos)}}function Wt(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function Io(e){return typeof e=="string"?Le.fromBase64String(e):Le.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zd(e){var t,n;return((n=(((t=e?.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function lE(e){var t=e.mapValue.fields.__previous_value__;return Zd(t)?lE(t):t}function nu(e){var t=Sr(e.mapValue.fields.__local_write_time__.timestampValue);return new Pe(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ni(e){return e==null}function Ic(e){return e===0&&1/e==-1/0}function fE(e){return typeof e=="number"&&Number.isInteger(e)&&!Ic(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nr(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Zd(e)?4:10:W()}function Pn(e,t){var n=Nr(e);if(n!==Nr(t))return!1;switch(n){case 0:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return nu(e).isEqual(nu(t));case 3:return function(r,o){if(typeof r.timestampValue=="string"&&typeof o.timestampValue=="string"&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;var u=Sr(r.timestampValue),a=Sr(o.timestampValue);return u.seconds===a.seconds&&u.nanos===a.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(r,o){return Io(r.bytesValue).isEqual(Io(o.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(r,o){return Wt(r.geoPointValue.latitude)===Wt(o.geoPointValue.latitude)&&Wt(r.geoPointValue.longitude)===Wt(o.geoPointValue.longitude)}(e,t);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return Wt(r.integerValue)===Wt(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){var u=Wt(r.doubleValue),a=Wt(o.doubleValue);return u===a?Ic(u)===Ic(a):isNaN(u)&&isNaN(a)}return!1}(e,t);case 9:return bo(e.arrayValue.values||[],t.arrayValue.values||[],Pn);case 10:return function(r,o){var u=r.mapValue.fields||{},a=o.mapValue.fields||{};if(dw(u)!==dw(a))return!1;for(var h in u)if(u.hasOwnProperty(h)&&(a[h]===void 0||!Pn(u[h],a[h])))return!1;return!0}(e,t);default:return W()}}function ru(e,t){return(e.values||[]).find(function(n){return Pn(n,t)})!==void 0}function To(e,t){var n=Nr(e),r=Nr(t);if(n!==r)return at(n,r);switch(n){case 0:return 0;case 1:return at(e.booleanValue,t.booleanValue);case 2:return function(o,u){var a=Wt(o.integerValue||o.doubleValue),h=Wt(u.integerValue||u.doubleValue);return a<h?-1:a>h?1:a===h?0:isNaN(a)?isNaN(h)?0:-1:1}(e,t);case 3:return vw(e.timestampValue,t.timestampValue);case 4:return vw(nu(e),nu(t));case 5:return at(e.stringValue,t.stringValue);case 6:return function(o,u){var a=Io(o),h=Io(u);return a._(h)}(e.bytesValue,t.bytesValue);case 7:return function(o,u){for(var a=o.split("/"),h=u.split("/"),l=0;l<a.length&&l<h.length;l++){var p=at(a[l],h[l]);if(p!==0)return p}return at(a.length,h.length)}(e.referenceValue,t.referenceValue);case 8:return function(o,u){var a=at(Wt(o.latitude),Wt(u.latitude));return a!==0?a:at(Wt(o.longitude),Wt(u.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(o,u){for(var a=o.values||[],h=u.values||[],l=0;l<a.length&&l<h.length;++l){var p=To(a[l],h[l]);if(p)return p}return at(a.length,h.length)}(e.arrayValue,t.arrayValue);case 10:return function(o,u){var a=o.fields||{},h=Object.keys(a),l=u.fields||{},p=Object.keys(l);h.sort(),p.sort();for(var v=0;v<h.length&&v<p.length;++v){var g=at(h[v],p[v]);if(g!==0)return g;var m=To(a[h[v]],l[p[v]]);if(m!==0)return m}return at(h.length,p.length)}(e.mapValue,t.mapValue);default:throw W()}}function vw(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return at(e,t);var n=Sr(e),r=Sr(t),o=at(n.seconds,r.seconds);return o!==0?o:at(n.nanos,r.nanos)}function tv(e){return Kp(e)}function Kp(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(r){var o=Sr(r);return"time("+o.seconds+","+o.nanos+")"}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?Io(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,H.ft(n).toString()):"geoPointValue"in e?"geo("+(t=e.geoPointValue).latitude+","+t.longitude+")":"arrayValue"in e?function(r){for(var o="[",u=!0,a=0,h=r.values||[];a<h.length;a++)u?u=!1:o+=",",o+=Kp(h[a]);return o+"]"}(e.arrayValue):"mapValue"in e?function(r){for(var o="{",u=!0,a=0,h=Object.keys(r.fields||{}).sort();a<h.length;a++){var l=h[a];u?u=!1:o+=",",o+=l+":"+Kp(r.fields[l])}return o+"}"}(e.mapValue):W();var t,n}function Tc(e,t){return{referenceValue:"projects/"+e.projectId+"/databases/"+e.database+"/documents/"+t.path.rt()}}function Yp(e){return!!e&&"integerValue"in e}function ev(e){return!!e&&"arrayValue"in e}function yw(e){return!!e&&"nullValue"in e}function gw(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function nv(e){return!!e&&"mapValue"in e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ar=function(){function e(t){this.proto=t}return e.empty=function(){return new e({mapValue:{}})},e.prototype.field=function(t){if(t.et())return this.proto;for(var n=this.proto,r=0;r<t.length-1;++r)if(!n.mapValue.fields||!nv(n=n.mapValue.fields[t.get(r)]))return null;return(n=(n.mapValue.fields||{})[t.tt()])||null},e.prototype.isEqual=function(t){return Pn(this.proto,t.proto)},e}(),Ou=function(){function e(t){t===void 0&&(t=Ar.empty()),this.It=t,this.At=new Map}return e.prototype.set=function(t,n){return this.Rt(t,n),this},e.prototype.delete=function(t){return this.Rt(t,null),this},e.prototype.Rt=function(t,n){for(var r=this.At,o=0;o<t.length-1;++o){var u=t.get(o),a=r.get(u);a instanceof Map?r=a:a&&Nr(a)===10?(a=new Map(Object.entries(a.mapValue.fields||{})),r.set(u,a),r=a):(a=new Map,r.set(u,a),r=a)}r.set(t.tt(),n)},e.prototype.Pt=function(){var t=this.yt(_n.ct(),this.At);return t!=null?new Ar(t):this.It},e.prototype.yt=function(t,n){var r=this,o=!1,u=this.It.field(t),a=nv(u)?Object.assign({},u.mapValue.fields):{};return n.forEach(function(h,l){if(h instanceof Map){var p=r.yt(t.child(l),h);p!=null&&(a[l]=p,o=!0)}else h!==null?(a[l]=h,o=!0):a.hasOwnProperty(l)&&(delete a[l],o=!0)}),o?{mapValue:{fields:a}}:null},e}();function pE(e){var t=[];return Ru(e.fields||{},function(n,r){var o=new _n([n]);if(nv(r)){var u=pE(r.mapValue).fields;if(u.length===0)t.push(o);else for(var a=0,h=u;a<h.length;a++){var l=h[a];t.push(o.child(l))}}else t.push(o)}),new Eo(t)}var rv=function(e,t){this.key=e,this.version=t},It=function(e){function t(n,r,o,u){var a=this;return(a=e.call(this,n,r)||this).gt=o,a.Vt=!!u.Vt,a.hasCommittedMutations=!!u.hasCommittedMutations,a}return U(t,e),t.prototype.field=function(n){return this.gt.field(n)},t.prototype.data=function(){return this.gt},t.prototype.bt=function(){return this.gt.proto},t.prototype.isEqual=function(n){return n instanceof t&&this.key.isEqual(n.key)&&this.version.isEqual(n.version)&&this.Vt===n.Vt&&this.hasCommittedMutations===n.hasCommittedMutations&&this.gt.isEqual(n.gt)},t.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.gt.toString()+", {hasLocalMutations: "+this.Vt+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return this.Vt||this.hasCommittedMutations},enumerable:!1,configurable:!0}),t}(rv),ee=function(e){function t(n,r,o){var u=this;return(u=e.call(this,n,r)||this).hasCommittedMutations=!(!o||!o.hasCommittedMutations),u}return U(t,e),t.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(n){return n instanceof t&&n.hasCommittedMutations===this.hasCommittedMutations&&n.version.isEqual(this.version)&&n.key.isEqual(this.key)},t}(rv),iv=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return U(t,e),t.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(n){return n instanceof t&&n.version.isEqual(this.version)&&n.key.isEqual(this.key)},t}(rv),nO=function(e,t,n,r,o,u,a){t===void 0&&(t=null),n===void 0&&(n=[]),r===void 0&&(r=[]),o===void 0&&(o=null),u===void 0&&(u=null),a===void 0&&(a=null),this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=o,this.startAt=u,this.endAt=a,this.vt=null};function mw(e,t,n,r,o,u,a){return t===void 0&&(t=null),n===void 0&&(n=[]),r===void 0&&(r=[]),o===void 0&&(o=null),u===void 0&&(u=null),a===void 0&&(a=null),new nO(e,t,n,r,o,u,a)}function ku(e){var t=j(e);if(t.vt===null){var n=t.path.rt();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(function(r){return function(o){return o.field.rt()+o.op.toString()+tv(o.value)}(r)}).join(","),n+="|ob:",n+=t.orderBy.map(function(r){return function(o){return o.field.rt()+o.dir}(r)}).join(","),Ni(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=Nc(t.startAt)),t.endAt&&(n+="|ub:",n+=Nc(t.endAt)),t.vt=n}return t.vt}function eh(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!hO(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(o=e.filters[r],u=t.filters[r],o.op!==u.op||!o.field.isEqual(u.field)||!Pn(o.value,u.value))return!1;var o,u;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!ww(e.startAt,t.startAt)&&ww(e.endAt,t.endAt)}function Sc(e){return H.wt(e.path)&&e.collectionGroup===null&&e.filters.length===0}var ze=function(e){function t(n,r,o){var u=this;return(u=e.call(this)||this).field=n,u.op=r,u.value=o,u}return U(t,e),t.create=function(n,r,o){return n.ut()?r==="in"||r==="not-in"?this.St(n,r,o):new rO(n,r,o):r==="array-contains"?new sO(n,o):r==="in"?new uO(n,o):r==="not-in"?new aO(n,o):r==="array-contains-any"?new cO(n,o):new t(n,r,o)},t.St=function(n,r,o){return r==="in"?new iO(n,o):new oO(n,o)},t.prototype.matches=function(n){var r=n.field(this.field);return this.op==="!="?r!==null&&this.Dt(To(r,this.value)):r!==null&&Nr(this.value)===Nr(r)&&this.Dt(To(r,this.value))},t.prototype.Dt=function(n){switch(this.op){case"<":return n<0;case"<=":return n<=0;case"==":return n===0;case"!=":return n!==0;case">":return n>0;case">=":return n>=0;default:return W()}},t.prototype.Ct=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},t}(function(){}),rO=function(e){function t(n,r,o){var u=this;return(u=e.call(this,n,r,o)||this).key=H.ft(o.referenceValue),u}return U(t,e),t.prototype.matches=function(n){var r=H.H(n.key,this.key);return this.Dt(r)},t}(ze),iO=function(e){function t(n,r){var o=this;return(o=e.call(this,n,"in",r)||this).keys=dE("in",r),o}return U(t,e),t.prototype.matches=function(n){return this.keys.some(function(r){return r.isEqual(n.key)})},t}(ze),oO=function(e){function t(n,r){var o=this;return(o=e.call(this,n,"not-in",r)||this).keys=dE("not-in",r),o}return U(t,e),t.prototype.matches=function(n){return!this.keys.some(function(r){return r.isEqual(n.key)})},t}(ze);function dE(e,t){var n;return(((n=t.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(function(r){return H.ft(r.referenceValue)})}var sO=function(e){function t(n,r){return e.call(this,n,"array-contains",r)||this}return U(t,e),t.prototype.matches=function(n){var r=n.field(this.field);return ev(r)&&ru(r.arrayValue,this.value)},t}(ze),uO=function(e){function t(n,r){return e.call(this,n,"in",r)||this}return U(t,e),t.prototype.matches=function(n){var r=n.field(this.field);return r!==null&&ru(this.value.arrayValue,r)},t}(ze),aO=function(e){function t(n,r){return e.call(this,n,"not-in",r)||this}return U(t,e),t.prototype.matches=function(n){if(ru(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var r=n.field(this.field);return r!==null&&!ru(this.value.arrayValue,r)},t}(ze),cO=function(e){function t(n,r){return e.call(this,n,"array-contains-any",r)||this}return U(t,e),t.prototype.matches=function(n){var r=this,o=n.field(this.field);return!(!ev(o)||!o.arrayValue.values)&&o.arrayValue.values.some(function(u){return ru(r.value.arrayValue,u)})},t}(ze),iu=function(e,t){this.position=e,this.before=t};function Nc(e){return(e.before?"b":"a")+":"+e.position.map(function(t){return tv(t)}).join(",")}var mo=function(e,t){t===void 0&&(t="asc"),this.field=e,this.dir=t};function hO(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}function _w(e,t,n){for(var r=0,o=0;o<e.position.length;o++){var u=t[o],a=e.position[o];if(r=u.field.ut()?H.H(H.ft(a.referenceValue),n.key):To(a,n.field(u.field)),u.dir==="desc"&&(r*=-1),r!==0)break}return e.before?r<=0:r<0}function ww(e,t){if(e===null)return t===null;if(t===null||e.before!==t.before||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!Pn(e.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Zn=function(e,t,n,r,o,u,a,h){t===void 0&&(t=null),n===void 0&&(n=[]),r===void 0&&(r=[]),o===void 0&&(o=null),u===void 0&&(u="F"),a===void 0&&(a=null),h===void 0&&(h=null),this.path=e,this.collectionGroup=t,this.xt=n,this.filters=r,this.limit=o,this.limitType=u,this.startAt=a,this.endAt=h,this.Nt=null,this.$t=null,this.startAt,this.endAt};function vE(e,t,n,r,o,u,a,h){return new Zn(e,t,n,r,o,u,a,h)}function Du(e){return new Zn(e)}function oc(e){return!Ni(e.limit)&&e.limitType==="F"}function Ac(e){return!Ni(e.limit)&&e.limitType==="L"}function ov(e){return e.xt.length>0?e.xt[0].field:null}function sv(e){for(var t=0,n=e.filters;t<n.length;t++){var r=n[t];if(r.Ct())return r.field}return null}function uv(e){return e.collectionGroup!==null}function So(e){var t=j(e);if(t.Nt===null){t.Nt=[];var n=sv(t),r=ov(t);if(n!==null&&r===null)n.ut()||t.Nt.push(new mo(n)),t.Nt.push(new mo(_n.ht(),"asc"));else{for(var o=!1,u=0,a=t.xt;u<a.length;u++){var h=a[u];t.Nt.push(h),h.field.ut()&&(o=!0)}if(!o){var l=t.xt.length>0?t.xt[t.xt.length-1].dir:"asc";t.Nt.push(new mo(_n.ht(),l))}}}return t.Nt}function xn(e){var t=j(e);if(!t.$t)if(t.limitType==="F")t.$t=mw(t.path,t.collectionGroup,So(t),t.filters,t.limit,t.startAt,t.endAt);else{for(var n=[],r=0,o=So(t);r<o.length;r++){var u=o[r],a=u.dir==="desc"?"asc":"desc";n.push(new mo(u.field,a))}var h=t.endAt?new iu(t.endAt.position,!t.endAt.before):null,l=t.startAt?new iu(t.startAt.position,!t.startAt.before):null;t.$t=mw(t.path,t.collectionGroup,n,t.filters,t.limit,h,l)}return t.$t}function yE(e,t,n){return new Zn(e.path,e.collectionGroup,e.xt.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Pu(e,t){return eh(xn(e),xn(t))&&e.limitType===t.limitType}function gE(e){return ku(xn(e))+"|lt:"+e.limitType}function $p(e){return"Query(target="+function(t){var n=t.path.rt();return t.collectionGroup!==null&&(n+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(n+=", filters: ["+t.filters.map(function(r){return(o=r).field.rt()+" "+o.op+" "+tv(o.value);var o}).join(", ")+"]"),Ni(t.limit)||(n+=", limit: "+t.limit),t.orderBy.length>0&&(n+=", orderBy: ["+t.orderBy.map(function(r){return function(o){return o.field.rt()+" ("+o.dir+")"}(r)}).join(", ")+"]"),t.startAt&&(n+=", startAt: "+Nc(t.startAt)),t.endAt&&(n+=", endAt: "+Nc(t.endAt)),"Target("+n+")"}(xn(e))+"; limitType="+e.limitType+")"}function xu(e,t){return function(n,r){var o=r.key.path;return n.collectionGroup!==null?r.key.dt(n.collectionGroup)&&n.path.nt(o):H.wt(n.path)?n.path.isEqual(o):n.path.st(o)}(e,t)&&function(n,r){for(var o=0,u=n.xt;o<u.length;o++){var a=u[o];if(!a.field.ut()&&r.field(a.field)===null)return!1}return!0}(e,t)&&function(n,r){for(var o=0,u=n.filters;o<u.length;o++)if(!u[o].matches(r))return!1;return!0}(e,t)&&function(n,r){return!(n.startAt&&!_w(n.startAt,So(n),r))&&(!n.endAt||!_w(n.endAt,So(n),r))}(e,t)}function mE(e){return function(t,n){for(var r=!1,o=0,u=So(e);o<u.length;o++){var a=u[o],h=lO(a,t,n);if(h!==0)return h;r=r||a.field.ut()}return 0}}function lO(e,t,n){var r=e.field.ut()?H.H(t.key,n.key):function(o,u,a){var h=u.field(o),l=a.field(o);return h!==null&&l!==null?To(h,l):W()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return W()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var nh=function(){function e(t,n,r,o,u,a,h){u===void 0&&(u=st.min()),a===void 0&&(a=st.min()),h===void 0&&(h=Le.T),this.target=t,this.targetId=n,this.Ft=r,this.sequenceNumber=o,this.Ot=u,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=h}return e.prototype.kt=function(t){return new e(this.target,this.targetId,this.Ft,t,this.Ot,this.lastLimboFreeSnapshotVersion,this.resumeToken)},e.prototype.Mt=function(t,n){return new e(this.target,this.targetId,this.Ft,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t)},e.prototype.Lt=function(t){return new e(this.target,this.targetId,this.Ft,this.sequenceNumber,this.Ot,t,this.resumeToken)},e}();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _E(e,t){if(e.Bt){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ic(t)?"-0":t}}function wE(e){return{integerValue:""+e}}function bE(e,t){return fE(t)?wE(t):_E(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var rh=function(){this.qt=void 0};function fO(e,t,n){return e instanceof No?function(r,o){var u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&(u.fields.__previous_value__=o),{mapValue:u}}(n,t):e instanceof Ei?IE(e,t):e instanceof Ii?TE(e,t):function(r,o){var u=EE(r,o),a=bw(u)+bw(r.Ut);return Yp(u)&&Yp(r.Ut)?wE(a):_E(r.Qt,a)}(e,t)}function pO(e,t,n){return e instanceof Ei?IE(e,t):e instanceof Ii?TE(e,t):n}function EE(e,t){return e instanceof Ao?Yp(n=t)||function(r){return!!r&&"doubleValue"in r}(n)?t:{integerValue:0}:null;var n}var No=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return U(t,e),t}(rh),Ei=function(e){function t(n){var r=this;return(r=e.call(this)||this).elements=n,r}return U(t,e),t}(rh);function IE(e,t){for(var n=SE(t),r=function(a){n.some(function(h){return Pn(h,a)})||n.push(a)},o=0,u=e.elements;o<u.length;o++)r(u[o]);return{arrayValue:{values:n}}}var Ii=function(e){function t(n){var r=this;return(r=e.call(this)||this).elements=n,r}return U(t,e),t}(rh);function TE(e,t){for(var n=SE(t),r=function(a){n=n.filter(function(h){return!Pn(h,a)})},o=0,u=e.elements;o<u.length;o++)r(u[o]);return{arrayValue:{values:n}}}var Ao=function(e){function t(n,r){var o=this;return(o=e.call(this)||this).Qt=n,o.Ut=r,o}return U(t,e),t}(rh);function bw(e){return Wt(e.integerValue||e.doubleValue)}function SE(e){return ev(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Lu=function(e,t){this.field=e,this.transform=t},dO=function(e,t){this.version=e,this.transformResults=t},ce=function(){function e(t,n){this.updateTime=t,this.exists=n}return e.Kt=function(){return new e},e.exists=function(t){return new e(void 0,t)},e.updateTime=function(t){return new e(t)},Object.defineProperty(e.prototype,"Wt",{get:function(){return this.updateTime===void 0&&this.exists===void 0},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},e}();function sc(e,t){return e.updateTime!==void 0?t instanceof It&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t instanceof It}var ih=function(){};function vO(e,t,n){return e instanceof Mu?function(r,o,u){var a=r.value;if(u.transformResults){var h=Tw(r.fieldTransforms,o,u.transformResults);a=av(r.fieldTransforms,a,h)}return new It(r.key,u.version,a,{hasCommittedMutations:!0})}(e,t,n):e instanceof xr?function(r,o,u){if(!sc(r.jt,o))return new iv(r.key,u.version);var a=NE(r,o,u.transformResults?Tw(r.fieldTransforms,o,u.transformResults):[]);return new It(r.key,u.version,a,{hasCommittedMutations:!0})}(e,t,n):function(r,o,u){return new ee(r.key,u.version,{hasCommittedMutations:!0})}(e,0,n)}function Xp(e,t,n){return e instanceof Mu?function(r,o,u){if(!sc(r.jt,o))return o;var a=r.value,h=Sw(r.fieldTransforms,u,o);a=av(r.fieldTransforms,a,h);var l=Iw(o);return new It(r.key,l,a,{Vt:!0})}(e,t,n):e instanceof xr?function(r,o,u){if(!sc(r.jt,o))return o;var a=Iw(o),h=NE(r,o,Sw(r.fieldTransforms,u,o));return new It(r.key,a,h,{Vt:!0})}(e,t,n):function(r,o){return sc(r.jt,o)?new ee(r.key,st.min()):o}(e,t)}function yO(e,t){return function(n,r){for(var o=null,u=0,a=n;u<a.length;u++){var h=a[u],l=r instanceof It?r.field(h.field):void 0,p=EE(h.transform,l||null);p!=null&&(o=o==null?new Ou().set(h.field,p):o.set(h.field,p))}return o?o.Pt():null}(e.fieldTransforms,t)}function Ew(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.jt.isEqual(t.jt)&&!!function(n,r){return n===void 0&&r===void 0||!(!n||!r)&&bo(n,r,function(o,u){return function(a,h){return a.field.isEqual(h.field)&&function(l,p){return l instanceof Ei&&p instanceof Ei||l instanceof Ii&&p instanceof Ii?bo(l.elements,p.elements,Pn):l instanceof Ao&&p instanceof Ao?Pn(l.Ut,p.Ut):l instanceof No&&p instanceof No}(a.transform,h.transform)}(o,u)})}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.Gt.isEqual(t.Gt))}function Iw(e){return e instanceof It?e.version:st.min()}var Mu=function(e){function t(n,r,o,u){u===void 0&&(u=[]);var a=this;return(a=e.call(this)||this).key=n,a.value=r,a.jt=o,a.fieldTransforms=u,a.type=0,a}return U(t,e),t}(ih),xr=function(e){function t(n,r,o,u,a){a===void 0&&(a=[]);var h=this;return(h=e.call(this)||this).key=n,h.data=r,h.Gt=o,h.jt=u,h.fieldTransforms=a,h.type=1,h}return U(t,e),t}(ih);function NE(e,t,n){var r;return r=function(o,u){var a=new Ou(u);return o.Gt.fields.forEach(function(h){if(!h.et()){var l=o.data.field(h);l!==null?a.set(h,l):a.delete(h)}}),a.Pt()}(e,r=t instanceof It?t.data():Ar.empty()),r=av(e.fieldTransforms,r,n)}function Tw(e,t,n){var r=[];Y(e.length===n.length);for(var o=0;o<n.length;o++){var u=e[o],a=u.transform,h=null;t instanceof It&&(h=t.field(u.field)),r.push(pO(a,h,n[o]))}return r}function Sw(e,t,n){for(var r=[],o=0,u=e;o<u.length;o++){var a=u[o],h=a.transform,l=null;n instanceof It&&(l=n.field(a.field)),r.push(fO(h,l,t))}return r}function av(e,t,n){for(var r=new Ou(t),o=0;o<e.length;o++){var u=e[o];r.set(u.field,n[o])}return r.Pt()}var qt,ht,Fu=function(e){function t(n,r){var o=this;return(o=e.call(this)||this).key=n,o.jt=r,o.type=2,o.fieldTransforms=[],o}return U(t,e),t}(ih),cv=function(e){function t(n,r){var o=this;return(o=e.call(this)||this).key=n,o.jt=r,o.type=3,o.fieldTransforms=[],o}return U(t,e),t}(ih),gO=function(e){this.count=e};function AE(e){switch(e){case N.OK:return W();case N.CANCELLED:case N.UNKNOWN:case N.DEADLINE_EXCEEDED:case N.RESOURCE_EXHAUSTED:case N.INTERNAL:case N.UNAVAILABLE:case N.UNAUTHENTICATED:return!1;case N.INVALID_ARGUMENT:case N.NOT_FOUND:case N.ALREADY_EXISTS:case N.PERMISSION_DENIED:case N.FAILED_PRECONDITION:case N.ABORTED:case N.OUT_OF_RANGE:case N.UNIMPLEMENTED:case N.DATA_LOSS:return!0;default:return W()}}function CE(e){if(e===void 0)return Gt("GRPC error has no .code"),N.UNKNOWN;switch(e){case qt.OK:return N.OK;case qt.CANCELLED:return N.CANCELLED;case qt.UNKNOWN:return N.UNKNOWN;case qt.DEADLINE_EXCEEDED:return N.DEADLINE_EXCEEDED;case qt.RESOURCE_EXHAUSTED:return N.RESOURCE_EXHAUSTED;case qt.INTERNAL:return N.INTERNAL;case qt.UNAVAILABLE:return N.UNAVAILABLE;case qt.UNAUTHENTICATED:return N.UNAUTHENTICATED;case qt.INVALID_ARGUMENT:return N.INVALID_ARGUMENT;case qt.NOT_FOUND:return N.NOT_FOUND;case qt.ALREADY_EXISTS:return N.ALREADY_EXISTS;case qt.PERMISSION_DENIED:return N.PERMISSION_DENIED;case qt.FAILED_PRECONDITION:return N.FAILED_PRECONDITION;case qt.ABORTED:return N.ABORTED;case qt.OUT_OF_RANGE:return N.OUT_OF_RANGE;case qt.UNIMPLEMENTED:return N.UNIMPLEMENTED;case qt.DATA_LOSS:return N.DATA_LOSS;default:return W()}}(ht=qt||(qt={}))[ht.OK=0]="OK",ht[ht.CANCELLED=1]="CANCELLED",ht[ht.UNKNOWN=2]="UNKNOWN",ht[ht.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ht[ht.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ht[ht.NOT_FOUND=5]="NOT_FOUND",ht[ht.ALREADY_EXISTS=6]="ALREADY_EXISTS",ht[ht.PERMISSION_DENIED=7]="PERMISSION_DENIED",ht[ht.UNAUTHENTICATED=16]="UNAUTHENTICATED",ht[ht.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ht[ht.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ht[ht.ABORTED=10]="ABORTED",ht[ht.OUT_OF_RANGE=11]="OUT_OF_RANGE",ht[ht.UNIMPLEMENTED=12]="UNIMPLEMENTED",ht[ht.INTERNAL=13]="INTERNAL",ht[ht.UNAVAILABLE=14]="UNAVAILABLE",ht[ht.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var pe=function(){function e(t,n){this.H=t,this.root=n||vr.EMPTY}return e.prototype.zt=function(t,n){return new e(this.H,this.root.zt(t,n,this.H).copy(null,null,vr.Ht,null,null))},e.prototype.remove=function(t){return new e(this.H,this.root.remove(t,this.H).copy(null,null,vr.Ht,null,null))},e.prototype.get=function(t){for(var n=this.root;!n.et();){var r=this.H(t,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null},e.prototype.indexOf=function(t){for(var n=0,r=this.root;!r.et();){var o=this.H(t,r.key);if(o===0)return n+r.left.size;o<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1},e.prototype.et=function(){return this.root.et()},Object.defineProperty(e.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),e.prototype.Jt=function(){return this.root.Jt()},e.prototype.Yt=function(){return this.root.Yt()},e.prototype.Xt=function(t){return this.root.Xt(t)},e.prototype.forEach=function(t){this.Xt(function(n,r){return t(n,r),!1})},e.prototype.toString=function(){var t=[];return this.Xt(function(n,r){return t.push(n+":"+r),!1}),"{"+t.join(", ")+"}"},e.prototype.Zt=function(t){return this.root.Zt(t)},e.prototype.te=function(){return new Ka(this.root,null,this.H,!1)},e.prototype.ee=function(t){return new Ka(this.root,t,this.H,!1)},e.prototype.ne=function(){return new Ka(this.root,null,this.H,!0)},e.prototype.se=function(t){return new Ka(this.root,t,this.H,!0)},e}(),Ka=function(){function e(t,n,r,o){this.ie=o,this.re=[];for(var u=1;!t.et();)if(u=n?r(t.key,n):1,o&&(u*=-1),u<0)t=this.ie?t.left:t.right;else{if(u===0){this.re.push(t);break}this.re.push(t),t=this.ie?t.right:t.left}}return e.prototype.oe=function(){var t=this.re.pop(),n={key:t.key,value:t.value};if(this.ie)for(t=t.left;!t.et();)this.re.push(t),t=t.right;else for(t=t.right;!t.et();)this.re.push(t),t=t.left;return n},e.prototype.ce=function(){return this.re.length>0},e.prototype.ae=function(){if(this.re.length===0)return null;var t=this.re[this.re.length-1];return{key:t.key,value:t.value}},e}(),vr=function(){function e(t,n,r,o,u){this.key=t,this.value=n,this.color=r??e.RED,this.left=o??e.EMPTY,this.right=u??e.EMPTY,this.size=this.left.size+1+this.right.size}return e.prototype.copy=function(t,n,r,o,u){return new e(t??this.key,n??this.value,r??this.color,o??this.left,u??this.right)},e.prototype.et=function(){return!1},e.prototype.Xt=function(t){return this.left.Xt(t)||t(this.key,this.value)||this.right.Xt(t)},e.prototype.Zt=function(t){return this.right.Zt(t)||t(this.key,this.value)||this.left.Zt(t)},e.prototype.min=function(){return this.left.et()?this:this.left.min()},e.prototype.Jt=function(){return this.min().key},e.prototype.Yt=function(){return this.right.et()?this.key:this.right.Yt()},e.prototype.zt=function(t,n,r){var o=this,u=r(t,o.key);return(o=u<0?o.copy(null,null,null,o.left.zt(t,n,r),null):u===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.zt(t,n,r))).ue()},e.prototype.he=function(){if(this.left.et())return e.EMPTY;var t=this;return t.left.le()||t.left.left.le()||(t=t._e()),(t=t.copy(null,null,null,t.left.he(),null)).ue()},e.prototype.remove=function(t,n){var r,o=this;if(n(t,o.key)<0)o.left.et()||o.left.le()||o.left.left.le()||(o=o._e()),o=o.copy(null,null,null,o.left.remove(t,n),null);else{if(o.left.le()&&(o=o.fe()),o.right.et()||o.right.le()||o.right.left.le()||(o=o.de()),n(t,o.key)===0){if(o.right.et())return e.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.he())}o=o.copy(null,null,null,null,o.right.remove(t,n))}return o.ue()},e.prototype.le=function(){return this.color},e.prototype.ue=function(){var t=this;return t.right.le()&&!t.left.le()&&(t=t.we()),t.left.le()&&t.left.left.le()&&(t=t.fe()),t.left.le()&&t.right.le()&&(t=t.Ee()),t},e.prototype._e=function(){var t=this.Ee();return t.right.left.le()&&(t=(t=(t=t.copy(null,null,null,null,t.right.fe())).we()).Ee()),t},e.prototype.de=function(){var t=this.Ee();return t.left.left.le()&&(t=(t=t.fe()).Ee()),t},e.prototype.we=function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)},e.prototype.fe=function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)},e.prototype.Ee=function(){var t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)},e.prototype.Te=function(){var t=this.Ie();return Math.pow(2,t)<=this.size+1},e.prototype.Ie=function(){if(this.le()&&this.left.le()||this.right.le())throw W();var t=this.left.Ie();if(t!==this.right.Ie())throw W();return t+(this.le()?0:1)},e}();vr.EMPTY=null,vr.RED=!0,vr.Ht=!1,vr.EMPTY=new(function(){function e(){this.size=0}return Object.defineProperty(e.prototype,"key",{get:function(){throw W()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){throw W()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"color",{get:function(){throw W()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"left",{get:function(){throw W()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"right",{get:function(){throw W()},enumerable:!1,configurable:!0}),e.prototype.copy=function(t,n,r,o,u){return this},e.prototype.zt=function(t,n,r){return new vr(t,n)},e.prototype.remove=function(t,n){return this},e.prototype.et=function(){return!0},e.prototype.Xt=function(t){return!1},e.prototype.Zt=function(t){return!1},e.prototype.Jt=function(){return null},e.prototype.Yt=function(){return null},e.prototype.le=function(){return!1},e.prototype.Te=function(){return!0},e.prototype.Ie=function(){return 0},e}());/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $t=function(){function e(t){this.H=t,this.data=new pe(this.H)}return e.prototype.has=function(t){return this.data.get(t)!==null},e.prototype.first=function(){return this.data.Jt()},e.prototype.last=function(){return this.data.Yt()},Object.defineProperty(e.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),e.prototype.indexOf=function(t){return this.data.indexOf(t)},e.prototype.forEach=function(t){this.data.Xt(function(n,r){return t(n),!1})},e.prototype.me=function(t,n){for(var r=this.data.ee(t[0]);r.ce();){var o=r.oe();if(this.H(o.key,t[1])>=0)return;n(o.key)}},e.prototype.Ae=function(t,n){var r;for(r=n!==void 0?this.data.ee(n):this.data.te();r.ce();)if(!t(r.oe().key))return},e.prototype.Re=function(t){var n=this.data.ee(t);return n.ce()?n.oe().key:null},e.prototype.te=function(){return new Nw(this.data.te())},e.prototype.ee=function(t){return new Nw(this.data.ee(t))},e.prototype.add=function(t){return this.copy(this.data.remove(t).zt(t,!0))},e.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},e.prototype.et=function(){return this.data.et()},e.prototype.Pe=function(t){var n=this;return n.size<t.size&&(n=t,t=this),t.forEach(function(r){n=n.add(r)}),n},e.prototype.isEqual=function(t){if(!(t instanceof e)||this.size!==t.size)return!1;for(var n=this.data.te(),r=t.data.te();n.ce();){var o=n.oe().key,u=r.oe().key;if(this.H(o,u)!==0)return!1}return!0},e.prototype.it=function(){var t=[];return this.forEach(function(n){t.push(n)}),t},e.prototype.toString=function(){var t=[];return this.forEach(function(n){return t.push(n)}),"SortedSet("+t.toString()+")"},e.prototype.copy=function(t){var n=new e(this.H);return n.data=t,n},e}(),Nw=function(){function e(t){this.ye=t}return e.prototype.oe=function(){return this.ye.oe().key},e.prototype.ce=function(){return this.ye.ce()},e}(),mO=new pe(H.H);function Cr(){return mO}function Cc(){return Cr()}var _O=new pe(H.H);function ou(){return _O}var wO=new pe(H.H);function bO(){return wO}var EO=new $t(H.H);function St(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=EO,r=0,o=e;r<o.length;r++){var u=o[r];n=n.add(u)}return n}var IO=new $t(at);function oh(){return IO}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var RE=function(){function e(t){this.H=t?function(n,r){return t(n,r)||H.H(n.key,r.key)}:function(n,r){return H.H(n.key,r.key)},this.ge=ou(),this.Ve=new pe(this.H)}return e.pe=function(t){return new e(t.H)},e.prototype.has=function(t){return this.ge.get(t)!=null},e.prototype.get=function(t){return this.ge.get(t)},e.prototype.first=function(){return this.Ve.Jt()},e.prototype.last=function(){return this.Ve.Yt()},e.prototype.et=function(){return this.Ve.et()},e.prototype.indexOf=function(t){var n=this.ge.get(t);return n?this.Ve.indexOf(n):-1},Object.defineProperty(e.prototype,"size",{get:function(){return this.Ve.size},enumerable:!1,configurable:!0}),e.prototype.forEach=function(t){this.Ve.Xt(function(n,r){return t(n),!1})},e.prototype.add=function(t){var n=this.delete(t.key);return n.copy(n.ge.zt(t.key,t),n.Ve.zt(t,null))},e.prototype.delete=function(t){var n=this.get(t);return n?this.copy(this.ge.remove(t),this.Ve.remove(n)):this},e.prototype.isEqual=function(t){if(!(t instanceof e)||this.size!==t.size)return!1;for(var n=this.Ve.te(),r=t.Ve.te();n.ce();){var o=n.oe().key,u=r.oe().key;if(!o.isEqual(u))return!1}return!0},e.prototype.toString=function(){var t=[];return this.forEach(function(n){t.push(n.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`},e.prototype.copy=function(t,n){var r=new e;return r.H=this.H,r.ge=t,r.Ve=n,r},e}(),Aw=function(){function e(){this.be=new pe(H.H)}return e.prototype.track=function(t){var n=t.doc.key,r=this.be.get(n);r?t.type!==0&&r.type===3?this.be=this.be.zt(n,t):t.type===3&&r.type!==1?this.be=this.be.zt(n,{type:r.type,doc:t.doc}):t.type===2&&r.type===2?this.be=this.be.zt(n,{type:2,doc:t.doc}):t.type===2&&r.type===0?this.be=this.be.zt(n,{type:0,doc:t.doc}):t.type===1&&r.type===0?this.be=this.be.remove(n):t.type===1&&r.type===2?this.be=this.be.zt(n,{type:1,doc:r.doc}):t.type===0&&r.type===1?this.be=this.be.zt(n,{type:2,doc:t.doc}):W():this.be=this.be.zt(n,t)},e.prototype.ve=function(){var t=[];return this.be.Xt(function(n,r){t.push(r)}),t},e}(),Rc=function(){function e(t,n,r,o,u,a,h,l){this.query=t,this.docs=n,this.Se=r,this.docChanges=o,this.De=u,this.fromCache=a,this.Ce=h,this.xe=l}return e.Ne=function(t,n,r,o){var u=[];return n.forEach(function(a){u.push({type:0,doc:a})}),new e(t,n,RE.pe(n),u,r,o,!0,!1)},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return!this.De.et()},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.Ce===t.Ce&&this.De.isEqual(t.De)&&Pu(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.Se.isEqual(t.Se)))return!1;var n=this.docChanges,r=t.docChanges;if(n.length!==r.length)return!1;for(var o=0;o<n.length;o++)if(n[o].type!==r[o].type||!n[o].doc.isEqual(r[o].doc))return!1;return!0},e}(),hv=function(){function e(t,n,r,o,u){this.Ot=t,this.$e=n,this.Fe=r,this.Oe=o,this.ke=u}return e.Me=function(t,n){var r=new Map;return r.set(t,lv.Le(t,n)),new e(st.min(),r,oh(),Cr(),St())},e}(),lv=function(){function e(t,n,r,o,u){this.resumeToken=t,this.Be=n,this.qe=r,this.Ue=o,this.Qe=u}return e.Le=function(t,n){return new e(Le.T,n,St(),St(),St())},e}(),uc=function(e,t,n,r){this.Ke=e,this.removedTargetIds=t,this.key=n,this.We=r},OE=function(e,t){this.targetId=e,this.je=t},kE=function(e,t,n,r){n===void 0&&(n=Le.T),r===void 0&&(r=null),this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r},Cw=function(){function e(){this.Ge=0,this.ze=Ow(),this.He=Le.T,this.Je=!1,this.Ye=!0}return Object.defineProperty(e.prototype,"Be",{get:function(){return this.Je},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"resumeToken",{get:function(){return this.He},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Xe",{get:function(){return this.Ge!==0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Ze",{get:function(){return this.Ye},enumerable:!1,configurable:!0}),e.prototype.tn=function(t){t.l()>0&&(this.Ye=!0,this.He=t)},e.prototype.en=function(){var t=St(),n=St(),r=St();return this.ze.forEach(function(o,u){switch(u){case 0:t=t.add(o);break;case 2:n=n.add(o);break;case 1:r=r.add(o);break;default:W()}}),new lv(this.He,this.Je,t,n,r)},e.prototype.nn=function(){this.Ye=!1,this.ze=Ow()},e.prototype.sn=function(t,n){this.Ye=!0,this.ze=this.ze.zt(t,n)},e.prototype.rn=function(t){this.Ye=!0,this.ze=this.ze.remove(t)},e.prototype.on=function(){this.Ge+=1},e.prototype.cn=function(){this.Ge-=1},e.prototype.an=function(){this.Ye=!0,this.Je=!0},e}(),TO=function(){function e(t){this.un=t,this.hn=new Map,this.ln=Cr(),this._n=Rw(),this.fn=new $t(at)}return e.prototype.dn=function(t){for(var n=0,r=t.Ke;n<r.length;n++){var o=r[n];t.We instanceof It?this.wn(o,t.We):t.We instanceof ee&&this.En(o,t.key,t.We)}for(var u=0,a=t.removedTargetIds;u<a.length;u++)o=a[u],this.En(o,t.key,t.We)},e.prototype.Tn=function(t){var n=this;this.In(t,function(r){var o=n.mn(r);switch(t.state){case 0:n.An(r)&&o.tn(t.resumeToken);break;case 1:o.cn(),o.Xe||o.nn(),o.tn(t.resumeToken);break;case 2:o.cn(),o.Xe||n.removeTarget(r);break;case 3:n.An(r)&&(o.an(),o.tn(t.resumeToken));break;case 4:n.An(r)&&(n.Rn(r),o.tn(t.resumeToken));break;default:W()}})},e.prototype.In=function(t,n){var r=this;t.targetIds.length>0?t.targetIds.forEach(n):this.hn.forEach(function(o,u){r.An(u)&&n(u)})},e.prototype.Pn=function(t){var n=t.targetId,r=t.je.count,o=this.yn(n);if(o){var u=o.target;if(Sc(u))if(r===0){var a=new H(u.path);this.En(n,a,new ee(a,st.min()))}else Y(r===1);else this.gn(n)!==r&&(this.Rn(n),this.fn=this.fn.add(n))}},e.prototype.Vn=function(t){var n=this,r=new Map;this.hn.forEach(function(a,h){var l=n.yn(h);if(l){if(a.Be&&Sc(l.target)){var p=new H(l.target.path);n.ln.get(p)!==null||n.pn(h,p)||n.En(h,p,new ee(p,t))}a.Ze&&(r.set(h,a.en()),a.nn())}});var o=St();this._n.forEach(function(a,h){var l=!0;h.Ae(function(p){var v=n.yn(p);return!v||v.Ft===2||(l=!1,!1)}),l&&(o=o.add(a))});var u=new hv(t,r,this.fn,this.ln,o);return this.ln=Cr(),this._n=Rw(),this.fn=new $t(at),u},e.prototype.wn=function(t,n){if(this.An(t)){var r=this.pn(t,n.key)?2:0;this.mn(t).sn(n.key,r),this.ln=this.ln.zt(n.key,n),this._n=this._n.zt(n.key,this.bn(n.key).add(t))}},e.prototype.En=function(t,n,r){if(this.An(t)){var o=this.mn(t);this.pn(t,n)?o.sn(n,1):o.rn(n),this._n=this._n.zt(n,this.bn(n).delete(t)),r&&(this.ln=this.ln.zt(n,r))}},e.prototype.removeTarget=function(t){this.hn.delete(t)},e.prototype.gn=function(t){var n=this.mn(t).en();return this.un.vn(t).size+n.qe.size-n.Qe.size},e.prototype.on=function(t){this.mn(t).on()},e.prototype.mn=function(t){var n=this.hn.get(t);return n||(n=new Cw,this.hn.set(t,n)),n},e.prototype.bn=function(t){var n=this._n.get(t);return n||(n=new $t(at),this._n=this._n.zt(t,n)),n},e.prototype.An=function(t){var n=this.yn(t)!==null;return n||V("WatchChangeAggregator","Detected inactive target",t),n},e.prototype.yn=function(t){var n=this.hn.get(t);return n&&n.Xe?null:this.un.Sn(t)},e.prototype.Rn=function(t){var n=this;this.hn.set(t,new Cw),this.un.vn(t).forEach(function(r){n.En(t,r,null)})},e.prototype.pn=function(t,n){return this.un.vn(t).has(n)},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rw(){return new pe(H.H)}function Ow(){return new pe(H.H)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var SO={asc:"ASCENDING",desc:"DESCENDING"},NO={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},AO=function(e,t){this.t=e,this.Bt=t};function su(e,t){return e.Bt?new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+t.nanoseconds).slice(-9)+"Z":{seconds:""+t.seconds,nanos:t.nanoseconds}}function DE(e,t){return e.Bt?t.toBase64():t.toUint8Array()}function CO(e,t){return su(e,t.j())}function Ie(e){return Y(!!e),st.K(function(t){var n=Sr(t);return new Pe(n.seconds,n.nanos)}(e))}function fv(e,t){return function(n){return new vt(["projects",n.projectId,"databases",n.database])}(e).child("documents").child(t).rt()}function PE(e){var t=vt.ot(e);return Y(jE(t)),t}function uu(e,t){return fv(e.t,t.path)}function zn(e,t){var n=PE(t);if(n.get(1)!==e.t.projectId)throw new D(N.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.t.projectId);if(n.get(3)!==e.t.database)throw new D(N.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.t.database);return new H(LE(n))}function Jp(e,t){return fv(e.t,t)}function xE(e){var t=PE(e);return t.length===4?vt.ct():LE(t)}function au(e){return new vt(["projects",e.t.projectId,"databases",e.t.database]).rt()}function LE(e){return Y(e.length>4&&e.get(4)==="documents"),e.Y(5)}function kw(e,t,n){return{name:uu(e,t),fields:n.proto.mapValue.fields}}function RO(e,t,n){var r=zn(e,t.name),o=Ie(t.updateTime),u=new Ar({mapValue:{fields:t.fields}});return new It(r,o,u,{hasCommittedMutations:!!n})}function Oc(e,t){var n;if(t instanceof Mu)n={update:kw(e,t.key,t.value)};else if(t instanceof Fu)n={delete:uu(e,t.key)};else if(t instanceof xr)n={update:kw(e,t.key,t.data),updateMask:xO(t.Gt)};else{if(!(t instanceof cv))return W();n={verify:uu(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(function(r){return function(o,u){var a=u.transform;if(a instanceof No)return{fieldPath:u.field.rt(),setToServerValue:"REQUEST_TIME"};if(a instanceof Ei)return{fieldPath:u.field.rt(),appendMissingElements:{values:a.elements}};if(a instanceof Ii)return{fieldPath:u.field.rt(),removeAllFromArray:{values:a.elements}};if(a instanceof Ao)return{fieldPath:u.field.rt(),increment:a.Ut};throw W()}(0,r)})),t.jt.Wt||(n.currentDocument=function(r,o){return o.updateTime!==void 0?{updateTime:CO(r,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:W()}(e,t.jt)),n}function Dw(e,t){var n=t.currentDocument?function(p){return p.updateTime!==void 0?ce.updateTime(Ie(p.updateTime)):p.exists!==void 0?ce.exists(p.exists):ce.Kt()}(t.currentDocument):ce.Kt(),r=t.updateTransforms?t.updateTransforms.map(function(p){return function(v,g){var m=null;if("setToServerValue"in g)Y(g.setToServerValue==="REQUEST_TIME"),m=new No;else if("appendMissingElements"in g){var w=g.appendMissingElements.values||[];m=new Ei(w)}else if("removeAllFromArray"in g){var b=g.removeAllFromArray.values||[];m=new Ii(b)}else"increment"in g?m=new Ao(v,g.increment):W();var I=_n.lt(g.fieldPath);return new Lu(I,m)}(e,p)}):[];if(t.update){t.update.name;var o=zn(e,t.update.name),u=new Ar({mapValue:{fields:t.update.fields}});if(t.updateMask){var a=function(p){var v=p.fieldPaths||[];return new Eo(v.map(function(g){return _n.lt(g)}))}(t.updateMask);return new xr(o,u,a,n,r)}return new Mu(o,u,n,r)}if(t.delete){var h=zn(e,t.delete);return new Fu(h,n)}if(t.verify){var l=zn(e,t.verify);return new cv(l,n)}return W()}function ME(e,t){return{documents:[Jp(e,t.path)]}}function FE(e,t){var n={structuredQuery:{}},r=t.path;t.collectionGroup!==null?(n.parent=Jp(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=Jp(e,r.X()),n.structuredQuery.from=[{collectionId:r.tt()}]);var o=function(h){if(h.length!==0){var l=h.map(function(p){return function(v){if(v.op==="=="){if(gw(v.value))return{unaryFilter:{field:so(v.field),op:"IS_NAN"}};if(yw(v.value))return{unaryFilter:{field:so(v.field),op:"IS_NULL"}}}else if(v.op==="!="){if(gw(v.value))return{unaryFilter:{field:so(v.field),op:"IS_NOT_NAN"}};if(yw(v.value))return{unaryFilter:{field:so(v.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:so(v.field),op:kO(v.op),value:v.value}}}(p)});return l.length===1?l[0]:{compositeFilter:{op:"AND",filters:l}}}}(t.filters);o&&(n.structuredQuery.where=o);var u=function(h){if(h.length!==0)return h.map(function(l){return function(p){return{field:so(p.field),direction:OO(p.dir)}}(l)})}(t.orderBy);u&&(n.structuredQuery.orderBy=u);var a=function(h,l){return h.Bt||Ni(l)?l:{value:l}}(e,t.limit);return a!==null&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=Pw(t.startAt)),t.endAt&&(n.structuredQuery.endAt=Pw(t.endAt)),n}function VE(e){var t=xE(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,o=null;if(r>0){Y(r===1);var u=n.from[0];u.allDescendants?o=u.collectionId:t=t.child(u.collectionId)}var a=[];n.where&&(a=UE(n.where));var h=[];n.orderBy&&(h=n.orderBy.map(function(g){return function(m){return new mo(vo(m.field),function(w){switch(w){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(m.direction))}(g)}));var l=null;n.limit&&(l=function(g){var m;return Ni(m=typeof g=="object"?g.value:g)?null:m}(n.limit));var p=null;n.startAt&&(p=xw(n.startAt));var v=null;return n.endAt&&(v=xw(n.endAt)),vE(t,o,h,a,l,"F",p,v)}function UE(e){return e?e.unaryFilter!==void 0?[PO(e)]:e.fieldFilter!==void 0?[DO(e)]:e.compositeFilter!==void 0?e.compositeFilter.filters.map(function(t){return UE(t)}).reduce(function(t,n){return t.concat(n)}):W():[]}function Pw(e){return{before:e.before,values:e.position}}function xw(e){var t=!!e.before,n=e.values||[];return new iu(n,t)}function OO(e){return SO[e]}function kO(e){return NO[e]}function so(e){return{fieldPath:e.rt()}}function vo(e){return _n.lt(e.fieldPath)}function DO(e){return ze.create(vo(e.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return W()}}(e.fieldFilter.op),e.fieldFilter.value)}function PO(e){switch(e.unaryFilter.op){case"IS_NAN":var t=vo(e.unaryFilter.field);return ze.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=vo(e.unaryFilter.field);return ze.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=vo(e.unaryFilter.field);return ze.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var o=vo(e.unaryFilter.field);return ze.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return W()}}function xO(e){var t=[];return e.fields.forEach(function(n){return t.push(n.rt())}),{fieldPaths:t}}function jE(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $e=function(){var e=this;this.promise=new Promise(function(t,n){e.resolve=t,e.reject=n})},x=function(){function e(t){var n=this;this.Dn=null,this.Cn=null,this.result=void 0,this.error=void 0,this.xn=!1,this.Nn=!1,t(function(r){n.xn=!0,n.result=r,n.Dn&&n.Dn(r)},function(r){n.xn=!0,n.error=r,n.Cn&&n.Cn(r)})}return e.prototype.catch=function(t){return this.next(void 0,t)},e.prototype.next=function(t,n){var r=this;return this.Nn&&W(),this.Nn=!0,this.xn?this.error?this.$n(n,this.error):this.Fn(t,this.result):new e(function(o,u){r.Dn=function(a){r.Fn(t,a).next(o,u)},r.Cn=function(a){r.$n(n,a).next(o,u)}})},e.prototype.On=function(){var t=this;return new Promise(function(n,r){t.next(n,r)})},e.prototype.kn=function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(r){return e.reject(r)}},e.prototype.Fn=function(t,n){return t?this.kn(function(){return t(n)}):e.resolve(n)},e.prototype.$n=function(t,n){return t?this.kn(function(){return t(n)}):e.reject(n)},e.resolve=function(t){return new e(function(n,r){n(t)})},e.reject=function(t){return new e(function(n,r){r(t)})},e.Mn=function(t){return new e(function(n,r){var o=0,u=0,a=!1;t.forEach(function(h){++o,h.next(function(){++u,a&&u===o&&n()},function(l){return r(l)})}),a=!0,u===o&&n()})},e.Ln=function(t){for(var n=e.resolve(!1),r=function(a){n=n.next(function(h){return h?e.resolve(h):a()})},o=0,u=t;o<u.length;o++)r(u[o]);return n},e.forEach=function(t,n){var r=this,o=[];return t.forEach(function(u,a){o.push(n.call(r,u,a))}),this.Mn(o)},e}(),BE=function(){function e(t,n){var r=this;this.action=t,this.transaction=n,this.aborted=!1,this.Bn=new $e,this.transaction.oncomplete=function(){r.Bn.resolve()},this.transaction.onabort=function(){n.error?r.Bn.reject(new zs(t,n.error)):r.Bn.resolve()},this.transaction.onerror=function(o){var u=pv(o.target.error);r.Bn.reject(new zs(t,u))}}return e.open=function(t,n,r,o){try{return new e(n,t.transaction(o,r))}catch(u){throw new zs(n,u)}},Object.defineProperty(e.prototype,"qn",{get:function(){return this.Bn.promise},enumerable:!1,configurable:!0}),e.prototype.abort=function(t){t&&this.Bn.reject(t),this.aborted||(V("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},e.prototype.store=function(t){var n=this.transaction.objectStore(t);return new MO(n)},e}(),Co=function(){function e(t,n,r){this.name=t,this.version=n,this.Un=r,e.Qn(mi())===12.2&&Gt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return e.delete=function(t){return V("SimpleDb","Removing database:",t),ui(window.indexedDB.deleteDatabase(t)).On()},e.Kn=function(){if(typeof indexedDB>"u")return!1;if(e.Wn())return!0;var t=mi(),n=e.Qn(t),r=0<n&&n<10,o=e.jn(t),u=0<o&&o<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||u)},e.Wn=function(){var t;return typeof process<"u"&&((t=process.env)===null||t===void 0?void 0:t.Gn)==="YES"},e.zn=function(t,n){return t.store(n)},e.Qn=function(t){var n=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)},e.jn=function(t){var n=t.match(/Android ([\d.]+)/i),r=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(r)},e.prototype.Hn=function(t){return k(this,void 0,void 0,function(){var n,r=this;return R(this,function(o){switch(o.label){case 0:return this.db?[3,2]:(V("SimpleDb","Opening database:",this.name),n=this,[4,new Promise(function(u,a){var h=indexedDB.open(r.name,r.version);h.onsuccess=function(l){var p=l.target.result;u(p)},h.onblocked=function(){a(new zs(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},h.onerror=function(l){var p=l.target.error;p.name==="VersionError"?a(new D(N.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):a(new zs(t,p))},h.onupgradeneeded=function(l){V("SimpleDb",'Database "'+r.name+'" requires upgrade from version:',l.oldVersion);var p=l.target.result;r.Un.Jn(p,h.transaction,l.oldVersion,r.version).next(function(){V("SimpleDb","Database upgrade to version "+r.version+" complete")})}})]);case 1:n.db=o.sent(),o.label=2;case 2:return[2,(this.Yn&&(this.db.onversionchange=function(u){return r.Yn(u)}),this.db)]}})})},e.prototype.Xn=function(t){this.Yn=t,this.db&&(this.db.onversionchange=function(n){return t(n)})},e.prototype.runTransaction=function(t,n,r,o){return k(this,void 0,void 0,function(){var u,a,h,l,p;return R(this,function(v){switch(v.label){case 0:u=n==="readonly",a=0,h=function(){var g,m,w,b,I;return R(this,function(T){switch(T.label){case 0:++a,T.label=1;case 1:return T.trys.push([1,4,,5]),[4,l.Hn(t)];case 2:return l.db=T.sent(),g=BE.open(l.db,t,u?"readonly":"readwrite",r),m=o(g).catch(function(C){return g.abort(C),x.reject(C)}).On(),w={},m.catch(function(){}),[4,g.qn];case 3:return[2,(w.value=(T.sent(),m),w)];case 4:return b=T.sent(),I=b.name!=="FirebaseError"&&a<3,V("SimpleDb","Transaction failed with error:",b.message,"Retrying:",I),l.close(),I?[3,5]:[2,{value:Promise.reject(b)}];case 5:return[2]}})},l=this,v.label=1;case 1:return[5,h()];case 2:if(typeof(p=v.sent())=="object")return[2,p.value];v.label=3;case 3:return[3,1];case 4:return[2]}})})},e.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},e}(),LO=function(){function e(t){this.Zn=t,this.ts=!1,this.es=null}return Object.defineProperty(e.prototype,"xn",{get:function(){return this.ts},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ns",{get:function(){return this.es},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"cursor",{set:function(t){this.Zn=t},enumerable:!1,configurable:!0}),e.prototype.done=function(){this.ts=!0},e.prototype.ss=function(t){this.es=t},e.prototype.delete=function(){return ui(this.Zn.delete())},e}(),zs=function(e){function t(n,r){var o=this;return(o=e.call(this,N.UNAVAILABLE,"IndexedDB transaction '"+n+"' failed: "+r)||this).name="IndexedDbTransactionError",o}return U(t,e),t}(D);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ai(e){return e.name==="IndexedDbTransactionError"}var MO=function(){function e(t){this.store=t}return e.prototype.put=function(t,n){var r;return n!==void 0?(V("SimpleDb","PUT",this.store.name,t,n),r=this.store.put(n,t)):(V("SimpleDb","PUT",this.store.name,"<auto-key>",t),r=this.store.put(t)),ui(r)},e.prototype.add=function(t){return V("SimpleDb","ADD",this.store.name,t,t),ui(this.store.add(t))},e.prototype.get=function(t){var n=this;return ui(this.store.get(t)).next(function(r){return r===void 0&&(r=null),V("SimpleDb","GET",n.store.name,t,r),r})},e.prototype.delete=function(t){return V("SimpleDb","DELETE",this.store.name,t),ui(this.store.delete(t))},e.prototype.count=function(){return V("SimpleDb","COUNT",this.store.name),ui(this.store.count())},e.prototype.rs=function(t,n){var r=this.cursor(this.options(t,n)),o=[];return this.os(r,function(u,a){o.push(a)}).next(function(){return o})},e.prototype.cs=function(t,n){V("SimpleDb","DELETE ALL",this.store.name);var r=this.options(t,n);r.us=!1;var o=this.cursor(r);return this.os(o,function(u,a,h){return h.delete()})},e.prototype.hs=function(t,n){var r;n?r=t:(r={},n=t);var o=this.cursor(r);return this.os(o,n)},e.prototype.ls=function(t){var n=this.cursor({});return new x(function(r,o){n.onerror=function(u){var a=pv(u.target.error);o(a)},n.onsuccess=function(u){var a=u.target.result;a?t(a.primaryKey,a.value).next(function(h){h?a.continue():r()}):r()}})},e.prototype.os=function(t,n){var r=[];return new x(function(o,u){t.onerror=function(a){u(a.target.error)},t.onsuccess=function(a){var h=a.target.result;if(h){var l=new LO(h),p=n(h.primaryKey,h.value,l);if(p instanceof x){var v=p.catch(function(g){return l.done(),x.reject(g)});r.push(v)}l.xn?o():l.ns===null?h.continue():h.continue(l.ns)}else o()}}).next(function(){return x.Mn(r)})},e.prototype.options=function(t,n){var r;return t!==void 0&&(typeof t=="string"?r=t:n=t),{index:r,range:n}},e.prototype.cursor=function(t){var n="next";if(t.reverse&&(n="prev"),t.index){var r=this.store.index(t.index);return t.us?r.openKeyCursor(t.range,n):r.openCursor(t.range,n)}return this.store.openCursor(t.range,n)},e}();function ui(e){return new x(function(t,n){e.onsuccess=function(r){var o=r.target.result;t(o)},e.onerror=function(r){var o=pv(r.target.error);n(o)}})}var Lw=!1;function pv(e){var t=Co.Qn(mi());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new D("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return Lw||(Lw=!0,setTimeout(function(){throw r},0)),r}}return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var FO=function(){function e(t,n,r,o,u){this._s=t,this.fs=n,this.ds=r,this.op=o,this.ws=u,this.Es=new $e,this.then=this.Es.promise.then.bind(this.Es.promise),this.Es.promise.catch(function(a){})}return e.Ts=function(t,n,r,o,u){var a=new e(t,n,Date.now()+r,o,u);return a.start(r),a},e.prototype.start=function(t){var n=this;this.Is=setTimeout(function(){return n.As()},t)},e.prototype.Rs=function(){return this.As()},e.prototype.cancel=function(t){this.Is!==null&&(this.clearTimeout(),this.Es.reject(new D(N.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},e.prototype.As=function(){var t=this;this._s.Ps(function(){return t.Is!==null?(t.clearTimeout(),t.op().then(function(n){return t.Es.resolve(n)})):Promise.resolve()})},e.prototype.clearTimeout=function(){this.Is!==null&&(this.ws(this),clearTimeout(this.Is),this.Is=null)},e}();function Ho(e,t){if(Gt("AsyncQueue",t+": "+e),Ai(e))return new D(N.UNAVAILABLE,t+": "+e);throw e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qE="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",WE=function(){function e(){this.ys=[]}return e.prototype.gs=function(t){this.ys.push(t)},e.prototype.Vs=function(){this.ys.forEach(function(t){return t()})},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mn(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=Mw(t)),t=VO(e.get(n),t);return Mw(t)}function VO(e,t){for(var n=t,r=e.length,o=0;o<r;o++){var u=e.charAt(o);switch(u){case"\0":n+="";break;case"":n+="";break;default:n+=u}}return n}function Mw(e){return e+""}function Wn(e){var t=e.length;if(Y(t>=2),t===2)return Y(e.charAt(0)===""&&e.charAt(1)===""),vt.ct();for(var n=t-2,r=[],o="",u=0;u<t;){var a=e.indexOf("",u);switch((a<0||a>n)&&W(),e.charAt(a+1)){case"":var h=e.substring(u,a),l=void 0;o.length===0?l=h:(l=o+=h,o=""),r.push(l);break;case"":o+=e.substring(u,a),o+="\0";break;case"":o+=e.substring(u,a+1);break;default:W()}u=a+2}return new vt(r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var UO=function(e,t){this.seconds=e,this.nanoseconds=t},Be=function(e,t,n){this.ownerId=e,this.allowTabSynchronization=t,this.leaseTimestampMs=n};Be.store="owner",Be.key="owner";var br=function(e,t,n){this.userId=e,this.lastAcknowledgedBatchId=t,this.lastStreamToken=n};br.store="mutationQueues",br.keyPath="userId";var Nt=function(e,t,n,r,o){this.userId=e,this.batchId=t,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=o};Nt.store="mutations",Nt.keyPath="batchId",Nt.userMutationsIndex="userMutationsIndex",Nt.userMutationsKeyPath=["userId","batchId"];var se=function(){function e(){}return e.prefixForUser=function(t){return[t]},e.prefixForPath=function(t,n){return[t,mn(n)]},e.key=function(t,n,r){return[t,mn(n),r]},e}();se.store="documentMutations",se.PLACEHOLDER=new se;var jO=function(e,t){this.path=e,this.readTime=t},BO=function(e,t){this.path=e,this.version=t},Mt=function(e,t,n,r,o,u){this.unknownDocument=e,this.noDocument=t,this.document=n,this.hasCommittedMutations=r,this.readTime=o,this.parentPath=u};Mt.store="remoteDocuments",Mt.readTimeIndex="readTimeIndex",Mt.readTimeIndexPath="readTime",Mt.collectionReadTimeIndex="collectionReadTimeIndex",Mt.collectionReadTimeIndexPath=["parentPath","readTime"];var On=function(e){this.byteSize=e};On.store="remoteDocumentGlobal",On.key="remoteDocumentGlobalKey";var De=function(e,t,n,r,o,u,a){this.targetId=e,this.canonicalId=t,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=o,this.lastLimboFreeSnapshotVersion=u,this.query=a};De.store="targets",De.keyPath="targetId",De.queryTargetsIndexName="queryTargetsIndex",De.queryTargetsKeyPath=["canonicalId","targetId"];var ie=function(e,t,n){this.targetId=e,this.path=t,this.sequenceNumber=n};ie.store="targetDocuments",ie.keyPath=["targetId","path"],ie.documentTargetsIndex="documentTargetsIndex",ie.documentTargetsKeyPath=["path","targetId"];var We=function(e,t,n,r){this.highestTargetId=e,this.highestListenSequenceNumber=t,this.lastRemoteSnapshotVersion=n,this.targetCount=r};We.key="targetGlobalKey",We.store="targetGlobal";var pi=function(e,t){this.collectionId=e,this.parent=t};pi.store="collectionParents",pi.keyPath=["collectionId","parent"];var Qn=function(e,t,n,r){this.clientId=e,this.updateTimeMs=t,this.networkEnabled=n,this.inForeground=r};Qn.store="clientMetadata",Qn.keyPath="clientId";var Ro=function(e,t,n){this.bundleId=e,this.createTime=t,this.version=n};Ro.store="bundles",Ro.keyPath="bundleId";var Oo=function(e,t,n){this.name=e,this.readTime=t,this.bundledQuery=n};Oo.store="namedQueries",Oo.keyPath="name";var qO=ae(ae(ae(ae([br.store,Nt.store,se.store,Mt.store,De.store,Be.store,We.store,ie.store],[Qn.store]),[On.store]),[pi.store]),[Ro.store,Oo.store]),Fw=function(e){function t(n,r){var o=this;return(o=e.call(this)||this).ps=n,o.bs=r,o}return U(t,e),t}(WE);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Me(e,t){var n=j(e);return Co.zn(n.ps,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var dv=function(){function e(t,n,r,o){this.batchId=t,this.vs=n,this.baseMutations=r,this.mutations=o}return e.prototype.Ss=function(t,n,r){for(var o=r.Ds,u=0;u<this.mutations.length;u++){var a=this.mutations[u];a.key.isEqual(t)&&(n=vO(a,n,o[u]))}return n},e.prototype.Cs=function(t,n){for(var r=0,o=this.baseMutations;r<o.length;r++)(h=o[r]).key.isEqual(t)&&(n=Xp(h,n,this.vs));for(var u=0,a=this.mutations;u<a.length;u++){var h;(h=a[u]).key.isEqual(t)&&(n=Xp(h,n,this.vs))}return n},e.prototype.xs=function(t){var n=this,r=t;return this.mutations.forEach(function(o){var u=n.Cs(o.key,t.get(o.key));u&&(r=r.zt(o.key,u))}),r},e.prototype.keys=function(){return this.mutations.reduce(function(t,n){return t.add(n.key)},St())},e.prototype.isEqual=function(t){return this.batchId===t.batchId&&bo(this.mutations,t.mutations,function(n,r){return Ew(n,r)})&&bo(this.baseMutations,t.baseMutations,function(n,r){return Ew(n,r)})},e}(),WO=function(){function e(t,n,r,o){this.batch=t,this.Ns=n,this.Ds=r,this.$s=o}return e.from=function(t,n,r){Y(t.mutations.length===r.length);for(var o=bO(),u=t.mutations,a=0;a<u.length;a++)o=o.zt(u[a].key,r[a].version);return new e(t,n,r,o)},e}(),GE=function(e){this.Fs=e};function Zp(e,t){if(t.document)return RO(e.Fs,t.document,!!t.hasCommittedMutations);if(t.noDocument){var n=H.Et(t.noDocument.path),r=Do(t.noDocument.readTime);return new ee(n,r,{hasCommittedMutations:!!t.hasCommittedMutations})}if(t.unknownDocument){var o=H.Et(t.unknownDocument.path);return r=Do(t.unknownDocument.version),new iv(o,r)}return W()}function Vw(e,t,n){var r=vv(n),o=t.key.path.X().it();if(t instanceof It){var u=function(g,m){return{name:uu(g,m.key),fields:m.bt().mapValue.fields,updateTime:su(g,m.version.j())}}(e.Fs,t),a=t.hasCommittedMutations;return new Mt(null,null,u,a,r,o)}if(t instanceof ee){var h=t.key.path.it(),l=ko(t.version);return a=t.hasCommittedMutations,new Mt(null,new jO(h,l),null,a,r,o)}if(t instanceof iv){var p=t.key.path.it(),v=ko(t.version);return new Mt(new BO(p,v),null,null,!0,r,o)}return W()}function vv(e){var t=e.j();return[t.seconds,t.nanoseconds]}function HE(e){var t=new Pe(e[0],e[1]);return st.K(t)}function ko(e){var t=e.j();return new UO(t.seconds,t.nanoseconds)}function Do(e){var t=new Pe(e.seconds,e.nanoseconds);return st.K(t)}function lo(e,t){for(var n=(t.baseMutations||[]).map(function(l){return Dw(e.Fs,l)}),r=0;r<t.mutations.length-1;++r){var o=t.mutations[r];if(r+1<t.mutations.length&&t.mutations[r+1].transform!==void 0){var u=t.mutations[r+1];o.updateTransforms=u.transform.fieldTransforms,t.mutations.splice(r+1,1),++r}}var a=t.mutations.map(function(l){return Dw(e.Fs,l)}),h=Pe.fromMillis(t.localWriteTimeMs);return new dv(t.batchId,h,n,a)}function Ws(e){var t,n,r=Do(e.readTime),o=e.lastLimboFreeSnapshotVersion!==void 0?Do(e.lastLimboFreeSnapshotVersion):st.min();return e.query.documents!==void 0?(Y((n=e.query).documents.length===1),t=xn(Du(xE(n.documents[0])))):t=function(u){return xn(VE(u))}(e.query),new nh(t,e.targetId,0,e.lastListenSequenceNumber,r,o,Le.fromBase64String(e.resumeToken))}function zE(e,t){var n,r=ko(t.Ot),o=ko(t.lastLimboFreeSnapshotVersion);n=Sc(t.target)?ME(e.Fs,t.target):FE(e.Fs,t.target);var u=t.resumeToken.toBase64();return new De(t.targetId,ku(t.target),r,u,t.sequenceNumber,o,n)}function QE(e){var t=VE({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?yE(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var GO=function(){function e(){}return e.prototype.Os=function(t,n){return Uw(t).get(n).next(function(r){if(r)return{id:(o=r).bundleId,createTime:Do(o.createTime),version:o.version};var o})},e.prototype.ks=function(t,n){return Uw(t).put({bundleId:(r=n).id,createTime:ko(Ie(r.createTime)),version:r.version});var r},e.prototype.Ms=function(t,n){return jw(t).get(n).next(function(r){if(r)return{name:(o=r).name,query:QE(o.bundledQuery),readTime:Do(o.readTime)};var o})},e.prototype.Ls=function(t,n){return jw(t).put(function(r){return{name:r.name,readTime:ko(Ie(r.readTime)),bundledQuery:r.bundledQuery}}(n))},e}();function Uw(e){return Me(e,Ro.store)}function jw(e){return Me(e,Oo.store)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var HO=function(){function e(){this.Bs=new yv}return e.prototype.qs=function(t,n){return this.Bs.add(n),x.resolve()},e.prototype.Us=function(t,n){return x.resolve(this.Bs.getEntries(n))},e}(),yv=function(){function e(){this.index={}}return e.prototype.add=function(t){var n=t.tt(),r=t.X(),o=this.index[n]||new $t(vt.H),u=!o.has(r);return this.index[n]=o.add(r),u},e.prototype.has=function(t){var n=t.tt(),r=t.X(),o=this.index[n];return o&&o.has(r)},e.prototype.getEntries=function(t){return(this.index[t]||new $t(vt.H)).it()},e}(),zO=function(){function e(){this.Qs=new yv}return e.prototype.qs=function(t,n){var r=this;if(!this.Qs.has(n)){var o=n.tt(),u=n.X();t.gs(function(){r.Qs.add(n)});var a={collectionId:o,parent:mn(u)};return Bw(t).put(a)}return x.resolve()},e.prototype.Us=function(t,n){var r=[],o=IDBKeyRange.bound([n,""],[aE(n),""],!1,!0);return Bw(t).rs(o).next(function(u){for(var a=0,h=u;a<h.length;a++){var l=h[a];if(l.collectionId!==n)break;r.push(Wn(l.parent))}return r})},e}();function Bw(e){return Me(e,pi.store)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qw={Ks:!1,Ws:0,js:0,Gs:0},Cn=function(){function e(t,n,r){this.zs=t,this.Hs=n,this.Js=r}return e.Ys=function(t){return new e(t,e.Xs,e.Zs)},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ci(e){return k(this,void 0,void 0,function(){return R(this,function(t){if(e.code!==N.FAILED_PRECONDITION||e.message!==qE)throw e;return V("LocalStore","Unexpectedly lost primary lease"),[2]})})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Cn.Xs=10,Cn.Zs=1e3,Cn.ti=new Cn(41943040,Cn.Xs,Cn.Zs),Cn.ei=new Cn(-1,0,0);var zo=function(){function e(t,n){this.ni=t,this.si=n,this.ii={}}return e.prototype.get=function(t){var n=this.ni(t),r=this.ii[n];if(r!==void 0)for(var o=0,u=r;o<u.length;o++){var a=u[o],h=a[0],l=a[1];if(this.si(h,t))return l}},e.prototype.has=function(t){return this.get(t)!==void 0},e.prototype.set=function(t,n){var r=this.ni(t),o=this.ii[r];if(o!==void 0){for(var u=0;u<o.length;u++)if(this.si(o[u][0],t))return void(o[u]=[t,n]);o.push([t,n])}else this.ii[r]=[[t,n]]},e.prototype.delete=function(t){var n=this.ni(t),r=this.ii[n];if(r===void 0)return!1;for(var o=0;o<r.length;o++)if(this.si(r[o][0],t))return r.length===1?delete this.ii[n]:r.splice(o,1),!0;return!1},e.prototype.forEach=function(t){Ru(this.ii,function(n,r){for(var o=0,u=r;o<u.length;o++){var a=u[o],h=a[0],l=a[1];t(h,l)}})},e.prototype.et=function(){return hE(this.ii)},e}(),KE=function(){function e(){this.ri=new zo(function(t){return t.toString()},function(t,n){return t.isEqual(n)}),this.oi=!1}return e.prototype.ci=function(t){var n=this.ri.get(t);return n?n.readTime:st.min()},e.prototype.ai=function(t,n){this.ui(),this.ri.set(t.key,{hi:t,readTime:n})},e.prototype.li=function(t,n){n===void 0&&(n=null),this.ui(),this.ri.set(t,{hi:null,readTime:n})},e.prototype._i=function(t,n){this.ui();var r=this.ri.get(n);return r!==void 0?x.resolve(r.hi):this.fi(t,n)},e.prototype.getEntries=function(t,n){return this.di(t,n)},e.prototype.apply=function(t){return this.ui(),this.oi=!0,this.wi(t)},e.prototype.ui=function(){},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YE(e,t,n){var r=e.store(Nt.store),o=e.store(se.store),u=[],a=IDBKeyRange.only(n.batchId),h=0,l=r.hs({range:a},function(b,I,T){return h++,T.delete()});u.push(l.next(function(){Y(h===1)}));for(var p=[],v=0,g=n.mutations;v<g.length;v++){var m=g[v],w=se.key(t,m.key.path,n.batchId);u.push(o.delete(w)),p.push(m.key)}return x.Mn(u).next(function(){return p})}function kc(e){var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw W();t=e.noDocument}return JSON.stringify(t).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var QO=function(){function e(t,n,r,o){this.userId=t,this.Qt=n,this.Ei=r,this.Ti=o,this.Ii={}}return e.mi=function(t,n,r,o){return Y(t.uid!==""),new e(t.m()?t.uid:"",n,r,o)},e.prototype.Ai=function(t){var n=!0,r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return hr(t).hs({index:Nt.userMutationsIndex,range:r},function(o,u,a){n=!1,a.done()}).next(function(){return n})},e.prototype.Ri=function(t,n,r,o){var u=this,a=fo(t),h=hr(t);return h.add({}).next(function(l){Y(typeof l=="number");for(var p=new dv(l,n,r,o),v=function(C,F,M){var $=M.baseMutations.map(function(P){return Oc(C.Fs,P)}),nt=M.mutations.map(function(P){return Oc(C.Fs,P)});return new Nt(F,M.batchId,M.vs.toMillis(),$,nt)}(u.Qt,u.userId,p),g=[],m=new $t(function(C,F){return at(C.rt(),F.rt())}),w=0,b=o;w<b.length;w++){var I=b[w],T=se.key(u.userId,I.key.path,l);m=m.add(I.key.path.X()),g.push(h.put(v)),g.push(a.put(T,se.PLACEHOLDER))}return m.forEach(function(C){g.push(u.Ei.qs(t,C))}),t.gs(function(){u.Ii[l]=p.keys()}),x.Mn(g).next(function(){return p})})},e.prototype.Pi=function(t,n){var r=this;return hr(t).get(n).next(function(o){return o?(Y(o.userId===r.userId),lo(r.Qt,o)):null})},e.prototype.yi=function(t,n){var r=this;return this.Ii[n]?x.resolve(this.Ii[n]):this.Pi(t,n).next(function(o){if(o){var u=o.keys();return r.Ii[n]=u,u}return null})},e.prototype.gi=function(t,n){var r=this,o=n+1,u=IDBKeyRange.lowerBound([this.userId,o]),a=null;return hr(t).hs({index:Nt.userMutationsIndex,range:u},function(h,l,p){l.userId===r.userId&&(Y(l.batchId>=o),a=lo(r.Qt,l)),p.done()}).next(function(){return a})},e.prototype.Vi=function(t){var n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),r=-1;return hr(t).hs({index:Nt.userMutationsIndex,range:n,reverse:!0},function(o,u,a){r=u.batchId,a.done()}).next(function(){return r})},e.prototype.pi=function(t){var n=this,r=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return hr(t).rs(Nt.userMutationsIndex,r).next(function(o){return o.map(function(u){return lo(n.Qt,u)})})},e.prototype.bi=function(t,n){var r=this,o=se.prefixForPath(this.userId,n.path),u=IDBKeyRange.lowerBound(o),a=[];return fo(t).hs({range:u},function(h,l,p){var v=h[0],g=h[1],m=h[2],w=Wn(g);if(v===r.userId&&n.path.isEqual(w))return hr(t).get(m).next(function(b){if(!b)throw W();Y(b.userId===r.userId),a.push(lo(r.Qt,b))});p.done()}).next(function(){return a})},e.prototype.vi=function(t,n){var r=this,o=new $t(at),u=[];return n.forEach(function(a){var h=se.prefixForPath(r.userId,a.path),l=IDBKeyRange.lowerBound(h),p=fo(t).hs({range:l},function(v,g,m){var w=v[0],b=v[1],I=v[2],T=Wn(b);w===r.userId&&a.path.isEqual(T)?o=o.add(I):m.done()});u.push(p)}),x.Mn(u).next(function(){return r.Si(t,o)})},e.prototype.Di=function(t,n){var r=this,o=n.path,u=o.length+1,a=se.prefixForPath(this.userId,o),h=IDBKeyRange.lowerBound(a),l=new $t(at);return fo(t).hs({range:h},function(p,v,g){var m=p[0],w=p[1],b=p[2],I=Wn(w);m===r.userId&&o.nt(I)?I.length===u&&(l=l.add(b)):g.done()}).next(function(){return r.Si(t,l)})},e.prototype.Si=function(t,n){var r=this,o=[],u=[];return n.forEach(function(a){u.push(hr(t).get(a).next(function(h){if(h===null)throw W();Y(h.userId===r.userId),o.push(lo(r.Qt,h))}))}),x.Mn(u).next(function(){return o})},e.prototype.Ci=function(t,n){var r=this;return YE(t.ps,this.userId,n).next(function(o){return t.gs(function(){r.xi(n.batchId)}),x.forEach(o,function(u){return r.Ti.Ni(t,u)})})},e.prototype.xi=function(t){delete this.Ii[t]},e.prototype.$i=function(t){var n=this;return this.Ai(t).next(function(r){if(!r)return x.resolve();var o=IDBKeyRange.lowerBound(se.prefixForUser(n.userId)),u=[];return fo(t).hs({range:o},function(a,h,l){if(a[0]===n.userId){var p=Wn(a[1]);u.push(p)}else l.done()}).next(function(){Y(u.length===0)})})},e.prototype.Fi=function(t,n){return $E(t,this.userId,n)},e.prototype.Oi=function(t){var n=this;return XE(t).get(this.userId).next(function(r){return r||new br(n.userId,-1,"")})},e}();function $E(e,t,n){var r=se.prefixForPath(t,n.path),o=r[1],u=IDBKeyRange.lowerBound(r),a=!1;return fo(e).hs({range:u,us:!0},function(h,l,p){var v=h[0],g=h[1];h[2],v===t&&g===o&&(a=!0),p.done()}).next(function(){return a})}function hr(e){return Me(e,Nt.store)}function fo(e){return Me(e,se.store)}function XE(e){return Me(e,br.store)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Dc=function(){function e(t){this.ki=t}return e.prototype.next=function(){return this.ki+=2,this.ki},e.Mi=function(){return new e(0)},e.Li=function(){return new e(-1)},e}(),KO=function(){function e(t,n){this.Ti=t,this.Qt=n}return e.prototype.Bi=function(t){var n=this;return this.qi(t).next(function(r){var o=new Dc(r.highestTargetId);return r.highestTargetId=o.next(),n.Ui(t,r).next(function(){return r.highestTargetId})})},e.prototype.Qi=function(t){return this.qi(t).next(function(n){return st.K(new Pe(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds))})},e.prototype.Ki=function(t){return this.qi(t).next(function(n){return n.highestListenSequenceNumber})},e.prototype.Wi=function(t,n,r){var o=this;return this.qi(t).next(function(u){return u.highestListenSequenceNumber=n,r&&(u.lastRemoteSnapshotVersion=r.j()),n>u.highestListenSequenceNumber&&(u.highestListenSequenceNumber=n),o.Ui(t,u)})},e.prototype.ji=function(t,n){var r=this;return this.Gi(t,n).next(function(){return r.qi(t).next(function(o){return o.targetCount+=1,r.zi(n,o),r.Ui(t,o)})})},e.prototype.Hi=function(t,n){return this.Gi(t,n)},e.prototype.Ji=function(t,n){var r=this;return this.Yi(t,n.targetId).next(function(){return uo(t).delete(n.targetId)}).next(function(){return r.qi(t)}).next(function(o){return Y(o.targetCount>0),o.targetCount-=1,r.Ui(t,o)})},e.prototype.Xi=function(t,n,r){var o=this,u=0,a=[];return uo(t).hs(function(h,l){var p=Ws(l);p.sequenceNumber<=n&&r.get(p.targetId)===null&&(u++,a.push(o.Ji(t,p)))}).next(function(){return x.Mn(a)}).next(function(){return u})},e.prototype.In=function(t,n){return uo(t).hs(function(r,o){var u=Ws(o);n(u)})},e.prototype.qi=function(t){return Ww(t).get(We.key).next(function(n){return Y(n!==null),n})},e.prototype.Ui=function(t,n){return Ww(t).put(We.key,n)},e.prototype.Gi=function(t,n){return uo(t).put(zE(this.Qt,n))},e.prototype.zi=function(t,n){var r=!1;return t.targetId>n.highestTargetId&&(n.highestTargetId=t.targetId,r=!0),t.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=t.sequenceNumber,r=!0),r},e.prototype.Zi=function(t){return this.qi(t).next(function(n){return n.targetCount})},e.prototype.tr=function(t,n){var r=ku(n),o=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),u=null;return uo(t).hs({range:o,index:De.queryTargetsIndexName},function(a,h,l){var p=Ws(h);eh(n,p.target)&&(u=p,l.done())}).next(function(){return u})},e.prototype.er=function(t,n,r){var o=this,u=[],a=yr(t);return n.forEach(function(h){var l=mn(h.path);u.push(a.put(new ie(r,l))),u.push(o.Ti.nr(t,r,h))}),x.Mn(u)},e.prototype.sr=function(t,n,r){var o=this,u=yr(t);return x.forEach(n,function(a){var h=mn(a.path);return x.Mn([u.delete([r,h]),o.Ti.ir(t,r,a)])})},e.prototype.Yi=function(t,n){var r=yr(t),o=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(o)},e.prototype.rr=function(t,n){var r=IDBKeyRange.bound([n],[n+1],!1,!0),o=yr(t),u=St();return o.hs({range:r,us:!0},function(a,h,l){var p=Wn(a[1]),v=new H(p);u=u.add(v)}).next(function(){return u})},e.prototype.Fi=function(t,n){var r=mn(n.path),o=IDBKeyRange.bound([r],[aE(r)],!1,!0),u=0;return yr(t).hs({index:ie.documentTargetsIndex,us:!0,range:o},function(a,h,l){var p=a[0];a[1],p!==0&&(u++,l.done())}).next(function(){return u>0})},e.prototype.Sn=function(t,n){return uo(t).get(n).next(function(r){return r?Ws(r):null})},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uo(e){return Me(e,De.store)}function Ww(e){return Me(e,We.store)}function yr(e){return Me(e,ie.store)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gw(e,t){var n=e[0],r=e[1],o=t[0],u=t[1],a=at(n,o);return a===0?at(r,u):a}var YO=function(){function e(t){this.cr=t,this.buffer=new $t(Gw),this.ar=0}return e.prototype.ur=function(){return++this.ar},e.prototype.hr=function(t){var n=[t,this.ur()];if(this.buffer.size<this.cr)this.buffer=this.buffer.add(n);else{var r=this.buffer.last();Gw(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}},Object.defineProperty(e.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),e}(),$O=function(){function e(t,n){this.lr=t,this._s=n,this._r=!1,this.dr=null}return e.prototype.start=function(t){this.lr.params.zs!==-1&&this.wr(t)},e.prototype.stop=function(){this.dr&&(this.dr.cancel(),this.dr=null)},Object.defineProperty(e.prototype,"Er",{get:function(){return this.dr!==null},enumerable:!1,configurable:!0}),e.prototype.wr=function(t){var n=this,r=this._r?3e5:6e4;V("LruGarbageCollector","Garbage collection scheduled in "+r+"ms"),this.dr=this._s.Tr("lru_garbage_collection",r,function(){return k(n,void 0,void 0,function(){var o;return R(this,function(u){switch(u.label){case 0:this.dr=null,this._r=!0,u.label=1;case 1:return u.trys.push([1,3,,7]),[4,t.Ir(this.lr)];case 2:return u.sent(),[3,7];case 3:return Ai(o=u.sent())?(V("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",o),[3,6]):[3,4];case 4:return[4,Ci(o)];case 5:u.sent(),u.label=6;case 6:return[3,7];case 7:return[4,this.wr(t)];case 8:return u.sent(),[2]}})})})},e}(),XO=function(){function e(t,n){this.mr=t,this.params=n}return e.prototype.Ar=function(t,n){return this.mr.Rr(t).next(function(r){return Math.floor(n/100*r)})},e.prototype.Pr=function(t,n){var r=this;if(n===0)return x.resolve(He.q);var o=new YO(n);return this.mr.In(t,function(u){return o.hr(u.sequenceNumber)}).next(function(){return r.mr.yr(t,function(u){return o.hr(u)})}).next(function(){return o.maxValue})},e.prototype.Xi=function(t,n,r){return this.mr.Xi(t,n,r)},e.prototype.gr=function(t,n){return this.mr.gr(t,n)},e.prototype.Vr=function(t,n){var r=this;return this.params.zs===-1?(V("LruGarbageCollector","Garbage collection skipped; disabled"),x.resolve(qw)):this.pr(t).next(function(o){return o<r.params.zs?(V("LruGarbageCollector","Garbage collection skipped; Cache size "+o+" is lower than threshold "+r.params.zs),qw):r.br(t,n)})},e.prototype.pr=function(t){return this.mr.pr(t)},e.prototype.br=function(t,n){var r,o,u,a,h,l,p,v=this,g=Date.now();return this.Ar(t,this.params.Hs).next(function(m){return m>v.params.Js?(V("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+v.params.Js+" from "+m),o=v.params.Js):o=m,a=Date.now(),v.Pr(t,o)}).next(function(m){return r=m,h=Date.now(),v.Xi(t,r,n)}).next(function(m){return u=m,l=Date.now(),v.gr(t,r)}).next(function(m){return p=Date.now(),zp()<=ft.DEBUG&&V("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in `+(a-g)+`ms
	Determined least recently used `+o+" in "+(h-a)+`ms
	Removed `+u+" targets in "+(l-h)+`ms
	Removed `+m+" documents in "+(p-l)+`ms
Total Duration: `+(p-g)+"ms"),x.resolve({Ks:!0,Ws:o,js:u,Gs:m})})},e}(),JO=function(){function e(t,n){this.db=t,this.lr=function(r,o){return new XO(r,o)}(this,n)}return e.prototype.Rr=function(t){var n=this.vr(t);return this.db.Sr().Zi(t).next(function(r){return n.next(function(o){return r+o})})},e.prototype.vr=function(t){var n=0;return this.yr(t,function(r){n++}).next(function(){return n})},e.prototype.In=function(t,n){return this.db.Sr().In(t,n)},e.prototype.yr=function(t,n){return this.Dr(t,function(r,o){return n(o)})},e.prototype.nr=function(t,n,r){return Ya(t,r)},e.prototype.ir=function(t,n,r){return Ya(t,r)},e.prototype.Xi=function(t,n,r){return this.db.Sr().Xi(t,n,r)},e.prototype.Ni=function(t,n){return Ya(t,n)},e.prototype.Cr=function(t,n){return function(r,o){var u=!1;return XE(r).ls(function(a){return $E(r,a,o).next(function(h){return h&&(u=!0),x.resolve(!h)})}).next(function(){return u})}(t,n)},e.prototype.gr=function(t,n){var r=this,o=this.db.$r().Nr(),u=[],a=0;return this.Dr(t,function(h,l){if(l<=n){var p=r.Cr(t,h).next(function(v){if(!v)return a++,o._i(t,h).next(function(){return o.li(h),yr(t).delete([0,mn(h.path)])})});u.push(p)}}).next(function(){return x.Mn(u)}).next(function(){return o.apply(t)}).next(function(){return a})},e.prototype.removeTarget=function(t,n){var r=n.kt(t.bs);return this.db.Sr().Hi(t,r)},e.prototype.Fr=function(t,n){return Ya(t,n)},e.prototype.Dr=function(t,n){var r,o=yr(t),u=He.q;return o.hs({index:ie.documentTargetsIndex},function(a,h){var l=a[0],p=(a[1],h.path),v=h.sequenceNumber;l===0?(u!==He.q&&n(new H(Wn(r)),u),u=v,r=p):u=He.q}).next(function(){u!==He.q&&n(new H(Wn(r)),u)})},e.prototype.pr=function(t){return this.db.$r().Or(t)},e}();function Ya(e,t){return yr(e).put(function(n,r){return new ie(0,mn(n.path),r)}(t,e.bs))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ZO=function(){function e(t,n){this.Qt=t,this.Ei=n}return e.prototype.ai=function(t,n,r){return pr(t).put($a(n),r)},e.prototype.li=function(t,n){var r=pr(t),o=$a(n);return r.delete(o)},e.prototype.updateMetadata=function(t,n){var r=this;return this.getMetadata(t).next(function(o){return o.byteSize+=n,r.kr(t,o)})},e.prototype._i=function(t,n){var r=this;return pr(t).get($a(n)).next(function(o){return r.Mr(o)})},e.prototype.Lr=function(t,n){var r=this;return pr(t).get($a(n)).next(function(o){var u=r.Mr(o);return u?{hi:u,size:kc(o)}:null})},e.prototype.getEntries=function(t,n){var r=this,o=Cc();return this.Br(t,n,function(u,a){var h=r.Mr(a);o=o.zt(u,h)}).next(function(){return o})},e.prototype.qr=function(t,n){var r=this,o=Cc(),u=new pe(H.H);return this.Br(t,n,function(a,h){var l=r.Mr(h);l?(o=o.zt(a,l),u=u.zt(a,kc(h))):(o=o.zt(a,null),u=u.zt(a,0))}).next(function(){return{Ur:o,Qr:u}})},e.prototype.Br=function(t,n,r){if(n.et())return x.resolve();var o=IDBKeyRange.bound(n.first().path.it(),n.last().path.it()),u=n.te(),a=u.oe();return pr(t).hs({range:o},function(h,l,p){for(var v=H.Et(h);a&&H.H(a,v)<0;)r(a,null),a=u.oe();a&&a.isEqual(v)&&(r(a,l),a=u.ce()?u.oe():null),a?p.ss(a.path.it()):p.done()}).next(function(){for(;a;)r(a,null),a=u.ce()?u.oe():null})},e.prototype.Kr=function(t,n,r){var o=this,u=ou(),a=n.path.length+1,h={};if(r.isEqual(st.min())){var l=n.path.it();h.range=IDBKeyRange.lowerBound(l)}else{var p=n.path.it(),v=vv(r);h.range=IDBKeyRange.lowerBound([p,v],!0),h.index=Mt.collectionReadTimeIndex}return pr(t).hs(h,function(g,m,w){if(g.length===a){var b=Zp(o.Qt,m);n.path.nt(b.key.path)?b instanceof It&&xu(n,b)&&(u=u.zt(b.key,b)):w.done()}}).next(function(){return u})},e.prototype.Nr=function(t){return new tk(this,!!t&&t.Wr)},e.prototype.Or=function(t){return this.getMetadata(t).next(function(n){return n.byteSize})},e.prototype.getMetadata=function(t){return Hw(t).get(On.key).next(function(n){return Y(!!n),n})},e.prototype.kr=function(t,n){return Hw(t).put(On.key,n)},e.prototype.Mr=function(t){if(t){var n=Zp(this.Qt,t);return n instanceof ee&&n.version.isEqual(st.min())?null:n}return null},e}(),tk=function(e){function t(n,r){var o=this;return(o=e.call(this)||this).jr=n,o.Wr=r,o.Gr=new zo(function(u){return u.toString()},function(u,a){return u.isEqual(a)}),o}return U(t,e),t.prototype.wi=function(n){var r=this,o=[],u=0,a=new $t(function(h,l){return at(h.rt(),l.rt())});return this.ri.forEach(function(h,l){var p=r.Gr.get(h);if(l.hi){var v=Vw(r.jr.Qt,l.hi,r.ci(h));a=a.add(h.path.X());var g=kc(v);u+=g-p,o.push(r.jr.ai(n,h,v))}else if(u-=p,r.Wr){var m=Vw(r.jr.Qt,new ee(h,st.min()),r.ci(h));o.push(r.jr.ai(n,h,m))}else o.push(r.jr.li(n,h))}),a.forEach(function(h){o.push(r.jr.Ei.qs(n,h))}),o.push(this.jr.updateMetadata(n,u)),x.Mn(o)},t.prototype.fi=function(n,r){var o=this;return this.jr.Lr(n,r).next(function(u){return u===null?(o.Gr.set(r,0),null):(o.Gr.set(r,u.size),u.hi)})},t.prototype.di=function(n,r){var o=this;return this.jr.qr(n,r).next(function(u){var a=u.Ur;return u.Qr.forEach(function(h,l){o.Gr.set(h,l)}),a})},t}(KE);function Hw(e){return Me(e,On.store)}function pr(e){return Me(e,Mt.store)}function $a(e){return e.path.it()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ek=function(){function e(t){this.Qt=t}return e.prototype.Jn=function(t,n,r,o){var u=this;Y(r<o&&r>=0&&o<=11);var a=new BE("createOrUpgrade",n);r<1&&o>=1&&(function(l){l.createObjectStore(Be.store)}(t),function(l){l.createObjectStore(br.store,{keyPath:br.keyPath}),l.createObjectStore(Nt.store,{keyPath:Nt.keyPath,autoIncrement:!0}).createIndex(Nt.userMutationsIndex,Nt.userMutationsKeyPath,{unique:!0}),l.createObjectStore(se.store)}(t),zw(t),function(l){l.createObjectStore(Mt.store)}(t));var h=x.resolve();return r<3&&o>=3&&(r!==0&&(function(l){l.deleteObjectStore(ie.store),l.deleteObjectStore(De.store),l.deleteObjectStore(We.store)}(t),zw(t)),h=h.next(function(){return function(l){var p=l.store(We.store),v=new We(0,0,st.min().j(),0);return p.put(We.key,v)}(a)})),r<4&&o>=4&&(r!==0&&(h=h.next(function(){return function(l,p){return p.store(Nt.store).rs().next(function(v){l.deleteObjectStore(Nt.store),l.createObjectStore(Nt.store,{keyPath:Nt.keyPath,autoIncrement:!0}).createIndex(Nt.userMutationsIndex,Nt.userMutationsKeyPath,{unique:!0});var g=p.store(Nt.store),m=v.map(function(w){return g.put(w)});return x.Mn(m)})}(t,a)})),h=h.next(function(){(function(l){l.createObjectStore(Qn.store,{keyPath:Qn.keyPath})})(t)})),r<5&&o>=5&&(h=h.next(function(){return u.zr(a)})),r<6&&o>=6&&(h=h.next(function(){return function(l){l.createObjectStore(On.store)}(t),u.Hr(a)})),r<7&&o>=7&&(h=h.next(function(){return u.Jr(a)})),r<8&&o>=8&&(h=h.next(function(){return u.Yr(t,a)})),r<9&&o>=9&&(h=h.next(function(){(function(l){l.objectStoreNames.contains("remoteDocumentChanges")&&l.deleteObjectStore("remoteDocumentChanges")})(t),function(l){var p=l.objectStore(Mt.store);p.createIndex(Mt.readTimeIndex,Mt.readTimeIndexPath,{unique:!1}),p.createIndex(Mt.collectionReadTimeIndex,Mt.collectionReadTimeIndexPath,{unique:!1})}(n)})),r<10&&o>=10&&(h=h.next(function(){return u.Xr(a)})),r<11&&o>=11&&(h=h.next(function(){(function(l){l.createObjectStore(Ro.store,{keyPath:Ro.keyPath})})(t),function(l){l.createObjectStore(Oo.store,{keyPath:Oo.keyPath})}(t)})),h},e.prototype.Hr=function(t){var n=0;return t.store(Mt.store).hs(function(r,o){n+=kc(o)}).next(function(){var r=new On(n);return t.store(On.store).put(On.key,r)})},e.prototype.zr=function(t){var n=this,r=t.store(br.store),o=t.store(Nt.store);return r.rs().next(function(u){return x.forEach(u,function(a){var h=IDBKeyRange.bound([a.userId,-1],[a.userId,a.lastAcknowledgedBatchId]);return o.rs(Nt.userMutationsIndex,h).next(function(l){return x.forEach(l,function(p){Y(p.userId===a.userId);var v=lo(n.Qt,p);return YE(t,a.userId,v).next(function(){})})})})})},e.prototype.Jr=function(t){var n=t.store(ie.store),r=t.store(Mt.store);return t.store(We.store).get(We.key).next(function(o){var u=[];return r.hs(function(a,h){var l=new vt(a),p=function(v){return[0,mn(v)]}(l);u.push(n.get(p).next(function(v){return v?x.resolve():function(g){return n.put(new ie(0,mn(g),o.highestListenSequenceNumber))}(l)}))}).next(function(){return x.Mn(u)})})},e.prototype.Yr=function(t,n){t.createObjectStore(pi.store,{keyPath:pi.keyPath});var r=n.store(pi.store),o=new yv,u=function(a){if(o.add(a)){var h=a.tt(),l=a.X();return r.put({collectionId:h,parent:mn(l)})}};return n.store(Mt.store).hs({us:!0},function(a,h){var l=new vt(a);return u(l.X())}).next(function(){return n.store(se.store).hs({us:!0},function(a,h){a[0];var l=a[1],p=(a[2],Wn(l));return u(p.X())})})},e.prototype.Xr=function(t){var n=this,r=t.store(De.store);return r.hs(function(o,u){var a=Ws(u),h=zE(n.Qt,a);return r.put(h)})},e}();function zw(e){e.createObjectStore(ie.store,{keyPath:ie.keyPath}).createIndex(ie.documentTargetsIndex,ie.documentTargetsKeyPath,{unique:!0}),e.createObjectStore(De.store,{keyPath:De.keyPath}).createIndex(De.queryTargetsIndexName,De.queryTargetsKeyPath,{unique:!0}),e.createObjectStore(We.store)}var hp="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",nk=function(){function e(t,n,r,o,u,a,h,l,p,v){if(this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.Zr=u,this.window=a,this.document=h,this.eo=p,this.no=v,this.so=null,this.io=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ro=null,this.inForeground=!1,this.oo=null,this.co=null,this.ao=Number.NEGATIVE_INFINITY,this.uo=function(g){return Promise.resolve()},!e.Kn())throw new D(N.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.Ti=new JO(this,o),this.ho=n+"main",this.Qt=new GE(l),this.lo=new Co(this.ho,11,new ek(this.Qt)),this._o=new KO(this.Ti,this.Qt),this.Ei=new zO,this.fo=function(g,m){return new ZO(g,m)}(this.Qt,this.Ei),this.wo=new GO,this.window&&this.window.localStorage?this.Eo=this.window.localStorage:(this.Eo=null,v===!1&&Gt("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return e.prototype.start=function(){var t=this;return this.To().then(function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new D(N.FAILED_PRECONDITION,hp);return t.Io(),t.mo(),t.Ao(),t.runTransaction("getHighestListenSequenceNumber","readonly",function(n){return t._o.Ki(n)})}).then(function(n){t.so=new He(n,t.eo)}).then(function(){t.io=!0}).catch(function(n){return t.lo&&t.lo.close(),Promise.reject(n)})},e.prototype.Ro=function(t){var n=this;return this.uo=function(r){return k(n,void 0,void 0,function(){return R(this,function(o){return this.Er?[2,t(r)]:[2]})})},t(this.isPrimary)},e.prototype.Po=function(t){var n=this;this.lo.Xn(function(r){return k(n,void 0,void 0,function(){return R(this,function(o){switch(o.label){case 0:return r.newVersion===null?[4,t()]:[3,2];case 1:o.sent(),o.label=2;case 2:return[2]}})})})},e.prototype.yo=function(t){var n=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Zr.Ps(function(){return k(n,void 0,void 0,function(){return R(this,function(r){switch(r.label){case 0:return this.Er?[4,this.To()]:[3,2];case 1:r.sent(),r.label=2;case 2:return[2]}})})}))},e.prototype.To=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",function(n){return Xa(n).put(new Qn(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next(function(){if(t.isPrimary)return t.Vo(n).next(function(r){r||(t.isPrimary=!1,t.Zr.po(function(){return t.uo(!1)}))})}).next(function(){return t.bo(n)}).next(function(r){return t.isPrimary&&!r?t.vo(n).next(function(){return!1}):!!r&&t.So(n).next(function(){return!0})})}).catch(function(n){if(Ai(n))return V("IndexedDbPersistence","Failed to extend owner lease: ",n),t.isPrimary;if(!t.allowTabSynchronization)throw n;return V("IndexedDbPersistence","Releasing owner lease after error during lease refresh",n),!1}).then(function(n){t.isPrimary!==n&&t.Zr.po(function(){return t.uo(n)}),t.isPrimary=n})},e.prototype.Vo=function(t){var n=this;return Ms(t).get(Be.key).next(function(r){return x.resolve(n.Do(r))})},e.prototype.Co=function(t){return Xa(t).delete(this.clientId)},e.prototype.xo=function(){return k(this,void 0,void 0,function(){var t,n,r,o,u=this;return R(this,function(a){switch(a.label){case 0:return!this.isPrimary||this.No(this.ao,18e5)?[3,2]:(this.ao=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",function(h){var l=Me(h,Qn.store);return l.rs().next(function(p){var v=u.$o(p,18e5),g=p.filter(function(m){return v.indexOf(m)===-1});return x.forEach(g,function(m){return l.delete(m.clientId)}).next(function(){return g})})}).catch(function(){return[]})]);case 1:if(t=a.sent(),this.Eo)for(n=0,r=t;n<r.length;n++)o=r[n],this.Eo.removeItem(this.Fo(o.clientId));a.label=2;case 2:return[2]}})})},e.prototype.Ao=function(){var t=this;this.co=this.Zr.Tr("client_metadata_refresh",4e3,function(){return t.To().then(function(){return t.xo()}).then(function(){return t.Ao()})})},e.prototype.Do=function(t){return!!t&&t.ownerId===this.clientId},e.prototype.bo=function(t){var n=this;return this.no?x.resolve(!0):Ms(t).get(Be.key).next(function(r){if(r!==null&&n.No(r.leaseTimestampMs,5e3)&&!n.Oo(r.ownerId)){if(n.Do(r)&&n.networkEnabled)return!0;if(!n.Do(r)){if(!r.allowTabSynchronization)throw new D(N.FAILED_PRECONDITION,hp);return!1}}return!(!n.networkEnabled||!n.inForeground)||Xa(t).rs().next(function(o){return n.$o(o,5e3).find(function(u){if(n.clientId!==u.clientId){var a=!n.networkEnabled&&u.networkEnabled,h=!n.inForeground&&u.inForeground,l=n.networkEnabled===u.networkEnabled;if(a||h&&l)return!0}return!1})===void 0})}).next(function(r){return n.isPrimary!==r&&V("IndexedDbPersistence","Client "+(r?"is":"is not")+" eligible for a primary lease."),r})},e.prototype.ko=function(){return k(this,void 0,void 0,function(){var t=this;return R(this,function(n){switch(n.label){case 0:return this.io=!1,this.Mo(),this.co&&(this.co.cancel(),this.co=null),this.Lo(),this.Bo(),[4,this.lo.runTransaction("shutdown","readwrite",[Be.store,Qn.store],function(r){var o=new Fw(r,He.q);return t.vo(o).next(function(){return t.Co(o)})})];case 1:return n.sent(),this.lo.close(),this.qo(),[2]}})})},e.prototype.$o=function(t,n){var r=this;return t.filter(function(o){return r.No(o.updateTimeMs,n)&&!r.Oo(o.clientId)})},e.prototype.Uo=function(){var t=this;return this.runTransaction("getActiveClients","readonly",function(n){return Xa(n).rs().next(function(r){return t.$o(r,18e5).map(function(o){return o.clientId})})})},Object.defineProperty(e.prototype,"Er",{get:function(){return this.io},enumerable:!1,configurable:!0}),e.prototype.Qo=function(t){return QO.mi(t,this.Qt,this.Ei,this.Ti)},e.prototype.Sr=function(){return this._o},e.prototype.$r=function(){return this.fo},e.prototype.Ko=function(){return this.Ei},e.prototype.Wo=function(){return this.wo},e.prototype.runTransaction=function(t,n,r){var o=this;V("IndexedDbPersistence","Starting transaction:",t);var u,a=n==="readonly"?"readonly":"readwrite";return this.lo.runTransaction(t,a,qO,function(h){return u=new Fw(h,o.so?o.so.next():He.q),n==="readwrite-primary"?o.Vo(u).next(function(l){return!!l||o.bo(u)}).next(function(l){if(!l)throw Gt("Failed to obtain primary lease for action '"+t+"'."),o.isPrimary=!1,o.Zr.po(function(){return o.uo(!1)}),new D(N.FAILED_PRECONDITION,qE);return r(u)}).next(function(l){return o.So(u).next(function(){return l})}):o.jo(u).next(function(){return r(u)})}).then(function(h){return u.Vs(),h})},e.prototype.jo=function(t){var n=this;return Ms(t).get(Be.key).next(function(r){if(r!==null&&n.No(r.leaseTimestampMs,5e3)&&!n.Oo(r.ownerId)&&!n.Do(r)&&!(n.no||n.allowTabSynchronization&&r.allowTabSynchronization))throw new D(N.FAILED_PRECONDITION,hp)})},e.prototype.So=function(t){var n=new Be(this.clientId,this.allowTabSynchronization,Date.now());return Ms(t).put(Be.key,n)},e.Kn=function(){return Co.Kn()},e.prototype.vo=function(t){var n=this,r=Ms(t);return r.get(Be.key).next(function(o){return n.Do(o)?(V("IndexedDbPersistence","Releasing primary lease."),r.delete(Be.key)):x.resolve()})},e.prototype.No=function(t,n){var r=Date.now();return!(t<r-n||t>r&&(Gt("Detected an update time that is in the future: "+t+" > "+r),1))},e.prototype.Io=function(){var t=this;this.document!==null&&typeof this.document.addEventListener=="function"&&(this.oo=function(){t.Zr.Ps(function(){return t.inForeground=t.document.visibilityState==="visible",t.To()})},this.document.addEventListener("visibilitychange",this.oo),this.inForeground=this.document.visibilityState==="visible")},e.prototype.Lo=function(){this.oo&&(this.document.removeEventListener("visibilitychange",this.oo),this.oo=null)},e.prototype.mo=function(){var t,n=this;typeof((t=this.window)===null||t===void 0?void 0:t.addEventListener)=="function"&&(this.ro=function(){n.Mo(),n.Zr.Ps(function(){return n.ko()})},this.window.addEventListener("unload",this.ro))},e.prototype.Bo=function(){this.ro&&(this.window.removeEventListener("unload",this.ro),this.ro=null)},e.prototype.Oo=function(t){var n;try{var r=((n=this.Eo)===null||n===void 0?void 0:n.getItem(this.Fo(t)))!==null;return V("IndexedDbPersistence","Client '"+t+"' "+(r?"is":"is not")+" zombied in LocalStorage"),r}catch(o){return Gt("IndexedDbPersistence","Failed to get zombied client id.",o),!1}},e.prototype.Mo=function(){if(this.Eo)try{this.Eo.setItem(this.Fo(this.clientId),String(Date.now()))}catch(t){Gt("Failed to set zombie client id.",t)}},e.prototype.qo=function(){if(this.Eo)try{this.Eo.removeItem(this.Fo(this.clientId))}catch{}},e.prototype.Fo=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},e}();function Ms(e){return Me(e,Be.store)}function Xa(e){return Me(e,Qn.store)}function gv(e,t){var n=e.projectId;return e.o||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var JE=function(){function e(t,n,r){this.fo=t,this.zo=n,this.Ei=r}return e.prototype.Ho=function(t,n){var r=this;return this.zo.bi(t,n).next(function(o){return r.Jo(t,n,o)})},e.prototype.Jo=function(t,n,r){return this.fo._i(t,n).next(function(o){for(var u=0,a=r;u<a.length;u++)o=a[u].Cs(n,o);return o})},e.prototype.Yo=function(t,n,r){var o=Cc();return n.forEach(function(u,a){for(var h=0,l=r;h<l.length;h++)a=l[h].Cs(u,a);o=o.zt(u,a)}),o},e.prototype.Xo=function(t,n){var r=this;return this.fo.getEntries(t,n).next(function(o){return r.Zo(t,o)})},e.prototype.Zo=function(t,n){var r=this;return this.zo.vi(t,n).next(function(o){var u=r.Yo(t,n,o),a=Cr();return u.forEach(function(h,l){l||(l=new ee(h,st.min())),a=a.zt(h,l)}),a})},e.prototype.Kr=function(t,n,r){return function(o){return H.wt(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.tc(t,n.path):uv(n)?this.ec(t,n,r):this.nc(t,n,r)},e.prototype.tc=function(t,n){return this.Ho(t,new H(n)).next(function(r){var o=ou();return r instanceof It&&(o=o.zt(r.key,r)),o})},e.prototype.ec=function(t,n,r){var o=this,u=n.collectionGroup,a=ou();return this.Ei.Us(t,u).next(function(h){return x.forEach(h,function(l){var p=function(v,g){return new Zn(g,null,v.xt.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt)}(n,l.child(u));return o.nc(t,p,r).next(function(v){v.forEach(function(g,m){a=a.zt(g,m)})})}).next(function(){return a})})},e.prototype.nc=function(t,n,r){var o,u,a=this;return this.fo.Kr(t,n,r).next(function(h){return o=h,a.zo.Di(t,n)}).next(function(h){return u=h,a.sc(t,u,o).next(function(l){o=l;for(var p=0,v=u;p<v.length;p++)for(var g=v[p],m=0,w=g.mutations;m<w.length;m++){var b=w[m],I=b.key,T=Xp(b,o.get(I),g.vs);o=T instanceof It?o.zt(I,T):o.remove(I)}})}).next(function(){return o.forEach(function(h,l){xu(n,l)||(o=o.remove(h))}),o})},e.prototype.sc=function(t,n,r){for(var o=St(),u=0,a=n;u<a.length;u++)for(var h=0,l=a[u].mutations;h<l.length;h++){var p=l[h];p instanceof xr&&r.get(p.key)===null&&(o=o.add(p.key))}var v=r;return this.fo.getEntries(t,o).next(function(g){return g.forEach(function(m,w){w!==null&&w instanceof It&&(v=v.zt(m,w))}),v})},e}(),rk=function(){function e(t,n,r,o){this.targetId=t,this.fromCache=n,this.ic=r,this.rc=o}return e.oc=function(t,n){for(var r=St(),o=St(),u=0,a=n.docChanges;u<a.length;u++){var h=a[u];switch(h.type){case 0:r=r.add(h.doc.key);break;case 1:o=o.add(h.doc.key)}}return new e(t,n.fromCache,r,o)},e}(),ZE=function(){function e(){}return e.prototype.cc=function(t){this.ac=t},e.prototype.Kr=function(t,n,r,o){var u=this;return function(a){return a.filters.length===0&&a.limit===null&&a.startAt==null&&a.endAt==null&&(a.xt.length===0||a.xt.length===1&&a.xt[0].field.ut())}(n)||r.isEqual(st.min())?this.uc(t,n):this.ac.Xo(t,o).next(function(a){var h=u.hc(n,a);return(oc(n)||Ac(n))&&u.lc(n.limitType,h,o,r)?u.uc(t,n):(zp()<=ft.DEBUG&&V("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),$p(n)),u.ac.Kr(t,n,r).next(function(l){return h.forEach(function(p){l=l.zt(p.key,p)}),l}))})},e.prototype.hc=function(t,n){var r=new $t(mE(t));return n.forEach(function(o,u){u instanceof It&&xu(t,u)&&(r=r.add(u))}),r},e.prototype.lc=function(t,n,r,o){if(r.size!==n.size)return!0;var u=t==="F"?n.last():n.first();return!!u&&(u.hasPendingWrites||u.version._(o)>0)},e.prototype.uc=function(t,n){return zp()<=ft.DEBUG&&V("QueryEngine","Using full collection scan to execute query:",$p(n)),this.ac.Kr(t,n,st.min())},e}(),ik=function(){function e(t,n,r,o){this.persistence=t,this._c=n,this.Qt=o,this.fc=new pe(at),this.dc=new zo(function(u){return ku(u)},eh),this.wc=st.min(),this.zo=t.Qo(r),this.Ec=t.$r(),this._o=t.Sr(),this.Tc=new JE(this.Ec,this.zo,this.persistence.Ko()),this.wo=t.Wo(),this._c.cc(this.Tc)}return e.prototype.Ir=function(t){var n=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(r){return t.Vr(r,n.fc)})},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tI(e,t,n,r){return new ik(e,t,n,r)}function eI(e,t){return k(this,void 0,void 0,function(){var n,r,o,u;return R(this,function(a){switch(a.label){case 0:return n=j(e),r=n.zo,o=n.Tc,[4,n.persistence.runTransaction("Handle user change","readonly",function(h){var l;return n.zo.pi(h).next(function(p){return l=p,r=n.persistence.Qo(t),o=new JE(n.Ec,r,n.persistence.Ko()),r.pi(h)}).next(function(p){for(var v=[],g=[],m=St(),w=0,b=l;w<b.length;w++){var I=b[w];v.push(I.batchId);for(var T=0,C=I.mutations;T<C.length;T++){var F=C[T];m=m.add(F.key)}}for(var M=0,$=p;M<$.length;M++){var nt=$[M];g.push(nt.batchId);for(var P=0,_t=nt.mutations;P<_t.length;P++){var Fr=_t[P];m=m.add(Fr.key)}}return o.Xo(h,m).next(function(X){return{Ic:X,mc:v,Ac:g}})})})];case 1:return u=a.sent(),[2,(n.zo=r,n.Tc=o,n._c.cc(n.Tc),u)]}})})}function ok(e,t){var n=j(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",function(r){var o=t.batch.keys(),u=n.Ec.Nr({Wr:!0});return function(a,h,l,p){var v=l.batch,g=v.keys(),m=x.resolve();return g.forEach(function(w){m=m.next(function(){return p._i(h,w)}).next(function(b){var I=b,T=l.$s.get(w);Y(T!==null),(!I||I.version._(T)<0)&&(I=v.Ss(w,I,l))&&p.ai(I,l.Ns)})}),m.next(function(){return a.zo.Ci(h,v)})}(n,r,t,u).next(function(){return u.apply(r)}).next(function(){return n.zo.$i(r)}).next(function(){return n.Tc.Xo(r,o)})})}function nI(e){var t=j(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",function(n){return t._o.Qi(n)})}function sk(e,t){var n=j(e),r=t.Ot,o=n.fc;return n.persistence.runTransaction("Apply remote event","readwrite-primary",function(u){var a=n.Ec.Nr({Wr:!0});o=n.fc;var h=[];t.$e.forEach(function(v,g){var m=o.get(g);if(m){h.push(n._o.sr(u,v.Qe,g).next(function(){return n._o.er(u,v.qe,g)}));var w=v.resumeToken;if(w.l()>0){var b=m.Mt(w,r).kt(u.bs);o=o.zt(g,b),function(I,T,C){return Y(T.resumeToken.l()>0),I.resumeToken.l()===0||T.Ot.W()-I.Ot.W()>=3e8||C.qe.size+C.Ue.size+C.Qe.size>0}(m,b,v)&&h.push(n._o.Hi(u,b))}}});var l=Cr();if(t.Oe.forEach(function(v,g){t.ke.has(v)&&h.push(n.persistence.Ti.Fr(u,v))}),h.push(uk(u,a,t.Oe,r,void 0).next(function(v){l=v})),!r.isEqual(st.min())){var p=n._o.Qi(u).next(function(v){return n._o.Wi(u,u.bs,r)});h.push(p)}return x.Mn(h).next(function(){return a.apply(u)}).next(function(){return n.Tc.Zo(u,l)})}).then(function(u){return n.fc=o,u})}function uk(e,t,n,r,o){var u=St();return n.forEach(function(a){return u=u.add(a)}),t.getEntries(e,u).next(function(a){var h=Cr();return n.forEach(function(l,p){var v=a.get(l),g=o?.get(l)||r;p instanceof ee&&p.version.isEqual(st.min())?(t.li(l,g),h=h.zt(l,p)):v==null||p.version._(v.version)>0||p.version._(v.version)===0&&v.hasPendingWrites?(t.ai(p,g),h=h.zt(l,p)):V("LocalStore","Ignoring outdated watch update for ",l,". Current version:",v.version," Watch version:",p.version)}),h})}function ak(e,t){var n=j(e);return n.persistence.runTransaction("Get next mutation batch","readonly",function(r){return t===void 0&&(t=-1),n.zo.gi(r,t)})}function Pc(e,t){var n=j(e);return n.persistence.runTransaction("Allocate target","readwrite",function(r){var o;return n._o.tr(r,t).next(function(u){return u?(o=u,x.resolve(o)):n._o.Bi(r).next(function(a){return o=new nh(t,a,0,r.bs),n._o.ji(r,o).next(function(){return o})})})}).then(function(r){var o=n.fc.get(r.targetId);return(o===null||r.Ot._(o.Ot)>0)&&(n.fc=n.fc.zt(r.targetId,r),n.dc.set(t,r.targetId)),r})}function Po(e,t,n){return k(this,void 0,void 0,function(){var r,o,u,a;return R(this,function(h){switch(h.label){case 0:r=j(e),o=r.fc.get(t),u=n?"readwrite":"readwrite-primary",h.label=1;case 1:return h.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",u,function(l){return r.persistence.Ti.removeTarget(l,o)})];case 2:h.sent(),h.label=3;case 3:return[3,5];case 4:if(!Ai(a=h.sent()))throw a;return V("LocalStore","Failed to update sequence numbers for target "+t+": "+a),[3,5];case 5:return r.fc=r.fc.remove(t),r.dc.delete(o.target),[2]}})})}function xc(e,t,n){var r=j(e),o=st.min(),u=St();return r.persistence.runTransaction("Execute query","readonly",function(a){return function(h,l,p){var v=j(h),g=v.dc.get(p);return g!==void 0?x.resolve(v.fc.get(g)):v._o.tr(l,p)}(r,a,xn(t)).next(function(h){if(h)return o=h.lastLimboFreeSnapshotVersion,r._o.rr(a,h.targetId).next(function(l){u=l})}).next(function(){return r._c.Kr(a,t,n?o:st.min(),n?u:St())}).next(function(h){return{documents:h,Rc:u}})})}function rI(e,t){var n=j(e),r=j(n._o),o=n.fc.get(t);return o?Promise.resolve(o.target):n.persistence.runTransaction("Get target data","readonly",function(u){return r.Sn(u,t).next(function(a){return a?a.target:null})})}function iI(e){var t=j(e);return t.persistence.runTransaction("Get new document changes","readonly",function(n){return function(r,o,u){var a=j(r),h=Cr(),l=vv(u),p=pr(o),v=IDBKeyRange.lowerBound(l,!0);return p.hs({index:Mt.readTimeIndex,range:v},function(g,m){var w=Zp(a.Qt,m);h=h.zt(w.key,w),l=m.readTime}).next(function(){return{Go:h,readTime:HE(l)}})}(t.Ec,n,t.wc)}).then(function(n){var r=n.Go,o=n.readTime;return t.wc=o,r})}function ck(e){return k(this,void 0,void 0,function(){var t;return R(this,function(n){return[2,(t=j(e)).persistence.runTransaction("Synchronize last document change read time","readonly",function(r){return function(o){var u=pr(o),a=st.min();return u.hs({index:Mt.readTimeIndex,reverse:!0},function(h,l,p){l.readTime&&(a=HE(l.readTime)),p.done()}).next(function(){return a})}(r)}).then(function(r){t.wc=r})]})})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var hk=function(){function e(t){this.Qt=t,this.Vc=new Map,this.bc=new Map}return e.prototype.Os=function(t,n){return x.resolve(this.Vc.get(n))},e.prototype.ks=function(t,n){var r;return this.Vc.set(n.id,{id:(r=n).id,version:r.version,createTime:Ie(r.createTime)}),x.resolve()},e.prototype.Ms=function(t,n){return x.resolve(this.bc.get(n))},e.prototype.Ls=function(t,n){return this.bc.set(n.name,function(r){return{name:r.name,query:QE(r.bundledQuery),readTime:Ie(r.readTime)}}(n)),x.resolve()},e}(),mv=function(){function e(){this.vc=new $t(Zt.Sc),this.Dc=new $t(Zt.Cc)}return e.prototype.et=function(){return this.vc.et()},e.prototype.nr=function(t,n){var r=new Zt(t,n);this.vc=this.vc.add(r),this.Dc=this.Dc.add(r)},e.prototype.xc=function(t,n){var r=this;t.forEach(function(o){return r.nr(o,n)})},e.prototype.ir=function(t,n){this.Nc(new Zt(t,n))},e.prototype.$c=function(t,n){var r=this;t.forEach(function(o){return r.ir(o,n)})},e.prototype.Fc=function(t){var n=this,r=new H(new vt([])),o=new Zt(r,t),u=new Zt(r,t+1),a=[];return this.Dc.me([o,u],function(h){n.Nc(h),a.push(h.key)}),a},e.prototype.Oc=function(){var t=this;this.vc.forEach(function(n){return t.Nc(n)})},e.prototype.Nc=function(t){this.vc=this.vc.delete(t),this.Dc=this.Dc.delete(t)},e.prototype.kc=function(t){var n=new H(new vt([])),r=new Zt(n,t),o=new Zt(n,t+1),u=St();return this.Dc.me([r,o],function(a){u=u.add(a.key)}),u},e.prototype.Fi=function(t){var n=new Zt(t,0),r=this.vc.Re(n);return r!==null&&t.isEqual(r.key)},e}(),Zt=function(){function e(t,n){this.key=t,this.Mc=n}return e.Sc=function(t,n){return H.H(t.key,n.key)||at(t.Mc,n.Mc)},e.Cc=function(t,n){return at(t.Mc,n.Mc)||H.H(t.key,n.key)},e}(),lk=function(){function e(t,n){this.Ei=t,this.Ti=n,this.zo=[],this.Lc=1,this.Bc=new $t(Zt.Sc)}return e.prototype.Ai=function(t){return x.resolve(this.zo.length===0)},e.prototype.Ri=function(t,n,r,o){var u=this.Lc;this.Lc++,this.zo.length>0&&this.zo[this.zo.length-1];var a=new dv(u,n,r,o);this.zo.push(a);for(var h=0,l=o;h<l.length;h++){var p=l[h];this.Bc=this.Bc.add(new Zt(p.key,u)),this.Ei.qs(t,p.key.path.X())}return x.resolve(a)},e.prototype.Pi=function(t,n){return x.resolve(this.qc(n))},e.prototype.gi=function(t,n){var r=n+1,o=this.Uc(r),u=o<0?0:o;return x.resolve(this.zo.length>u?this.zo[u]:null)},e.prototype.Vi=function(){return x.resolve(this.zo.length===0?-1:this.Lc-1)},e.prototype.pi=function(t){return x.resolve(this.zo.slice())},e.prototype.bi=function(t,n){var r=this,o=new Zt(n,0),u=new Zt(n,Number.POSITIVE_INFINITY),a=[];return this.Bc.me([o,u],function(h){var l=r.qc(h.Mc);a.push(l)}),x.resolve(a)},e.prototype.vi=function(t,n){var r=this,o=new $t(at);return n.forEach(function(u){var a=new Zt(u,0),h=new Zt(u,Number.POSITIVE_INFINITY);r.Bc.me([a,h],function(l){o=o.add(l.Mc)})}),x.resolve(this.Qc(o))},e.prototype.Di=function(t,n){var r=n.path,o=r.length+1,u=r;H.wt(u)||(u=u.child(""));var a=new Zt(new H(u),0),h=new $t(at);return this.Bc.Ae(function(l){var p=l.key.path;return!!r.nt(p)&&(p.length===o&&(h=h.add(l.Mc)),!0)},a),x.resolve(this.Qc(h))},e.prototype.Qc=function(t){var n=this,r=[];return t.forEach(function(o){var u=n.qc(o);u!==null&&r.push(u)}),r},e.prototype.Ci=function(t,n){var r=this;Y(this.Kc(n.batchId,"removed")===0),this.zo.shift();var o=this.Bc;return x.forEach(n.mutations,function(u){var a=new Zt(u.key,n.batchId);return o=o.delete(a),r.Ti.Ni(t,u.key)}).next(function(){r.Bc=o})},e.prototype.xi=function(t){},e.prototype.Fi=function(t,n){var r=new Zt(n,0),o=this.Bc.Re(r);return x.resolve(n.isEqual(o&&o.key))},e.prototype.$i=function(t){return this.zo.length,x.resolve()},e.prototype.Kc=function(t,n){return this.Uc(t)},e.prototype.Uc=function(t){return this.zo.length===0?0:t-this.zo[0].batchId},e.prototype.qc=function(t){var n=this.Uc(t);return n<0||n>=this.zo.length?null:this.zo[n]},e}(),fk=function(){function e(t,n){this.Ei=t,this.Wc=n,this.docs=new pe(H.H),this.size=0}return e.prototype.ai=function(t,n,r){var o=n.key,u=this.docs.get(o),a=u?u.size:0,h=this.Wc(n);return this.docs=this.docs.zt(o,{hi:n,size:h,readTime:r}),this.size+=h-a,this.Ei.qs(t,o.path.X())},e.prototype.li=function(t){var n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)},e.prototype._i=function(t,n){var r=this.docs.get(n);return x.resolve(r?r.hi:null)},e.prototype.getEntries=function(t,n){var r=this,o=Cc();return n.forEach(function(u){var a=r.docs.get(u);o=o.zt(u,a?a.hi:null)}),x.resolve(o)},e.prototype.Kr=function(t,n,r){for(var o=ou(),u=new H(n.path.child("")),a=this.docs.ee(u);a.ce();){var h=a.oe(),l=h.key,p=h.value,v=p.hi,g=p.readTime;if(!n.path.nt(l.path))break;g._(r)<=0||v instanceof It&&xu(n,v)&&(o=o.zt(v.key,v))}return x.resolve(o)},e.prototype.jc=function(t,n){return x.forEach(this.docs,function(r){return n(r)})},e.prototype.Nr=function(t){return new pk(this)},e.prototype.Or=function(t){return x.resolve(this.size)},e}(),pk=function(e){function t(n){var r=this;return(r=e.call(this)||this).jr=n,r}return U(t,e),t.prototype.wi=function(n){var r=this,o=[];return this.ri.forEach(function(u,a){a&&a.hi?o.push(r.jr.ai(n,a.hi,r.ci(u))):r.jr.li(u)}),x.Mn(o)},t.prototype.fi=function(n,r){return this.jr._i(n,r)},t.prototype.di=function(n,r){return this.jr.getEntries(n,r)},t}(KE),dk=function(){function e(t){this.persistence=t,this.Gc=new zo(function(n){return ku(n)},eh),this.lastRemoteSnapshotVersion=st.min(),this.highestTargetId=0,this.zc=0,this.Hc=new mv,this.targetCount=0,this.Jc=Dc.Mi()}return e.prototype.In=function(t,n){return this.Gc.forEach(function(r,o){return n(o)}),x.resolve()},e.prototype.Qi=function(t){return x.resolve(this.lastRemoteSnapshotVersion)},e.prototype.Ki=function(t){return x.resolve(this.zc)},e.prototype.Bi=function(t){return this.highestTargetId=this.Jc.next(),x.resolve(this.highestTargetId)},e.prototype.Wi=function(t,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.zc&&(this.zc=n),x.resolve()},e.prototype.Gi=function(t){this.Gc.set(t.target,t);var n=t.targetId;n>this.highestTargetId&&(this.Jc=new Dc(n),this.highestTargetId=n),t.sequenceNumber>this.zc&&(this.zc=t.sequenceNumber)},e.prototype.ji=function(t,n){return this.Gi(n),this.targetCount+=1,x.resolve()},e.prototype.Hi=function(t,n){return this.Gi(n),x.resolve()},e.prototype.Ji=function(t,n){return this.Gc.delete(n.target),this.Hc.Fc(n.targetId),this.targetCount-=1,x.resolve()},e.prototype.Xi=function(t,n,r){var o=this,u=0,a=[];return this.Gc.forEach(function(h,l){l.sequenceNumber<=n&&r.get(l.targetId)===null&&(o.Gc.delete(h),a.push(o.Yi(t,l.targetId)),u++)}),x.Mn(a).next(function(){return u})},e.prototype.Zi=function(t){return x.resolve(this.targetCount)},e.prototype.tr=function(t,n){var r=this.Gc.get(n)||null;return x.resolve(r)},e.prototype.er=function(t,n,r){return this.Hc.xc(n,r),x.resolve()},e.prototype.sr=function(t,n,r){this.Hc.$c(n,r);var o=this.persistence.Ti,u=[];return o&&n.forEach(function(a){u.push(o.Ni(t,a))}),x.Mn(u)},e.prototype.Yi=function(t,n){return this.Hc.Fc(n),x.resolve()},e.prototype.rr=function(t,n){var r=this.Hc.kc(n);return x.resolve(r)},e.prototype.Fi=function(t,n){return x.resolve(this.Hc.Fi(n))},e}(),vk=function(){function e(t,n){var r=this;this.Yc={},this.so=new He(0),this.io=!1,this.io=!0,this.Ti=t(this),this._o=new dk(this),this.Ei=new HO,this.fo=function(o,u){return new fk(o,function(a){return r.Ti.Xc(a)})}(this.Ei),this.Qt=new GE(n),this.wo=new hk(this.Qt)}return e.prototype.start=function(){return Promise.resolve()},e.prototype.ko=function(){return this.io=!1,Promise.resolve()},Object.defineProperty(e.prototype,"Er",{get:function(){return this.io},enumerable:!1,configurable:!0}),e.prototype.Po=function(){},e.prototype.yo=function(){},e.prototype.Ko=function(){return this.Ei},e.prototype.Qo=function(t){var n=this.Yc[t.A()];return n||(n=new lk(this.Ei,this.Ti),this.Yc[t.A()]=n),n},e.prototype.Sr=function(){return this._o},e.prototype.$r=function(){return this.fo},e.prototype.Wo=function(){return this.wo},e.prototype.runTransaction=function(t,n,r){var o=this;V("MemoryPersistence","Starting transaction:",t);var u=new yk(this.so.next());return this.Ti.Zc(),r(u).next(function(a){return o.Ti.ta(u).next(function(){return a})}).On().then(function(a){return u.Vs(),a})},e.prototype.ea=function(t,n){return x.Ln(Object.values(this.Yc).map(function(r){return function(){return r.Fi(t,n)}}))},e}(),yk=function(e){function t(n){var r=this;return(r=e.call(this)||this).bs=n,r}return U(t,e),t}(WE),gk=function(){function e(t){this.persistence=t,this.na=new mv,this.sa=null}return e.ia=function(t){return new e(t)},Object.defineProperty(e.prototype,"ra",{get:function(){if(this.sa)return this.sa;throw W()},enumerable:!1,configurable:!0}),e.prototype.nr=function(t,n,r){return this.na.nr(r,n),this.ra.delete(r.toString()),x.resolve()},e.prototype.ir=function(t,n,r){return this.na.ir(r,n),this.ra.add(r.toString()),x.resolve()},e.prototype.Ni=function(t,n){return this.ra.add(n.toString()),x.resolve()},e.prototype.removeTarget=function(t,n){var r=this;this.na.Fc(n.targetId).forEach(function(u){return r.ra.add(u.toString())});var o=this.persistence.Sr();return o.rr(t,n.targetId).next(function(u){u.forEach(function(a){return r.ra.add(a.toString())})}).next(function(){return o.Ji(t,n)})},e.prototype.Zc=function(){this.sa=new Set},e.prototype.ta=function(t){var n=this,r=this.persistence.$r().Nr();return x.forEach(this.ra,function(o){var u=H._t(o);return n.oa(t,u).next(function(a){a||r.li(u)})}).next(function(){return n.sa=null,r.apply(t)})},e.prototype.Fr=function(t,n){var r=this;return this.oa(t,n).next(function(o){o?r.ra.delete(n.toString()):r.ra.add(n.toString())})},e.prototype.Xc=function(t){return 0},e.prototype.oa=function(t,n){var r=this;return x.Ln([function(){return x.resolve(r.na.Fi(n))},function(){return r.persistence.Sr().Fi(t,n)},function(){return r.persistence.ea(t,n)}])},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qw(e,t){return"firestore_clients_"+e+"_"+t}function Kw(e,t,n){var r="firestore_mutations_"+e+"_"+n;return t.m()&&(r+="_"+t.uid),r}function lp(e,t){return"firestore_targets_"+e+"_"+t}var Yw=function(){function e(t,n,r,o){this.user=t,this.batchId=n,this.state=r,this.error=o}return e.ca=function(t,n,r){var o,u=JSON.parse(r),a=typeof u=="object"&&["pending","acknowledged","rejected"].indexOf(u.state)!==-1&&(u.error===void 0||typeof u.error=="object");return a&&u.error&&(a=typeof u.error.message=="string"&&typeof u.error.code=="string")&&(o=new D(u.error.code,u.error.message)),a?new e(t,n,u.state,o):(Gt("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},e.prototype.aa=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},e}(),fp=function(){function e(t,n,r){this.targetId=t,this.state=n,this.error=r}return e.ca=function(t,n){var r,o=JSON.parse(n),u=typeof o=="object"&&["not-current","current","rejected"].indexOf(o.state)!==-1&&(o.error===void 0||typeof o.error=="object");return u&&o.error&&(u=typeof o.error.message=="string"&&typeof o.error.code=="string")&&(r=new D(o.error.code,o.error.message)),u?new e(t,o.state,r):(Gt("SharedClientState","Failed to parse target state for ID '"+t+"': "+n),null)},e.prototype.aa=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},e}(),$w=function(){function e(t,n){this.clientId=t,this.activeTargetIds=n}return e.ca=function(t,n){for(var r=JSON.parse(n),o=typeof r=="object"&&r.activeTargetIds instanceof Array,u=oh(),a=0;o&&a<r.activeTargetIds.length;++a)o=fE(r.activeTargetIds[a]),u=u.add(r.activeTargetIds[a]);return o?new e(t,u):(Gt("SharedClientState","Failed to parse client data for instance '"+t+"': "+n),null)},e}(),mk=function(){function e(t,n){this.clientId=t,this.onlineState=n}return e.ca=function(t){var n=JSON.parse(t);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new e(n.clientId,n.onlineState):(Gt("SharedClientState","Failed to parse online state: "+t),null)},e}(),td=function(){function e(){this.activeTargetIds=oh()}return e.prototype.ua=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},e.prototype.ha=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},e.prototype.aa=function(){var t={activeTargetIds:this.activeTargetIds.it(),updateTimeMs:Date.now()};return JSON.stringify(t)},e}(),pp=function(){function e(t,n,r,o,u){this.window=t,this.Zr=n,this.persistenceKey=r,this.la=o,this._a=null,this.fa=null,this.k=null,this.da=this.wa.bind(this),this.Ea=new pe(at),this.Er=!1,this.Ta=[];var a=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.Ia=Qw(this.persistenceKey,this.la),this.ma=function(h){return"firestore_sequence_number_"+h}(this.persistenceKey),this.Ea=this.Ea.zt(this.la,new td),this.Aa=new RegExp("^firestore_clients_"+a+"_([^_]*)$"),this.Ra=new RegExp("^firestore_mutations_"+a+"_(\\d+)(?:_(.*))?$"),this.Pa=new RegExp("^firestore_targets_"+a+"_(\\d+)$"),this.ya=function(h){return"firestore_online_state_"+h}(this.persistenceKey),this.ga=function(h){return"firestore_bundle_loaded_"+h}(this.persistenceKey),this.window.addEventListener("storage",this.da)}return e.Kn=function(t){return!(!t||!t.localStorage)},e.prototype.start=function(){return k(this,void 0,void 0,function(){var t,n,r,o,u,a,h,l,p,v,g,m=this;return R(this,function(w){switch(w.label){case 0:return[4,this._a.Uo()];case 1:for(t=w.sent(),n=0,r=t;n<r.length;n++)(o=r[n])!==this.la&&(u=this.getItem(Qw(this.persistenceKey,o)))&&(a=$w.ca(o,u))&&(this.Ea=this.Ea.zt(a.clientId,a));for(this.Va(),(h=this.storage.getItem(this.ya))&&(l=this.pa(h))&&this.ba(l),p=0,v=this.Ta;p<v.length;p++)g=v[p],this.wa(g);return this.Ta=[],this.window.addEventListener("unload",function(){return m.ko()}),this.Er=!0,[2]}})})},e.prototype.B=function(t){this.setItem(this.ma,JSON.stringify(t))},e.prototype.va=function(){return this.Sa(this.Ea)},e.prototype.Da=function(t){var n=!1;return this.Ea.forEach(function(r,o){o.activeTargetIds.has(t)&&(n=!0)}),n},e.prototype.Ca=function(t){this.xa(t,"pending")},e.prototype.Na=function(t,n,r){this.xa(t,n,r),this.$a(t)},e.prototype.Fa=function(t){var n="not-current";if(this.Da(t)){var r=this.storage.getItem(lp(this.persistenceKey,t));if(r){var o=fp.ca(t,r);o&&(n=o.state)}}return this.Oa.ua(t),this.Va(),n},e.prototype.ka=function(t){this.Oa.ha(t),this.Va()},e.prototype.Ma=function(t){return this.Oa.activeTargetIds.has(t)},e.prototype.La=function(t){this.removeItem(lp(this.persistenceKey,t))},e.prototype.Ba=function(t,n,r){this.qa(t,n,r)},e.prototype.Ua=function(t,n,r){var o=this;n.forEach(function(u){o.$a(u)}),this.currentUser=t,r.forEach(function(u){o.Ca(u)})},e.prototype.Qa=function(t){this.Ka(t)},e.prototype.Wa=function(){this.ja()},e.prototype.ko=function(){this.Er&&(this.window.removeEventListener("storage",this.da),this.removeItem(this.Ia),this.Er=!1)},e.prototype.getItem=function(t){var n=this.storage.getItem(t);return V("SharedClientState","READ",t,n),n},e.prototype.setItem=function(t,n){V("SharedClientState","SET",t,n),this.storage.setItem(t,n)},e.prototype.removeItem=function(t){V("SharedClientState","REMOVE",t),this.storage.removeItem(t)},e.prototype.wa=function(t){var n=this,r=t;if(r.storageArea===this.storage){if(V("SharedClientState","EVENT",r.key,r.newValue),r.key===this.Ia)return void Gt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Zr.po(function(){return k(n,void 0,void 0,function(){var o,u,a,h,l,p;return R(this,function(v){if(this.Er){if(r.key!==null){if(this.Aa.test(r.key)){if(r.newValue==null)return o=this.Ga(r.key),[2,this.za(o,null)];if(u=this.Ha(r.key,r.newValue))return[2,this.za(u.clientId,u)]}else if(this.Ra.test(r.key)){if(r.newValue!==null&&(a=this.Ja(r.key,r.newValue)))return[2,this.Ya(a)]}else if(this.Pa.test(r.key)){if(r.newValue!==null&&(h=this.Xa(r.key,r.newValue)))return[2,this.Za(h)]}else if(r.key===this.ya){if(r.newValue!==null&&(l=this.pa(r.newValue)))return[2,this.ba(l)]}else if(r.key===this.ma)(p=function(g){var m=He.q;if(g!=null)try{var w=JSON.parse(g);Y(typeof w=="number"),m=w}catch(b){Gt("SharedClientState","Failed to read sequence number from WebStorage",b)}return m}(r.newValue))!==He.q&&this.k(p);else if(r.key===this.ga)return[2,this._a.tu()]}}else this.Ta.push(r);return[2]})})})}},Object.defineProperty(e.prototype,"Oa",{get:function(){return this.Ea.get(this.la)},enumerable:!1,configurable:!0}),e.prototype.Va=function(){this.setItem(this.Ia,this.Oa.aa())},e.prototype.xa=function(t,n,r){var o=new Yw(this.currentUser,t,n,r),u=Kw(this.persistenceKey,this.currentUser,t);this.setItem(u,o.aa())},e.prototype.$a=function(t){var n=Kw(this.persistenceKey,this.currentUser,t);this.removeItem(n)},e.prototype.Ka=function(t){var n={clientId:this.la,onlineState:t};this.storage.setItem(this.ya,JSON.stringify(n))},e.prototype.qa=function(t,n,r){var o=lp(this.persistenceKey,t),u=new fp(t,n,r);this.setItem(o,u.aa())},e.prototype.ja=function(){this.setItem(this.ga,"value-not-used")},e.prototype.Ga=function(t){var n=this.Aa.exec(t);return n?n[1]:null},e.prototype.Ha=function(t,n){var r=this.Ga(t);return $w.ca(r,n)},e.prototype.Ja=function(t,n){var r=this.Ra.exec(t),o=Number(r[1]),u=r[2]!==void 0?r[2]:null;return Yw.ca(new qe(u),o,n)},e.prototype.Xa=function(t,n){var r=this.Pa.exec(t),o=Number(r[1]);return fp.ca(o,n)},e.prototype.pa=function(t){return mk.ca(t)},e.prototype.Ya=function(t){return k(this,void 0,void 0,function(){return R(this,function(n){return t.user.uid===this.currentUser.uid?[2,this._a.eu(t.batchId,t.state,t.error)]:(V("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])})})},e.prototype.Za=function(t){return this._a.nu(t.targetId,t.state,t.error)},e.prototype.za=function(t,n){var r=this,o=n?this.Ea.zt(t,n):this.Ea.remove(t),u=this.Sa(this.Ea),a=this.Sa(o),h=[],l=[];return a.forEach(function(p){u.has(p)||h.push(p)}),u.forEach(function(p){a.has(p)||l.push(p)}),this._a.su(h,l).then(function(){r.Ea=o})},e.prototype.ba=function(t){this.Ea.get(t.clientId)&&this.fa(t.onlineState)},e.prototype.Sa=function(t){var n=oh();return t.forEach(function(r,o){n=n.Pe(o.activeTargetIds)}),n},e}(),oI=function(){function e(){this.iu=new td,this.ru={},this.fa=null,this.k=null}return e.prototype.Ca=function(t){},e.prototype.Na=function(t,n,r){},e.prototype.Fa=function(t){return this.iu.ua(t),this.ru[t]||"not-current"},e.prototype.Ba=function(t,n,r){this.ru[t]=n},e.prototype.ka=function(t){this.iu.ha(t)},e.prototype.Ma=function(t){return this.iu.activeTargetIds.has(t)},e.prototype.La=function(t){delete this.ru[t]},e.prototype.va=function(){return this.iu.activeTargetIds},e.prototype.Da=function(t){return this.iu.activeTargetIds.has(t)},e.prototype.start=function(){return this.iu=new td,Promise.resolve()},e.prototype.Ua=function(t,n,r){},e.prototype.Qa=function(t){},e.prototype.ko=function(){},e.prototype.B=function(t){},e.prototype.Wa=function(){},e}(),_k=function(){function e(){}return e.prototype.ou=function(t){},e.prototype.ko=function(){},e}(),Xw=function(){function e(){var t=this;this.cu=function(){return t.au()},this.uu=function(){return t.hu()},this.lu=[],this._u()}return e.prototype.ou=function(t){this.lu.push(t)},e.prototype.ko=function(){window.removeEventListener("online",this.cu),window.removeEventListener("offline",this.uu)},e.prototype._u=function(){window.addEventListener("online",this.cu),window.addEventListener("offline",this.uu)},e.prototype.au=function(){V("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,n=this.lu;t<n.length;t++)(0,n[t])(0)},e.prototype.hu=function(){V("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,n=this.lu;t<n.length;t++)(0,n[t])(1)},e.Kn=function(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0},e}(),wk={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},bk=function(){function e(t){this.fu=t.fu,this.du=t.du}return e.prototype.wu=function(t){this.Eu=t},e.prototype.Tu=function(t){this.Iu=t},e.prototype.onMessage=function(t){this.mu=t},e.prototype.close=function(){this.du()},e.prototype.send=function(t){this.fu(t)},e.prototype.Au=function(){this.Eu()},e.prototype.Ru=function(t){this.Iu(t)},e.prototype.Pu=function(t){this.mu(t)},e}(),Ek=function(e){function t(n){var r=this;return(r=e.call(this,n)||this).forceLongPolling=n.forceLongPolling,r.i=n.i,r}return U(t,e),t.prototype.Su=function(n,r,o,u){return new Promise(function(a,h){var l=new QR;l.listenOnce(HR.COMPLETE,function(){try{switch(l.getLastErrorCode()){case cp.NO_ERROR:var v=l.getResponseJson();V("Connection","XHR received:",JSON.stringify(v)),a(v);break;case cp.TIMEOUT:V("Connection",'RPC "'+n+'" timed out'),h(new D(N.DEADLINE_EXCEEDED,"Request time out"));break;case cp.HTTP_ERROR:var g=l.getStatus();if(V("Connection",'RPC "'+n+'" failed with status:',g,"response text:",l.getResponseText()),g>0){var m=l.getResponseJson().error;if(m&&m.status&&m.message){var w=function(b){var I=b.toLowerCase().replace(/_/g,"-");return Object.values(N).indexOf(I)>=0?I:N.UNKNOWN}(m.status);h(new D(w,m.message))}else h(new D(N.UNKNOWN,"Server responded with status "+l.getStatus()))}else h(new D(N.UNAVAILABLE,"Connection failed."));break;default:W()}}finally{V("Connection",'RPC "'+n+'" completed.')}});var p=JSON.stringify(u);l.send(r,"POST",p,o,15)})},t.prototype.Cu=function(n,r){var o=[this.gu,"/","google.firestore.v1.Firestore","/",n,"/channel"],u=WR(),a=GR(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.t.projectId+"/databases/"+this.t.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.i};this.vu(h.initMessageHeaders,r),Ed()||Y0()||tC()||eC()||nC()||ZA()||(h.httpHeadersOverwriteParam="$httpHeaders");var l=o.join("");V("Connection","Creating WebChannel: "+l,h);var p=u.createWebChannel(l,h),v=!1,g=!1,m=new bk({fu:function(b){g?V("Connection","Not sending because WebChannel is closed:",b):(v||(V("Connection","Opening WebChannel transport."),p.open(),v=!0),V("Connection","WebChannel sending:",b),p.send(b))},du:function(){return p.close()}}),w=function(b,I,T){b.listen(I,function(C){try{T(C)}catch(F){setTimeout(function(){throw F},0)}})};return w(p,Qa.EventType.OPEN,function(){g||V("Connection","WebChannel transport opened.")}),w(p,Qa.EventType.CLOSE,function(){g||(g=!0,V("Connection","WebChannel transport closed"),m.Ru())}),w(p,Qa.EventType.ERROR,function(b){g||(g=!0,Qp("Connection","WebChannel transport errored:",b),m.Ru(new D(N.UNAVAILABLE,"The operation could not be completed")))}),w(p,Qa.EventType.MESSAGE,function(b){var I;if(!g){var T=b.data[0];Y(!!T);var C=T,F=C.error||((I=C[0])===null||I===void 0?void 0:I.error);if(F){V("Connection","WebChannel received error:",F);var M=F.status,$=function(P){var _t=qt[P];if(_t!==void 0)return CE(_t)}(M),nt=F.message;$===void 0&&($=N.INTERNAL,nt="Unknown error status: "+M+" with message "+F.message),g=!0,m.Ru(new D($,nt)),p.close()}else V("Connection","WebChannel received:",T),m.Pu(T)}}),w(a,zR.STAT_EVENT,function(b){b.stat===fw.PROXY?V("Connection","Detected buffering proxy"):b.stat===fw.NOPROXY&&V("Connection","Detected no buffering proxy")}),setTimeout(function(){m.Au()},0),m},t}(function(){function e(t){this.yu=t,this.t=t.t;var n=t.ssl?"https":"http";this.gu=n+"://"+t.host,this.Vu="projects/"+this.t.projectId+"/databases/"+this.t.database+"/documents"}return e.prototype.pu=function(t,n,r,o){var u=this.bu(t,n);V("RestConnection","Sending: ",u,r);var a={};return this.vu(a,o),this.Su(t,u,a,r).then(function(h){return V("RestConnection","Received: ",h),h},function(h){throw Qp("RestConnection",t+" failed with error: ",h,"url: ",u,"request:",r),h})},e.prototype.Du=function(t,n,r,o){return this.pu(t,n,r,o)},e.prototype.vu=function(t,n){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.2.9",t["Content-Type"]="text/plain",n)for(var r in n.g)n.g.hasOwnProperty(r)&&(t[r]=n.g[r])},e.prototype.bu=function(t,n){var r=wk[t];return this.gu+"/v1/"+n+":"+r},e}());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sI(){return typeof window<"u"?window:null}function ac(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sh(e){return new AO(e,!0)}var _v=function(){function e(t,n,r,o,u){r===void 0&&(r=1e3),o===void 0&&(o=1.5),u===void 0&&(u=6e4),this.Zr=t,this.fs=n,this.xu=r,this.Nu=o,this.$u=u,this.Fu=0,this.Ou=null,this.ku=Date.now(),this.reset()}return e.prototype.reset=function(){this.Fu=0},e.prototype.Mu=function(){this.Fu=this.$u},e.prototype.Lu=function(t){var n=this;this.cancel();var r=Math.floor(this.Fu+this.Bu()),o=Math.max(0,Date.now()-this.ku),u=Math.max(0,r-o);u>0&&V("ExponentialBackoff","Backing off for "+u+" ms (base delay: "+this.Fu+" ms, delay with jitter: "+r+" ms, last attempt: "+o+" ms ago)"),this.Ou=this.Zr.Tr(this.fs,u,function(){return n.ku=Date.now(),t()}),this.Fu*=this.Nu,this.Fu<this.xu&&(this.Fu=this.xu),this.Fu>this.$u&&(this.Fu=this.$u)},e.prototype.qu=function(){this.Ou!==null&&(this.Ou.Rs(),this.Ou=null)},e.prototype.cancel=function(){this.Ou!==null&&(this.Ou.cancel(),this.Ou=null)},e.prototype.Bu=function(){return(Math.random()-.5)*this.Fu},e}(),uI=function(){function e(t,n,r,o,u,a){this.Zr=t,this.Uu=r,this.Qu=o,this.Ku=u,this.listener=a,this.state=0,this.Wu=0,this.ju=null,this.stream=null,this.Gu=new _v(t,n)}return e.prototype.zu=function(){return this.state===1||this.state===2||this.state===4},e.prototype.Hu=function(){return this.state===2},e.prototype.start=function(){this.state!==3?this.auth():this.Ju()},e.prototype.stop=function(){return k(this,void 0,void 0,function(){return R(this,function(t){switch(t.label){case 0:return this.zu()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},e.prototype.Yu=function(){this.state=0,this.Gu.reset()},e.prototype.Xu=function(){var t=this;this.Hu()&&this.ju===null&&(this.ju=this.Zr.Tr(this.Uu,6e4,function(){return t.Zu()}))},e.prototype.th=function(t){this.eh(),this.stream.send(t)},e.prototype.Zu=function(){return k(this,void 0,void 0,function(){return R(this,function(t){return this.Hu()?[2,this.close(0)]:[2]})})},e.prototype.eh=function(){this.ju&&(this.ju.cancel(),this.ju=null)},e.prototype.close=function(t,n){return k(this,void 0,void 0,function(){return R(this,function(r){switch(r.label){case 0:return this.eh(),this.Gu.cancel(),this.Wu++,t!==3?this.Gu.reset():n&&n.code===N.RESOURCE_EXHAUSTED?(Gt(n.toString()),Gt("Using maximum backoff delay to prevent overloading the backend."),this.Gu.Mu()):n&&n.code===N.UNAUTHENTICATED&&this.Ku.p(),this.stream!==null&&(this.nh(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Tu(n)];case 1:return r.sent(),[2]}})})},e.prototype.nh=function(){},e.prototype.auth=function(){var t=this;this.state=1;var n=this.sh(this.Wu),r=this.Wu;this.Ku.getToken().then(function(o){t.Wu===r&&t.ih(o)},function(o){n(function(){var u=new D(N.UNKNOWN,"Fetching auth token failed: "+o.message);return t.rh(u)})})},e.prototype.ih=function(t){var n=this,r=this.sh(this.Wu);this.stream=this.oh(t),this.stream.wu(function(){r(function(){return n.state=2,n.listener.wu()})}),this.stream.Tu(function(o){r(function(){return n.rh(o)})}),this.stream.onMessage(function(o){r(function(){return n.onMessage(o)})})},e.prototype.Ju=function(){var t=this;this.state=4,this.Gu.Lu(function(){return k(t,void 0,void 0,function(){return R(this,function(n){return this.state=0,this.start(),[2]})})})},e.prototype.rh=function(t){return V("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},e.prototype.sh=function(t){var n=this;return function(r){n.Zr.Ps(function(){return n.Wu===t?r():(V("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}},e}(),Ik=function(e){function t(n,r,o,u,a){var h=this;return(h=e.call(this,n,"listen_stream_connection_backoff","listen_stream_idle",r,o,a)||this).Qt=u,h}return U(t,e),t.prototype.oh=function(n){return this.Qu.Cu("Listen",n)},t.prototype.onMessage=function(n){this.Gu.reset();var r=function(u,a){var h;if("targetChange"in a){a.targetChange;var l=function(T){return T==="NO_CHANGE"?0:T==="ADD"?1:T==="REMOVE"?2:T==="CURRENT"?3:T==="RESET"?4:W()}(a.targetChange.targetChangeType||"NO_CHANGE"),p=a.targetChange.targetIds||[],v=function(T,C){return T.Bt?(Y(C===void 0||typeof C=="string"),Le.fromBase64String(C||"")):(Y(C===void 0||C instanceof Uint8Array),Le.fromUint8Array(C||new Uint8Array))}(u,a.targetChange.resumeToken),g=(m=a.targetChange.cause)&&function(T){var C=T.code===void 0?N.UNKNOWN:CE(T.code);return new D(C,T.message||"")}(m);h=new kE(l,p,v,g||null)}else if("documentChange"in a){a.documentChange,(l=a.documentChange).document,l.document.name,l.document.updateTime,p=zn(u,l.document.name),v=Ie(l.document.updateTime);var m=new Ar({mapValue:{fields:l.document.fields}}),w=(g=new It(p,v,m,{}),l.targetIds||[]),b=l.removedTargetIds||[];h=new uc(w,b,g.key,g)}else if("documentDelete"in a)a.documentDelete,(l=a.documentDelete).document,p=zn(u,l.document),v=l.readTime?Ie(l.readTime):st.min(),m=new ee(p,v),g=l.removedTargetIds||[],h=new uc([],g,m.key,m);else if("documentRemove"in a)a.documentRemove,(l=a.documentRemove).document,p=zn(u,l.document),v=l.removedTargetIds||[],h=new uc([],v,p,null);else{if(!("filter"in a))return W();a.filter;var I=a.filter;I.targetId,l=I.count||0,p=new gO(l),v=I.targetId,h=new OE(v,p)}return h}(this.Qt,n),o=function(u){if(!("targetChange"in u))return st.min();var a=u.targetChange;return a.targetIds&&a.targetIds.length?st.min():a.readTime?Ie(a.readTime):st.min()}(n);return this.listener.ah(r,o)},t.prototype.uh=function(n){var r={};r.database=au(this.Qt),r.addTarget=function(u,a){var h,l=a.target;return(h=Sc(l)?{documents:ME(u,l)}:{query:FE(u,l)}).targetId=a.targetId,a.resumeToken.l()>0?h.resumeToken=DE(u,a.resumeToken):a.Ot._(st.min())>0&&(h.readTime=su(u,a.Ot.j())),h}(this.Qt,n);var o=function(u,a){var h=function(l,p){switch(p){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return W()}}(0,a.Ft);return h==null?null:{"goog-listen-tags":h}}(this.Qt,n);o&&(r.labels=o),this.th(r)},t.prototype.hh=function(n){var r={};r.database=au(this.Qt),r.removeTarget=n,this.th(r)},t}(uI),Tk=function(e){function t(n,r,o,u,a){var h=this;return(h=e.call(this,n,"write_stream_connection_backoff","write_stream_idle",r,o,a)||this).Qt=u,h.lh=!1,h}return U(t,e),Object.defineProperty(t.prototype,"_h",{get:function(){return this.lh},enumerable:!1,configurable:!0}),t.prototype.start=function(){this.lh=!1,this.lastStreamToken=void 0,e.prototype.start.call(this)},t.prototype.nh=function(){this.lh&&this.fh([])},t.prototype.oh=function(n){return this.Qu.Cu("Write",n)},t.prototype.onMessage=function(n){if(Y(!!n.streamToken),this.lastStreamToken=n.streamToken,this.lh){this.Gu.reset();var r=function(u,a){return u&&u.length>0?(Y(a!==void 0),u.map(function(h){return function(l,p){var v=l.updateTime?Ie(l.updateTime):Ie(p);v.isEqual(st.min())&&(v=Ie(p));var g=null;return l.transformResults&&l.transformResults.length>0&&(g=l.transformResults),new dO(v,g)}(h,a)})):[]}(n.writeResults,n.commitTime),o=Ie(n.commitTime);return this.listener.dh(o,r)}return Y(!n.writeResults||n.writeResults.length===0),this.lh=!0,this.listener.wh()},t.prototype.Eh=function(){var n={};n.database=au(this.Qt),this.th(n)},t.prototype.fh=function(n){var r=this,o={streamToken:this.lastStreamToken,writes:n.map(function(u){return Oc(r.Qt,u)})};this.th(o)},t}(uI),Sk=function(e){function t(n,r,o){var u=this;return(u=e.call(this)||this).credentials=n,u.Qu=r,u.Qt=o,u.Th=!1,u}return U(t,e),t.prototype.Ih=function(){if(this.Th)throw new D(N.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.pu=function(n,r,o){var u=this;return this.Ih(),this.credentials.getToken().then(function(a){return u.Qu.pu(n,r,o,a)}).catch(function(a){throw a.code===N.UNAUTHENTICATED&&u.credentials.p(),a})},t.prototype.Du=function(n,r,o){var u=this;return this.Ih(),this.credentials.getToken().then(function(a){return u.Qu.Du(n,r,o,a)}).catch(function(a){throw a.code===N.UNAUTHENTICATED&&u.credentials.p(),a})},t.prototype.terminate=function(){this.Th=!1},t}(function(){}),Nk=function(){function e(t,n){this._s=t,this.fa=n,this.state="Unknown",this.mh=0,this.Ah=null,this.Rh=!0}return e.prototype.Ph=function(){var t=this;this.mh===0&&(this.yh("Unknown"),this.Ah=this._s.Tr("online_state_timeout",1e4,function(){return t.Ah=null,t.gh("Backend didn't respond within 10 seconds."),t.yh("Offline"),Promise.resolve()}))},e.prototype.Vh=function(t){this.state==="Online"?this.yh("Unknown"):(this.mh++,this.mh>=1&&(this.ph(),this.gh("Connection failed 1 times. Most recent error: "+t.toString()),this.yh("Offline")))},e.prototype.set=function(t){this.ph(),this.mh=0,t==="Online"&&(this.Rh=!1),this.yh(t)},e.prototype.yh=function(t){t!==this.state&&(this.state=t,this.fa(t))},e.prototype.gh=function(t){var n="Could not reach Cloud Firestore backend. "+t+`
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.Rh?(Gt(n),this.Rh=!1):V("OnlineStateTracker",n)},e.prototype.ph=function(){this.Ah!==null&&(this.Ah.cancel(),this.Ah=null)},e}(),Ak=function(e,t,n,r,o){var u=this;this.bh=e,this.Sh=t,this._s=n,this.Dh={},this.Ch=[],this.xh=new Map,this.Nh=new Set,this.$h=[],this.Fh=o,this.Fh.ou(function(a){n.Ps(function(){return k(u,void 0,void 0,function(){return R(this,function(h){switch(h.label){case 0:return Lr(this)?(V("RemoteStore","Restarting streams for network reachability change."),[4,function(l){return k(this,void 0,void 0,function(){var p;return R(this,function(v){switch(v.label){case 0:return(p=j(l)).Nh.add(4),[4,Qo(p)];case 1:return v.sent(),p.Oh.set("Unknown"),p.Nh.delete(4),[4,Vu(p)];case 2:return v.sent(),[2]}})})}(this)]):[3,2];case 1:h.sent(),h.label=2;case 2:return[2]}})})})}),this.Oh=new Nk(n,r)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vu(e){return k(this,void 0,void 0,function(){var t,n;return R(this,function(r){switch(r.label){case 0:if(!Lr(e))return[3,4];t=0,n=e.$h,r.label=1;case 1:return t<n.length?[4,(0,n[t])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return t++,[3,1];case 4:return[2]}})})}function Qo(e){return k(this,void 0,void 0,function(){var t,n;return R(this,function(r){switch(r.label){case 0:t=0,n=e.$h,r.label=1;case 1:return t<n.length?[4,(0,n[t])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return t++,[3,1];case 4:return[2]}})})}function uh(e,t){var n=j(e);n.xh.has(t.targetId)||(n.xh.set(t.targetId,t),Ev(n)?bv(n):Yo(n).Hu()&&wv(n,t))}function cu(e,t){var n=j(e),r=Yo(n);n.xh.delete(t),r.Hu()&&aI(n,t),n.xh.size===0&&(r.Hu()?r.Xu():Lr(n)&&n.Oh.set("Unknown"))}function wv(e,t){e.kh.on(t.targetId),Yo(e).uh(t)}function aI(e,t){e.kh.on(t),Yo(e).hh(t)}function bv(e){e.kh=new TO({vn:function(t){return e.Dh.vn(t)},Sn:function(t){return e.xh.get(t)||null}}),Yo(e).start(),e.Oh.Ph()}function Ev(e){return Lr(e)&&!Yo(e).zu()&&e.xh.size>0}function Lr(e){return j(e).Nh.size===0}function cI(e){e.kh=void 0}function Ck(e){return k(this,void 0,void 0,function(){return R(this,function(t){return e.xh.forEach(function(n,r){wv(e,n)}),[2]})})}function Rk(e,t){return k(this,void 0,void 0,function(){return R(this,function(n){return cI(e),Ev(e)?(e.Oh.Vh(t),bv(e)):e.Oh.set("Unknown"),[2]})})}function Ok(e,t,n){return k(this,void 0,void 0,function(){var r,o,u;return R(this,function(a){switch(a.label){case 0:if(e.Oh.set("Online"),!(t instanceof kE&&t.state===2&&t.cause))return[3,6];a.label=1;case 1:return a.trys.push([1,3,,5]),[4,function(h,l){return k(this,void 0,void 0,function(){var p,v,g,m;return R(this,function(w){switch(w.label){case 0:p=l.cause,v=0,g=l.targetIds,w.label=1;case 1:return v<g.length?(m=g[v],h.xh.has(m)?[4,h.Dh.Mh(m,p)]:[3,3]):[3,5];case 2:w.sent(),h.xh.delete(m),h.kh.removeTarget(m),w.label=3;case 3:w.label=4;case 4:return v++,[3,1];case 5:return[2]}})})}(e,t)];case 2:return a.sent(),[3,5];case 3:return r=a.sent(),V("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),r),[4,Lc(e,r)];case 4:return a.sent(),[3,5];case 5:return[3,13];case 6:if(t instanceof uc?e.kh.dn(t):t instanceof OE?e.kh.Pn(t):e.kh.Tn(t),n.isEqual(st.min()))return[3,13];a.label=7;case 7:return a.trys.push([7,11,,13]),[4,nI(e.bh)];case 8:return o=a.sent(),n._(o)>=0?[4,function(h,l){var p=h.kh.Vn(l);return p.$e.forEach(function(v,g){if(v.resumeToken.l()>0){var m=h.xh.get(g);m&&h.xh.set(g,m.Mt(v.resumeToken,l))}}),p.Fe.forEach(function(v){var g=h.xh.get(v);if(g){h.xh.set(v,g.Mt(Le.T,g.Ot)),aI(h,v);var m=new nh(g.target,v,1,g.sequenceNumber);wv(h,m)}}),h.Dh.Lh(p)}(e,n)]:[3,10];case 9:a.sent(),a.label=10;case 10:return[3,13];case 11:return V("RemoteStore","Failed to raise snapshot:",u=a.sent()),[4,Lc(e,u)];case 12:return a.sent(),[3,13];case 13:return[2]}})})}function Lc(e,t,n){return k(this,void 0,void 0,function(){var r=this;return R(this,function(o){switch(o.label){case 0:if(!Ai(t))throw t;return e.Nh.add(1),[4,Qo(e)];case 1:return o.sent(),e.Oh.set("Offline"),n||(n=function(){return nI(e.bh)}),e._s.po(function(){return k(r,void 0,void 0,function(){return R(this,function(u){switch(u.label){case 0:return V("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return u.sent(),e.Nh.delete(1),[4,Vu(e)];case 2:return u.sent(),[2]}})})}),[2]}})})}function hI(e,t){return t().catch(function(n){return Lc(e,n,t)})}function Ko(e){return k(this,void 0,void 0,function(){var t,n,r,o,u;return R(this,function(a){switch(a.label){case 0:t=j(e),n=Rr(t),r=t.Ch.length>0?t.Ch[t.Ch.length-1].batchId:-1,a.label=1;case 1:if(!function(h){return Lr(h)&&h.Ch.length<10}(t))return[3,7];a.label=2;case 2:return a.trys.push([2,4,,6]),[4,ak(t.bh,r)];case 3:return(o=a.sent())===null?(t.Ch.length===0&&n.Xu(),[3,7]):(r=o.batchId,function(h,l){h.Ch.push(l);var p=Rr(h);p.Hu()&&p._h&&p.fh(l.mutations)}(t,o),[3,6]);case 4:return u=a.sent(),[4,Lc(t,u)];case 5:return a.sent(),[3,6];case 6:return[3,1];case 7:return lI(t)&&fI(t),[2]}})})}function lI(e){return Lr(e)&&!Rr(e).zu()&&e.Ch.length>0}function fI(e){Rr(e).start()}function kk(e){return k(this,void 0,void 0,function(){return R(this,function(t){return Rr(e).Eh(),[2]})})}function Dk(e){return k(this,void 0,void 0,function(){var t,n,r,o;return R(this,function(u){for(t=Rr(e),n=0,r=e.Ch;n<r.length;n++)o=r[n],t.fh(o.mutations);return[2]})})}function Pk(e,t,n){return k(this,void 0,void 0,function(){var r,o;return R(this,function(u){switch(u.label){case 0:return r=e.Ch.shift(),o=WO.from(r,t,n),[4,hI(e,function(){return e.Dh.Bh(o)})];case 1:return u.sent(),[4,Ko(e)];case 2:return u.sent(),[2]}})})}function xk(e,t){return k(this,void 0,void 0,function(){return R(this,function(n){switch(n.label){case 0:return t&&Rr(e)._h?[4,function(r,o){return k(this,void 0,void 0,function(){var u,a;return R(this,function(h){switch(h.label){case 0:return AE(a=o.code)&&a!==N.ABORTED?(u=r.Ch.shift(),Rr(r).Yu(),[4,hI(r,function(){return r.Dh.qh(u.batchId,o)})]):[3,3];case 1:return h.sent(),[4,Ko(r)];case 2:h.sent(),h.label=3;case 3:return[2]}})})}(e,t)]:[3,2];case 1:n.sent(),n.label=2;case 2:return lI(e)&&fI(e),[2]}})})}function ed(e,t){return k(this,void 0,void 0,function(){var n;return R(this,function(r){switch(r.label){case 0:return n=j(e),t?(n.Nh.delete(2),[4,Vu(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return t?[3,4]:(n.Nh.add(2),[4,Qo(n)]);case 3:r.sent(),n.Oh.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}})})}function Yo(e){var t=this;return e.Uh||(e.Uh=function(n,r,o){var u=j(n);return u.Ih(),new Ik(r,u.Qu,u.credentials,u.Qt,o)}(e.Sh,e._s,{wu:Ck.bind(null,e),Tu:Rk.bind(null,e),ah:Ok.bind(null,e)}),e.$h.push(function(n){return k(t,void 0,void 0,function(){return R(this,function(r){switch(r.label){case 0:return n?(e.Uh.Yu(),Ev(e)?bv(e):e.Oh.set("Unknown"),[3,3]):[3,1];case 1:return[4,e.Uh.stop()];case 2:r.sent(),cI(e),r.label=3;case 3:return[2]}})})})),e.Uh}function Rr(e){var t=this;return e.Qh||(e.Qh=function(n,r,o){var u=j(n);return u.Ih(),new Tk(r,u.Qu,u.credentials,u.Qt,o)}(e.Sh,e._s,{wu:kk.bind(null,e),Tu:xk.bind(null,e),wh:Dk.bind(null,e),dh:Pk.bind(null,e)}),e.$h.push(function(n){return k(t,void 0,void 0,function(){return R(this,function(r){switch(r.label){case 0:return n?(e.Qh.Yu(),[4,Ko(e)]):[3,2];case 1:return r.sent(),[3,4];case 2:return[4,e.Qh.stop()];case 3:r.sent(),e.Ch.length>0&&(V("RemoteStore","Stopping write stream with "+e.Ch.length+" pending writes"),e.Ch=[]),r.label=4;case 4:return[2]}})})})),e.Qh}var Lk=function(){this.Kh=void 0,this.listeners=[]},Mk=function(){this.queries=new zo(function(e){return gE(e)},Pu),this.onlineState="Unknown",this.Wh=new Set};function Iv(e,t){return k(this,void 0,void 0,function(){var n,r,o,u,a,h,l;return R(this,function(p){switch(p.label){case 0:if(n=j(e),r=t.query,o=!1,(u=n.queries.get(r))||(o=!0,u=new Lk),!o)return[3,4];p.label=1;case 1:return p.trys.push([1,3,,4]),a=u,[4,n.jh(r)];case 2:return a.Kh=p.sent(),[3,4];case 3:return h=p.sent(),l=Ho(h,"Initialization of query '"+$p(t.query)+"' failed"),[2,void t.onError(l)];case 4:return n.queries.set(r,u),u.listeners.push(t),t.Gh(n.onlineState),u.Kh&&t.zh(u.Kh)&&Sv(n),[2]}})})}function Tv(e,t){return k(this,void 0,void 0,function(){var n,r,o,u,a;return R(this,function(h){return n=j(e),r=t.query,o=!1,(u=n.queries.get(r))&&(a=u.listeners.indexOf(t))>=0&&(u.listeners.splice(a,1),o=u.listeners.length===0),o?[2,(n.queries.delete(r),n.Hh(r))]:[2]})})}function Fk(e,t){for(var n=j(e),r=!1,o=0,u=t;o<u.length;o++){var a=u[o],h=a.query,l=n.queries.get(h);if(l){for(var p=0,v=l.listeners;p<v.length;p++)v[p].zh(a)&&(r=!0);l.Kh=a}}r&&Sv(n)}function Vk(e,t,n){var r=j(e),o=r.queries.get(t);if(o)for(var u=0,a=o.listeners;u<a.length;u++)a[u].onError(n);r.queries.delete(t)}function Sv(e){e.Wh.forEach(function(t){t.next()})}var Nv=function(){function e(t,n,r){this.query=t,this.Jh=n,this.Yh=!1,this.Xh=null,this.onlineState="Unknown",this.options=r||{}}return e.prototype.zh=function(t){if(!this.options.includeMetadataChanges){for(var n=[],r=0,o=t.docChanges;r<o.length;r++){var u=o[r];u.type!==3&&n.push(u)}t=new Rc(t.query,t.docs,t.Se,n,t.De,t.fromCache,t.Ce,!0)}var a=!1;return this.Yh?this.Zh(t)&&(this.Jh.next(t),a=!0):this.tl(t,this.onlineState)&&(this.el(t),a=!0),this.Xh=t,a},e.prototype.onError=function(t){this.Jh.error(t)},e.prototype.Gh=function(t){this.onlineState=t;var n=!1;return this.Xh&&!this.Yh&&this.tl(this.Xh,t)&&(this.el(this.Xh),n=!0),n},e.prototype.tl=function(t,n){if(!t.fromCache)return!0;var r=n!=="Offline";return!(this.options.nl&&r||t.docs.et()&&n!=="Offline")},e.prototype.Zh=function(t){if(t.docChanges.length>0)return!0;var n=this.Xh&&this.Xh.hasPendingWrites!==t.hasPendingWrites;return!(!t.Ce&&!n)&&this.options.includeMetadataChanges===!0},e.prototype.el=function(t){t=Rc.Ne(t.query,t.docs,t.De,t.fromCache),this.Yh=!0,this.Jh.next(t)},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var pI=function(e){this.key=e},dI=function(e){this.key=e},vI=function(){function e(t,n){this.query=t,this.cl=n,this.al=null,this.Be=!1,this.ul=St(),this.De=St(),this.hl=mE(t),this.ll=new RE(this.hl)}return Object.defineProperty(e.prototype,"_l",{get:function(){return this.cl},enumerable:!1,configurable:!0}),e.prototype.fl=function(t,n){var r=this,o=n?n.dl:new Aw,u=n?n.ll:this.ll,a=n?n.De:this.De,h=u,l=!1,p=oc(this.query)&&u.size===this.query.limit?u.last():null,v=Ac(this.query)&&u.size===this.query.limit?u.first():null;if(t.Xt(function(m,w){var b=u.get(m),I=w instanceof It?w:null;I&&(I=xu(r.query,I)?I:null);var T=!!b&&r.De.has(b.key),C=!!I&&(I.Vt||r.De.has(I.key)&&I.hasCommittedMutations),F=!1;b&&I?b.data().isEqual(I.data())?T!==C&&(o.track({type:3,doc:I}),F=!0):r.wl(b,I)||(o.track({type:2,doc:I}),F=!0,(p&&r.hl(I,p)>0||v&&r.hl(I,v)<0)&&(l=!0)):!b&&I?(o.track({type:0,doc:I}),F=!0):b&&!I&&(o.track({type:1,doc:b}),F=!0,(p||v)&&(l=!0)),F&&(I?(h=h.add(I),a=C?a.add(m):a.delete(m)):(h=h.delete(m),a=a.delete(m)))}),oc(this.query)||Ac(this.query))for(;h.size>this.query.limit;){var g=oc(this.query)?h.last():h.first();h=h.delete(g.key),a=a.delete(g.key),o.track({type:1,doc:g})}return{ll:h,dl:o,lc:l,De:a}},e.prototype.wl=function(t,n){return t.Vt&&n.hasCommittedMutations&&!n.Vt},e.prototype.wi=function(t,n,r){var o=this,u=this.ll;this.ll=t.ll,this.De=t.De;var a=t.dl.ve();a.sort(function(v,g){return function(m,w){var b=function(I){switch(I){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return W()}};return b(m)-b(w)}(v.type,g.type)||o.hl(v.doc,g.doc)}),this.El(r);var h=n?this.Tl():[],l=this.ul.size===0&&this.Be?1:0,p=l!==this.al;return this.al=l,a.length!==0||p?{snapshot:new Rc(this.query,t.ll,u,a,t.De,l===0,p,!1),Il:h}:{Il:h}},e.prototype.Gh=function(t){return this.Be&&t==="Offline"?(this.Be=!1,this.wi({ll:this.ll,dl:new Aw,De:this.De,lc:!1},!1)):{Il:[]}},e.prototype.ml=function(t){return!this.cl.has(t)&&!!this.ll.has(t)&&!this.ll.get(t).Vt},e.prototype.El=function(t){var n=this;t&&(t.qe.forEach(function(r){return n.cl=n.cl.add(r)}),t.Ue.forEach(function(r){}),t.Qe.forEach(function(r){return n.cl=n.cl.delete(r)}),this.Be=t.Be)},e.prototype.Tl=function(){var t=this;if(!this.Be)return[];var n=this.ul;this.ul=St(),this.ll.forEach(function(o){t.ml(o.key)&&(t.ul=t.ul.add(o.key))});var r=[];return n.forEach(function(o){t.ul.has(o)||r.push(new dI(o))}),this.ul.forEach(function(o){n.has(o)||r.push(new pI(o))}),r},e.prototype.Al=function(t){this.cl=t.Rc,this.ul=St();var n=this.fl(t.documents);return this.wi(n,!0)},e.prototype.Rl=function(){return Rc.Ne(this.query,this.ll,this.De,this.al===0)},e}(),Uk=function(e,t,n){this.query=e,this.targetId=t,this.view=n},jk=function(e){this.key=e,this.Pl=!1},Bk=function(){function e(t,n,r,o,u,a){this.bh=t,this.yl=n,this.gl=r,this.Vl=o,this.currentUser=u,this.pl=a,this.bl={},this.vl=new zo(function(h){return gE(h)},Pu),this.Sl=new Map,this.Dl=new Set,this.Cl=new pe(H.H),this.xl=new Map,this.Nl=new mv,this.$l={},this.Fl=new Map,this.Ol=Dc.Li(),this.onlineState="Unknown",this.kl=void 0}return Object.defineProperty(e.prototype,"Ml",{get:function(){return this.kl===!0},enumerable:!1,configurable:!0}),e}();function qk(e,t){return k(this,void 0,void 0,function(){var n,r,o,u,a,h;return R(this,function(l){switch(l.label){case 0:return n=kv(e),(u=n.vl.get(t))?(r=u.targetId,n.Vl.Fa(r),o=u.view.Rl(),[3,4]):[3,1];case 1:return[4,Pc(n.bh,xn(t))];case 2:return a=l.sent(),h=n.Vl.Fa(a.targetId),r=a.targetId,[4,Av(n,t,r,h==="current")];case 3:o=l.sent(),n.Ml&&uh(n.yl,a),l.label=4;case 4:return[2,o]}})})}function Av(e,t,n,r){return k(this,void 0,void 0,function(){var o,u,a,h,l,p;return R(this,function(v){switch(v.label){case 0:return e.Ll=function(g,m,w){return function(b,I,T,C){return k(this,void 0,void 0,function(){var F,M,$;return R(this,function(nt){switch(nt.label){case 0:return F=I.view.fl(T),F.lc?[4,xc(b.bh,I.query,!1).then(function(P){var _t=P.documents;return I.view.fl(_t,F)})]:[3,2];case 1:F=nt.sent(),nt.label=2;case 2:return M=C&&C.$e.get(I.targetId),$=I.view.wi(F,b.Ml,M),[2,(nd(b,I.targetId,$.Il),$.snapshot)]}})})}(e,g,m,w)},[4,xc(e.bh,t,!0)];case 1:return o=v.sent(),u=new vI(t,o.Rc),a=u.fl(o.documents),h=lv.Le(n,r&&e.onlineState!=="Offline"),l=u.wi(a,e.Ml,h),nd(e,n,l.Il),p=new Uk(t,n,u),[2,(e.vl.set(t,p),e.Sl.has(n)?e.Sl.get(n).push(t):e.Sl.set(n,[t]),l.snapshot)]}})})}function Wk(e,t){return k(this,void 0,void 0,function(){var n,r,o;return R(this,function(u){switch(u.label){case 0:return n=j(e),r=n.vl.get(t),(o=n.Sl.get(r.targetId)).length>1?[2,(n.Sl.set(r.targetId,o.filter(function(a){return!Pu(a,t)})),void n.vl.delete(t))]:n.Ml?(n.Vl.ka(r.targetId),n.Vl.Da(r.targetId)?[3,2]:[4,Po(n.bh,r.targetId,!1).then(function(){n.Vl.La(r.targetId),cu(n.yl,r.targetId),xo(n,r.targetId)}).catch(Ci)]):[3,3];case 1:u.sent(),u.label=2;case 2:return[3,5];case 3:return xo(n,r.targetId),[4,Po(n.bh,r.targetId,!0)];case 4:u.sent(),u.label=5;case 5:return[2]}})})}function Gk(e,t,n){return k(this,void 0,void 0,function(){var r,o,u,a;return R(this,function(h){switch(h.label){case 0:r=Dv(e),h.label=1;case 1:return h.trys.push([1,5,,6]),[4,function(l,p){var v,g=j(l),m=Pe.now(),w=p.reduce(function(b,I){return b.add(I.key)},St());return g.persistence.runTransaction("Locally write mutations","readwrite",function(b){return g.Tc.Xo(b,w).next(function(I){v=I;for(var T=[],C=0,F=p;C<F.length;C++){var M=F[C],$=yO(M,v.get(M.key));$!=null&&T.push(new xr(M.key,$,pE($.proto.mapValue),ce.exists(!0)))}return g.zo.Ri(b,m,T,p)})}).then(function(b){var I=b.xs(v);return{batchId:b.batchId,ri:I}})}(r.bh,t)];case 2:return o=h.sent(),r.Vl.Ca(o.batchId),function(l,p,v){var g=l.$l[l.currentUser.A()];g||(g=new pe(at)),g=g.zt(p,v),l.$l[l.currentUser.A()]=g}(r,o.batchId,n),[4,Mr(r,o.ri)];case 3:return h.sent(),[4,Ko(r.yl)];case 4:return h.sent(),[3,6];case 5:return u=h.sent(),a=Ho(u,"Failed to persist write"),n.reject(a),[3,6];case 6:return[2]}})})}function yI(e,t){return k(this,void 0,void 0,function(){var n,r;return R(this,function(o){switch(o.label){case 0:n=j(e),o.label=1;case 1:return o.trys.push([1,4,,6]),[4,sk(n.bh,t)];case 2:return r=o.sent(),t.$e.forEach(function(u,a){var h=n.xl.get(a);h&&(Y(u.qe.size+u.Ue.size+u.Qe.size<=1),u.qe.size>0?h.Pl=!0:u.Ue.size>0?Y(h.Pl):u.Qe.size>0&&(Y(h.Pl),h.Pl=!1))}),[4,Mr(n,r,t)];case 3:return o.sent(),[3,6];case 4:return[4,Ci(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}})})}function Jw(e,t,n){var r=j(e);if(r.Ml&&n===0||!r.Ml&&n===1){var o=[];r.vl.forEach(function(u,a){var h=a.view.Gh(t);h.snapshot&&o.push(h.snapshot)}),function(u,a){var h=j(u);h.onlineState=a;var l=!1;h.queries.forEach(function(p,v){for(var g=0,m=v.listeners;g<m.length;g++)m[g].Gh(a)&&(l=!0)}),l&&Sv(h)}(r.gl,t),o.length&&r.bl.ah(o),r.onlineState=t,r.Ml&&r.Vl.Qa(t)}}function Hk(e,t,n){return k(this,void 0,void 0,function(){var r,o,u,a,h,l;return R(this,function(p){switch(p.label){case 0:return(r=j(e)).Vl.Ba(t,"rejected",n),o=r.xl.get(t),(u=o&&o.key)?(a=(a=new pe(H.H)).zt(u,new ee(u,st.min())),h=St().add(u),l=new hv(st.min(),new Map,new $t(at),a,h),[4,yI(r,l)]):[3,2];case 1:return p.sent(),r.Cl=r.Cl.remove(u),r.xl.delete(t),Ov(r),[3,4];case 2:return[4,Po(r.bh,t,!1).then(function(){return xo(r,t,n)}).catch(Ci)];case 3:p.sent(),p.label=4;case 4:return[2]}})})}function zk(e,t){return k(this,void 0,void 0,function(){var n,r,o;return R(this,function(u){switch(u.label){case 0:n=j(e),r=t.batch.batchId,u.label=1;case 1:return u.trys.push([1,4,,6]),[4,ok(n.bh,t)];case 2:return o=u.sent(),Rv(n,r,null),Cv(n,r),n.Vl.Na(r,"acknowledged"),[4,Mr(n,o)];case 3:return u.sent(),[3,6];case 4:return[4,Ci(u.sent())];case 5:return u.sent(),[3,6];case 6:return[2]}})})}function Qk(e,t,n){return k(this,void 0,void 0,function(){var r,o;return R(this,function(u){switch(u.label){case 0:r=j(e),u.label=1;case 1:return u.trys.push([1,4,,6]),[4,function(a,h){var l=j(a);return l.persistence.runTransaction("Reject batch","readwrite-primary",function(p){var v;return l.zo.Pi(p,h).next(function(g){return Y(g!==null),v=g.keys(),l.zo.Ci(p,g)}).next(function(){return l.zo.$i(p)}).next(function(){return l.Tc.Xo(p,v)})})}(r.bh,t)];case 2:return o=u.sent(),Rv(r,t,n),Cv(r,t),r.Vl.Na(t,"rejected",n),[4,Mr(r,o)];case 3:return u.sent(),[3,6];case 4:return[4,Ci(u.sent())];case 5:return u.sent(),[3,6];case 6:return[2]}})})}function Kk(e,t){return k(this,void 0,void 0,function(){var n,r,o,u,a;return R(this,function(h){switch(h.label){case 0:Lr((n=j(e)).yl)||V("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),h.label=1;case 1:return h.trys.push([1,3,,4]),[4,function(l){var p=j(l);return p.persistence.runTransaction("Get highest unacknowledged batch id","readonly",function(v){return p.zo.Vi(v)})}(n.bh)];case 2:return(r=h.sent())===-1?[2,void t.resolve()]:((o=n.Fl.get(r)||[]).push(t),n.Fl.set(r,o),[3,4]);case 3:return u=h.sent(),a=Ho(u,"Initialization of waitForPendingWrites() operation failed"),t.reject(a),[3,4];case 4:return[2]}})})}function Cv(e,t){(e.Fl.get(t)||[]).forEach(function(n){n.resolve()}),e.Fl.delete(t)}function Rv(e,t,n){var r=j(e),o=r.$l[r.currentUser.A()];if(o){var u=o.get(t);u&&(n?u.reject(n):u.resolve(),o=o.remove(t)),r.$l[r.currentUser.A()]=o}}function xo(e,t,n){n===void 0&&(n=null),e.Vl.ka(t);for(var r=0,o=e.Sl.get(t);r<o.length;r++){var u=o[r];e.vl.delete(u),n&&e.bl.Bl(u,n)}e.Sl.delete(t),e.Ml&&e.Nl.Fc(t).forEach(function(a){e.Nl.Fi(a)||gI(e,a)})}function gI(e,t){e.Dl.delete(t.path.rt());var n=e.Cl.get(t);n!==null&&(cu(e.yl,n),e.Cl=e.Cl.remove(t),e.xl.delete(n),Ov(e))}function nd(e,t,n){for(var r=0,o=n;r<o.length;r++){var u=o[r];u instanceof pI?(e.Nl.nr(u.key,t),Yk(e,u)):u instanceof dI?(V("SyncEngine","Document no longer in limbo: "+u.key),e.Nl.ir(u.key,t),e.Nl.Fi(u.key)||gI(e,u.key)):W()}}function Yk(e,t){var n=t.key,r=n.path.rt();e.Cl.get(n)||e.Dl.has(r)||(V("SyncEngine","New document in limbo: "+n),e.Dl.add(r),Ov(e))}function Ov(e){for(;e.Dl.size>0&&e.Cl.size<e.pl;){var t=e.Dl.values().next().value;e.Dl.delete(t);var n=new H(vt.ot(t)),r=e.Ol.next();e.xl.set(r,new jk(n)),e.Cl=e.Cl.zt(n,r),uh(e.yl,new nh(xn(Du(n.path)),r,2,He.q))}}function Mr(e,t,n){return k(this,void 0,void 0,function(){var r,o,u,a;return R(this,function(h){switch(h.label){case 0:return r=j(e),o=[],u=[],a=[],r.vl.et()?[3,3]:(r.vl.forEach(function(l,p){a.push(r.Ll(p,t,n).then(function(v){if(v){r.Ml&&r.Vl.Ba(p.targetId,v.fromCache?"not-current":"current"),o.push(v);var g=rk.oc(p.targetId,v);u.push(g)}}))}),[4,Promise.all(a)]);case 1:return h.sent(),r.bl.ah(o),[4,function(l,p){return k(this,void 0,void 0,function(){var v,g,m,w,b,I,T,C,F;return R(this,function(M){switch(M.label){case 0:v=j(l),M.label=1;case 1:return M.trys.push([1,3,,4]),[4,v.persistence.runTransaction("notifyLocalViewChanges","readwrite",function($){return x.forEach(p,function(nt){return x.forEach(nt.ic,function(P){return v.persistence.Ti.nr($,nt.targetId,P)}).next(function(){return x.forEach(nt.rc,function(P){return v.persistence.Ti.ir($,nt.targetId,P)})})})})];case 2:return M.sent(),[3,4];case 3:if(!Ai(g=M.sent()))throw g;return V("LocalStore","Failed to update sequence numbers: "+g),[3,4];case 4:for(m=0,w=p;m<w.length;m++)b=w[m],I=b.targetId,b.fromCache||(T=v.fc.get(I),C=T.Ot,F=T.Lt(C),v.fc=v.fc.zt(I,F));return[2]}})})}(r.bh,u)];case 2:h.sent(),h.label=3;case 3:return[2]}})})}function $k(e,t){return k(this,void 0,void 0,function(){var n,r;return R(this,function(o){switch(o.label){case 0:return(n=j(e)).currentUser.isEqual(t)?[3,3]:(V("SyncEngine","User change. New user:",t.A()),[4,eI(n.bh,t)]);case 1:return r=o.sent(),n.currentUser=t,function(u,a){u.Fl.forEach(function(h){h.forEach(function(l){l.reject(new D(N.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),u.Fl.clear()}(n),n.Vl.Ua(t,r.mc,r.Ac),[4,Mr(n,r.Ic)];case 2:o.sent(),o.label=3;case 3:return[2]}})})}function Xk(e,t){var n=j(e),r=n.xl.get(t);if(r&&r.Pl)return St().add(r.key);var o=St(),u=n.Sl.get(t);if(!u)return o;for(var a=0,h=u;a<h.length;a++){var l=h[a],p=n.vl.get(l);o=o.Pe(p.view._l)}return o}function Jk(e,t){return k(this,void 0,void 0,function(){var n,r,o;return R(this,function(u){switch(u.label){case 0:return[4,xc((n=j(e)).bh,t.query,!0)];case 1:return r=u.sent(),o=t.view.Al(r),[2,(n.Ml&&nd(n,t.targetId,o.Il),o)]}})})}function Zk(e){return k(this,void 0,void 0,function(){var t;return R(this,function(n){return[2,iI((t=j(e)).bh).then(function(r){return Mr(t,r)})]})})}function tD(e,t,n,r){return k(this,void 0,void 0,function(){var o,u;return R(this,function(a){switch(a.label){case 0:return[4,function(h,l){var p=j(h),v=j(p.zo);return p.persistence.runTransaction("Lookup mutation documents","readonly",function(g){return v.yi(g,l).next(function(m){return m?p.Tc.Xo(g,m):x.resolve(null)})})}((o=j(e)).bh,t)];case 1:return(u=a.sent())===null?[3,6]:n!=="pending"?[3,3]:[4,Ko(o.yl)];case 2:return a.sent(),[3,4];case 3:n==="acknowledged"||n==="rejected"?(Rv(o,t,r||null),Cv(o,t),function(h,l){j(j(h).zo).xi(l)}(o.bh,t)):W(),a.label=4;case 4:return[4,Mr(o,u)];case 5:return a.sent(),[3,7];case 6:V("SyncEngine","Cannot apply mutation batch with id: "+t),a.label=7;case 7:return[2]}})})}function eD(e,t){return k(this,void 0,void 0,function(){var n,r,o,u,a,h,l,p;return R(this,function(v){switch(v.label){case 0:return kv(n=j(e)),Dv(n),t!==!0||n.kl===!0?[3,3]:(r=n.Vl.va(),[4,Zw(n,r.it())]);case 1:return o=v.sent(),n.kl=!0,[4,ed(n.yl,!0)];case 2:for(v.sent(),u=0,a=o;u<a.length;u++)h=a[u],uh(n.yl,h);return[3,7];case 3:return t!==!1||n.kl===!1?[3,7]:(l=[],p=Promise.resolve(),n.Sl.forEach(function(g,m){n.Vl.Ma(m)?l.push(m):p=p.then(function(){return xo(n,m),Po(n.bh,m,!0)}),cu(n.yl,m)}),[4,p]);case 4:return v.sent(),[4,Zw(n,l)];case 5:return v.sent(),function(g){var m=j(g);m.xl.forEach(function(w,b){cu(m.yl,b)}),m.Nl.Oc(),m.xl=new Map,m.Cl=new pe(H.H)}(n),n.kl=!1,[4,ed(n.yl,!1)];case 6:v.sent(),v.label=7;case 7:return[2]}})})}function Zw(e,t,n){return k(this,void 0,void 0,function(){var r,o,u,a,h,l,p,v,g,m,w,b,I,T;return R(this,function(C){switch(C.label){case 0:r=j(e),o=[],u=[],a=0,h=t,C.label=1;case 1:return a<h.length?(l=h[a],p=void 0,(v=r.Sl.get(l))&&v.length!==0?[4,Pc(r.bh,xn(v[0]))]:[3,7]):[3,13];case 2:p=C.sent(),g=0,m=v,C.label=3;case 3:return g<m.length?(w=m[g],b=r.vl.get(w),[4,Jk(r,b)]):[3,6];case 4:(I=C.sent()).snapshot&&u.push(I.snapshot),C.label=5;case 5:return g++,[3,3];case 6:return[3,11];case 7:return[4,rI(r.bh,l)];case 8:return T=C.sent(),[4,Pc(r.bh,T)];case 9:return p=C.sent(),[4,Av(r,mI(T),l,!1)];case 10:C.sent(),C.label=11;case 11:o.push(p),C.label=12;case 12:return a++,[3,1];case 13:return[2,(r.bl.ah(u),o)]}})})}function mI(e){return vE(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function nD(e){var t=j(e);return j(j(t.bh).persistence).Uo()}function rD(e,t,n,r){return k(this,void 0,void 0,function(){var o,u,a;return R(this,function(h){switch(h.label){case 0:return(o=j(e)).kl?(V("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!o.Sl.has(t))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,iI(o.bh)];case 3:return u=h.sent(),a=hv.Me(t,n==="current"),[4,Mr(o,u,a)];case 4:return h.sent(),[3,8];case 5:return[4,Po(o.bh,t,!0)];case 6:return h.sent(),xo(o,t,r),[3,8];case 7:W(),h.label=8;case 8:return[2]}})})}function iD(e,t,n){return k(this,void 0,void 0,function(){var r,o,u,a,h,l,p,v,g,m;return R(this,function(w){switch(w.label){case 0:if(!(r=kv(e)).kl)return[3,10];o=0,u=t,w.label=1;case 1:return o<u.length?(a=u[o],r.Sl.has(a)?(V("SyncEngine","Adding an already active target "+a),[3,5]):[4,rI(r.bh,a)]):[3,6];case 2:return h=w.sent(),[4,Pc(r.bh,h)];case 3:return l=w.sent(),[4,Av(r,mI(h),l.targetId,!1)];case 4:w.sent(),uh(r.yl,l),w.label=5;case 5:return o++,[3,1];case 6:p=function(b){return R(this,function(I){switch(I.label){case 0:return r.Sl.has(b)?[4,Po(r.bh,b,!1).then(function(){cu(r.yl,b),xo(r,b)}).catch(Ci)]:[3,2];case 1:I.sent(),I.label=2;case 2:return[2]}})},v=0,g=n,w.label=7;case 7:return v<g.length?(m=g[v],[5,p(m)]):[3,10];case 8:w.sent(),w.label=9;case 9:return v++,[3,7];case 10:return[2]}})})}function kv(e){var t=j(e);return t.yl.Dh.Lh=yI.bind(null,t),t.yl.Dh.vn=Xk.bind(null,t),t.yl.Dh.Mh=Hk.bind(null,t),t.bl.ah=Fk.bind(null,t.gl),t.bl.Bl=Vk.bind(null,t.gl),t}function Dv(e){var t=j(e);return t.yl.Dh.Bh=zk.bind(null,t),t.yl.Dh.qh=Qk.bind(null,t),t}var _I=function(){function e(){this.synchronizeTabs=!1}return e.prototype.initialize=function(t){return k(this,void 0,void 0,function(){return R(this,function(n){switch(n.label){case 0:return this.Qt=sh(t.yu.t),this.Vl=this.Wl(t),this.persistence=this.jl(t),[4,this.persistence.start()];case 1:return n.sent(),this.Gl=this.zl(t),this.bh=this.Hl(t),[2]}})})},e.prototype.zl=function(t){return null},e.prototype.Hl=function(t){return tI(this.persistence,new ZE,t.Jl,this.Qt)},e.prototype.jl=function(t){return new vk(gk.ia,this.Qt)},e.prototype.Wl=function(t){return new oI},e.prototype.terminate=function(){return k(this,void 0,void 0,function(){return R(this,function(t){switch(t.label){case 0:return this.Gl&&this.Gl.stop(),[4,this.Vl.ko()];case 1:return t.sent(),[4,this.persistence.ko()];case 2:return t.sent(),[2]}})})},e}(),wI=function(e){function t(n,r,o){var u=this;return(u=e.call(this)||this).Yl=n,u.cacheSizeBytes=r,u.forceOwnership=o,u.synchronizeTabs=!1,u}return U(t,e),t.prototype.initialize=function(n){return k(this,void 0,void 0,function(){return R(this,function(r){switch(r.label){case 0:return[4,e.prototype.initialize.call(this,n)];case 1:return r.sent(),[4,ck(this.bh)];case 2:return r.sent(),[4,this.Yl.initialize(this,n)];case 3:return r.sent(),[4,Dv(this.Yl._a)];case 4:return r.sent(),[4,Ko(this.Yl.yl)];case 5:return r.sent(),[2]}})})},t.prototype.Hl=function(n){return tI(this.persistence,new ZE,n.Jl,this.Qt)},t.prototype.zl=function(n){var r=this.persistence.Ti.lr;return new $O(r,n._s)},t.prototype.jl=function(n){var r=gv(n.yu.t,n.yu.persistenceKey),o=this.cacheSizeBytes!==void 0?Cn.Ys(this.cacheSizeBytes):Cn.ti;return new nk(this.synchronizeTabs,r,n.clientId,o,n._s,sI(),ac(),this.Qt,this.Vl,!!this.forceOwnership)},t.prototype.Wl=function(n){return new oI},t}(_I),oD=function(e){function t(n,r){var o=this;return(o=e.call(this,n,r,!1)||this).Yl=n,o.cacheSizeBytes=r,o.synchronizeTabs=!0,o}return U(t,e),t.prototype.initialize=function(n){return k(this,void 0,void 0,function(){var r,o=this;return R(this,function(u){switch(u.label){case 0:return[4,e.prototype.initialize.call(this,n)];case 1:return u.sent(),r=this.Yl._a,this.Vl instanceof pp?(this.Vl._a={eu:tD.bind(null,r),nu:rD.bind(null,r),su:iD.bind(null,r),Uo:nD.bind(null,r),tu:Zk.bind(null,r)},[4,this.Vl.start()]):[3,3];case 2:u.sent(),u.label=3;case 3:return[4,this.persistence.Ro(function(a){return k(o,void 0,void 0,function(){return R(this,function(h){switch(h.label){case 0:return[4,eD(this.Yl._a,a)];case 1:return h.sent(),this.Gl&&(a&&!this.Gl.Er?this.Gl.start(this.bh):a||this.Gl.stop()),[2]}})})})];case 4:return u.sent(),[2]}})})},t.prototype.Wl=function(n){var r=sI();if(!pp.Kn(r))throw new D(N.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var o=gv(n.yu.t,n.yu.persistenceKey);return new pp(r,n._s,o,n.clientId,n.Jl)},t}(wI),rd=function(){function e(){}return e.prototype.initialize=function(t,n){return k(this,void 0,void 0,function(){var r=this;return R(this,function(o){switch(o.label){case 0:return this.bh?[3,2]:(this.bh=t.bh,this.Vl=t.Vl,this.Sh=this.Xl(n),this.yl=this.Zl(n),this.gl=this.t_(n),this._a=this.e_(n,!t.synchronizeTabs),this.Vl.fa=function(u){return Jw(r._a,u,1)},this.yl.Dh.n_=$k.bind(null,this._a),[4,ed(this.yl,this._a.Ml)]);case 1:o.sent(),o.label=2;case 2:return[2]}})})},e.prototype.t_=function(t){return new Mk},e.prototype.Xl=function(t){var n,r=sh(t.yu.t),o=(n=t.yu,new Ek(n));return function(u,a,h){return new Sk(u,a,h)}(t.credentials,o,r)},e.prototype.Zl=function(t){var n,r,o,u,a,h=this;return n=this.bh,r=this.Sh,o=t._s,u=function(l){return Jw(h._a,l,0)},a=Xw.Kn()?new Xw:new _k,new Ak(n,r,o,u,a)},e.prototype.e_=function(t,n){return function(r,o,u,a,h,l,p){var v=new Bk(r,o,u,a,h,l);return p&&(v.kl=!0),v}(this.bh,this.yl,this.gl,this.Vl,t.Jl,t.pl,n)},e.prototype.terminate=function(){return function(t){return k(this,void 0,void 0,function(){var n;return R(this,function(r){switch(r.label){case 0:return n=j(t),V("RemoteStore","RemoteStore shutting down."),n.Nh.add(5),[4,Qo(n)];case 1:return r.sent(),n.Fh.ko(),n.Oh.set("Unknown"),[2]}})})}(this.yl)},e}();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ah=function(){function e(t){this.observer=t,this.muted=!1}return e.prototype.next=function(t){this.observer.next&&this.s_(this.observer.next,t)},e.prototype.error=function(t){this.observer.error?this.s_(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},e.prototype.i_=function(){this.muted=!0},e.prototype.s_=function(t,n){var r=this;this.muted||setTimeout(function(){r.muted||t(n)},0)},e}(),Kn=function(){function e(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=0;r<t.length;++r)if(t[r].length===0)throw new D(N.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this.f_=new _n(t)}return e.prototype.isEqual=function(t){return this.f_.isEqual(t.f_)},e}(),Ri=function(e){this._methodName=e},lt=function(e){this.d_=e};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pv(e,t,n){if(!n)throw new D(N.INVALID_ARGUMENT,"Function "+e+"() cannot be called with an empty "+t+".")}function xv(e,t){if(t===void 0)return{merge:!1};if(t.mergeFields!==void 0&&t.merge!==void 0)throw new D(N.INVALID_ARGUMENT,"Invalid options passed to function "+e+'(): You cannot specify both "merge" and "mergeFields".');return t}function bI(e,t,n,r){if(t===!0&&r===!0)throw new D(N.INVALID_ARGUMENT,e+" and "+n+" cannot be used together.")}function t0(e){if(!H.wt(e))throw new D(N.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e+" has "+e.length+".")}function e0(e){if(H.wt(e))throw new D(N.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+e+" has "+e.length+".")}function ch(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=e.substring(0,20)+"..."),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";var t=function(n){if(n.constructor){var r=/function\s+([^\s(]+)\s*\(/.exec(n.constructor.toString());if(r&&r.length>1)return r[1]}return null}(e);return t?"a custom "+t+" object":"an object"}return typeof e=="function"?"a function":W()}function gt(e,t){if("_delegate"in e&&(e=e.d_),!(e instanceof t)){if(t.name===e.constructor.name)throw new D(N.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=ch(e);throw new D(N.INVALID_ARGUMENT,"Expected type '"+t.name+"', but it was: "+n)}return e}function n0(e,t){if(t<=0)throw new D(N.INVALID_ARGUMENT,"Function "+e+"() requires a positive number, but it was: "+t+".")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var r0=function(){function e(t){var n;if(t.host===void 0){if(t.ssl!==void 0)throw new D(N.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=(n=t.ssl)===null||n===void 0||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,t.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new D(N.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,bI("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return e.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties},e}(),i0=new Map,hu=function(){function e(t,n){this.w_="(lite)",this.E_=new r0({}),this.T_=!1,t instanceof Ec?(this.I_=t,this.m_=new pw):(this.A_=t,this.I_=function(r){if(!Object.prototype.hasOwnProperty.apply(r.options,["projectId"]))throw new D(N.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ec(r.options.projectId)}(t),this.m_=new XR(n))}return Object.defineProperty(e.prototype,"app",{get:function(){if(!this.A_)throw new D(N.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.A_},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"R_",{get:function(){return this.T_},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"P_",{get:function(){return this.y_!==void 0},enumerable:!1,configurable:!0}),e.prototype.g_=function(t){if(this.T_)throw new D(N.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this.E_=new r0(t),t.credentials!==void 0&&(this.m_=function(n){if(!n)return new pw;switch(n.type){case"gapi":var r=n.client;return Y(!(typeof r!="object"||r===null||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new ZR(r,n.sessionIndex||"0");case"provider":return n.client;default:throw new D(N.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},e.prototype.V_=function(){return this.E_},e.prototype.p_=function(){return this.T_=!0,this.E_},e.prototype._delete=function(){return this.y_||(this.y_=this.b_()),this.y_},e.prototype.toJSON=function(){return{app:this.A_,t:this.I_,settings:this.E_}},e.prototype.b_=function(){return t=this,(n=i0.get(t))&&(V("ComponentProvider","Removing Datastore"),i0.delete(t),n.terminate()),Promise.resolve();var t,n},e}(),xt=function(){function e(t,n,r){this.v_=n,this.S_=r,this.type="document",this.firestore=t}return Object.defineProperty(e.prototype,"D_",{get:function(){return this.S_.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this.S_.path.tt()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.S_.path.rt()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return new Er(this.firestore,this.v_,this.S_.path.X())},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this.S_)},e}(),Qe=function(){function e(t,n,r){this.v_=n,this.C_=r,this.type="query",this.firestore=t}return e.prototype.withConverter=function(t){return new e(this.firestore,t,this.C_)},e}(),Er=function(e){function t(n,r,o){var u=this;return(u=e.call(this,n,r,Du(o))||this).firestore=n,u.D_=o,u.type="collection",u}return U(t,e),Object.defineProperty(t.prototype,"id",{get:function(){return this.C_.path.tt()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this.C_.path.rt()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var n=this.D_.X();return n.et()?null:new xt(this.firestore,null,new H(n))},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(n){return new t(this.firestore,n,this.D_)},t}(Qe);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EI(e,t){for(var n,r=[],o=2;o<arguments.length;o++)r[o-2]=arguments[o];if(e instanceof lt&&(e=e.d_),Pv("collection","path",t),e instanceof hu)return e0(n=vt.ot.apply(vt,ae([t],r))),new Er(e,null,n);if(!(e instanceof xt||e instanceof Er))throw new D(N.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return e0(n=vt.ot.apply(vt,ae([e.path],r)).child(vt.ot(t))),new Er(e.firestore,null,n)}function cc(e,t){for(var n,r=[],o=2;o<arguments.length;o++)r[o-2]=arguments[o];if(e instanceof lt&&(e=e.d_),arguments.length===1&&(t=uE.u()),Pv("doc","path",t),e instanceof hu)return t0(n=vt.ot.apply(vt,ae([t],r))),new xt(e,null,new H(n));if(!(e instanceof xt||e instanceof Er))throw new D(N.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return t0(n=e.D_.child(vt.ot.apply(vt,ae([t],r)))),new xt(e.firestore,e instanceof Er?e.v_:null,new H(n))}function II(e,t){return e instanceof lt&&(e=e.d_),t instanceof lt&&(t=t.d_),(e instanceof xt||e instanceof Er)&&(t instanceof xt||t instanceof Er)&&e.firestore===t.firestore&&e.path===t.path&&e.v_===t.v_}function TI(e,t){return e instanceof lt&&(e=e.d_),t instanceof lt&&(t=t.d_),e instanceof Qe&&t instanceof Qe&&e.firestore===t.firestore&&Pu(e.C_,t.C_)&&e.v_===t.v_}var hh=function(){function e(t,n){if(!isFinite(t)||t<-90||t>90)throw new D(N.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new D(N.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this.x_=t,this.N_=n}return Object.defineProperty(e.prototype,"latitude",{get:function(){return this.x_},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"longitude",{get:function(){return this.N_},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return this.x_===t.x_&&this.N_===t.N_},e.prototype.toJSON=function(){return{latitude:this.x_,longitude:this.N_}},e.prototype.U=function(t){return at(this.x_,t.x_)||at(this.N_,t.N_)},e}(),sD=/^__.*__$/,uD=function(){function e(t,n,r){this.data=t,this.Gt=n,this.fieldTransforms=r}return e.prototype.F_=function(t,n){return this.Gt!==null?new xr(t,this.data,this.Gt,n,this.fieldTransforms):new Mu(t,this.data,n,this.fieldTransforms)},e}(),SI=function(){function e(t,n,r){this.data=t,this.Gt=n,this.fieldTransforms=r}return e.prototype.F_=function(t,n){return new xr(t,this.data,this.Gt,n,this.fieldTransforms)},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NI(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw W()}}var AI=function(){function e(t,n,r,o,u,a){this.settings=t,this.t=n,this.Qt=r,this.ignoreUndefinedProperties=o,u===void 0&&this.O_(),this.fieldTransforms=u||[],this.Gt=a||[]}return Object.defineProperty(e.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"k_",{get:function(){return this.settings.k_},enumerable:!1,configurable:!0}),e.prototype.M_=function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.t,this.Qt,this.ignoreUndefinedProperties,this.fieldTransforms,this.Gt)},e.prototype.L_=function(t){var n,r=(n=this.path)===null||n===void 0?void 0:n.child(t),o=this.M_({path:r,B_:!1});return o.q_(t),o},e.prototype.U_=function(t){var n,r=(n=this.path)===null||n===void 0?void 0:n.child(t),o=this.M_({path:r,B_:!1});return o.O_(),o},e.prototype.Q_=function(t){return this.M_({path:void 0,B_:!0})},e.prototype.K_=function(t){return Mc(t,this.settings.methodName,this.settings.W_||!1,this.path,this.settings.j_)},e.prototype.contains=function(t){return this.Gt.find(function(n){return t.nt(n)})!==void 0||this.fieldTransforms.find(function(n){return t.nt(n.field)})!==void 0},e.prototype.O_=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.q_(this.path.get(t))},e.prototype.q_=function(t){if(t.length===0)throw this.K_("Document fields must not be empty");if(NI(this.k_)&&sD.test(t))throw this.K_('Document fields cannot begin and end with "__"')},e}(),aD=function(){function e(t,n,r){this.t=t,this.ignoreUndefinedProperties=n,this.Qt=r||sh(t)}return e.prototype.G_=function(t,n,r,o){return o===void 0&&(o=!1),new AI({k_:t,methodName:n,j_:r,path:_n.ct(),B_:!1,W_:o},this.t,this.Qt,this.ignoreUndefinedProperties)},e}();function Oi(e){var t=e.p_(),n=sh(e.I_);return new aD(e.I_,!!t.ignoreUndefinedProperties,n)}function lh(e,t,n,r,o,u){u===void 0&&(u={});var a=e.G_(u.merge||u.mergeFields?2:0,t,n,o);Vv("Data must be an object, but it was:",a,r);var h,l,p=OI(r,a);if(u.merge)h=new Eo(a.Gt),l=a.fieldTransforms;else if(u.mergeFields){for(var v=[],g=0,m=u.mergeFields;g<m.length;g++){var w=id(t,m[g],n);if(!a.contains(w))throw new D(N.INVALID_ARGUMENT,"Field '"+w+"' is specified in your field mask but missing from your input data.");DI(v,w)||v.push(w)}h=new Eo(v),l=a.fieldTransforms.filter(function(b){return h.Tt(b.field)})}else h=null,l=a.fieldTransforms;return new uD(new Ar(p),h,l)}var Lv=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return U(t,e),t.prototype.z_=function(n){if(n.k_!==2)throw n.k_===1?n.K_(this._methodName+"() can only appear at the top level of your update data"):n.K_(this._methodName+"() cannot be used with set() unless you pass {merge:true}");return n.Gt.push(n.path),null},t.prototype.isEqual=function(n){return n instanceof t},t}(Ri);function CI(e,t,n){return new AI({k_:3,j_:t.settings.j_,methodName:e._methodName,B_:n},t.t,t.Qt,t.ignoreUndefinedProperties)}var cD=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return U(t,e),t.prototype.z_=function(n){return new Lu(n.path,new No)},t.prototype.isEqual=function(n){return n instanceof t},t}(Ri),hD=function(e){function t(n,r){var o=this;return(o=e.call(this,n)||this).H_=r,o}return U(t,e),t.prototype.z_=function(n){var r=CI(this,n,!0),o=this.H_.map(function(a){return ki(a,r)}),u=new Ei(o);return new Lu(n.path,u)},t.prototype.isEqual=function(n){return this===n},t}(Ri),lD=function(e){function t(n,r){var o=this;return(o=e.call(this,n)||this).H_=r,o}return U(t,e),t.prototype.z_=function(n){var r=CI(this,n,!0),o=this.H_.map(function(a){return ki(a,r)}),u=new Ii(o);return new Lu(n.path,u)},t.prototype.isEqual=function(n){return this===n},t}(Ri),fD=function(e){function t(n,r){var o=this;return(o=e.call(this,n)||this).J_=r,o}return U(t,e),t.prototype.z_=function(n){var r=new Ao(n.Qt,bE(n.Qt,this.J_));return new Lu(n.path,r)},t.prototype.isEqual=function(n){return this===n},t}(Ri);function Mv(e,t,n,r){var o=e.G_(1,t,n);Vv("Data must be an object, but it was:",o,r);var u=[],a=new Ou;Ru(r,function(l,p){var v=Uv(t,l,n);p instanceof lt&&(p=p.d_);var g=o.U_(v);if(p instanceof Lv)u.push(v);else{var m=ki(p,g);m!=null&&(u.push(v),a.set(v,m))}});var h=new Eo(u);return new SI(a.Pt(),h,o.fieldTransforms)}function Fv(e,t,n,r,o,u){var a=e.G_(1,t,n),h=[id(t,r,n)],l=[o];if(u.length%2!=0)throw new D(N.INVALID_ARGUMENT,"Function "+t+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var p=0;p<u.length;p+=2)h.push(id(t,u[p])),l.push(u[p+1]);for(var v=[],g=new Ou,m=h.length-1;m>=0;--m)if(!DI(v,h[m])){var w=h[m],b=l[m];b instanceof lt&&(b=b.d_);var I=a.U_(w);if(b instanceof Lv)v.push(w);else{var T=ki(b,I);T!=null&&(v.push(w),g.set(w,T))}}var C=new Eo(v);return new SI(g.Pt(),C,a.fieldTransforms)}function RI(e,t,n,r){return r===void 0&&(r=!1),ki(n,e.G_(r?4:3,t))}function ki(e,t){if(e instanceof lt&&(e=e.d_),kI(e))return Vv("Unsupported field value:",t,e),OI(e,t);if(e instanceof Ri)return function(n,r){if(!NI(r.k_))throw r.K_(n._methodName+"() can only be used with update() and set()");if(!r.path)throw r.K_(n._methodName+"() is not currently supported inside arrays");var o=n.z_(r);o&&r.fieldTransforms.push(o)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.Gt.push(t.path),e instanceof Array){if(t.settings.B_&&t.k_!==4)throw t.K_("Nested arrays are not supported");return function(n,r){for(var o=[],u=0,a=0,h=n;a<h.length;a++){var l=ki(h[a],r.Q_(u));l==null&&(l={nullValue:"NULL_VALUE"}),o.push(l),u++}return{arrayValue:{values:o}}}(e,t)}return function(n,r){if(n instanceof lt&&(n=n.d_),n===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return bE(r.Qt,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){var o=Pe.fromDate(n);return{timestampValue:su(r.Qt,o)}}if(n instanceof Pe)return o=new Pe(n.seconds,1e3*Math.floor(n.nanoseconds/1e3)),{timestampValue:su(r.Qt,o)};if(n instanceof hh)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof bi)return{bytesValue:DE(r.Qt,n.I)};if(n instanceof xt){o=r.t;var u=n.firestore.I_;if(!u.isEqual(o))throw r.K_("Document reference is for database "+u.projectId+"/"+u.database+" but should be for database "+o.projectId+"/"+o.database);return{referenceValue:fv(n.firestore.I_||r.t,n.S_.path)}}throw r.K_("Unsupported field value: "+ch(n))}(e,t)}function OI(e,t){var n={};return hE(e)?t.path&&t.path.length>0&&t.Gt.push(t.path):Ru(e,function(r,o){var u=ki(o,t.L_(r));u!=null&&(n[r]=u)}),{mapValue:{fields:n}}}function kI(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof Pe||e instanceof hh||e instanceof bi||e instanceof xt||e instanceof Ri)}function Vv(e,t,n){if(!kI(n)||!function(o){return typeof o=="object"&&o!==null&&(Object.getPrototypeOf(o)===Object.prototype||Object.getPrototypeOf(o)===null)}(n)){var r=ch(n);throw r==="an object"?t.K_(e+" a custom object"):t.K_(e+" "+r)}}function id(e,t,n){if(t instanceof lt&&(t=t.d_),t instanceof Kn)return t.f_;if(typeof t=="string")return Uv(e,t);throw Mc("Field path arguments must be of type string or FieldPath.",e,!1,void 0,n)}var pD=new RegExp("[~\\*/\\[\\]]");function Uv(e,t,n){if(t.search(pD)>=0)throw Mc("Invalid field path ("+t+"). Paths must not contain '~', '*', '/', '[', or ']'",e,!1,void 0,n);try{return new(Kn.bind.apply(Kn,ae([void 0],t.split("."))))().f_}catch{throw Mc("Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",e,!1,void 0,n)}}function Mc(e,t,n,r,o){var u=r&&!r.et(),a=o!==void 0,h="Function "+t+"() called with invalid data";n&&(h+=" (via `toFirestore()`)");var l="";return(u||a)&&(l+=" (found",u&&(l+=" in field "+r),a&&(l+=" in document "+o),l+=")"),new D(N.INVALID_ARGUMENT,(h+=". ")+e+l)}function DI(e,t){return e.some(function(n){return n.isEqual(t)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var dD=function(){function e(t){this.Sh=t,this.Y_=new Map,this.mutations=[],this.X_=!1,this.Z_=null,this.tf=new Set}return e.prototype.ef=function(t){return k(this,void 0,void 0,function(){var n,r=this;return R(this,function(o){switch(o.label){case 0:if(this.nf(),this.mutations.length>0)throw new D(N.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(u,a){return k(this,void 0,void 0,function(){var h,l,p,v,g,m;return R(this,function(w){switch(w.label){case 0:return h=j(u),l=au(h.Qt)+"/documents",p={documents:a.map(function(b){return uu(h.Qt,b)})},[4,h.Du("BatchGetDocuments",l,p)];case 1:return v=w.sent(),g=new Map,v.forEach(function(b){var I=function(T,C){return"found"in C?function(F,M){Y(!!M.found),M.found.name,M.found.updateTime;var $=zn(F,M.found.name),nt=Ie(M.found.updateTime),P=new Ar({mapValue:{fields:M.found.fields}});return new It($,nt,P,{})}(T,C):"missing"in C?function(F,M){Y(!!M.missing),Y(!!M.readTime);var $=zn(F,M.missing),nt=Ie(M.readTime);return new ee($,nt)}(T,C):W()}(h.Qt,b);g.set(I.key.toString(),I)}),m=[],[2,(a.forEach(function(b){var I=g.get(b.toString());Y(!!I),m.push(I)}),m)]}})})}(this.Sh,t)];case 1:return[2,((n=o.sent()).forEach(function(u){u instanceof ee||u instanceof It?r.sf(u):W()}),n)]}})})},e.prototype.set=function(t,n){this.write(n.F_(t,this.jt(t))),this.tf.add(t.toString())},e.prototype.update=function(t,n){try{this.write(n.F_(t,this.rf(t)))}catch(r){this.Z_=r}this.tf.add(t.toString())},e.prototype.delete=function(t){this.write(new Fu(t,this.jt(t))),this.tf.add(t.toString())},e.prototype.commit=function(){return k(this,void 0,void 0,function(){var t,n=this;return R(this,function(r){switch(r.label){case 0:if(this.nf(),this.Z_)throw this.Z_;return t=this.Y_,this.mutations.forEach(function(o){t.delete(o.key.toString())}),t.forEach(function(o,u){var a=H._t(u);n.mutations.push(new cv(a,n.jt(a)))}),[4,function(o,u){return k(this,void 0,void 0,function(){var a,h,l;return R(this,function(p){switch(p.label){case 0:return a=j(o),h=au(a.Qt)+"/documents",l={writes:u.map(function(v){return Oc(a.Qt,v)})},[4,a.pu("Commit",h,l)];case 1:return p.sent(),[2]}})})}(this.Sh,this.mutations)];case 1:return r.sent(),this.X_=!0,[2]}})})},e.prototype.sf=function(t){var n;if(t instanceof It)n=t.version;else{if(!(t instanceof ee))throw W();n=st.min()}var r=this.Y_.get(t.key.toString());if(r){if(!n.isEqual(r))throw new D(N.ABORTED,"Document version changed between two reads.")}else this.Y_.set(t.key.toString(),n)},e.prototype.jt=function(t){var n=this.Y_.get(t.toString());return!this.tf.has(t.toString())&&n?ce.updateTime(n):ce.Kt()},e.prototype.rf=function(t){var n=this.Y_.get(t.toString());if(!this.tf.has(t.toString())&&n){if(n.isEqual(st.min()))throw new D(N.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ce.updateTime(n)}return ce.exists(!0)},e.prototype.write=function(t){this.nf(),this.mutations.push(t)},e.prototype.nf=function(){},e}(),vD=function(){function e(t,n,r,o){this._s=t,this.Sh=n,this.updateFunction=r,this.Es=o,this.cf=5,this.Gu=new _v(this._s,"transaction_retry")}return e.prototype.run=function(){this.af()},e.prototype.af=function(){var t=this;this.Gu.Lu(function(){return k(t,void 0,void 0,function(){var n,r,o=this;return R(this,function(u){return n=new dD(this.Sh),(r=this.uf(n))&&r.then(function(a){o._s.Ps(function(){return n.commit().then(function(){o.Es.resolve(a)}).catch(function(h){o.hf(h)})})}).catch(function(a){o.hf(a)}),[2]})})})},e.prototype.uf=function(t){try{var n=this.updateFunction(t);return!Ni(n)&&n.catch&&n.then?n:(this.Es.reject(Error("Transaction callback must return a Promise")),null)}catch(r){return this.Es.reject(r),null}},e.prototype.hf=function(t){var n=this;this.cf>0&&this.lf(t)?(this.cf-=1,this._s.Ps(function(){return n.af(),Promise.resolve()})):this.Es.reject(t)},e.prototype.lf=function(t){if(t.name==="FirebaseError"){var n=t.code;return n==="aborted"||n==="failed-precondition"||!AE(n)}return!1},e}(),yD=function(){function e(t,n,r){var o=this;this.credentials=t,this._s=n,this.yu=r,this.user=qe.UNAUTHENTICATED,this.clientId=uE.u(),this._f=function(){},this.C=new $e,this.credentials.v(function(u){V("FirestoreClient","Received user=",u.uid),o.user=u,o._f(u),o.C.resolve()})}return e.prototype.getConfiguration=function(){return k(this,void 0,void 0,function(){return R(this,function(t){switch(t.label){case 0:return[4,this.C.promise];case 1:return[2,(t.sent(),{_s:this._s,yu:this.yu,clientId:this.clientId,credentials:this.credentials,Jl:this.user,pl:100})]}})})},e.prototype.ff=function(t){var n=this;this._f=t,this.C.promise.then(function(){return n._f(n.user)})},e.prototype.df=function(){if(this._s.wf)throw new D(N.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.terminate=function(){var t=this;this._s.Ef();var n=new $e;return this._s.Tf(function(){return k(t,void 0,void 0,function(){var r,o;return R(this,function(u){switch(u.label){case 0:return u.trys.push([0,5,,6]),this.If?[4,this.If.terminate()]:[3,2];case 1:u.sent(),u.label=2;case 2:return this.mf?[4,this.mf.terminate()]:[3,4];case 3:u.sent(),u.label=4;case 4:return this.credentials.S(),n.resolve(),[3,6];case 5:return r=u.sent(),o=Ho(r,"Failed to shutdown persistence"),n.reject(o),[3,6];case 6:return[2]}})})}),n.promise},e}();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PI(e,t){return k(this,void 0,void 0,function(){var n,r,o=this;return R(this,function(u){switch(u.label){case 0:return e._s.Af(),V("FirestoreClient","Initializing OfflineComponentProvider"),[4,e.getConfiguration()];case 1:return n=u.sent(),[4,t.initialize(n)];case 2:return u.sent(),r=n.Jl,e.ff(function(a){r.isEqual(a)||(r=a,e._s.po(function(){return k(o,void 0,void 0,function(){return R(this,function(h){switch(h.label){case 0:return[4,eI(t.bh,a)];case 1:return h.sent(),[2]}})})}))}),t.persistence.Po(function(){return e.terminate()}),e.mf=t,[2]}})})}function xI(e,t){return k(this,void 0,void 0,function(){var n,r;return R(this,function(o){switch(o.label){case 0:return e._s.Af(),[4,jv(e)];case 1:return n=o.sent(),V("FirestoreClient","Initializing OnlineComponentProvider"),[4,e.getConfiguration()];case 2:return r=o.sent(),[4,t.initialize(n,r)];case 3:return o.sent(),e.ff(function(u){return e._s.po(function(){return function(a,h){return k(this,void 0,void 0,function(){var l,p;return R(this,function(v){switch(v.label){case 0:return(l=j(a))._s.Af(),V("RemoteStore","RemoteStore received new credentials"),p=Lr(l),l.Nh.add(3),[4,Qo(l)];case 1:return v.sent(),p&&l.Oh.set("Unknown"),[4,l.Dh.n_(h)];case 2:return v.sent(),l.Nh.delete(3),[4,Vu(l)];case 3:return v.sent(),[2]}})})}(t.yl,u)})}),e.If=t,[2]}})})}function jv(e){return k(this,void 0,void 0,function(){return R(this,function(t){switch(t.label){case 0:return e.mf?[3,2]:(V("FirestoreClient","Using default OfflineComponentProvider"),[4,PI(e,new _I)]);case 1:t.sent(),t.label=2;case 2:return[2,e.mf]}})})}function fh(e){return k(this,void 0,void 0,function(){return R(this,function(t){switch(t.label){case 0:return e.If?[3,2]:(V("FirestoreClient","Using default OnlineComponentProvider"),[4,xI(e,new rd)]);case 1:t.sent(),t.label=2;case 2:return[2,e.If]}})})}function o0(e){return jv(e).then(function(t){return t.persistence})}function LI(e){return jv(e).then(function(t){return t.bh})}function s0(e){return fh(e).then(function(t){return t.yl})}function MI(e){return fh(e).then(function(t){return t._a})}function Lo(e){return k(this,void 0,void 0,function(){var t,n;return R(this,function(r){switch(r.label){case 0:return[4,fh(e)];case 1:return t=r.sent(),[2,((n=t.gl).jh=qk.bind(null,t._a),n.Hh=Wk.bind(null,t._a),n)]}})})}function u0(e,t,n){var r=this;n===void 0&&(n={});var o=new $e;return e._s.Ps(function(){return k(r,void 0,void 0,function(){var u;return R(this,function(a){switch(a.label){case 0:return u=function(h,l,p,v,g){var m=new ah({next:function(b){l.Ps(function(){return Tv(h,w)});var I=b.docs.has(p);!I&&b.fromCache?g.reject(new D(N.UNAVAILABLE,"Failed to get document because the client is offline.")):I&&b.fromCache&&v&&v.source==="server"?g.reject(new D(N.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(b)},error:function(b){return g.reject(b)}}),w=new Nv(Du(p.path),m,{includeMetadataChanges:!0,nl:!0});return Iv(h,w)},[4,Lo(e)];case 1:return[2,u.apply(void 0,[a.sent(),e._s,t,n,o])]}})})}),o.promise}function a0(e,t,n){var r=this;n===void 0&&(n={});var o=new $e;return e._s.Ps(function(){return k(r,void 0,void 0,function(){var u;return R(this,function(a){switch(a.label){case 0:return u=function(h,l,p,v,g){var m=new ah({next:function(b){l.Ps(function(){return Tv(h,w)}),b.fromCache&&v.source==="server"?g.reject(new D(N.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(b)},error:function(b){return g.reject(b)}}),w=new Nv(p,m,{includeMetadataChanges:!0,nl:!0});return Iv(h,w)},[4,Lo(e)];case 1:return[2,u.apply(void 0,[a.sent(),e._s,t,n,o])]}})})}),o.promise}var gD=function(){function e(){var t=this;this.Rf=Promise.resolve(),this.Pf=[],this.yf=!1,this.gf=[],this.Vf=null,this.pf=!1,this.bf=[],this.Gu=new _v(this,"async_queue_retry"),this.vf=function(){var r=ac();r&&V("AsyncQueue","Visibility state changed to "+r.visibilityState),t.Gu.qu()};var n=ac();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.vf)}return Object.defineProperty(e.prototype,"wf",{get:function(){return this.yf},enumerable:!1,configurable:!0}),e.prototype.Ps=function(t){this.enqueue(t)},e.prototype.Tf=function(t){this.Sf(),this.Df(t)},e.prototype.Ef=function(){if(!this.yf){this.yf=!0;var t=ac();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.vf)}},e.prototype.enqueue=function(t){return this.Sf(),this.yf?new Promise(function(n){}):this.Df(t)},e.prototype.po=function(t){var n=this;this.Ps(function(){return n.Pf.push(t),n.Cf()})},e.prototype.Cf=function(){return k(this,void 0,void 0,function(){var t,n=this;return R(this,function(r){switch(r.label){case 0:if(this.Pf.length===0)return[3,5];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.Pf[0]()];case 2:return r.sent(),this.Pf.shift(),this.Gu.reset(),[3,4];case 3:if(!Ai(t=r.sent()))throw t;return V("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.Pf.length>0&&this.Gu.Lu(function(){return n.Cf()}),r.label=5;case 5:return[2]}})})},e.prototype.Df=function(t){var n=this,r=this.Rf.then(function(){return n.pf=!0,t().catch(function(o){throw n.Vf=o,n.pf=!1,Gt("INTERNAL UNHANDLED ERROR: ",function(u){var a=u.message||"";return u.stack&&(a=u.stack.includes(u.message)?u.stack:u.message+`
`+u.stack),a}(o)),o}).then(function(o){return n.pf=!1,o})});return this.Rf=r,r},e.prototype.Tr=function(t,n,r){var o=this;this.Sf(),this.bf.indexOf(t)>-1&&(n=0);var u=FO.Ts(this,t,n,r,function(a){return o.xf(a)});return this.gf.push(u),u},e.prototype.Sf=function(){this.Vf&&W()},e.prototype.Af=function(){},e.prototype.Nf=function(){return k(this,void 0,void 0,function(){var t;return R(this,function(n){switch(n.label){case 0:return[4,t=this.Rf];case 1:n.sent(),n.label=2;case 2:if(t!==this.Rf)return[3,0];n.label=3;case 3:return[2]}})})},e.prototype.$f=function(t){for(var n=0,r=this.gf;n<r.length;n++)if(r[n].fs===t)return!0;return!1},e.prototype.Ff=function(t){var n=this;return this.Nf().then(function(){n.gf.sort(function(a,h){return a.ds-h.ds});for(var r=0,o=n.gf;r<o.length;r++){var u=o[r];if(u.Rs(),t!=="all"&&u.fs===t)break}return n.Nf()})},e.prototype.Of=function(t){this.bf.push(t)},e.prototype.xf=function(t){var n=this.gf.indexOf(t);this.gf.splice(n,1)},e}();function Mo(e){return function(t,n){if(typeof t!="object"||t===null)return!1;for(var r=t,o=0,u=["next","error","complete"];o<u.length;o++){var a=u[o];if(a in r&&typeof r[a]=="function")return!0}return!1}(e)}var mD=-1,Kt=function(e){function t(n,r){var o=this;return(o=e.call(this,n,r)||this).Bf=new gD,o.w_="name"in n?n.name:"[DEFAULT]",o}return U(t,e),t.prototype.b_=function(){return this.qf||FI(this),this.qf.terminate()},t}(hu);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ue(e){return e.qf||FI(e),e.qf.df(),e.qf}function FI(e){var t=e.p_(),n=function(r,o,u){return new KR(r,o,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling)}(e.I_,e.w_,t);e.qf=new yD(e.m_,e.Bf,n)}function c0(e,t,n){var r=this,o=new $e;return e._s.enqueue(function(){return k(r,void 0,void 0,function(){var u;return R(this,function(a){switch(a.label){case 0:return a.trys.push([0,3,,4]),[4,PI(e,n)];case 1:return a.sent(),[4,xI(e,t)];case 2:return a.sent(),o.resolve(),[3,4];case 3:if(!function(h){return h.name==="FirebaseError"?h.code===N.FAILED_PRECONDITION||h.code===N.UNIMPLEMENTED:!(typeof DOMException<"u"&&h instanceof DOMException)||h.code===22||h.code===20||h.code===11}(u=a.sent()))throw u;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+u),o.reject(u),[3,4];case 4:return[2]}})})}).then(function(){return o.promise})}function h0(e){if(e.R_||e.P_)throw new D(N.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Bv=function(){function e(){}return e.prototype.Uf=function(t,n){switch(n===void 0&&(n="none"),Nr(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Wt(t.integerValue||t.doubleValue);case 3:return this.Qf(t.timestampValue);case 4:return this.Kf(t,n);case 5:return t.stringValue;case 6:return this.Wf(Io(t.bytesValue));case 7:return this.jf(t.referenceValue);case 8:return this.Gf(t.geoPointValue);case 9:return this.zf(t.arrayValue,n);case 10:return this.Hf(t.mapValue,n);default:throw W()}},e.prototype.Hf=function(t,n){var r=this,o={};return Ru(t.fields||{},function(u,a){o[u]=r.Uf(a,n)}),o},e.prototype.Gf=function(t){return new hh(Wt(t.latitude),Wt(t.longitude))},e.prototype.zf=function(t,n){var r=this;return(t.values||[]).map(function(o){return r.Uf(o,n)})},e.prototype.Kf=function(t,n){switch(n){case"previous":var r=lE(t);return r==null?null:this.Uf(r,n);case"estimate":return this.Qf(nu(t));default:return null}},e.prototype.Qf=function(t){var n=Sr(t);return new Pe(n.seconds,n.nanos)},e.prototype.Jf=function(t,n){var r=vt.ot(t);Y(jE(r));var o=new Ec(r.get(1),r.get(3)),u=new H(r.Y(5));return o.isEqual(n)||Gt("Document "+u+" contains a document reference within a different database ("+o.projectId+"/"+o.database+") which is not supported. It will be treated as a reference in the current database ("+n.projectId+"/"+n.database+") instead."),u},e}(),lu=function(){function e(t,n,r,o,u){this.Yf=t,this.Xf=n,this.S_=r,this.Zf=o,this.v_=u}return Object.defineProperty(e.prototype,"id",{get:function(){return this.S_.path.tt()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ref",{get:function(){return new xt(this.Yf,this.v_,this.S_)},enumerable:!1,configurable:!0}),e.prototype.exists=function(){return this.Zf!==null},e.prototype.data=function(){if(this.Zf){if(this.v_){var t=new _D(this.Yf,this.Xf,this.S_,this.Zf,null);return this.v_.fromFirestore(t)}return this.Xf.Uf(this.Zf.bt())}},e.prototype.get=function(t){if(this.Zf){var n=this.Zf.data().field(Fc("DocumentSnapshot.get",t));if(n!==null)return this.Xf.Uf(n)}},e}(),_D=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return U(t,e),t.prototype.data=function(){return e.prototype.data.call(this)},t}(lu);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fc(e,t){return typeof t=="string"?Uv(e,t):t instanceof lt?t.d_.f_:t.f_}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VI(e){if(Ac(e)&&e.xt.length===0)throw new D(N.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Uu=function(){};function lr(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=0,o=t;r<o.length;r++){var u=o[r];e=u.td(e)}return e}var wD=function(e){function t(n,r,o){var u=this;return(u=e.call(this)||this).ed=n,u.nd=r,u.sd=o,u.type="where",u}return U(t,e),t.prototype.td=function(n){var r=Oi(n.firestore),o=function(u,a,h,l,p,v,g){var m;if(p.ut()){if(v==="array-contains"||v==="array-contains-any")throw new D(N.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+v+"' queries on FieldPath.documentId().");if(v==="in"||v==="not-in"){v0(g,v);for(var w=[],b=0,I=g;b<I.length;b++){var T=I[b];w.push(d0(l,u,T))}m={arrayValue:{values:w}}}else m=d0(l,u,g)}else v!=="in"&&v!=="not-in"&&v!=="array-contains-any"||v0(g,v),m=RI(h,"where",g,v==="in"||v==="not-in");var C=ze.create(p,v,m);return function(F,M){if(M.Ct()){var $=sv(F);if($!==null&&!$.isEqual(M.field))throw new D(N.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+$.toString()+"' and '"+M.field.toString()+"'");var nt=ov(F);nt!==null&&jI(F,M.field,nt)}var P=function(_t,Fr){for(var X=0,Pi=_t.filters;X<Pi.length;X++){var S=Pi[X];if(Fr.indexOf(S.op)>=0)return S.op}return null}(F,function(_t){switch(_t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(M.op));if(P!==null)throw P===M.op?new D(N.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+M.op.toString()+"' filter."):new D(N.INVALID_ARGUMENT,"Invalid query. You cannot use '"+M.op.toString()+"' filters with '"+P.toString()+"' filters.")}(u,C),C}(n.C_,0,r,n.firestore.I_,this.ed,this.nd,this.sd);return new Qe(n.firestore,n.v_,function(u,a){var h=u.filters.concat([a]);return new Zn(u.path,u.collectionGroup,u.xt.slice(),h,u.limit,u.limitType,u.startAt,u.endAt)}(n.C_,o))},t}(Uu),bD=function(e){function t(n,r){var o=this;return(o=e.call(this)||this).ed=n,o.rd=r,o.type="orderBy",o}return U(t,e),t.prototype.td=function(n){var r=function(o,u,a){if(o.startAt!==null)throw new D(N.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new D(N.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var h=new mo(u,a);return function(l,p){if(ov(l)===null){var v=sv(l);v!==null&&jI(l,v,p.field)}}(o,h),h}(n.C_,this.ed,this.rd);return new Qe(n.firestore,n.v_,function(o,u){var a=o.xt.concat([u]);return new Zn(o.path,o.collectionGroup,a,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)}(n.C_,r))},t}(Uu),l0=function(e){function t(n,r,o){var u=this;return(u=e.call(this)||this).type=n,u.od=r,u.ad=o,u}return U(t,e),t.prototype.td=function(n){return new Qe(n.firestore,n.v_,yE(n.C_,this.od,this.ad))},t}(Uu),f0=function(e){function t(n,r,o){var u=this;return(u=e.call(this)||this).type=n,u.ud=r,u.hd=o,u}return U(t,e),t.prototype.td=function(n){var r=UI(n,this.type,this.ud,this.hd);return new Qe(n.firestore,n.v_,function(o,u){return new Zn(o.path,o.collectionGroup,o.xt.slice(),o.filters.slice(),o.limit,o.limitType,u,o.endAt)}(n.C_,r))},t}(Uu),p0=function(e){function t(n,r,o){var u=this;return(u=e.call(this)||this).type=n,u.ud=r,u.hd=o,u}return U(t,e),t.prototype.td=function(n){var r=UI(n,this.type,this.ud,this.hd);return new Qe(n.firestore,n.v_,function(o,u){return new Zn(o.path,o.collectionGroup,o.xt.slice(),o.filters.slice(),o.limit,o.limitType,o.startAt,u)}(n.C_,r))},t}(Uu);function UI(e,t,n,r){if(n[0]instanceof lt&&(n[0]=n[0].d_),n[0]instanceof lu)return function(u,a,h,l,p){if(!l)throw new D(N.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+h+"().");for(var v=[],g=0,m=So(u);g<m.length;g++){var w=m[g];if(w.field.ut())v.push(Tc(a,l.key));else{var b=l.field(w.field);if(Zd(b))throw new D(N.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+w.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(b===null){var I=w.field.rt();throw new D(N.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+I+"' (used as the orderBy) does not exist.")}v.push(b)}}return new iu(v,p)}(e.C_,e.firestore.I_,t,n[0].Zf,r);var o=Oi(e.firestore);return function(u,a,h,l,p,v){var g=u.xt;if(p.length>g.length)throw new D(N.INVALID_ARGUMENT,"Too many arguments provided to "+l+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var m=[],w=0;w<p.length;w++){var b=p[w];if(g[w].field.ut()){if(typeof b!="string")throw new D(N.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+l+"(), but got a "+typeof b);if(!uv(u)&&b.indexOf("/")!==-1)throw new D(N.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+l+"() must be a plain document ID, but '"+b+"' contains a slash.");var I=u.path.child(vt.ot(b));if(!H.wt(I))throw new D(N.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+l+"() must result in a valid document path, but '"+I+"' is not because it contains an odd number of segments.");var T=new H(I);m.push(Tc(a,T))}else{var C=RI(h,l,b);m.push(C)}}return new iu(m,v)}(e.C_,e.firestore.I_,o,t,n,r)}function d0(e,t,n){if(n instanceof lt&&(n=n.d_),typeof n=="string"){if(n==="")throw new D(N.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!uv(t)&&n.indexOf("/")!==-1)throw new D(N.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=t.path.child(vt.ot(n));if(!H.wt(r))throw new D(N.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return Tc(e,new H(r))}if(n instanceof xt)return Tc(e,n.S_);throw new D(N.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+ch(n)+".")}function v0(e,t){if(!Array.isArray(e)||e.length===0)throw new D(N.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+t.toString()+"' filters.");if(e.length>10)throw new D(N.INVALID_ARGUMENT,"Invalid Query. '"+t.toString()+"' filters support a maximum of 10 elements in the value array.")}function jI(e,t,n){if(!n.isEqual(t))throw new D(N.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+t.toString()+"' and so you must also use '"+t.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ph(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var ED=function(e){function t(n){var r=this;return(r=e.call(this)||this).firestore=n,r}return U(t,e),t.prototype.Wf=function(n){return new bi(n)},t.prototype.jf=function(n){var r=this.Jf(n,this.firestore.I_);return new xt(this.firestore,null,r)},t}(Bv),hi=function(){function e(t,n){this.hasPendingWrites=t,this.fromCache=n}return e.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},e}(),Yn=function(e){function t(n,r,o,u,a,h){var l=this;return(l=e.call(this,n,r,o,u,h)||this).Yf=n,l.ld=n,l.metadata=a,l}return U(t,e),t.prototype.exists=function(){return e.prototype.exists.call(this)},t.prototype.data=function(n){if(n===void 0&&(n={}),this.Zf){if(this.v_){var r=new Qs(this.Yf,this.Xf,this.S_,this.Zf,this.metadata,null);return this.v_.fromFirestore(r,n)}return this.Xf.Uf(this.Zf.bt(),n.serverTimestamps)}},t.prototype.get=function(n,r){if(r===void 0&&(r={}),this.Zf){var o=this.Zf.data().field(Fc("DocumentSnapshot.get",n));if(o!==null)return this.Xf.Uf(o,r.serverTimestamps)}},t}(lu),Qs=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return U(t,e),t.prototype.data=function(n){return n===void 0&&(n={}),e.prototype.data.call(this,n)},t}(Yn),gr=function(){function e(t,n,r,o){this.Yf=t,this.Xf=n,this._d=o,this.metadata=new hi(o.hasPendingWrites,o.fromCache),this.query=r}return Object.defineProperty(e.prototype,"docs",{get:function(){var t=[];return this.forEach(function(n){return t.push(n)}),t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._d.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"empty",{get:function(){return this.size===0},enumerable:!1,configurable:!0}),e.prototype.forEach=function(t,n){var r=this;this._d.docs.forEach(function(o){t.call(n,new Qs(r.Yf,r.Xf,o.key,o,new hi(r._d.De.has(o.key),r._d.fromCache),r.query.v_))})},e.prototype.docChanges=function(t){t===void 0&&(t={});var n=!!t.includeMetadataChanges;if(n&&this._d.xe)throw new D(N.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this.fd&&this.dd===n||(this.fd=function(r,o){if(r._d.Se.et()){var u=0;return r._d.docChanges.map(function(h){var l=new Qs(r.Yf,r.Xf,h.doc.key,h.doc,new hi(r._d.De.has(h.doc.key),r._d.fromCache),r.query.v_);return h.doc,{type:"added",doc:l,oldIndex:-1,newIndex:u++}})}var a=r._d.Se;return r._d.docChanges.filter(function(h){return o||h.type!==3}).map(function(h){var l=new Qs(r.Yf,r.Xf,h.doc.key,h.doc,new hi(r._d.De.has(h.doc.key),r._d.fromCache),r.query.v_),p=-1,v=-1;return h.type!==0&&(p=a.indexOf(h.doc.key),a=a.delete(h.doc.key)),h.type!==1&&(v=(a=a.add(h.doc)).indexOf(h.doc.key)),{type:ID(h.type),doc:l,oldIndex:p,newIndex:v}})}(this,n),this.dd=n),this.fd},e}();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ID(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return W()}}function BI(e,t){return e instanceof Yn&&t instanceof Yn?e.Yf===t.Yf&&e.S_.isEqual(t.S_)&&(e.Zf===null?t.Zf===null:e.Zf.isEqual(t.Zf))&&e.v_===t.v_:e instanceof gr&&t instanceof gr&&e.Yf===t.Yf&&TI(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._d.isEqual(t._d)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var di=function(e){function t(n){var r=this;return(r=e.call(this)||this).firestore=n,r}return U(t,e),t.prototype.Wf=function(n){return new bi(n)},t.prototype.jf=function(n){var r=this.Jf(n,this.firestore.I_);return new xt(this.firestore,null,r)},t}(Bv);function y0(e,t,n){for(var r=[],o=3;o<arguments.length;o++)r[o-3]=arguments[o];e=gt(e,xt);var u=gt(e.firestore,Kt),a=Oi(u);return t instanceof lt&&(t=t.d_),fu(u,[(typeof t=="string"||t instanceof Kn?Fv(a,"updateDoc",e.S_,t,n,r):Mv(a,"updateDoc",e.S_,t)).F_(e.S_,ce.exists(!0))])}function qI(e){for(var t,n,r,o=[],u=1;u<arguments.length;u++)o[u-1]=arguments[u];e instanceof lt&&(e=e.d_);var a={includeMetadataChanges:!1},h=0;typeof o[h]!="object"||Mo(o[h])||(a=o[h],h++);var l,p,v,g={includeMetadataChanges:a.includeMetadataChanges};if(Mo(o[h])){var m=o[h];o[h]=(t=m.next)===null||t===void 0?void 0:t.bind(m),o[h+1]=(n=m.error)===null||n===void 0?void 0:n.bind(m),o[h+2]=(r=m.complete)===null||r===void 0?void 0:r.bind(m)}if(e instanceof xt)p=gt(e.firestore,Kt),v=Du(e.S_.path),l={next:function(I){o[h]&&o[h](od(p,e,I))},error:o[h+1],complete:o[h+2]};else{var w=gt(e,Qe);p=gt(w.firestore,Kt),v=w.C_;var b=new di(p);l={next:function(I){o[h]&&o[h](new gr(p,b,w,I))},error:o[h+1],complete:o[h+2]},VI(e.C_)}return function(I,T,C,F){var M=this,$=new ah(F),nt=new Nv(T,$,C);return I._s.Ps(function(){return k(M,void 0,void 0,function(){var P;return R(this,function(_t){switch(_t.label){case 0:return P=Iv,[4,Lo(I)];case 1:return[2,P.apply(void 0,[_t.sent(),nt])]}})})}),function(){$.i_(),I._s.Ps(function(){return k(M,void 0,void 0,function(){var P;return R(this,function(_t){switch(_t.label){case 0:return P=Tv,[4,Lo(I)];case 1:return[2,P.apply(void 0,[_t.sent(),nt])]}})})})}}(ue(p),v,g,l)}function fu(e,t){return function(n,r){var o=this,u=new $e;return n._s.Ps(function(){return k(o,void 0,void 0,function(){var a;return R(this,function(h){switch(h.label){case 0:return a=Gk,[4,MI(n)];case 1:return[2,a.apply(void 0,[h.sent(),r,u])]}})})}),u.promise}(ue(e),t)}function od(e,t,n){var r=n.docs.get(t.S_),o=new di(e);return new Yn(e,o,t.S_,r,new hi(n.hasPendingWrites,n.fromCache),t.v_)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var TD=function(){function e(t,n){this.Yf=t,this.wd=n,this.Ed=[],this.Td=!1,this.Id=Oi(t)}return e.prototype.set=function(t,n,r){this.md();var o=mr(t,this.Yf),u=ph(o.v_,n,r),a=lh(this.Id,"WriteBatch.set",o.S_,u,o.v_!==null,r);return this.Ed.push(a.F_(o.S_,ce.Kt())),this},e.prototype.update=function(t,n,r){for(var o=[],u=3;u<arguments.length;u++)o[u-3]=arguments[u];this.md();var a,h=mr(t,this.Yf);return n instanceof lt&&(n=n.d_),a=typeof n=="string"||n instanceof Kn?Fv(this.Id,"WriteBatch.update",h.S_,n,r,o):Mv(this.Id,"WriteBatch.update",h.S_,n),this.Ed.push(a.F_(h.S_,ce.exists(!0))),this},e.prototype.delete=function(t){this.md();var n=mr(t,this.Yf);return this.Ed=this.Ed.concat(new Fu(n.S_,ce.Kt())),this},e.prototype.commit=function(){return this.md(),this.Td=!0,this.Ed.length>0?this.wd(this.Ed):Promise.resolve()},e.prototype.md=function(){if(this.Td)throw new D(N.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},e}();function mr(e,t){if(e instanceof lt&&(e=e.d_),e.firestore!==t)throw new D(N.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var SD=function(e){function t(n,r){var o=this;return(o=e.call(this,n,r)||this).Yf=n,o}return U(t,e),t.prototype.get=function(n){var r=this,o=mr(n,this.Yf),u=new di(this.Yf);return e.prototype.get.call(this,n).then(function(a){return new Yn(r.Yf,u,o.S_,a.Zf,new hi(!1,!1),o.v_)})},t}(function(){function e(t,n){this.Yf=t,this.Ad=n,this.Id=Oi(t)}return e.prototype.get=function(t){var n=this,r=mr(t,this.Yf),o=new ED(this.Yf);return this.Ad.ef([r.S_]).then(function(u){if(!u||u.length!==1)return W();var a=u[0];if(a instanceof ee)return new lu(n.Yf,o,r.S_,null,r.v_);if(a instanceof It)return new lu(n.Yf,o,a.key,a,r.v_);throw W()})},e.prototype.set=function(t,n,r){var o=mr(t,this.Yf),u=ph(o.v_,n,r),a=lh(this.Id,"Transaction.set",o.S_,u,o.v_!==null,r);return this.Ad.set(o.S_,a),this},e.prototype.update=function(t,n,r){for(var o=[],u=3;u<arguments.length;u++)o[u-3]=arguments[u];var a,h=mr(t,this.Yf);return n instanceof lt&&(n=n.d_),a=typeof n=="string"||n instanceof Kn?Fv(this.Id,"Transaction.update",h.S_,n,r,o):Mv(this.Id,"Transaction.update",h.S_,n),this.Ad.update(h.S_,a),this},e.prototype.delete=function(t){var n=mr(t,this.Yf);return this.Ad.delete(n.S_),this},e}());/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g0(){if(typeof Uint8Array>"u")throw new D(N.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function m0(){if(typeof atob>"u")throw new D(N.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var WI=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return U(t,e),t.fromBase64String=function(n){return m0(),new t(bi.fromBase64String(n))},t.fromUint8Array=function(n){return g0(),new t(bi.fromUint8Array(n))},t.prototype.toBase64=function(){return m0(),this.d_.toBase64()},t.prototype.toUint8Array=function(){return g0(),this.d_.toUint8Array()},t.prototype.isEqual=function(n){return this.d_.isEqual(n.d_)},t.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},t}(lt),ND=function(){function e(){}return e.prototype.enableIndexedDbPersistence=function(t,n){return function(r,o){h0(r=gt(r,Kt));var u=ue(r),a=r.p_(),h=new rd;return c0(u,h,new wI(h,a.cacheSizeBytes,o?.forceOwnership))}(t.d_,{forceOwnership:n})},e.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(n){h0(n=gt(n,Kt));var r=ue(n),o=n.p_(),u=new rd;return c0(r,u,new oD(u,o.cacheSizeBytes))}(t.d_)},e.prototype.clearIndexedDbPersistence=function(t){return function(n){var r=this;if(n.R_&&!n.P_)throw new D(N.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var o=new $e;return n.Bf.Tf(function(){return k(r,void 0,void 0,function(){var u;return R(this,function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,function(h){return k(this,void 0,void 0,function(){var l;return R(this,function(p){switch(p.label){case 0:return Co.Kn()?(l=h+"main",[4,Co.delete(l)]):[2,Promise.resolve()];case 1:return p.sent(),[2]}})})}(gv(n.I_,n.w_))];case 1:return a.sent(),o.resolve(),[3,3];case 2:return u=a.sent(),o.reject(u),[3,3];case 3:return[2]}})})}),o.promise}(t.d_)},e}(),GI=function(e){function t(n,r,o){var u=this;return(u=e.call(this,r)||this).Rd=o,u.INTERNAL={delete:function(){return u.terminate()}},n instanceof Ec||(u.Pd=n),u}return U(t,e),Object.defineProperty(t.prototype,"I_",{get:function(){return this.d_.I_},enumerable:!1,configurable:!0}),t.prototype.settings=function(n){n.merge&&delete(n=Object.assign(Object.assign({},this.d_.V_()),n)).merge,this.d_.g_(n)},t.prototype.useEmulator=function(n,r){(function(o,u,a){var h=(o=gt(o,hu)).V_();h.host!=="firestore.googleapis.com"&&h.host!==u&&Qp("Host has been set in both settings() and useEmulator(), emulator host will be used"),o.g_(Object.assign(Object.assign({},h),{host:u+":"+a,ssl:!1}))})(this.d_,n,r)},t.prototype.enableNetwork=function(){return function(n){var r=this;return n._s.enqueue(function(){return k(r,void 0,void 0,function(){var o,u;return R(this,function(a){switch(a.label){case 0:return[4,o0(n)];case 1:return o=a.sent(),[4,s0(n)];case 2:return u=a.sent(),[2,(o.yo(!0),function(h){var l=j(h);return l.Nh.delete(0),Vu(l)}(u))]}})})})}(ue(gt(this.d_,Kt)))},t.prototype.disableNetwork=function(){return function(n){var r=this;return n._s.enqueue(function(){return k(r,void 0,void 0,function(){var o,u;return R(this,function(a){switch(a.label){case 0:return[4,o0(n)];case 1:return o=a.sent(),[4,s0(n)];case 2:return u=a.sent(),[2,(o.yo(!1),function(h){return k(this,void 0,void 0,function(){var l;return R(this,function(p){switch(p.label){case 0:return(l=j(h)).Nh.add(0),[4,Qo(l)];case 1:return p.sent(),l.Oh.set("Offline"),[2]}})})}(u))]}})})})}(ue(gt(this.d_,Kt)))},t.prototype.enablePersistence=function(n){var r=!1,o=!1;return n&&bI("synchronizeTabs",r=!!n.synchronizeTabs,"experimentalForceOwningTab",o=!!n.experimentalForceOwningTab),r?this.Rd.enableMultiTabIndexedDbPersistence(this):this.Rd.enableIndexedDbPersistence(this,o)},t.prototype.clearPersistence=function(){return this.Rd.clearIndexedDbPersistence(this)},t.prototype.terminate=function(){return this.Pd&&(this.Pd._removeServiceInstance("firestore"),this.Pd._removeServiceInstance("firestore-exp")),this.d_._delete()},t.prototype.waitForPendingWrites=function(){return function(n){var r=this,o=new $e;return n._s.Ps(function(){return k(r,void 0,void 0,function(){var u;return R(this,function(a){switch(a.label){case 0:return u=Kk,[4,MI(n)];case 1:return[2,u.apply(void 0,[a.sent(),o])]}})})}),o.promise}(ue(gt(this.d_,Kt)))},t.prototype.onSnapshotsInSync=function(n){return function(r,o){return function(u,a){var h=this,l=new ah(a);return u._s.Ps(function(){return k(h,void 0,void 0,function(){var p;return R(this,function(v){switch(v.label){case 0:return p=function(g,m){j(g).Wh.add(m),m.next()},[4,Lo(u)];case 1:return[2,p.apply(void 0,[v.sent(),l])]}})})}),function(){l.i_(),u._s.Ps(function(){return k(h,void 0,void 0,function(){var p;return R(this,function(v){switch(v.label){case 0:return p=function(g,m){j(g).Wh.delete(m)},[4,Lo(u)];case 1:return[2,p.apply(void 0,[v.sent(),l])]}})})})}}(ue(r=gt(r,Kt)),Mo(o)?o:{next:o})}(this.d_,n)},Object.defineProperty(t.prototype,"app",{get:function(){if(!this.Pd)throw new D(N.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.Pd},enumerable:!1,configurable:!0}),t.prototype.collection=function(n){try{return new Vc(this,EI(this.d_,n))}catch(r){throw ge(r,"collection()","Firestore.collection()")}},t.prototype.doc=function(n){try{return new vi(this,cc(this.d_,n))}catch(r){throw ge(r,"doc()","Firestore.doc()")}},t.prototype.collectionGroup=function(n){try{return new yh(this,function(r,o){if(r=gt(r,hu),Pv("collectionGroup","collection id",o),o.indexOf("/")>=0)throw new D(N.INVALID_ARGUMENT,"Invalid collection ID '"+o+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new Qe(r,null,function(u){return new Zn(vt.ct(),u)}(o))}(this.d_,n))}catch(r){throw ge(r,"collectionGroup()","Firestore.collectionGroup()")}},t.prototype.runTransaction=function(n){var r=this;return function(o,u){return function(a,h){var l=this,p=new $e;return a._s.Ps(function(){return k(l,void 0,void 0,function(){var v;return R(this,function(g){switch(g.label){case 0:return[4,function(m){return fh(m).then(function(w){return w.Sh})}(a)];case 1:return v=g.sent(),new vD(a._s,v,h,p).run(),[2]}})})}),p.promise}(ue(o),function(a){return u(new SD(o,a))})}(this.d_,function(o){return n(new HI(r,o))})},t.prototype.batch=function(){var n=this;return ue(this.d_),new zI(new TD(this.d_,function(r){return fu(n.d_,r)}))},t.prototype.loadBundle=function(n){throw new D(N.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},t.prototype.namedQuery=function(n){throw new D(N.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},t}(lt),dh=function(e){function t(n){var r=this;return(r=e.call(this)||this).firestore=n,r}return U(t,e),t.prototype.Wf=function(n){return new WI(new bi(n))},t.prototype.jf=function(n){var r=this.Jf(n,this.firestore.I_);return vi.yd(r,this.firestore,null)},t}(Bv);function AD(e){var t;t=e,gn.setLogLevel(t)}var HI=function(e){function t(n,r){var o=this;return(o=e.call(this,r)||this).Yf=n,o.Xf=new dh(n),o}return U(t,e),t.prototype.get=function(n){var r=this,o=li(n);return this.d_.get(o).then(function(u){return new pu(r.Yf,new Yn(r.Yf.d_,r.Xf,u.S_,u.Zf,u.metadata,o.v_))})},t.prototype.set=function(n,r,o){var u=li(n);return o?(xv("Transaction.set",o),this.d_.set(u,r,o)):this.d_.set(u,r),this},t.prototype.update=function(n,r,o){for(var u,a=[],h=3;h<arguments.length;h++)a[h-3]=arguments[h];var l=li(n);return arguments.length===2?this.d_.update(l,r):(u=this.d_).update.apply(u,ae([l,r,o],a)),this},t.prototype.delete=function(n){var r=li(n);return this.d_.delete(r),this},t}(lt),zI=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return U(t,e),t.prototype.set=function(n,r,o){var u=li(n);return o?(xv("WriteBatch.set",o),this.d_.set(u,r,o)):this.d_.set(u,r),this},t.prototype.update=function(n,r,o){for(var u,a=[],h=3;h<arguments.length;h++)a[h-3]=arguments[h];var l=li(n);return arguments.length===2?this.d_.update(l,r):(u=this.d_).update.apply(u,ae([l,r,o],a)),this},t.prototype.delete=function(n){var r=li(n);return this.d_.delete(r),this},t.prototype.commit=function(){return this.d_.commit()},t}(lt),vh=function(e){function t(n,r,o){var u=this;return(u=e.call(this,o)||this).Yf=n,u.Xf=r,u}return U(t,e),t.prototype.fromFirestore=function(n,r){var o=new Qs(this.Yf.d_,this.Xf,n.S_,n.Zf,n.metadata,null);return this.d_.fromFirestore(new du(this.Yf,o),r??{})},t.prototype.toFirestore=function(n,r){return r?this.d_.toFirestore(n,r):this.d_.toFirestore(n)},t.gd=function(n,r){var o=t.Vd,u=o.get(n);u||(u=new WeakMap,o.set(n,u));var a=u.get(r);return a||(a=new t(n,new dh(n),r),u.set(r,a)),a},t}(lt);vh.Vd=new WeakMap;var vi=function(e){function t(n,r){var o=this;return(o=e.call(this,r)||this).firestore=n,o.Xf=new dh(n),o}return U(t,e),t.pd=function(n,r,o){if(n.length%2!=0)throw new D(N.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+n.rt()+" has "+n.length);return new t(r,new xt(r.d_,o,new H(n)))},t.yd=function(n,r,o){return new t(r,new xt(r.d_,o,n))},Object.defineProperty(t.prototype,"id",{get:function(){return this.d_.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new Vc(this.firestore,this.d_.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this.d_.path},enumerable:!1,configurable:!0}),t.prototype.collection=function(n){try{return new Vc(this.firestore,EI(this.d_,n))}catch(r){throw ge(r,"collection()","DocumentReference.collection()")}},t.prototype.isEqual=function(n){return n instanceof lt&&(n=n.d_),n instanceof xt&&II(this.d_,n)},t.prototype.set=function(n,r){r=xv("DocumentReference.set",r);try{return function(o,u,a){o=gt(o,xt);var h=gt(o.firestore,Kt),l=ph(o.v_,u,a);return fu(h,[lh(Oi(h),"setDoc",o.S_,l,o.v_!==null,a).F_(o.S_,ce.Kt())])}(this.d_,n,r)}catch(o){throw ge(o,"setDoc()","DocumentReference.set()")}},t.prototype.update=function(n,r){for(var o=[],u=2;u<arguments.length;u++)o[u-2]=arguments[u];try{return arguments.length===1?y0(this.d_,n):y0.apply(void 0,ae([this.d_,n,r],o))}catch(a){throw ge(a,"updateDoc()","DocumentReference.update()")}},t.prototype.delete=function(){return fu(gt((n=this.d_).firestore,Kt),[new Fu(n.S_,ce.Kt())]);var n},t.prototype.onSnapshot=function(){for(var n=this,r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];var u=QI(r),a=KI(r,function(h){return new pu(n.firestore,new Yn(n.firestore.d_,n.Xf,h.S_,h.Zf,h.metadata,n.d_.v_))});return qI(this.d_,u,a)},t.prototype.get=function(n){var r=this;return(n?.source==="cache"?function(o){o=gt(o,xt);var u=gt(o.firestore,Kt),a=ue(u),h=new di(u);return function(l,p){var v=this,g=new $e;return l._s.Ps(function(){return k(v,void 0,void 0,function(){var m;return R(this,function(w){switch(w.label){case 0:return m=function(b,I,T){return k(this,void 0,void 0,function(){var C,F;return R(this,function(M){switch(M.label){case 0:return M.trys.push([0,2,,3]),[4,function($,nt){var P=j($);return P.persistence.runTransaction("read document","readonly",function(_t){return P.Tc.Ho(_t,nt)})}(b,I)];case 1:return(F=M.sent())instanceof It?T.resolve(F):F instanceof ee?T.resolve(null):T.reject(new D(N.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return C=M.sent(),F=Ho(C,"Failed to get document '"+I+" from cache"),T.reject(F),[3,3];case 3:return[2]}})})},[4,LI(l)];case 1:return[2,m.apply(void 0,[w.sent(),p,g])]}})})}),g.promise}(a,o.S_).then(function(l){return new Yn(u,h,o.S_,l,new hi(l instanceof It&&l.Vt,!0),o.v_)})}(this.d_):n?.source==="server"?function(o){o=gt(o,xt);var u=gt(o.firestore,Kt);return u0(ue(u),o.S_,{source:"server"}).then(function(a){return od(u,o,a)})}(this.d_):function(o){o=gt(o,xt);var u=gt(o.firestore,Kt);return u0(ue(u),o.S_).then(function(a){return od(u,o,a)})}(this.d_)).then(function(o){return new pu(r.firestore,new Yn(r.firestore.d_,r.Xf,o.S_,o.Zf,o.metadata,r.d_.v_))})},t.prototype.withConverter=function(n){return new t(this.firestore,this.d_.withConverter(vh.gd(this.firestore,n)))},t}(lt);function ge(e,t,n){return e.message=e.message.replace(t,n),e}function QI(e){for(var t=0,n=e;t<n.length;t++){var r=n[t];if(typeof r=="object"&&!Mo(r))return r}return{}}function KI(e,t){var n,r,o;return{next:function(u){o.next&&o.next(t(u))},error:(n=(o=Mo(e[0])?e[0]:Mo(e[1])?e[1]:typeof e[0]=="function"?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)===null||n===void 0?void 0:n.bind(o),complete:(r=o.complete)===null||r===void 0?void 0:r.bind(o)}}var pu=function(e){function t(n,r){var o=this;return(o=e.call(this,r)||this).Yf=n,o}return U(t,e),Object.defineProperty(t.prototype,"ref",{get:function(){return new vi(this.Yf,this.d_.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this.d_.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this.d_.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"exists",{get:function(){return this.d_.exists()},enumerable:!1,configurable:!0}),t.prototype.data=function(n){return this.d_.data(n)},t.prototype.get=function(n,r){return this.d_.get(n,r)},t.prototype.isEqual=function(n){return BI(this.d_,n.d_)},t}(lt),du=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return U(t,e),t.prototype.data=function(n){return this.d_.data(n)},t}(pu),yh=function(e){function t(n,r){var o=this;return(o=e.call(this,r)||this).firestore=n,o.Xf=new dh(n),o}return U(t,e),t.prototype.where=function(n,r,o){try{return new t(this.firestore,lr(this.d_,function(u,a,h){var l=a,p=Fc("where",u);return new wD(p,l,h)}(n,r,o)))}catch(u){throw ge(u,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.orderBy=function(n,r){try{return new t(this.firestore,lr(this.d_,function(o,u){u===void 0&&(u="asc");var a=u,h=Fc("orderBy",o);return new bD(h,a)}(n,r)))}catch(o){throw ge(o,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.limit=function(n){try{return new t(this.firestore,lr(this.d_,function(r){return n0("limit",r),new l0("limit",r,"F")}(n)))}catch(r){throw ge(r,"limit()","Query.limit()")}},t.prototype.limitToLast=function(n){try{return new t(this.firestore,lr(this.d_,function(r){return n0("limitToLast",r),new l0("limitToLast",r,"L")}(n)))}catch(r){throw ge(r,"limitToLast()","Query.limitToLast()")}},t.prototype.startAt=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];try{return new t(this.firestore,lr(this.d_,function(){for(var o=[],u=0;u<arguments.length;u++)o[u]=arguments[u];return new f0("startAt",o,!0)}.apply(void 0,n)))}catch(o){throw ge(o,"startAt()","Query.startAt()")}},t.prototype.startAfter=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];try{return new t(this.firestore,lr(this.d_,function(){for(var o=[],u=0;u<arguments.length;u++)o[u]=arguments[u];return new f0("startAfter",o,!1)}.apply(void 0,n)))}catch(o){throw ge(o,"startAfter()","Query.startAfter()")}},t.prototype.endBefore=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];try{return new t(this.firestore,lr(this.d_,function(){for(var o=[],u=0;u<arguments.length;u++)o[u]=arguments[u];return new p0("endBefore",o,!0)}.apply(void 0,n)))}catch(o){throw ge(o,"endBefore()","Query.endBefore()")}},t.prototype.endAt=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];try{return new t(this.firestore,lr(this.d_,function(){for(var o=[],u=0;u<arguments.length;u++)o[u]=arguments[u];return new p0("endAt",o,!1)}.apply(void 0,n)))}catch(o){throw ge(o,"endAt()","Query.endAt()")}},t.prototype.isEqual=function(n){return TI(this.d_,n.d_)},t.prototype.get=function(n){var r=this;return(n?.source==="cache"?function(o){o=gt(o,Qe);var u=gt(o.firestore,Kt),a=ue(u),h=new di(u);return function(l,p){var v=this,g=new $e;return l._s.Ps(function(){return k(v,void 0,void 0,function(){var m;return R(this,function(w){switch(w.label){case 0:return m=function(b,I,T){return k(this,void 0,void 0,function(){var C,F,M,$,nt;return R(this,function(P){switch(P.label){case 0:return P.trys.push([0,2,,3]),[4,xc(b,I,!0)];case 1:return nt=P.sent(),C=new vI(I,nt.Rc),F=C.fl(nt.documents),M=C.wi(F,!1),T.resolve(M.snapshot),[3,3];case 2:return $=P.sent(),nt=Ho($,"Failed to execute query '"+I+" against cache"),T.reject(nt),[3,3];case 3:return[2]}})})},[4,LI(l)];case 1:return[2,m.apply(void 0,[w.sent(),p,g])]}})})}),g.promise}(a,o.C_).then(function(l){return new gr(u,h,o,l)})}(this.d_):n?.source==="server"?function(o){o=gt(o,Qe);var u=gt(o.firestore,Kt),a=ue(u),h=new di(u);return a0(a,o.C_,{source:"server"}).then(function(l){return new gr(u,h,o,l)})}(this.d_):function(o){o=gt(o,Qe);var u=gt(o.firestore,Kt),a=ue(u),h=new di(u);return VI(o.C_),a0(a,o.C_).then(function(l){return new gr(u,h,o,l)})}(this.d_)).then(function(o){return new sd(r.firestore,new gr(r.firestore.d_,r.Xf,r.d_,o._d))})},t.prototype.onSnapshot=function(){for(var n=this,r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];var u=QI(r),a=KI(r,function(h){return new sd(n.firestore,new gr(n.firestore.d_,n.Xf,n.d_,h._d))});return qI(this.d_,u,a)},t.prototype.withConverter=function(n){return new t(this.firestore,this.d_.withConverter(vh.gd(this.firestore,n)))},t}(lt),CD=function(e){function t(n,r){var o=this;return(o=e.call(this,r)||this).Yf=n,o}return U(t,e),Object.defineProperty(t.prototype,"type",{get:function(){return this.d_.type},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"doc",{get:function(){return new du(this.Yf,this.d_.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"oldIndex",{get:function(){return this.d_.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"newIndex",{get:function(){return this.d_.newIndex},enumerable:!1,configurable:!0}),t}(lt),sd=function(e){function t(n,r){var o=this;return(o=e.call(this,r)||this).Yf=n,o}return U(t,e),Object.defineProperty(t.prototype,"query",{get:function(){return new yh(this.Yf,this.d_.query)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this.d_.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this.d_.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return this.d_.empty},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"docs",{get:function(){var n=this;return this.d_.docs.map(function(r){return new du(n.Yf,r)})},enumerable:!1,configurable:!0}),t.prototype.docChanges=function(n){var r=this;return this.d_.docChanges(n).map(function(o){return new CD(r.Yf,o)})},t.prototype.forEach=function(n,r){var o=this;this.d_.forEach(function(u){n.call(r,new du(o.Yf,u))})},t.prototype.isEqual=function(n){return BI(this.d_,n.d_)},t}(lt),Vc=function(e){function t(n,r){var o=this;return(o=e.call(this,n,r)||this).firestore=n,o.d_=r,o}return U(t,e),Object.defineProperty(t.prototype,"id",{get:function(){return this.d_.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this.d_.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var n=this.d_.parent;return n?new vi(this.firestore,n):null},enumerable:!1,configurable:!0}),t.prototype.doc=function(n){try{return new vi(this.firestore,n===void 0?cc(this.d_):cc(this.d_,n))}catch(r){throw ge(r,"doc()","CollectionReference.doc()")}},t.prototype.add=function(n){var r=this;return function(o,u){var a=gt(o.firestore,Kt),h=cc(o),l=ph(o.v_,u);return fu(a,[lh(Oi(o.firestore),"addDoc",h.S_,l,o.v_!==null,{}).F_(h.S_,ce.exists(!1))]).then(function(){return h})}(this.d_,n).then(function(o){return new vi(r.firestore,o)})},t.prototype.isEqual=function(n){return II(this.d_,n.d_)},t.prototype.withConverter=function(n){return new t(this.firestore,this.d_.withConverter(vh.gd(this.firestore,n)))},t}(yh);function li(e){return e instanceof lt&&(e=e.d_),gt(e,xt)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var RD=function(e){function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return e.call(this,new(Kn.bind.apply(Kn,ae([void 0],n))))||this}return U(t,e),t.documentId=function(){return new t(_n.ht().rt())},t.prototype.isEqual=function(n){return n instanceof lt&&(n=n.d_),n instanceof Kn&&this.d_.f_.isEqual(n.f_)},t}(lt),OD=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return U(t,e),t.serverTimestamp=function(){var n=new cD("serverTimestamp");return n._methodName="FieldValue.serverTimestamp",new t(n)},t.delete=function(){var n=new Lv("deleteField");return n._methodName="FieldValue.delete",new t(n)},t.arrayUnion=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var o=function(){for(var u=[],a=0;a<arguments.length;a++)u[a]=arguments[a];return new hD("arrayUnion",u)}.apply(void 0,n);return o._methodName="FieldValue.arrayUnion",new t(o)},t.arrayRemove=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var o=function(){for(var u=[],a=0;a<arguments.length;a++)u[a]=arguments[a];return new lD("arrayRemove",u)}.apply(void 0,n);return o._methodName="FieldValue.arrayRemove",new t(o)},t.increment=function(n){var r=function(o){return new fD("increment",o)}(n);return r._methodName="FieldValue.increment",new t(r)},t.prototype.isEqual=function(n){return this.d_.isEqual(n.d_)},t}(lt),kD={Firestore:GI,GeoPoint:hh,Timestamp:Pe,Blob:WI,Transaction:HI,WriteBatch:zI,DocumentReference:vi,DocumentSnapshot:pu,Query:yh,QueryDocumentSnapshot:du,QuerySnapshot:sd,CollectionReference:Vc,FieldPath:RD,FieldValue:OD,setLogLevel:AD,CACHE_SIZE_UNLIMITED:mD};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DD(e){(function(t,n){t.INTERNAL.registerComponent(new Bo("firestore",function(r){var o=r.getProvider("app").getImmediate();return n(o,r.getProvider("auth-internal"))},"PUBLIC").setServiceProps(Object.assign({},kD)))})(e,function(t,n){return new GI(t,new Kt(t,n),new ND)}),e.registerVersion("@firebase/firestore","2.1.7")}DD(Q);(function(){var e,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(i,s,c){i!=Array.prototype&&i!=Object.prototype&&(i[s]=c.value)};function n(i){i=[typeof window=="object"&&window,typeof self=="object"&&self,typeof global=="object"&&global,i];for(var s=0;s<i.length;++s){var c=i[s];if(c&&c.Math==Math)return c}return globalThis}var r=n(this);function o(i,s){if(s){var c=r;i=i.split(".");for(var f=0;f<i.length-1;f++){var d=i[f];d in c||(c[d]={}),c=c[d]}i=i[i.length-1],f=c[i],s=s(f),s!=f&&s!=null&&t(c,i,{configurable:!0,writable:!0,value:s})}}function u(i){var s=0;return function(){return s<i.length?{done:!1,value:i[s++]}:{done:!0}}}function a(i){var s=typeof Symbol<"u"&&Symbol.iterator&&i[Symbol.iterator];return s?s.call(i):{next:u(i)}}o("Promise",function(i){function s(_){this.b=0,this.c=void 0,this.a=[];var E=this.f();try{_(E.resolve,E.reject)}catch(A){E.reject(A)}}function c(){this.a=null}function f(_){return _ instanceof s?_:new s(function(E){E(_)})}if(i)return i;c.prototype.b=function(_){if(this.a==null){this.a=[];var E=this;this.c(function(){E.g()})}this.a.push(_)};var d=r.setTimeout;c.prototype.c=function(_){d(_,0)},c.prototype.g=function(){for(;this.a&&this.a.length;){var _=this.a;this.a=[];for(var E=0;E<_.length;++E){var A=_[E];_[E]=null;try{A()}catch(O){this.f(O)}}}this.a=null},c.prototype.f=function(_){this.c(function(){throw _})},s.prototype.f=function(){function _(O){return function(J){A||(A=!0,O.call(E,J))}}var E=this,A=!1;return{resolve:_(this.m),reject:_(this.g)}},s.prototype.m=function(_){if(_===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(_ instanceof s)this.s(_);else{t:switch(typeof _){case"object":var E=_!=null;break t;case"function":E=!0;break t;default:E=!1}E?this.v(_):this.h(_)}},s.prototype.v=function(_){var E=void 0;try{E=_.then}catch(A){this.g(A);return}typeof E=="function"?this.u(E,_):this.h(_)},s.prototype.g=function(_){this.i(2,_)},s.prototype.h=function(_){this.i(1,_)},s.prototype.i=function(_,E){if(this.b!=0)throw Error("Cannot settle("+_+", "+E+"): Promise already settled in state"+this.b);this.b=_,this.c=E,this.l()},s.prototype.l=function(){if(this.a!=null){for(var _=0;_<this.a.length;++_)y.b(this.a[_]);this.a=null}};var y=new c;return s.prototype.s=function(_){var E=this.f();_.Qa(E.resolve,E.reject)},s.prototype.u=function(_,E){var A=this.f();try{_.call(E,A.resolve,A.reject)}catch(O){A.reject(O)}},s.prototype.then=function(_,E){function A(pt,Jt){return typeof pt=="function"?function(qn){try{O(pt(qn))}catch(Zf){J(Zf)}}:Jt}var O,J,mt=new s(function(pt,Jt){O=pt,J=Jt});return this.Qa(A(_,O),A(E,J)),mt},s.prototype.catch=function(_){return this.then(void 0,_)},s.prototype.Qa=function(_,E){function A(){switch(O.b){case 1:_(O.c);break;case 2:E(O.c);break;default:throw Error("Unexpected state: "+O.b)}}var O=this;this.a==null?y.b(A):this.a.push(A)},s.resolve=f,s.reject=function(_){return new s(function(E,A){A(_)})},s.race=function(_){return new s(function(E,A){for(var O=a(_),J=O.next();!J.done;J=O.next())f(J.value).Qa(E,A)})},s.all=function(_){var E=a(_),A=E.next();return A.done?f([]):new s(function(O,J){function mt(qn){return function(Zf){pt[qn]=Zf,Jt--,Jt==0&&O(pt)}}var pt=[],Jt=0;do pt.push(void 0),Jt++,f(A.value).Qa(mt(pt.length-1),J),A=E.next();while(!A.done)})},s});var h=h||{},l=this||self,p=/^[\w+/_-]+[=]{0,2}$/,v=null;function g(i){return(i=i.querySelector&&i.querySelector("script[nonce]"))&&(i=i.nonce||i.getAttribute("nonce"))&&p.test(i)?i:""}function m(){}function w(i){var s=typeof i;return s!="object"?s:i?Array.isArray(i)?"array":s:"null"}function b(i){var s=w(i);return s=="array"||s=="object"&&typeof i.length=="number"}function I(i){return w(i)=="function"}function T(i){var s=typeof i;return s=="object"&&i!=null||s=="function"}function C(i){return Object.prototype.hasOwnProperty.call(i,F)&&i[F]||(i[F]=++M)}var F="closure_uid_"+(1e9*Math.random()>>>0),M=0;function $(i,s,c){return i.call.apply(i.bind,arguments)}function nt(i,s,c){if(!i)throw Error();if(2<arguments.length){var f=Array.prototype.slice.call(arguments,2);return function(){var d=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(d,f),i.apply(s,d)}}return function(){return i.apply(s,arguments)}}function P(i,s,c){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?P=$:P=nt,P.apply(null,arguments)}function _t(i,s){var c=Array.prototype.slice.call(arguments,1);return function(){var f=c.slice();return f.push.apply(f,arguments),i.apply(this,f)}}var Fr=Date.now;function X(i,s){function c(){}c.prototype=s.prototype,i.ab=s.prototype,i.prototype=new c,i.prototype.constructor=i}function Pi(i){return i}function S(i,s,c){this.code=$o+i,this.message=s||WT[i]||"",this.a=c||null}X(S,Error),S.prototype.w=function(){var i={code:this.code,message:this.message};return this.a&&(i.serverResponse=this.a),i},S.prototype.toJSON=function(){return this.w()};function ey(i){var s=i&&i.code;return s?new S(s.substring($o.length),i.message,i.serverResponse):null}var $o="auth/",WT={"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."},bh={ld:{Ta:"https://staging-identitytoolkit.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Za:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Wa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"b"},sd:{Ta:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",Za:"https://securetoken.googleapis.com/v1/token",Wa:"https://identitytoolkit.googleapis.com/v2/",id:"p"},ud:{Ta:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Za:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Wa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"s"},vd:{Ta:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",Za:"https://test-securetoken.sandbox.googleapis.com/v1/token",Wa:"https://test-identitytoolkit.sandbox.googleapis.com/v2/",id:"t"}};function Xo(i){for(var s in bh)if(bh[s].id===i)return i=bh[s],{firebaseEndpoint:i.Ta,secureTokenEndpoint:i.Za,identityPlatformEndpoint:i.Wa};return null}var Jo;Jo=Xo("__EID__")?"__EID__":void 0;function ny(i){if(!i)return!1;try{return!!i.$goog_Thenable}catch{return!1}}function Fe(i){if(Error.captureStackTrace)Error.captureStackTrace(this,Fe);else{var s=Error().stack;s&&(this.stack=s)}i&&(this.message=String(i))}X(Fe,Error),Fe.prototype.name="CustomError";function Eh(i,s){i=i.split("%s");for(var c="",f=i.length-1,d=0;d<f;d++)c+=i[d]+(d<s.length?s[d]:"%s");Fe.call(this,c+i[f])}X(Eh,Fe),Eh.prototype.name="AssertionError";function xi(i,s){throw new Eh("Failure"+(i?": "+i:""),Array.prototype.slice.call(arguments,1))}function Ih(i,s){this.c=i,this.f=s,this.b=0,this.a=null}Ih.prototype.get=function(){if(0<this.b){this.b--;var i=this.a;this.a=i.next,i.next=null}else i=this.c();return i};function ry(i,s){i.f(s),100>i.b&&(i.b++,s.next=i.a,i.a=s)}function iy(){this.b=this.a=null}var oy=new Ih(function(){return new Th},function(i){i.reset()});iy.prototype.add=function(i,s){var c=oy.get();c.set(i,s),this.b?this.b.next=c:this.a=c,this.b=c};function GT(){var i=Dy,s=null;return i.a&&(s=i.a,i.a=i.a.next,i.a||(i.b=null),s.next=null),s}function Th(){this.next=this.b=this.a=null}Th.prototype.set=function(i,s){this.a=i,this.b=s,this.next=null},Th.prototype.reset=function(){this.next=this.b=this.a=null};var sy=Array.prototype.indexOf?function(i,s){return Array.prototype.indexOf.call(i,s,void 0)}:function(i,s){if(typeof i=="string")return typeof s!="string"||s.length!=1?-1:i.indexOf(s,0);for(var c=0;c<i.length;c++)if(c in i&&i[c]===s)return c;return-1},kt=Array.prototype.forEach?function(i,s,c){Array.prototype.forEach.call(i,s,c)}:function(i,s,c){for(var f=i.length,d=typeof i=="string"?i.split(""):i,y=0;y<f;y++)y in d&&s.call(c,d[y],y,i)};function HT(i,s){for(var c=typeof i=="string"?i.split(""):i,f=i.length-1;0<=f;--f)f in c&&s.call(void 0,c[f],f,i)}var zT=Array.prototype.filter?function(i,s){return Array.prototype.filter.call(i,s,void 0)}:function(i,s){for(var c=i.length,f=[],d=0,y=typeof i=="string"?i.split(""):i,_=0;_<c;_++)if(_ in y){var E=y[_];s.call(void 0,E,_,i)&&(f[d++]=E)}return f},Wu=Array.prototype.map?function(i,s){return Array.prototype.map.call(i,s,void 0)}:function(i,s){for(var c=i.length,f=Array(c),d=typeof i=="string"?i.split(""):i,y=0;y<c;y++)y in d&&(f[y]=s.call(void 0,d[y],y,i));return f},QT=Array.prototype.some?function(i,s){return Array.prototype.some.call(i,s,void 0)}:function(i,s){for(var c=i.length,f=typeof i=="string"?i.split(""):i,d=0;d<c;d++)if(d in f&&s.call(void 0,f[d],d,i))return!0;return!1};function KT(i){t:{for(var s=AN,c=i.length,f=typeof i=="string"?i.split(""):i,d=0;d<c;d++)if(d in f&&s.call(void 0,f[d],d,i)){s=d;break t}s=-1}return 0>s?null:typeof i=="string"?i.charAt(s):i[s]}function Fn(i,s){return 0<=sy(i,s)}function Gu(i,s){s=sy(i,s);var c;return(c=0<=s)&&Array.prototype.splice.call(i,s,1),c}function sn(i,s){var c=0;HT(i,function(f,d){s.call(void 0,f,d,i)&&Array.prototype.splice.call(i,d,1).length==1&&c++})}function Sh(i){return Array.prototype.concat.apply([],arguments)}function Vr(i){var s=i.length;if(0<s){for(var c=Array(s),f=0;f<s;f++)c[f]=i[f];return c}return[]}var uy=String.prototype.trim?function(i){return i.trim()}:function(i){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(i)[1]},YT=/&/g,$T=/</g,XT=/>/g,JT=/"/g,ZT=/'/g,tS=/\x00/g,eS=/[\x00&<>"']/;function Tt(i,s){return i.indexOf(s)!=-1}function Nh(i,s){return i<s?-1:i>s?1:0}var Li;t:{var ay=l.navigator;if(ay){var cy=ay.userAgent;if(cy){Li=cy;break t}}Li=""}function Ht(i){return Tt(Li,i)}function hy(i,s){for(var c in i)s.call(void 0,i[c],c,i)}function Ur(i){for(var s in i)return!1;return!0}function tr(i){var s={},c;for(c in i)s[c]=i[c];return s}var ly="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Se(i,s){for(var c,f,d=1;d<arguments.length;d++){f=arguments[d];for(c in f)i[c]=f[c];for(var y=0;y<ly.length;y++)c=ly[y],Object.prototype.hasOwnProperty.call(f,c)&&(i[c]=f[c])}}function fy(i,s){t:{try{var c=i&&i.ownerDocument,f=c&&(c.defaultView||c.parentWindow);if(f=f||l,f.Element&&f.Location){var d=f;break t}}catch{}d=null}if(d&&typeof d[s]<"u"&&(!i||!(i instanceof d[s])&&(i instanceof d.Location||i instanceof d.Element))){if(T(i))try{var y=i.constructor.displayName||i.constructor.name||Object.prototype.toString.call(i)}catch{y="<object could not be stringified>"}else y=i===void 0?"undefined":i===null?"null":typeof i;xi("Argument is not a %s (or a non-Element, non-Location mock); got: %s",s,y)}}function wn(i,s){this.a=i===Hu&&s||"",this.b=py}wn.prototype.sa=!0,wn.prototype.ra=function(){return this.a},wn.prototype.toString=function(){return"Const{"+this.a+"}"};function Ah(i){return i instanceof wn&&i.constructor===wn&&i.b===py?i.a:(xi("expected object of type Const, got '"+i+"'"),"type_error:Const")}var py={},Hu={},zu;function dy(){if(zu===void 0){var i=null,s=l.trustedTypes;if(s&&s.createPolicy){try{i=s.createPolicy("goog#html",{createHTML:Pi,createScript:Pi,createScriptURL:Pi})}catch(c){l.console&&l.console.error(c.message)}zu=i}else zu=i}return zu}function Mi(i,s){this.a=s===yy?i:""}Mi.prototype.sa=!0,Mi.prototype.ra=function(){return this.a.toString()},Mi.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};function vy(i){return i instanceof Mi&&i.constructor===Mi?i.a:(xi("expected object of type TrustedResourceUrl, got '"+i+"' of type "+w(i)),"type_error:TrustedResourceUrl")}function Ch(i,s){var c=Ah(i);if(!rS.test(c))throw Error("Invalid TrustedResourceUrl format: "+c);return i=c.replace(nS,function(f,d){if(!Object.prototype.hasOwnProperty.call(s,d))throw Error('Found marker, "'+d+'", in format string, "'+c+'", but no valid label mapping found in args: '+JSON.stringify(s));return f=s[d],f instanceof wn?Ah(f):encodeURIComponent(String(f))}),iS(i)}var nS=/%{(\w+)}/g,rS=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,yy={};function iS(i){var s=dy();return i=s?s.createScriptURL(i):i,new Mi(i,yy)}function Ne(i,s){this.a=s===Zo?i:""}Ne.prototype.sa=!0,Ne.prototype.ra=function(){return this.a.toString()},Ne.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};function Qu(i){return i instanceof Ne&&i.constructor===Ne?i.a:(xi("expected object of type SafeUrl, got '"+i+"' of type "+w(i)),"type_error:SafeUrl")}var oS=/^(?:audio\/(?:3gpp2|3gpp|aac|L16|midi|mp3|mp4|mpeg|oga|ogg|opus|x-m4a|x-matroska|x-wav|wav|webm)|font\/\w+|image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp|x-icon)|text\/csv|video\/(?:mpeg|mp4|ogg|webm|quicktime|x-matroska))(?:;\w+=(?:\w+|"[\w;,= ]+"))*$/i,sS=/^data:(.*);base64,[a-z0-9+\/]+=*$/i,gy=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function my(i){if(i instanceof Ne)return i;if(i=typeof i=="object"&&i.sa?i.ra():String(i),gy.test(i))i=new Ne(i,Zo);else{i=String(i),i=i.replace(/(%0A|%0D)/g,"");var s=i.match(sS);i=s&&oS.test(s[1])?new Ne(i,Zo):null}return i}function _y(i){return i instanceof Ne?i:(i=typeof i=="object"&&i.sa?i.ra():String(i),gy.test(i)||(i="about:invalid#zClosurez"),new Ne(i,Zo))}var Zo={},wy=new Ne("about:invalid#zClosurez",Zo);function Fi(i,s,c){this.a=c===by?i:""}Fi.prototype.sa=!0,Fi.prototype.ra=function(){return this.a.toString()},Fi.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};function uS(i){return i instanceof Fi&&i.constructor===Fi?i.a:(xi("expected object of type SafeHtml, got '"+i+"' of type "+w(i)),"type_error:SafeHtml")}var by={};function aS(i,s){fy(i,"HTMLScriptElement"),i.src=vy(s),(s=i.ownerDocument&&i.ownerDocument.defaultView)&&s!=l?s=g(s.document):(v===null&&(v=g(l.document)),s=v),s&&i.setAttribute("nonce",s)}function Ey(i,s,c,f){return i=i instanceof Ne?i:_y(i),s=s||l,c=c instanceof wn?Ah(c):c||"",s.open(Qu(i),c,f,void 0)}function Iy(i,s){for(var c=i.split("%s"),f="",d=Array.prototype.slice.call(arguments,1);d.length&&1<c.length;)f+=c.shift()+d.shift();return f+c.join("%s")}function Rh(i){return eS.test(i)&&(i.indexOf("&")!=-1&&(i=i.replace(YT,"&amp;")),i.indexOf("<")!=-1&&(i=i.replace($T,"&lt;")),i.indexOf(">")!=-1&&(i=i.replace(XT,"&gt;")),i.indexOf('"')!=-1&&(i=i.replace(JT,"&quot;")),i.indexOf("'")!=-1&&(i=i.replace(ZT,"&#39;")),i.indexOf("\0")!=-1&&(i=i.replace(tS,"&#0;"))),i}function Oh(i){return Oh[" "](i),i}Oh[" "]=m;function cS(i,s){var c=pS;return Object.prototype.hasOwnProperty.call(c,i)?c[i]:c[i]=s(i)}var hS=Ht("Opera"),un=Ht("Trident")||Ht("MSIE"),Ty=Ht("Edge"),lS=Ty||un,Sy=Ht("Gecko")&&!(Tt(Li.toLowerCase(),"webkit")&&!Ht("Edge"))&&!(Ht("Trident")||Ht("MSIE"))&&!Ht("Edge"),fS=Tt(Li.toLowerCase(),"webkit")&&!Ht("Edge");function Ny(){var i=l.document;return i?i.documentMode:void 0}var Ku;t:{var kh="",Dh=function(){var i=Li;if(Sy)return/rv:([^\);]+)(\)|;)/.exec(i);if(Ty)return/Edge\/([\d\.]+)/.exec(i);if(un)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(i);if(fS)return/WebKit\/(\S+)/.exec(i);if(hS)return/(?:Version)[ \/]?(\S+)/.exec(i)}();if(Dh&&(kh=Dh?Dh[1]:""),un){var Ph=Ny();if(Ph!=null&&Ph>parseFloat(kh)){Ku=String(Ph);break t}}Ku=kh}var pS={};function Ay(i){return cS(i,function(){for(var s=0,c=uy(String(Ku)).split("."),f=uy(String(i)).split("."),d=Math.max(c.length,f.length),y=0;s==0&&y<d;y++){var _=c[y]||"",E=f[y]||"";do{if(_=/(\d*)(\D*)(.*)/.exec(_)||["","","",""],E=/(\d*)(\D*)(.*)/.exec(E)||["","","",""],_[0].length==0&&E[0].length==0)break;s=Nh(_[1].length==0?0:parseInt(_[1],10),E[1].length==0?0:parseInt(E[1],10))||Nh(_[2].length==0,E[2].length==0)||Nh(_[2],E[2]),_=_[3],E=E[3]}while(s==0)}return 0<=s})}var xh;if(l.document&&un){var Cy=Ny();xh=Cy||parseInt(Ku,10)||void 0}else xh=void 0;var er=xh;try{new self.OffscreenCanvas(0,0).getContext("2d")}catch{}var dS=!un||9<=Number(er);function ts(i){var s=document;return typeof i=="string"?s.getElementById(i):i}function Ry(i,s){hy(s,function(c,f){c&&typeof c=="object"&&c.sa&&(c=c.ra()),f=="style"?i.style.cssText=c:f=="class"?i.className=c:f=="for"?i.htmlFor=c:Oy.hasOwnProperty(f)?i.setAttribute(Oy[f],c):f.lastIndexOf("aria-",0)==0||f.lastIndexOf("data-",0)==0?i.setAttribute(f,c):i[f]=c})}var Oy={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function vS(i,s,c){var f=arguments,d=document,y=String(f[0]),_=f[1];if(!dS&&_&&(_.name||_.type)){if(y=["<",y],_.name&&y.push(' name="',Rh(_.name),'"'),_.type){y.push(' type="',Rh(_.type),'"');var E={};Se(E,_),delete E.type,_=E}y.push(">"),y=y.join("")}return y=Yu(d,y),_&&(typeof _=="string"?y.className=_:Array.isArray(_)?y.className=_.join(" "):Ry(y,_)),2<f.length&&yS(d,y,f),y}function yS(i,s,c){function f(E){E&&s.appendChild(typeof E=="string"?i.createTextNode(E):E)}for(var d=2;d<c.length;d++){var y=c[d];if(!b(y)||T(y)&&0<y.nodeType)f(y);else{t:{if(y&&typeof y.length=="number"){if(T(y)){var _=typeof y.item=="function"||typeof y.item=="string";break t}if(I(y)){_=typeof y.item=="function";break t}}_=!1}kt(_?Vr(y):y,f)}}}function Yu(i,s){return s=String(s),i.contentType==="application/xhtml+xml"&&(s=s.toLowerCase()),i.createElement(s)}function ky(i){l.setTimeout(function(){throw i},0)}var Lh;function gS(){var i=l.MessageChannel;if(typeof i>"u"&&typeof window<"u"&&window.postMessage&&window.addEventListener&&!Ht("Presto")&&(i=function(){var d=Yu(document,"IFRAME");d.style.display="none",document.documentElement.appendChild(d);var y=d.contentWindow;d=y.document,d.open(),d.close();var _="callImmediate"+Math.random(),E=y.location.protocol=="file:"?"*":y.location.protocol+"//"+y.location.host;d=P(function(A){(E=="*"||A.origin==E)&&A.data==_&&this.port1.onmessage()},this),y.addEventListener("message",d,!1),this.port1={},this.port2={postMessage:function(){y.postMessage(_,E)}}}),typeof i<"u"&&!Ht("Trident")&&!Ht("MSIE")){var s=new i,c={},f=c;return s.port1.onmessage=function(){if(c.next!==void 0){c=c.next;var d=c.Gb;c.Gb=null,d()}},function(d){f.next={Gb:d},f=f.next,s.port2.postMessage(0)}}return function(d){l.setTimeout(d,0)}}function $u(i,s){Xu||mS(),Mh||(Xu(),Mh=!0),Dy.add(i,s)}var Xu;function mS(){if(l.Promise&&l.Promise.resolve){var i=l.Promise.resolve(void 0);Xu=function(){i.then(Py)}}else Xu=function(){var s=Py;!I(l.setImmediate)||l.Window&&l.Window.prototype&&!Ht("Edge")&&l.Window.prototype.setImmediate==l.setImmediate?(Lh||(Lh=gS()),Lh(s)):l.setImmediate(s)}}var Mh=!1,Dy=new iy;function Py(){for(var i;i=GT();){try{i.a.call(i.b)}catch(s){ky(s)}ry(oy,i)}Mh=!1}function ot(i,s){if(this.a=jr,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,i!=m)try{var c=this;i.call(s,function(f){Br(c,es,f)},function(f){if(!(f instanceof Vi))try{throw f instanceof Error?f:Error("Promise rejected.")}catch{}Br(c,Vn,f)})}catch(f){Br(this,Vn,f)}}var jr=0,es=2,Vn=3;function xy(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}xy.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var Ly=new Ih(function(){return new xy},function(i){i.reset()});function Fh(i,s,c){var f=Ly.get();return f.g=i,f.b=s,f.f=c,f}function z(i){if(i instanceof ot)return i;var s=new ot(m);return Br(s,es,i),s}function At(i){return new ot(function(s,c){c(i)})}function My(i,s,c){jy(i,s,c,null)||$u(_t(s,i))}function _S(i){return new ot(function(s,c){var f=i.length,d=[];if(f)for(var y=function(O,J){f--,d[O]=J,f==0&&s(d)},_=function(O){c(O)},E=0,A;E<i.length;E++)A=i[E],My(A,_t(y,E),_);else s(d)})}function Fy(i){return new ot(function(s){var c=i.length,f=[];if(c)for(var d=function(E,A,O){c--,f[E]=A?{Pb:!0,value:O}:{Pb:!1,reason:O},c==0&&s(f)},y=0,_;y<i.length;y++)_=i[y],My(_,_t(d,y,!0),_t(d,y,!1));else s(f)})}ot.prototype.then=function(i,s,c){return Uy(this,I(i)?i:null,I(s)?s:null,c)},ot.prototype.$goog_Thenable=!0,e=ot.prototype,e.oa=function(i,s){return i=Fh(i,i,s),i.c=!0,Vh(this,i),this},e.o=function(i,s){return Uy(this,null,i,s)},e.cancel=function(i){if(this.a==jr){var s=new Vi(i);$u(function(){Vy(this,s)},this)}};function Vy(i,s){if(i.a==jr)if(i.c){var c=i.c;if(c.b){for(var f=0,d=null,y=null,_=c.b;_&&(_.c||(f++,_.a==i&&(d=_),!(d&&1<f)));_=_.next)d||(y=_);d&&(c.a==jr&&f==1?Vy(c,s):(y?(f=y,f.next==c.f&&(c.f=f),f.next=f.next.next):qy(c),Wy(c,d,Vn,s)))}i.c=null}else Br(i,Vn,s)}function Vh(i,s){i.b||i.a!=es&&i.a!=Vn||By(i),i.f?i.f.next=s:i.b=s,i.f=s}function Uy(i,s,c,f){var d=Fh(null,null,null);return d.a=new ot(function(y,_){d.g=s?function(E){try{var A=s.call(f,E);y(A)}catch(O){_(O)}}:y,d.b=c?function(E){try{var A=c.call(f,E);A===void 0&&E instanceof Vi?_(E):y(A)}catch(O){_(O)}}:_}),d.a.c=i,Vh(i,d),d.a}e.$c=function(i){this.a=jr,Br(this,es,i)},e.ad=function(i){this.a=jr,Br(this,Vn,i)};function Br(i,s,c){i.a==jr&&(i===c&&(s=Vn,c=new TypeError("Promise cannot resolve to itself")),i.a=1,jy(c,i.$c,i.ad,i)||(i.i=c,i.a=s,i.c=null,By(i),s!=Vn||c instanceof Vi||bS(i,c)))}function jy(i,s,c,f){if(i instanceof ot)return Vh(i,Fh(s||m,c||null,f)),!0;if(ny(i))return i.then(s,c,f),!0;if(T(i))try{var d=i.then;if(I(d))return wS(i,d,s,c,f),!0}catch(y){return c.call(f,y),!0}return!1}function wS(i,s,c,f,d){function y(A){E||(E=!0,f.call(d,A))}function _(A){E||(E=!0,c.call(d,A))}var E=!1;try{s.call(i,_,y)}catch(A){y(A)}}function By(i){i.h||(i.h=!0,$u(i.gc,i))}function qy(i){var s=null;return i.b&&(s=i.b,i.b=s.next,s.next=null),i.b||(i.f=null),s}e.gc=function(){for(var i;i=qy(this);)Wy(this,i,this.a,this.i);this.h=!1};function Wy(i,s,c,f){if(c==Vn&&s.b&&!s.c)for(;i&&i.g;i=i.c)i.g=!1;if(s.a)s.a.c=null,Gy(s,c,f);else try{s.c?s.g.call(s.f):Gy(s,c,f)}catch(d){Hy.call(null,d)}ry(Ly,s)}function Gy(i,s,c){s==es?i.g.call(i.f,c):i.b&&i.b.call(i.f,c)}function bS(i,s){i.g=!0,$u(function(){i.g&&Hy.call(null,s)})}var Hy=ky;function Vi(i){Fe.call(this,i)}X(Vi,Fe),Vi.prototype.name="cancel";function Ju(){this.xa=this.xa,this.pa=this.pa}var ES=0;Ju.prototype.xa=!1;function zy(i){!i.xa&&(i.xa=!0,i.Da(),ES!=0)&&C(i)}Ju.prototype.Da=function(){if(this.pa)for(;this.pa.length;)this.pa.shift()()};var IS=Object.freeze||function(i){return i},Qy=!un||9<=Number(er),TS=un&&!Ay("9"),SS=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var i=!1,s=Object.defineProperty({},"passive",{get:function(){i=!0}});try{l.addEventListener("test",m,s),l.removeEventListener("test",m,s)}catch{}return i}();function Ae(i,s){this.type=i,this.b=this.target=s,this.defaultPrevented=!1}Ae.prototype.preventDefault=function(){this.defaultPrevented=!0};function qr(i,s){if(Ae.call(this,i?i.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,i){var c=this.type=i.type,f=i.changedTouches&&i.changedTouches.length?i.changedTouches[0]:null;if(this.target=i.target||i.srcElement,this.b=s,s=i.relatedTarget){if(Sy){t:{try{Oh(s.nodeName);var d=!0;break t}catch{}d=!1}d||(s=null)}}else c=="mouseover"?s=i.fromElement:c=="mouseout"&&(s=i.toElement);this.relatedTarget=s,f?(this.clientX=f.clientX!==void 0?f.clientX:f.pageX,this.clientY=f.clientY!==void 0?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0):(this.clientX=i.clientX!==void 0?i.clientX:i.pageX,this.clientY=i.clientY!==void 0?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0),this.button=i.button,this.key=i.key||"",this.ctrlKey=i.ctrlKey,this.altKey=i.altKey,this.shiftKey=i.shiftKey,this.metaKey=i.metaKey,this.pointerId=i.pointerId||0,this.pointerType=typeof i.pointerType=="string"?i.pointerType:NS[i.pointerType]||"",this.a=i,i.defaultPrevented&&this.preventDefault()}}X(qr,Ae);var NS=IS({2:"touch",3:"pen",4:"mouse"});qr.prototype.preventDefault=function(){qr.ab.preventDefault.call(this);var i=this.a;if(i.preventDefault)i.preventDefault();else if(i.returnValue=!1,TS)try{(i.ctrlKey||112<=i.keyCode&&123>=i.keyCode)&&(i.keyCode=-1)}catch{}},qr.prototype.g=function(){return this.a};var ns="closure_listenable_"+(1e6*Math.random()|0),AS=0;function CS(i,s,c,f,d){this.listener=i,this.proxy=null,this.src=s,this.type=c,this.capture=!!f,this.Va=d,this.key=++AS,this.va=this.Pa=!1}function Zu(i){i.va=!0,i.listener=null,i.proxy=null,i.src=null,i.Va=null}function ta(i){this.src=i,this.a={},this.b=0}ta.prototype.add=function(i,s,c,f,d){var y=i.toString();i=this.a[y],i||(i=this.a[y]=[],this.b++);var _=jh(i,s,f,d);return-1<_?(s=i[_],c||(s.Pa=!1)):(s=new CS(s,this.src,y,!!f,d),s.Pa=c,i.push(s)),s};function Uh(i,s){var c=s.type;c in i.a&&Gu(i.a[c],s)&&(Zu(s),i.a[c].length==0&&(delete i.a[c],i.b--))}function jh(i,s,c,f){for(var d=0;d<i.length;++d){var y=i[d];if(!y.va&&y.listener==s&&y.capture==!!c&&y.Va==f)return d}return-1}var Bh="closure_lm_"+(1e6*Math.random()|0),qh={};function Xe(i,s,c,f,d){if(f&&f.once)Wh(i,s,c,f,d);else if(Array.isArray(s))for(var y=0;y<s.length;y++)Xe(i,s[y],c,f,d);else c=Hh(c),i&&i[ns]?Zy(i,s,c,T(f)?!!f.capture:!!f,d):Ky(i,s,c,!1,f,d)}function Ky(i,s,c,f,d,y){if(!s)throw Error("Invalid event type");var _=T(d)?!!d.capture:!!d,E=ea(i);if(E||(i[Bh]=E=new ta(i)),c=E.add(s,c,f,_,y),!c.proxy)if(f=RS(),c.proxy=f,f.src=i,f.listener=c,i.addEventListener)SS||(d=_),d===void 0&&(d=!1),i.addEventListener(s.toString(),f,d);else if(i.attachEvent)i.attachEvent($y(s.toString()),f);else if(i.addListener&&i.removeListener)i.addListener(f);else throw Error("addEventListener and attachEvent are unavailable.")}function RS(){var i=OS,s=Qy?function(c){return i.call(s.src,s.listener,c)}:function(c){if(c=i.call(s.src,s.listener,c),!c)return c};return s}function Wh(i,s,c,f,d){if(Array.isArray(s))for(var y=0;y<s.length;y++)Wh(i,s[y],c,f,d);else c=Hh(c),i&&i[ns]?zh(i,s,c,T(f)?!!f.capture:!!f,d):Ky(i,s,c,!0,f,d)}function Ve(i,s,c,f,d){if(Array.isArray(s))for(var y=0;y<s.length;y++)Ve(i,s[y],c,f,d);else f=T(f)?!!f.capture:!!f,c=Hh(c),i&&i[ns]?(i=i.v,s=String(s).toString(),s in i.a&&(y=i.a[s],c=jh(y,c,f,d),-1<c&&(Zu(y[c]),Array.prototype.splice.call(y,c,1),y.length==0&&(delete i.a[s],i.b--)))):i&&(i=ea(i))&&(s=i.a[s.toString()],i=-1,s&&(i=jh(s,c,f,d)),(c=-1<i?s[i]:null)&&Yy(c))}function Yy(i){if(typeof i!="number"&&i&&!i.va){var s=i.src;if(s&&s[ns])Uh(s.v,i);else{var c=i.type,f=i.proxy;s.removeEventListener?s.removeEventListener(c,f,i.capture):s.detachEvent?s.detachEvent($y(c),f):s.addListener&&s.removeListener&&s.removeListener(f),(c=ea(s))?(Uh(c,i),c.b==0&&(c.src=null,s[Bh]=null)):Zu(i)}}}function $y(i){return i in qh?qh[i]:qh[i]="on"+i}function Xy(i,s,c,f){var d=!0;if((i=ea(i))&&(s=i.a[s.toString()]))for(s=s.concat(),i=0;i<s.length;i++){var y=s[i];y&&y.capture==c&&!y.va&&(y=Jy(y,f),d=d&&y!==!1)}return d}function Jy(i,s){var c=i.listener,f=i.Va||i.src;return i.Pa&&Yy(i),c.call(f,s)}function OS(i,s){if(i.va)return!0;if(!Qy){if(!s)t:{s=["window","event"];for(var c=l,f=0;f<s.length;f++)if(c=c[s[f]],c==null){s=null;break t}s=c}if(f=s,s=new qr(f,this),c=!0,!(0>f.keyCode||f.returnValue!=null)){t:{var d=!1;if(f.keyCode==0)try{f.keyCode=-1;break t}catch{d=!0}(d||f.returnValue==null)&&(f.returnValue=!0)}for(f=[],d=s.b;d;d=d.parentNode)f.push(d);for(i=i.type,d=f.length-1;0<=d;d--){s.b=f[d];var y=Xy(f[d],i,!0,s);c=c&&y}for(d=0;d<f.length;d++)s.b=f[d],y=Xy(f[d],i,!1,s),c=c&&y}return c}return Jy(i,new qr(s,this))}function ea(i){return i=i[Bh],i instanceof ta?i:null}var Gh="__closure_events_fn_"+(1e9*Math.random()>>>0);function Hh(i){return I(i)?i:(i[Gh]||(i[Gh]=function(s){return i.handleEvent(s)}),i[Gh])}function de(){Ju.call(this),this.v=new ta(this),this.ac=this,this.gb=null}X(de,Ju),de.prototype[ns]=!0,de.prototype.addEventListener=function(i,s,c,f){Xe(this,i,s,c,f)},de.prototype.removeEventListener=function(i,s,c,f){Ve(this,i,s,c,f)},de.prototype.dispatchEvent=function(i){var s,c=this.gb;if(c)for(s=[];c;c=c.gb)s.push(c);c=this.ac;var f=i.type||i;if(typeof i=="string")i=new Ae(i,c);else if(i instanceof Ae)i.target=i.target||c;else{var d=i;i=new Ae(f,c),Se(i,d)}if(d=!0,s)for(var y=s.length-1;0<=y;y--){var _=i.b=s[y];d=na(_,f,!0,i)&&d}if(_=i.b=c,d=na(_,f,!0,i)&&d,d=na(_,f,!1,i)&&d,s)for(y=0;y<s.length;y++)_=i.b=s[y],d=na(_,f,!1,i)&&d;return d},de.prototype.Da=function(){if(de.ab.Da.call(this),this.v){var i=this.v,s;for(s in i.a){for(var c=i.a[s],f=0;f<c.length;f++)Zu(c[f]);delete i.a[s],i.b--}}this.gb=null};function Zy(i,s,c,f,d){i.v.add(String(s),c,!1,f,d)}function zh(i,s,c,f,d){i.v.add(String(s),c,!0,f,d)}function na(i,s,c,f){if(s=i.v.a[String(s)],!s)return!0;s=s.concat();for(var d=!0,y=0;y<s.length;++y){var _=s[y];if(_&&!_.va&&_.capture==c){var E=_.listener,A=_.Va||_.src;_.Pa&&Uh(i.v,_),d=E.call(A,f)!==!1&&d}}return d&&!f.defaultPrevented}function Qh(i,s,c){if(I(i))c&&(i=P(i,c));else if(i&&typeof i.handleEvent=="function")i=P(i.handleEvent,i);else throw Error("Invalid listener argument");return 2147483647<Number(s)?-1:l.setTimeout(i,s||0)}function Ui(i){var s=null;return new ot(function(c,f){s=Qh(function(){c(void 0)},i),s==-1&&f(Error("Failed to schedule timer."))}).o(function(c){throw l.clearTimeout(s),c})}function tg(i){if(i.W&&typeof i.W=="function")return i.W();if(typeof i=="string")return i.split("");if(b(i)){for(var s=[],c=i.length,f=0;f<c;f++)s.push(i[f]);return s}s=[],c=0;for(f in i)s[c++]=i[f];return s}function eg(i){if(i.Y&&typeof i.Y=="function")return i.Y();if(!i.W||typeof i.W!="function"){if(b(i)||typeof i=="string"){var s=[];i=i.length;for(var c=0;c<i;c++)s.push(c);return s}s=[],c=0;for(var f in i)s[c++]=f;return s}}function kS(i,s){if(i.forEach&&typeof i.forEach=="function")i.forEach(s,void 0);else if(b(i)||typeof i=="string")kt(i,s,void 0);else for(var c=eg(i),f=tg(i),d=f.length,y=0;y<d;y++)s.call(void 0,f[y],c&&c[y],i)}function ji(i,s){this.b={},this.a=[],this.c=0;var c=arguments.length;if(1<c){if(c%2)throw Error("Uneven number of arguments");for(var f=0;f<c;f+=2)this.set(arguments[f],arguments[f+1])}else if(i)if(i instanceof ji)for(c=i.Y(),f=0;f<c.length;f++)this.set(c[f],i.get(c[f]));else for(f in i)this.set(f,i[f])}e=ji.prototype,e.W=function(){Kh(this);for(var i=[],s=0;s<this.a.length;s++)i.push(this.b[this.a[s]]);return i},e.Y=function(){return Kh(this),this.a.concat()},e.clear=function(){this.b={},this.c=this.a.length=0};function Kh(i){if(i.c!=i.a.length){for(var s=0,c=0;s<i.a.length;){var f=i.a[s];Wr(i.b,f)&&(i.a[c++]=f),s++}i.a.length=c}if(i.c!=i.a.length){var d={};for(c=s=0;s<i.a.length;)f=i.a[s],Wr(d,f)||(i.a[c++]=f,d[f]=1),s++;i.a.length=c}}e.get=function(i,s){return Wr(this.b,i)?this.b[i]:s},e.set=function(i,s){Wr(this.b,i)||(this.c++,this.a.push(i)),this.b[i]=s},e.forEach=function(i,s){for(var c=this.Y(),f=0;f<c.length;f++){var d=c[f],y=this.get(d);i.call(s,y,d,this)}};function Wr(i,s){return Object.prototype.hasOwnProperty.call(i,s)}var ng=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function DS(i,s){if(i){i=i.split("&");for(var c=0;c<i.length;c++){var f=i[c].indexOf("="),d=null;if(0<=f){var y=i[c].substring(0,f);d=i[c].substring(f+1)}else y=i[c];s(y,d?decodeURIComponent(d.replace(/\+/g," ")):"")}}}function nr(i,s){this.a=this.l=this.c="",this.g=null,this.h=this.f="",this.i=!1;var c;i instanceof nr?(this.i=s!==void 0?s:i.i,rs(this,i.c),this.l=i.l,this.a=i.a,is(this,i.g),this.f=i.f,Yh(this,sg(i.b)),this.h=i.h):i&&(c=String(i).match(ng))?(this.i=!!s,rs(this,c[1]||"",!0),this.l=os(c[2]||""),this.a=os(c[3]||"",!0),is(this,c[4]),this.f=os(c[5]||"",!0),Yh(this,c[6]||"",!0),this.h=os(c[7]||"")):(this.i=!!s,this.b=new Gr(null,this.i))}nr.prototype.toString=function(){var i=[],s=this.c;s&&i.push(ss(s,rg,!0),":");var c=this.a;return(c||s=="file")&&(i.push("//"),(s=this.l)&&i.push(ss(s,rg,!0),"@"),i.push(encodeURIComponent(String(c)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c=this.g,c!=null&&i.push(":",String(c))),(c=this.f)&&(this.a&&c.charAt(0)!="/"&&i.push("/"),i.push(ss(c,c.charAt(0)=="/"?LS:xS,!0))),(c=this.b.toString())&&i.push("?",c),(c=this.h)&&i.push("#",ss(c,FS)),i.join("")},nr.prototype.resolve=function(i){var s=new nr(this),c=!!i.c;c?rs(s,i.c):c=!!i.l,c?s.l=i.l:c=!!i.a,c?s.a=i.a:c=i.g!=null;var f=i.f;if(c)is(s,i.g);else if(c=!!i.f){if(f.charAt(0)!="/")if(this.a&&!this.f)f="/"+f;else{var d=s.f.lastIndexOf("/");d!=-1&&(f=s.f.substr(0,d+1)+f)}if(d=f,d==".."||d==".")f="";else if(Tt(d,"./")||Tt(d,"/.")){f=d.lastIndexOf("/",0)==0,d=d.split("/");for(var y=[],_=0;_<d.length;){var E=d[_++];E=="."?f&&_==d.length&&y.push(""):E==".."?((1<y.length||y.length==1&&y[0]!="")&&y.pop(),f&&_==d.length&&y.push("")):(y.push(E),f=!0)}f=y.join("/")}else f=d}return c?s.f=f:c=i.b.toString()!=="",c?Yh(s,sg(i.b)):c=!!i.h,c&&(s.h=i.h),s};function rs(i,s,c){i.c=c?os(s,!0):s,i.c&&(i.c=i.c.replace(/:$/,""))}function is(i,s){if(s){if(s=Number(s),isNaN(s)||0>s)throw Error("Bad port number "+s);i.g=s}else i.g=null}function Yh(i,s,c){s instanceof Gr?(i.b=s,VS(i.b,i.i)):(c||(s=ss(s,MS)),i.b=new Gr(s,i.i))}function Ft(i,s,c){i.b.set(s,c)}function Je(i,s){return i.b.get(s)}function Ce(i){return i instanceof nr?new nr(i):new nr(i,void 0)}function ra(i,s,c,f){var d=new nr(null,void 0);return i&&rs(d,i),s&&(d.a=s),c&&is(d,c),f&&(d.f=f),d}function os(i,s){return i?s?decodeURI(i.replace(/%25/g,"%2525")):decodeURIComponent(i):""}function ss(i,s,c){return typeof i=="string"?(i=encodeURI(i).replace(s,PS),c&&(i=i.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),i):null}function PS(i){return i=i.charCodeAt(0),"%"+(i>>4&15).toString(16)+(i&15).toString(16)}var rg=/[#\/\?@]/g,xS=/[#\?:]/g,LS=/[#\?]/g,MS=/[#\?@]/g,FS=/#/g;function Gr(i,s){this.b=this.a=null,this.c=i||null,this.f=!!s}function rr(i){i.a||(i.a=new ji,i.b=0,i.c&&DS(i.c,function(s,c){i.add(decodeURIComponent(s.replace(/\+/g," ")),c)}))}function ig(i){var s=eg(i);if(typeof s>"u")throw Error("Keys are undefined");var c=new Gr(null,void 0);i=tg(i);for(var f=0;f<s.length;f++){var d=s[f],y=i[f];Array.isArray(y)?og(c,d,y):c.add(d,y)}return c}e=Gr.prototype,e.add=function(i,s){rr(this),this.c=null,i=Bi(this,i);var c=this.a.get(i);return c||this.a.set(i,c=[]),c.push(s),this.b+=1,this};function bn(i,s){rr(i),s=Bi(i,s),Wr(i.a.b,s)&&(i.c=null,i.b-=i.a.get(s).length,i=i.a,Wr(i.b,s)&&(delete i.b[s],i.c--,i.a.length>2*i.c&&Kh(i)))}e.clear=function(){this.a=this.c=null,this.b=0};function $h(i,s){return rr(i),s=Bi(i,s),Wr(i.a.b,s)}e.forEach=function(i,s){rr(this),this.a.forEach(function(c,f){kt(c,function(d){i.call(s,d,f,this)},this)},this)},e.Y=function(){rr(this);for(var i=this.a.W(),s=this.a.Y(),c=[],f=0;f<s.length;f++)for(var d=i[f],y=0;y<d.length;y++)c.push(s[f]);return c},e.W=function(i){rr(this);var s=[];if(typeof i=="string")$h(this,i)&&(s=Sh(s,this.a.get(Bi(this,i))));else{i=this.a.W();for(var c=0;c<i.length;c++)s=Sh(s,i[c])}return s},e.set=function(i,s){return rr(this),this.c=null,i=Bi(this,i),$h(this,i)&&(this.b-=this.a.get(i).length),this.a.set(i,[s]),this.b+=1,this},e.get=function(i,s){return i?(i=this.W(i),0<i.length?String(i[0]):s):s};function og(i,s,c){bn(i,s),0<c.length&&(i.c=null,i.a.set(Bi(i,s),Vr(c)),i.b+=c.length)}e.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var i=[],s=this.a.Y(),c=0;c<s.length;c++){var f=s[c],d=encodeURIComponent(String(f));f=this.W(f);for(var y=0;y<f.length;y++){var _=d;f[y]!==""&&(_+="="+encodeURIComponent(String(f[y]))),i.push(_)}}return this.c=i.join("&")};function sg(i){var s=new Gr;return s.c=i.c,i.a&&(s.a=new ji(i.a),s.b=i.b),s}function Bi(i,s){return s=String(s),i.f&&(s=s.toLowerCase()),s}function VS(i,s){s&&!i.f&&(rr(i),i.c=null,i.a.forEach(function(c,f){var d=f.toLowerCase();f!=d&&(bn(this,f),og(this,d,c))},i)),i.f=s}function ug(i){var s=[];return Xh(new US,i,s),s.join("")}function US(){}function Xh(i,s,c){if(s==null)c.push("null");else{if(typeof s=="object"){if(Array.isArray(s)){var f=s;s=f.length,c.push("[");for(var d="",y=0;y<s;y++)c.push(d),Xh(i,f[y],c),d=",";c.push("]");return}if(s instanceof String||s instanceof Number||s instanceof Boolean)s=s.valueOf();else{c.push("{"),d="";for(f in s)Object.prototype.hasOwnProperty.call(s,f)&&(y=s[f],typeof y!="function"&&(c.push(d),cg(f,c),c.push(":"),Xh(i,y,c),d=","));c.push("}");return}}switch(typeof s){case"string":cg(s,c);break;case"number":c.push(isFinite(s)&&!isNaN(s)?String(s):"null");break;case"boolean":c.push(String(s));break;case"function":c.push("null");break;default:throw Error("Unknown type: "+typeof s)}}}var ag={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","\v":"\\u000b"},jS=/\uffff/.test("")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function cg(i,s){s.push('"',i.replace(jS,function(c){var f=ag[c];return f||(f="\\u"+(c.charCodeAt(0)|65536).toString(16).substr(1),ag[c]=f),f}),'"')}function Jh(){var i=ne();return un&&!!er&&er==11||/Edge\/\d+/.test(i)}function us(){return l.window&&l.window.location.href||self&&self.location&&self.location.href||""}function hg(i,s){s=s||l.window;var c="about:blank";i&&(c=Qu(my(i)||wy)),s.location.href=c}function lg(i,s){var c=[],f;for(f in i)f in s?typeof i[f]!=typeof s[f]?c.push(f):typeof i[f]=="object"&&i[f]!=null&&s[f]!=null?0<lg(i[f],s[f]).length&&c.push(f):i[f]!==s[f]&&c.push(f):c.push(f);for(f in s)f in i||c.push(f);return c}function BS(){var i=ne();return i=qi(i)!=vg?null:(i=i.match(/\sChrome\/(\d+)/i))&&i.length==2?parseInt(i[1],10):null,i&&30>i?!1:!un||!er||9<er}function fg(i){return i=(i||ne()).toLowerCase(),!!(i.match(/android/)||i.match(/webos/)||i.match(/iphone|ipad|ipod/)||i.match(/blackberry/)||i.match(/windows phone/)||i.match(/iemobile/))}function Hr(i){i=i||l.window;try{i.close()}catch{}}function pg(i,s,c){var f=Math.floor(1e9*Math.random()).toString();s=s||500,c=c||600;var d=(window.screen.availHeight-c)/2,y=(window.screen.availWidth-s)/2;s={width:s,height:c,top:0<d?d:0,left:0<y?y:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},c=ne().toLowerCase(),f&&(s.target=f,Tt(c,"crios/")&&(s.target="_blank")),qi(ne())==el&&(i=i||"http://localhost",s.scrollbars=!0),c=i||"",(i=s)||(i={}),f=window,s=c instanceof Ne?c:my(typeof c.href<"u"?c.href:String(c))||wy,c=i.target||c.target,d=[];for(_ in i)switch(_){case"width":case"height":case"top":case"left":d.push(_+"="+i[_]);break;case"target":case"noopener":case"noreferrer":break;default:d.push(_+"="+(i[_]?1:0))}var _=d.join(",");if((Ht("iPhone")&&!Ht("iPod")&&!Ht("iPad")||Ht("iPad")||Ht("iPod"))&&f.navigator&&f.navigator.standalone&&c&&c!="_self"?(_=Yu(document,"A"),fy(_,"HTMLAnchorElement"),s=s instanceof Ne?s:_y(s),_.href=Qu(s),_.setAttribute("target",c),i.noreferrer&&_.setAttribute("rel","noreferrer"),i=document.createEvent("MouseEvent"),i.initMouseEvent("click",!0,!0,f,1),_.dispatchEvent(i),_={}):i.noreferrer?(_=Ey("",f,c,_),i=Qu(s),_&&(lS&&Tt(i,";")&&(i="'"+i.replace(/'/g,"%27")+"'"),_.opener=null,i='<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+Rh(i)+'">',i=(f=dy())?f.createHTML(i):i,i=new Fi(i,null,by),f=_.document)&&(f.write(uS(i)),f.close())):(_=Ey(s,f,c,_))&&i.noopener&&(_.opener=null),_)try{_.focus()}catch{}return _}function qS(i){return new ot(function(s){function c(){Ui(2e3).then(function(){if(!i||i.closed)s();else return c()})}return c()})}var WS=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,GS=/^[^@]+@[^@]+$/;function ia(){var i=null;return new ot(function(s){l.document.readyState=="complete"?s():(i=function(){s()},Wh(window,"load",i))}).o(function(s){throw Ve(window,"load",i),s})}function HS(){return Zh(void 0)?ia().then(function(){return new ot(function(i,s){var c=l.document,f=setTimeout(function(){s(Error("Cordova framework is not ready."))},1e3);c.addEventListener("deviceready",function(){clearTimeout(f),i()},!1)})}):At(Error("Cordova must run in an Android or iOS file scheme."))}function Zh(i){return i=i||ne(),!(Gi()!=="file:"&&Gi()!=="ionic:"||!i.toLowerCase().match(/iphone|ipad|ipod|android/))}function tl(){var i=l.window;try{return!(!i||i==i.top)}catch{return!1}}function an(){return typeof l.WorkerGlobalScope<"u"&&typeof l.importScripts=="function"}function En(){return Q.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":Q.INTERNAL.hasOwnProperty("node")?"Node":an()?"Worker":"Browser"}function dg(){var i=En();return i==="ReactNative"||i==="Node"}function zS(){for(var i=50,s=[];0<i;)s.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),i--;return s.join("")}var el="Firefox",vg="Chrome";function qi(i){var s=i.toLowerCase();if(Tt(s,"opera/")||Tt(s,"opr/")||Tt(s,"opios/"))return"Opera";if(Tt(s,"iemobile"))return"IEMobile";if(Tt(s,"msie")||Tt(s,"trident/"))return"IE";if(Tt(s,"edge/"))return"Edge";if(Tt(s,"firefox/"))return el;if(Tt(s,"silk/"))return"Silk";if(Tt(s,"blackberry"))return"Blackberry";if(Tt(s,"webos"))return"Webos";if(!Tt(s,"safari/")||Tt(s,"chrome/")||Tt(s,"crios/")||Tt(s,"android"))if(!Tt(s,"chrome/")&&!Tt(s,"crios/")||Tt(s,"edge/")){if(Tt(s,"android"))return"Android";if((i=i.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&i.length==2)return i[1]}else return vg;else return"Safari";return"Other"}var yg={md:"FirebaseCore-web",od:"FirebaseUI-web"};function Wi(i,s){s=s||[];var c=[],f={},d;for(d in yg)f[yg[d]]=!0;for(d=0;d<s.length;d++)typeof f[s[d]]<"u"&&(delete f[s[d]],c.push(s[d]));return c.sort(),s=c,s.length||(s=["FirebaseCore-web"]),c=En(),c==="Browser"?(f=ne(),c=qi(f)):c==="Worker"&&(f=ne(),c=qi(f)+"-"+c),c+"/JsCore/"+i+"/"+s.join(",")}function ne(){return l.navigator&&l.navigator.userAgent||""}function Ct(i,s){i=i.split("."),s=s||l;for(var c=0;c<i.length&&typeof s=="object"&&s!=null;c++)s=s[i[c]];return c!=i.length&&(s=void 0),s}function nl(){try{var i=l.localStorage,s=Qr();if(i)return i.setItem(s,"1"),i.removeItem(s),Jh()?!!l.indexedDB:!0}catch{return an()&&!!l.indexedDB}return!1}function zr(){return(oa()||Gi()==="chrome-extension:"||Zh())&&!dg()&&nl()&&!an()}function oa(){return Gi()==="http:"||Gi()==="https:"}function Gi(){return l.location&&l.location.protocol||null}function as(i){return i=i||ne(),!(fg(i)||qi(i)==el)}function cs(i){return typeof i>"u"?null:ug(i)}function gg(i){var s={},c;for(c in i)i.hasOwnProperty(c)&&i[c]!==null&&i[c]!==void 0&&(s[c]=i[c]);return s}function Hi(i){if(i!==null)return JSON.parse(i)}function Qr(i){return i||Math.floor(1e9*Math.random()).toString()}function mg(i){return i=i||ne(),!(qi(i)=="Safari"||i.toLowerCase().match(/iphone|ipad|ipod/))}function _g(){var i=l.___jsl;if(i&&i.H){for(var s in i.H)if(i.H[s].r=i.H[s].r||[],i.H[s].L=i.H[s].L||[],i.H[s].r=i.H[s].L.concat(),i.CP)for(var c=0;c<i.CP.length;c++)i.CP[c]=null}}function ir(i,s){if(i>s)throw Error("Short delay should be less than long delay!");this.a=i,this.c=s,i=ne(),s=En(),this.b=fg(i)||s==="ReactNative"}ir.prototype.get=function(){var i=l.navigator;return!(i&&typeof i.onLine=="boolean"&&(oa()||Gi()==="chrome-extension:"||typeof i.connection<"u"))||i.onLine?this.b?this.c:this.a:Math.min(5e3,this.a)};function rl(){var i=l.document;return i&&typeof i.visibilityState<"u"?i.visibilityState=="visible":!0}function QS(){var i=l.document,s=null;return rl()||!i?z():new ot(function(c){s=function(){rl()&&(i.removeEventListener("visibilitychange",s,!1),c())},i.addEventListener("visibilitychange",s,!1)}).o(function(c){throw i.removeEventListener("visibilitychange",s,!1),c})}function hs(i){try{var s=new Date(parseInt(i,10));if(!isNaN(s.getTime())&&!/[^0-9]/.test(i))return s.toUTCString()}catch{}return null}function wg(){return!(!Ct("fireauth.oauthhelper",l)&&!Ct("fireauth.iframe",l))}function KS(){var i=l.navigator;return i&&i.serviceWorker&&i.serviceWorker.controller||null}function YS(){var i=l.navigator;return i&&i.serviceWorker?z().then(function(){return i.serviceWorker.ready}).then(function(s){return s.active||null}).o(function(){return null}):z(null)}var bg={};function il(i){bg[i]||(bg[i]=!0,typeof console<"u"&&typeof console.warn=="function"&&console.warn(i))}var ol;try{var sl={};Object.defineProperty(sl,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(sl,"abcd",{configurable:!0,enumerable:!0,value:2}),ol=sl.abcd==2}catch{ol=!1}function q(i,s,c){ol?Object.defineProperty(i,s,{configurable:!0,enumerable:!0,value:c}):i[s]=c}function ve(i,s){if(s)for(var c in s)s.hasOwnProperty(c)&&q(i,c,s[c])}function In(i){var s={};return ve(s,i),s}function $S(i){var s={},c;for(c in i)i.hasOwnProperty(c)&&(s[c]=i[c]);return s}function XS(i,s){if(!s||!s.length)return!0;if(!i)return!1;for(var c=0;c<s.length;c++){var f=i[s[c]];if(f==null||f==="")return!1}return!0}function ul(i){var s=i;if(typeof i=="object"&&i!=null){s="length"in i?[]:{};for(var c in i)q(s,c,ul(i[c]))}return s}function al(i){var s=i&&(i[fl]?"phone":null);if(s&&i&&i[ll]){q(this,"uid",i[ll]),q(this,"displayName",i[Eg]||null);var c=null;i[hl]&&(c=new Date(i[hl]).toUTCString()),q(this,"enrollmentTime",c),q(this,"factorId",s)}else throw new S("internal-error","Internal assert: invalid MultiFactorInfo object")}al.prototype.w=function(){return{uid:this.uid,displayName:this.displayName,factorId:this.factorId,enrollmentTime:this.enrollmentTime}};function cl(i){try{var s=new ls(i)}catch{s=null}return s}var Eg="displayName",hl="enrolledAt",ll="mfaEnrollmentId",fl="phoneInfo";function ls(i){al.call(this,i),q(this,"phoneNumber",i[fl])}X(ls,al),ls.prototype.w=function(){var i=ls.ab.w.call(this);return i.phoneNumber=this.phoneNumber,i};function JS(i){var s={},c=i[ZS],f=i[eN],d=i[nN];if(i=cl(i[tN]),!d||d!=sa&&d!=fs&&!c||d==fs&&!f||d==pl&&!i)throw Error("Invalid checkActionCode response!");d==fs?(s[Tg]=c||null,s[Sg]=c||null,s[Ig]=f):(s[Tg]=f||null,s[Sg]=f||null,s[Ig]=c||null),s[rN]=i||null,q(this,oN,d),q(this,iN,ul(s))}var pl="REVERT_SECOND_FACTOR_ADDITION",sa="EMAIL_SIGNIN",fs="VERIFY_AND_CHANGE_EMAIL",ZS="email",tN="mfaInfo",eN="newEmail",nN="requestType",Ig="email",Tg="fromEmail",rN="multiFactorInfo",Sg="previousEmail",iN="data",oN="operation";function dl(i){i=Ce(i);var s=Je(i,Ng)||null,c=Je(i,Ag)||null,f=Je(i,Cg)||null;if(f=f&&cN[f]||null,!s||!c||!f)throw new S("argument-error",Ng+", "+Ag+"and "+Cg+" are required in a valid action code URL.");ve(this,{apiKey:s,operation:f,code:c,continueUrl:Je(i,sN)||null,languageCode:Je(i,uN)||null,tenantId:Je(i,aN)||null})}var Ng="apiKey",Ag="oobCode",sN="continueUrl",uN="languageCode",Cg="mode",aN="tenantId",cN={recoverEmail:"RECOVER_EMAIL",resetPassword:"PASSWORD_RESET",revertSecondFactorAddition:pl,signIn:sa,verifyAndChangeEmail:fs,verifyEmail:"VERIFY_EMAIL"};function Rg(i){try{return new dl(i)}catch{return null}}function ua(i){var s=i[hN];if(typeof s>"u")throw new S("missing-continue-uri");if(typeof s!="string"||typeof s=="string"&&!s.length)throw new S("invalid-continue-uri");this.h=s,this.b=this.a=null,this.g=!1;var c=i[Og];if(c&&typeof c=="object"){s=c[Lg];var f=c[Pg];if(c=c[xg],typeof s=="string"&&s.length){if(this.a=s,typeof f<"u"&&typeof f!="boolean")throw new S("argument-error",Pg+" property must be a boolean when specified.");if(this.g=!!f,typeof c<"u"&&(typeof c!="string"||typeof c=="string"&&!c.length))throw new S("argument-error",xg+" property must be a non empty string when specified.");this.b=c||null}else{if(typeof s<"u")throw new S("argument-error",Lg+" property must be a non empty string when specified.");if(typeof f<"u"||typeof c<"u")throw new S("missing-android-pkg-name")}}else if(typeof c<"u")throw new S("argument-error",Og+" property must be a non null object when specified.");if(this.f=null,(s=i[Dg])&&typeof s=="object"){if(s=s[Mg],typeof s=="string"&&s.length)this.f=s;else if(typeof s<"u")throw new S("argument-error",Mg+" property must be a non empty string when specified.")}else if(typeof s<"u")throw new S("argument-error",Dg+" property must be a non null object when specified.");if(s=i[vl],typeof s<"u"&&typeof s!="boolean")throw new S("argument-error",vl+" property must be a boolean when specified.");if(this.c=!!s,i=i[kg],typeof i<"u"&&(typeof i!="string"||typeof i=="string"&&!i.length))throw new S("argument-error",kg+" property must be a non empty string when specified.");this.i=i||null}var Og="android",kg="dynamicLinkDomain",vl="handleCodeInApp",Dg="iOS",hN="url",Pg="installApp",xg="minimumVersion",Lg="packageName",Mg="bundleId";function aa(i){var s={};s.continueUrl=i.h,s.canHandleCodeInApp=i.c,(s.androidPackageName=i.a)&&(s.androidMinimumVersion=i.b,s.androidInstallApp=i.g),s.iOSBundleId=i.f,s.dynamicLinkDomain=i.i;for(var c in s)s[c]===null&&delete s[c];return s}function lN(i){return Wu(i,function(s){return s=s.toString(16),1<s.length?s:"0"+s}).join("")}var ps=null;function fN(i){var s=[];return pN(i,function(c){s.push(c)}),s}function pN(i,s){function c(A){for(;f<i.length;){var O=i.charAt(f++),J=ps[O];if(J!=null)return J;if(!/^[\s\xa0]*$/.test(O))throw Error("Unknown base64 encoding at char: "+O)}return A}dN();for(var f=0;;){var d=c(-1),y=c(0),_=c(64),E=c(64);if(E===64&&d===-1)break;s(d<<2|y>>4),_!=64&&(s(y<<4&240|_>>2),E!=64&&s(_<<6&192|E))}}function dN(){if(!ps){ps={};for(var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),s=["+/=","+/","-_=","-_.","-_"],c=0;5>c;c++)for(var f=i.concat(s[c].split("")),d=0;d<f.length;d++){var y=f[d];ps[y]===void 0&&(ps[y]=d)}}}function ca(i){var s=Fg(i);if(!(s&&s.sub&&s.iss&&s.aud&&s.exp))throw Error("Invalid JWT");this.h=i,this.a=s.exp,this.i=s.sub,i=Date.now()/1e3,this.g=s.iat||(i>this.a?this.a:i),this.b=s.provider_id||s.firebase&&s.firebase.sign_in_provider||null,this.f=s.firebase&&s.firebase.tenant||null,this.c=!!s.is_anonymous||this.b=="anonymous"}ca.prototype.T=function(){return this.f},ca.prototype.l=function(){return this.c},ca.prototype.toString=function(){return this.h};function ha(i){try{return new ca(i)}catch{return null}}function Fg(i){if(!i||(i=i.split("."),i.length!=3))return null;i=i[1];for(var s=(4-i.length%4)%4,c=0;c<s;c++)i+=".";try{var f=fN(i);for(i=[],c=s=0;s<f.length;){var d=f[s++];if(128>d)i[c++]=String.fromCharCode(d);else if(191<d&&224>d){var y=f[s++];i[c++]=String.fromCharCode((d&31)<<6|y&63)}else if(239<d&&365>d){y=f[s++];var _=f[s++],E=f[s++],A=((d&7)<<18|(y&63)<<12|(_&63)<<6|E&63)-65536;i[c++]=String.fromCharCode(55296+(A>>10)),i[c++]=String.fromCharCode(56320+(A&1023))}else y=f[s++],_=f[s++],i[c++]=String.fromCharCode((d&15)<<12|(y&63)<<6|_&63)}return JSON.parse(i.join(""))}catch{}return null}var Vg="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),la=["client_id","response_type","scope","redirect_uri","state"],yl={nd:{Ja:"locale",ua:700,ta:600,fa:"facebook.com",Xa:la},pd:{Ja:null,ua:500,ta:750,fa:"github.com",Xa:la},qd:{Ja:"hl",ua:515,ta:680,fa:"google.com",Xa:la},wd:{Ja:"lang",ua:485,ta:705,fa:"twitter.com",Xa:Vg},kd:{Ja:"locale",ua:640,ta:600,fa:"apple.com",Xa:[]}};function gl(i){for(var s in yl)if(yl[s].fa==i)return yl[s];return null}function Ug(i){var s={};s["facebook.com"]=Bg,s["google.com"]=Wg,s["github.com"]=qg,s["twitter.com"]=Gg;var c=i&&i[jg];try{if(c)return s[c]?new s[c](i):new Tn(i);if(typeof i[ml]<"u")return new _l(i)}catch{}return null}var ml="idToken",jg="providerId";function _l(i){var s=i[jg];if(!s&&i[ml]){var c=ha(i[ml]);c&&c.b&&(s=c.b)}if(!s)throw Error("Invalid additional user info!");(s=="anonymous"||s=="custom")&&(s=null),c=!1,typeof i.isNewUser<"u"?c=!!i.isNewUser:i.kind==="identitytoolkit#SignupNewUserResponse"&&(c=!0),q(this,"providerId",s),q(this,"isNewUser",c)}function Tn(i){_l.call(this,i),i=Hi(i.rawUserInfo||"{}"),q(this,"profile",ul(i||{}))}X(Tn,_l);function Bg(i){if(Tn.call(this,i),this.providerId!="facebook.com")throw Error("Invalid provider ID!")}X(Bg,Tn);function qg(i){if(Tn.call(this,i),this.providerId!="github.com")throw Error("Invalid provider ID!");q(this,"username",this.profile&&this.profile.login||null)}X(qg,Tn);function Wg(i){if(Tn.call(this,i),this.providerId!="google.com")throw Error("Invalid provider ID!")}X(Wg,Tn);function Gg(i){if(Tn.call(this,i),this.providerId!="twitter.com")throw Error("Invalid provider ID!");q(this,"username",i.screenName||null)}X(Gg,Tn);function Hg(i){var s=Ce(i),c=Je(s,"link"),f=Je(Ce(c),"link");return s=Je(s,"deep_link_id"),Je(Ce(s),"link")||s||f||c||i}function fa(i,s){if(!i&&!s)throw new S("internal-error","Internal assert: no raw session string available");if(i&&s)throw new S("internal-error","Internal assert: unable to determine the session type");this.a=i||null,this.b=s||null,this.type=this.a?ds:pa}var ds="enroll",pa="signin";fa.prototype.Ha=function(){return this.a?z(this.a):z(this.b)},fa.prototype.w=function(){return this.type==ds?{multiFactorSession:{idToken:this.a}}:{multiFactorSession:{pendingCredential:this.b}}};function zi(){}zi.prototype.ka=function(){},zi.prototype.b=function(){},zi.prototype.c=function(){},zi.prototype.w=function(){};function Qi(i,s){return i.then(function(c){if(c[ln]){var f=ha(c[ln]);if(!f||s!=f.i)throw new S("user-mismatch");return c}throw new S("user-mismatch")}).o(function(c){throw c&&c.code&&c.code==$o+"user-not-found"?new S("user-mismatch"):c})}function Kr(i,s){if(s)this.a=s;else throw new S("internal-error","failed to construct a credential");q(this,"providerId",i),q(this,"signInMethod",i)}Kr.prototype.ka=function(i){return Wl(i,wl(this))},Kr.prototype.b=function(i,s){var c=wl(this);return c.idToken=s,Gl(i,c)},Kr.prototype.c=function(i,s){return Qi(Hl(i,wl(this)),s)};function wl(i){return{pendingToken:i.a,requestUri:"http://localhost"}}Kr.prototype.w=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}};function vN(i){if(i&&i.providerId&&i.signInMethod&&i.providerId.indexOf("saml.")==0&&i.pendingToken)try{return new Kr(i.providerId,i.pendingToken)}catch{}return null}function Un(i,s,c){if(this.a=null,s.idToken||s.accessToken)s.idToken&&q(this,"idToken",s.idToken),s.accessToken&&q(this,"accessToken",s.accessToken),s.nonce&&!s.pendingToken&&q(this,"nonce",s.nonce),s.pendingToken&&(this.a=s.pendingToken);else if(s.oauthToken&&s.oauthTokenSecret)q(this,"accessToken",s.oauthToken),q(this,"secret",s.oauthTokenSecret);else throw new S("internal-error","failed to construct a credential");q(this,"providerId",i),q(this,"signInMethod",c)}Un.prototype.ka=function(i){return Wl(i,bl(this))},Un.prototype.b=function(i,s){var c=bl(this);return c.idToken=s,Gl(i,c)},Un.prototype.c=function(i,s){var c=bl(this);return Qi(Hl(i,c),s)};function bl(i){var s={};return i.idToken&&(s.id_token=i.idToken),i.accessToken&&(s.access_token=i.accessToken),i.secret&&(s.oauth_token_secret=i.secret),s.providerId=i.providerId,i.nonce&&!i.a&&(s.nonce=i.nonce),s={postBody:ig(s).toString(),requestUri:"http://localhost"},i.a&&(delete s.postBody,s.pendingToken=i.a),s}Un.prototype.w=function(){var i={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(i.oauthIdToken=this.idToken),this.accessToken&&(i.oauthAccessToken=this.accessToken),this.secret&&(i.oauthTokenSecret=this.secret),this.nonce&&(i.nonce=this.nonce),this.a&&(i.pendingToken=this.a),i};function yN(i){if(i&&i.providerId&&i.signInMethod){var s={idToken:i.oauthIdToken,accessToken:i.oauthTokenSecret?null:i.oauthAccessToken,oauthTokenSecret:i.oauthTokenSecret,oauthToken:i.oauthTokenSecret&&i.oauthAccessToken,nonce:i.nonce,pendingToken:i.pendingToken};try{return new Un(i.providerId,s,i.signInMethod)}catch{}}return null}function Yr(i,s){this.Qc=s||[],ve(this,{providerId:i,isOAuthProvider:!0}),this.Ib={},this.pb=(gl(i)||{}).Ja||null,this.ob=null}Yr.prototype.Ka=function(i){return this.Ib=tr(i),this};function zg(i){if(typeof i!="string"||i.indexOf("saml.")!=0)throw new S("argument-error",'SAML provider IDs must be prefixed with "saml."');Yr.call(this,i,[])}X(zg,Yr);function Ue(i){Yr.call(this,i,la),this.a=[]}X(Ue,Yr),Ue.prototype.Ca=function(i){return Fn(this.a,i)||this.a.push(i),this},Ue.prototype.Qb=function(){return Vr(this.a)},Ue.prototype.credential=function(i,s){var c;if(T(i)?c={idToken:i.idToken||null,accessToken:i.accessToken||null,nonce:i.rawNonce||null}:c={idToken:i||null,accessToken:s||null},!c.idToken&&!c.accessToken)throw new S("argument-error","credential failed: must provide the ID token and/or the access token.");return new Un(this.providerId,c,this.providerId)};function $r(){Ue.call(this,"facebook.com")}X($r,Ue),q($r,"PROVIDER_ID","facebook.com"),q($r,"FACEBOOK_SIGN_IN_METHOD","facebook.com");function Qg(i){if(!i)throw new S("argument-error","credential failed: expected 1 argument (the OAuth access token).");var s=i;return T(i)&&(s=i.accessToken),new $r().credential({accessToken:s})}function Xr(){Ue.call(this,"github.com")}X(Xr,Ue),q(Xr,"PROVIDER_ID","github.com"),q(Xr,"GITHUB_SIGN_IN_METHOD","github.com");function Kg(i){if(!i)throw new S("argument-error","credential failed: expected 1 argument (the OAuth access token).");var s=i;return T(i)&&(s=i.accessToken),new Xr().credential({accessToken:s})}function Jr(){Ue.call(this,"google.com"),this.Ca("profile")}X(Jr,Ue),q(Jr,"PROVIDER_ID","google.com"),q(Jr,"GOOGLE_SIGN_IN_METHOD","google.com");function Yg(i,s){var c=i;return T(i)&&(c=i.idToken,s=i.accessToken),new Jr().credential({idToken:c,accessToken:s})}function Ki(){Yr.call(this,"twitter.com",Vg)}X(Ki,Yr),q(Ki,"PROVIDER_ID","twitter.com"),q(Ki,"TWITTER_SIGN_IN_METHOD","twitter.com");function $g(i,s){var c=i;if(T(c)||(c={oauthToken:i,oauthTokenSecret:s}),!c.oauthToken||!c.oauthTokenSecret)throw new S("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new Un("twitter.com",c,"twitter.com")}function or(i,s,c){this.a=i,this.f=s,q(this,"providerId","password"),q(this,"signInMethod",c===Ze.EMAIL_LINK_SIGN_IN_METHOD?Ze.EMAIL_LINK_SIGN_IN_METHOD:Ze.EMAIL_PASSWORD_SIGN_IN_METHOD)}or.prototype.ka=function(i){return this.signInMethod==Ze.EMAIL_LINK_SIGN_IN_METHOD?ut(i,t1,{email:this.a,oobCode:this.f}):ut(i,Tm,{email:this.a,password:this.f})},or.prototype.b=function(i,s){return this.signInMethod==Ze.EMAIL_LINK_SIGN_IN_METHOD?ut(i,e1,{idToken:s,email:this.a,oobCode:this.f}):ut(i,Im,{idToken:s,email:this.a,password:this.f})},or.prototype.c=function(i,s){return Qi(this.ka(i),s)},or.prototype.w=function(){return{email:this.a,password:this.f,signInMethod:this.signInMethod}};function gN(i){return i&&i.email&&i.password?new or(i.email,i.password,i.signInMethod):null}function Ze(){ve(this,{providerId:"password",isOAuthProvider:!1})}function Xg(i,s){if(s=El(s),!s)throw new S("argument-error","Invalid email link!");return new or(i,s.code,Ze.EMAIL_LINK_SIGN_IN_METHOD)}function El(i){return i=Hg(i),(i=Rg(i))&&i.operation===sa?i:null}ve(Ze,{PROVIDER_ID:"password"}),ve(Ze,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),ve(Ze,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"});function sr(i){if(!(i.eb&&i.cb||i.La&&i.ea))throw new S("internal-error");this.a=i,q(this,"providerId","phone"),this.fa="phone",q(this,"signInMethod","phone")}sr.prototype.ka=function(i){return i.fb(vs(this))},sr.prototype.b=function(i,s){var c=vs(this);return c.idToken=s,ut(i,b1,c)},sr.prototype.c=function(i,s){var c=vs(this);return c.operation="REAUTH",i=ut(i,E1,c),Qi(i,s)},sr.prototype.w=function(){var i={providerId:"phone"};return this.a.eb&&(i.verificationId=this.a.eb),this.a.cb&&(i.verificationCode=this.a.cb),this.a.La&&(i.temporaryProof=this.a.La),this.a.ea&&(i.phoneNumber=this.a.ea),i};function mN(i){if(i&&i.providerId==="phone"&&(i.verificationId&&i.verificationCode||i.temporaryProof&&i.phoneNumber)){var s={};return kt(["verificationId","verificationCode","temporaryProof","phoneNumber"],function(c){i[c]&&(s[c]=i[c])}),new sr(s)}return null}function vs(i){return i.a.La&&i.a.ea?{temporaryProof:i.a.La,phoneNumber:i.a.ea}:{sessionInfo:i.a.eb,code:i.a.cb}}function jn(i){try{this.a=i||Q.auth()}catch{throw new S("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}ve(this,{providerId:"phone",isOAuthProvider:!1})}jn.prototype.fb=function(i,s){var c=this.a.a;return z(s.verify()).then(function(f){if(typeof f!="string")throw new S("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");switch(s.type){case"recaptcha":var d=T(i)?i.session:null,y=T(i)?i.phoneNumber:i,_;return d&&d.type==ds?_=d.Ha().then(function(E){return HN(c,{idToken:E,phoneEnrollmentInfo:{phoneNumber:y,recaptchaToken:f}})}):d&&d.type==pa?_=d.Ha().then(function(E){return zN(c,{mfaPendingCredential:E,mfaEnrollmentId:i.multiFactorHint&&i.multiFactorHint.uid||i.multiFactorUid,phoneSignInInfo:{recaptchaToken:f}})}):_=GN(c,{phoneNumber:y,recaptchaToken:f}),_.then(function(E){return typeof s.reset=="function"&&s.reset(),E},function(E){throw typeof s.reset=="function"&&s.reset(),E});default:throw new S("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')}})};function Jg(i,s){if(!i)throw new S("missing-verification-id");if(!s)throw new S("missing-verification-code");return new sr({eb:i,cb:s})}ve(jn,{PROVIDER_ID:"phone"}),ve(jn,{PHONE_SIGN_IN_METHOD:"phone"});function Il(i){if(i.temporaryProof&&i.phoneNumber)return new sr({La:i.temporaryProof,ea:i.phoneNumber});var s=i&&i.providerId;if(!s||s==="password")return null;var c=i&&i.oauthAccessToken,f=i&&i.oauthTokenSecret,d=i&&i.nonce,y=i&&i.oauthIdToken,_=i&&i.pendingToken;try{switch(s){case"google.com":return Yg(y,c);case"facebook.com":return Qg(c);case"github.com":return Kg(c);case"twitter.com":return $g(c,f);default:return c||f||y||_?_?s.indexOf("saml.")==0?new Kr(s,_):new Un(s,{pendingToken:_,idToken:i.oauthIdToken,accessToken:i.oauthAccessToken},s):new Ue(s).credential({idToken:y,accessToken:c,rawNonce:d}):null}}catch{return null}}function Tl(i){if(!i.isOAuthProvider)throw new S("invalid-oauth-provider")}function cn(i,s,c,f,d,y,_){if(this.c=i,this.b=s||null,this.g=c||null,this.f=f||null,this.i=y||null,this.h=_||null,this.a=d||null,this.g||this.a){if(this.g&&this.a)throw new S("invalid-auth-event");if(this.g&&!this.f)throw new S("invalid-auth-event")}else throw new S("invalid-auth-event")}cn.prototype.getUid=function(){var i=[];return i.push(this.c),this.b&&i.push(this.b),this.f&&i.push(this.f),this.h&&i.push(this.h),i.join("-")},cn.prototype.T=function(){return this.h},cn.prototype.w=function(){return{type:this.c,eventId:this.b,urlResponse:this.g,sessionId:this.f,postBody:this.i,tenantId:this.h,error:this.a&&this.a.w()}};function Zg(i){return i=i||{},i.type?new cn(i.type,i.eventId,i.urlResponse,i.sessionId,i.error&&ey(i.error),i.postBody,i.tenantId):null}function _N(){this.b=null,this.a=[]}var Sl=null;function wN(i){var s=Sl;s.a.push(i),s.b||(s.b=function(c){for(var f=0;f<s.a.length;f++)s.a[f](c)},i=Ct("universalLinks.subscribe",l),typeof i=="function"&&i(null,s.b))}function Nl(i){var s="unauthorized-domain",c=void 0,f=Ce(i);i=f.a,f=f.c,f=="chrome-extension"?c=Iy("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",i):f=="http"||f=="https"?c=Iy("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",i):s="operation-not-supported-in-this-environment",S.call(this,s,c)}X(Nl,S);function ys(i,s,c){S.call(this,i,c),i=s||{},i.Jb&&q(this,"email",i.Jb),i.ea&&q(this,"phoneNumber",i.ea),i.credential&&q(this,"credential",i.credential),i.Zb&&q(this,"tenantId",i.Zb)}X(ys,S),ys.prototype.w=function(){var i={code:this.code,message:this.message};this.email&&(i.email=this.email),this.phoneNumber&&(i.phoneNumber=this.phoneNumber),this.tenantId&&(i.tenantId=this.tenantId);var s=this.credential&&this.credential.w();return s&&Se(i,s),i},ys.prototype.toJSON=function(){return this.w()};function da(i){if(i.code){var s=i.code||"";s.indexOf($o)==0&&(s=s.substring($o.length));var c={credential:Il(i),Zb:i.tenantId};if(i.email)c.Jb=i.email;else if(i.phoneNumber)c.ea=i.phoneNumber;else if(!c.credential)return new S(s,i.message||void 0);return new ys(s,c,i.message)}return null}function gs(){}gs.prototype.c=null;function tm(i){return i.c||(i.c=i.b())}var Al;function va(){}X(va,gs),va.prototype.a=function(){var i=em(this);return i?new ActiveXObject(i):new XMLHttpRequest},va.prototype.b=function(){var i={};return em(this)&&(i[0]=!0,i[1]=!0),i};function em(i){if(!i.f&&typeof XMLHttpRequest>"u"&&typeof ActiveXObject<"u"){for(var s=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],c=0;c<s.length;c++){var f=s[c];try{return new ActiveXObject(f),i.f=f}catch{}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return i.f}Al=new va;function ya(){}X(ya,gs),ya.prototype.a=function(){var i=new XMLHttpRequest;if("withCredentials"in i)return i;if(typeof XDomainRequest<"u")return new nm;throw Error("Unsupported browser")},ya.prototype.b=function(){return{}};function nm(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response="",this.status=-1,this.statusText="",this.a.onload=P(this.qc,this),this.a.onerror=P(this.Sb,this),this.a.onprogress=P(this.rc,this),this.a.ontimeout=P(this.vc,this)}e=nm.prototype,e.open=function(i,s,c){if(c!=null&&!c)throw Error("Only async requests are supported.");this.a.open(i,s)},e.send=function(i){if(i)if(typeof i=="string")this.a.send(i);else throw Error("Only string data is supported");else this.a.send()},e.abort=function(){this.a.abort()},e.setRequestHeader=function(){},e.getResponseHeader=function(i){return i.toLowerCase()=="content-type"?this.a.contentType:""},e.qc=function(){this.status=200,this.response=this.responseText=this.a.responseText,Cl(this,4)},e.Sb=function(){this.status=500,this.response=this.responseText="",Cl(this,4)},e.vc=function(){this.Sb()},e.rc=function(){this.status=200,Cl(this,1)};function Cl(i,s){i.readyState=s,i.onreadystatechange&&i.onreadystatechange()}e.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType};function Rl(i,s,c){this.reset(i,s,c,void 0,void 0)}Rl.prototype.a=null,Rl.prototype.reset=function(i,s,c,f,d){delete this.a};function Ol(i){this.f=i,this.b=this.c=this.a=null}function ms(i,s){this.name=i,this.value=s}ms.prototype.toString=function(){return this.name};var rm=new ms("SEVERE",1e3),kl=new ms("WARNING",900),bN=new ms("CONFIG",700),EN=new ms("FINE",500);function im(i){return i.c?i.c:i.a?im(i.a):(xi("Root logger has no level set."),null)}Ol.prototype.log=function(i,s,c){if(i.value>=im(this).value)for(I(s)&&(s=s()),i=new Rl(i,String(s),this.f),c&&(i.a=c),c=this;c;)c=c.a};var Dl={},ga=null;function Pl(i){ga||(ga=new Ol(""),Dl[""]=ga,ga.c=bN);var s;if(!(s=Dl[i])){s=new Ol(i);var c=i.lastIndexOf("."),f=i.substr(c+1);c=Pl(i.substr(0,c)),c.b||(c.b={}),c.b[f]=s,s.a=c,Dl[i]=s}return s}function tn(i,s){i&&i.log(EN,s,void 0)}function ma(i){this.f=i}X(ma,gs),ma.prototype.a=function(){return new _a(this.f)},ma.prototype.b=function(i){return function(){return i}}({});function _a(i){de.call(this),this.u=i,this.h=void 0,this.readyState=xl,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.l=new Headers,this.b=null,this.s="GET",this.f="",this.a=!1,this.i=Pl("goog.net.FetchXmlHttp"),this.m=this.c=this.g=null}X(_a,de);var xl=0;e=_a.prototype,e.open=function(i,s){if(this.readyState!=xl)throw this.abort(),Error("Error reopening a connection");this.s=i,this.f=s,this.readyState=1,ws(this)},e.send=function(i){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.a=!0;var s={headers:this.l,method:this.s,credentials:this.h,cache:void 0};i&&(s.body=i),this.u.fetch(new Request(this.f,s)).then(this.uc.bind(this),this.Ua.bind(this))},e.abort=function(){this.response=this.responseText="",this.l=new Headers,this.status=0,this.c&&this.c.cancel("Request was aborted."),1<=this.readyState&&this.a&&this.readyState!=4&&(this.a=!1,_s(this)),this.readyState=xl},e.uc=function(i){this.a&&(this.g=i,this.b||(this.status=this.g.status,this.statusText=this.g.statusText,this.b=i.headers,this.readyState=2,ws(this)),this.a&&(this.readyState=3,ws(this),this.a&&(this.responseType==="arraybuffer"?i.arrayBuffer().then(this.sc.bind(this),this.Ua.bind(this)):typeof l.ReadableStream<"u"&&"body"in i?(this.response=this.responseText="",this.c=i.body.getReader(),this.m=new TextDecoder,om(this)):i.text().then(this.tc.bind(this),this.Ua.bind(this)))))};function om(i){i.c.read().then(i.pc.bind(i)).catch(i.Ua.bind(i))}e.pc=function(i){if(this.a){var s=this.m.decode(i.value?i.value:new Uint8Array(0),{stream:!i.done});s&&(this.response=this.responseText+=s),i.done?_s(this):ws(this),this.readyState==3&&om(this)}},e.tc=function(i){this.a&&(this.response=this.responseText=i,_s(this))},e.sc=function(i){this.a&&(this.response=i,_s(this))},e.Ua=function(i){var s=this.i;s&&s.log(kl,"Failed to fetch url "+this.f,i instanceof Error?i:Error(i)),this.a&&_s(this)};function _s(i){i.readyState=4,i.g=null,i.c=null,i.m=null,ws(i)}e.setRequestHeader=function(i,s){this.l.append(i,s)},e.getResponseHeader=function(i){return this.b?this.b.get(i.toLowerCase())||"":((i=this.i)&&i.log(kl,"Attempting to get response header but no headers have been received for url: "+this.f,void 0),"")},e.getAllResponseHeaders=function(){if(!this.b){var i=this.i;return i&&i.log(kl,"Attempting to get all response headers but no headers have been received for url: "+this.f,void 0),""}i=[];for(var s=this.b.entries(),c=s.next();!c.done;)c=c.value,i.push(c[0]+": "+c[1]),c=s.next();return i.join(`\r
`)};function ws(i){i.onreadystatechange&&i.onreadystatechange.call(i)}Object.defineProperty(_a.prototype,"withCredentials",{get:function(){return this.h==="include"},set:function(i){this.h=i?"include":"same-origin"}});function bs(i){de.call(this),this.headers=new ji,this.D=i||null,this.c=!1,this.C=this.a=null,this.h=this.R=this.l="",this.f=this.O=this.i=this.J=!1,this.g=0,this.s=null,this.m=sm,this.u=this.S=!1}X(bs,de);var sm="";bs.prototype.b=Pl("goog.net.XhrIo");var IN=/^https?$/i,TN=["POST","PUT"];function SN(i,s,c,f,d){if(i.a)throw Error("[goog.net.XhrIo] Object is active with another request="+i.l+"; newUri="+s);c=c?c.toUpperCase():"GET",i.l=s,i.h="",i.R=c,i.J=!1,i.c=!0,i.a=i.D?i.D.a():Al.a(),i.C=i.D?tm(i.D):tm(Al),i.a.onreadystatechange=P(i.Vb,i);try{tn(i.b,Bn(i,"Opening Xhr")),i.O=!0,i.a.open(c,String(s),!0),i.O=!1}catch(_){tn(i.b,Bn(i,"Error opening Xhr: "+_.message)),um(i,_);return}s=f||"";var y=new ji(i.headers);d&&kS(d,function(_,E){y.set(E,_)}),d=KT(y.Y()),f=l.FormData&&s instanceof l.FormData,!Fn(TN,c)||d||f||y.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),y.forEach(function(_,E){this.a.setRequestHeader(E,_)},i),i.m&&(i.a.responseType=i.m),"withCredentials"in i.a&&i.a.withCredentials!==i.S&&(i.a.withCredentials=i.S);try{hm(i),0<i.g&&(i.u=NN(i.a),tn(i.b,Bn(i,"Will abort after "+i.g+"ms if incomplete, xhr2 "+i.u)),i.u?(i.a.timeout=i.g,i.a.ontimeout=P(i.Ma,i)):i.s=Qh(i.Ma,i.g,i)),tn(i.b,Bn(i,"Sending request")),i.i=!0,i.a.send(s),i.i=!1}catch(_){tn(i.b,Bn(i,"Send error: "+_.message)),um(i,_)}}function NN(i){return un&&Ay(9)&&typeof i.timeout=="number"&&i.ontimeout!==void 0}function AN(i){return i.toLowerCase()=="content-type"}e=bs.prototype,e.Ma=function(){typeof h<"u"&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",tn(this.b,Bn(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))};function um(i,s){i.c=!1,i.a&&(i.f=!0,i.a.abort(),i.f=!1),i.h=s,am(i),wa(i)}function am(i){i.J||(i.J=!0,i.dispatchEvent("complete"),i.dispatchEvent("error"))}e.abort=function(){this.a&&this.c&&(tn(this.b,Bn(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),wa(this))},e.Da=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),wa(this,!0)),bs.ab.Da.call(this)},e.Vb=function(){this.xa||(this.O||this.i||this.f?cm(this):this.Jc())},e.Jc=function(){cm(this)};function cm(i){if(i.c&&typeof h<"u"){if(i.C[1]&&Es(i)==4&&ba(i)==2)tn(i.b,Bn(i,"Local request error detected and ignored"));else if(i.i&&Es(i)==4)Qh(i.Vb,0,i);else if(i.dispatchEvent("readystatechange"),Es(i)==4){tn(i.b,Bn(i,"Request complete")),i.c=!1;try{var s=ba(i);t:switch(s){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var c=!0;break t;default:c=!1}var f;if(!(f=c)){var d;if(d=s===0){var y=String(i.l).match(ng)[1]||null;if(!y&&l.self&&l.self.location){var _=l.self.location.protocol;y=_.substr(0,_.length-1)}d=!IN.test(y?y.toLowerCase():"")}f=d}if(f)i.dispatchEvent("complete"),i.dispatchEvent("success");else{try{var E=2<Es(i)?i.a.statusText:""}catch(A){tn(i.b,"Can not get status: "+A.message),E=""}i.h=E+" ["+ba(i)+"]",am(i)}}finally{wa(i)}}}}function wa(i,s){if(i.a){hm(i);var c=i.a,f=i.C[0]?m:null;i.a=null,i.C=null,s||i.dispatchEvent("ready");try{c.onreadystatechange=f}catch(d){(i=i.b)&&i.log(rm,"Problem encountered resetting onreadystatechange: "+d.message,void 0)}}}function hm(i){i.a&&i.u&&(i.a.ontimeout=null),i.s&&(l.clearTimeout(i.s),i.s=null)}function Es(i){return i.a?i.a.readyState:0}function ba(i){try{return 2<Es(i)?i.a.status:-1}catch{return-1}}function CN(i){try{return i.a?i.a.responseText:""}catch(s){return tn(i.b,"Can not get responseText: "+s.message),""}}e.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.m){case sm:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var i=this.b;return i&&i.log(rm,"Response type "+this.m+" is not supported on this browser",void 0),null}catch(s){return tn(this.b,"Can not get response: "+s.message),null}};function Bn(i,s){return s+" ["+i.R+" "+i.l+" "+ba(i)+"]"}function Zr(i){var s=kN;this.g=[],this.u=s,this.s=i||null,this.f=this.a=!1,this.c=void 0,this.v=this.C=this.i=!1,this.h=0,this.b=null,this.l=0}Zr.prototype.cancel=function(i){if(this.a)this.c instanceof Zr&&this.c.cancel();else{if(this.b){var s=this.b;delete this.b,i?s.cancel(i):(s.l--,0>=s.l&&s.cancel())}this.u?this.u.call(this.s,this):this.v=!0,this.a||(i=new Ts,Ea(this),Is(this,!1,i))}},Zr.prototype.m=function(i,s){this.i=!1,Is(this,i,s)};function Is(i,s,c){i.a=!0,i.c=c,i.f=!s,fm(i)}function Ea(i){if(i.a){if(!i.v)throw new Ia;i.v=!1}}function RN(i,s){Ll(i,null,s,void 0)}function Ll(i,s,c,f){i.g.push([s,c,f]),i.a&&fm(i)}Zr.prototype.then=function(i,s,c){var f,d,y=new ot(function(_,E){f=_,d=E});return Ll(this,f,function(_){_ instanceof Ts?y.cancel():d(_)}),y.then(i,s,c)},Zr.prototype.$goog_Thenable=!0;function lm(i){return QT(i.g,function(s){return I(s[1])})}function fm(i){if(i.h&&i.a&&lm(i)){var s=i.h,c=Ta[s];c&&(l.clearTimeout(c.a),delete Ta[s]),i.h=0}i.b&&(i.b.l--,delete i.b),s=i.c;for(var f=c=!1;i.g.length&&!i.i;){var d=i.g.shift(),y=d[0],_=d[1];if(d=d[2],y=i.f?_:y)try{var E=y.call(d||i.s,s);E!==void 0&&(i.f=i.f&&(E==s||E instanceof Error),i.c=s=E),(ny(s)||typeof l.Promise=="function"&&s instanceof l.Promise)&&(f=!0,i.i=!0)}catch(A){s=A,i.f=!0,lm(i)||(c=!0)}}i.c=s,f&&(E=P(i.m,i,!0),f=P(i.m,i,!1),s instanceof Zr?(Ll(s,E,f),s.C=!0):s.then(E,f)),c&&(s=new pm(s),Ta[s.a]=s,i.h=s.a)}function Ia(){Fe.call(this)}X(Ia,Fe),Ia.prototype.message="Deferred has already fired",Ia.prototype.name="AlreadyCalledError";function Ts(){Fe.call(this)}X(Ts,Fe),Ts.prototype.message="Deferred was canceled",Ts.prototype.name="CanceledError";function pm(i){this.a=l.setTimeout(P(this.c,this),0),this.b=i}pm.prototype.c=function(){throw delete Ta[this.a],this.b};var Ta={};function Ml(i){var s={},c=s.document||document,f=vy(i).toString(),d=Yu(document,"SCRIPT"),y={Wb:d,Ma:void 0},_=new Zr(y),E=null,A=s.timeout!=null?s.timeout:5e3;return 0<A&&(E=window.setTimeout(function(){Sa(d,!0);var O=new Fl(PN,"Timeout reached for loading script "+f);Ea(_),Is(_,!1,O)},A),y.Ma=E),d.onload=d.onreadystatechange=function(){d.readyState&&d.readyState!="loaded"&&d.readyState!="complete"||(Sa(d,s.xd||!1,E),Ea(_),Is(_,!0,null))},d.onerror=function(){Sa(d,!0,E);var O=new Fl(DN,"Error while loading script "+f);Ea(_),Is(_,!1,O)},y=s.attributes||{},Se(y,{type:"text/javascript",charset:"UTF-8"}),Ry(d,y),aS(d,i),ON(c).appendChild(d),_}function ON(i){var s;return(s=(i||document).getElementsByTagName("HEAD"))&&s.length!=0?s[0]:i.documentElement}function kN(){if(this&&this.Wb){var i=this.Wb;i&&i.tagName=="SCRIPT"&&Sa(i,!0,this.Ma)}}function Sa(i,s,c){c!=null&&l.clearTimeout(c),i.onload=m,i.onerror=m,i.onreadystatechange=m,s&&window.setTimeout(function(){i&&i.parentNode&&i.parentNode.removeChild(i)},0)}var DN=0,PN=1;function Fl(i,s){var c="Jsloader error (code #"+i+")";s&&(c+=": "+s),Fe.call(this,c),this.code=i}X(Fl,Fe);function Na(i){this.f=i}X(Na,gs),Na.prototype.a=function(){return new this.f},Na.prototype.b=function(){return{}};function hn(i,s,c){if(this.c=i,i=s||{},this.l=i.secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.m=i.secureTokenTimeout||xN,this.g=tr(i.secureTokenHeaders||LN),this.h=i.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.i=i.identityPlatformEndpoint||"https://identitytoolkit.googleapis.com/v2/",this.v=i.firebaseTimeout||MN,this.a=tr(i.firebaseHeaders||FN),c&&(this.a["X-Client-Version"]=c,this.g["X-Client-Version"]=c),c=En()=="Node",c=l.XMLHttpRequest||c&&Q.INTERNAL.node&&Q.INTERNAL.node.XMLHttpRequest,!c&&!an())throw new S("internal-error","The XMLHttpRequest compatibility library was not found.");this.f=void 0,an()?this.f=new ma(self):dg()?this.f=new Na(c):this.f=new ya,this.b=null}var Vl,ln="idToken",xN=new ir(3e4,6e4),LN={"Content-Type":"application/x-www-form-urlencoded"},MN=new ir(3e4,6e4),FN={"Content-Type":"application/json"};function dm(i,s){s?i.a["X-Firebase-Locale"]=s:delete i.a["X-Firebase-Locale"]}function Yi(i,s){s&&(i.l=Ul("https://securetoken.googleapis.com/v1/token",s),i.h=Ul("https://www.googleapis.com/identitytoolkit/v3/relyingparty/",s),i.i=Ul("https://identitytoolkit.googleapis.com/v2/",s))}function Ul(i,s){return i=Ce(i),s=Ce(s.url),i.f=i.a+i.f,rs(i,s.c),i.a=s.a,is(i,s.g),i.toString()}function vm(i,s){s?(i.a["X-Client-Version"]=s,i.g["X-Client-Version"]=s):(delete i.a["X-Client-Version"],delete i.g["X-Client-Version"])}hn.prototype.T=function(){return this.b};function ym(i,s,c,f,d,y,_){BS()||an()?i=P(i.u,i):(Vl||(Vl=new ot(function(E,A){UN(E,A)})),i=P(i.s,i)),i(s,c,f,d,y,_)}hn.prototype.u=function(i,s,c,f,d,y){if(an()&&(typeof l.fetch>"u"||typeof l.Headers>"u"||typeof l.Request>"u"))throw new S("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var _=new bs(this.f);if(y){_.g=Math.max(0,y);var E=setTimeout(function(){_.dispatchEvent("timeout")},y)}Zy(_,"complete",function(){E&&clearTimeout(E);var A=null;try{A=JSON.parse(CN(this))||null}catch{A=null}s&&s(A)}),zh(_,"ready",function(){E&&clearTimeout(E),zy(this)}),zh(_,"timeout",function(){E&&clearTimeout(E),zy(this),s&&s(null)}),SN(_,i,c,f,d)};var VN=new wn(Hu,"https://apis.google.com/js/client.js?onload=%{onload}"),gm="__fcb"+Math.floor(1e6*Math.random()).toString();function UN(i,s){if(((window.gapi||{}).client||{}).request)i();else{l[gm]=function(){((window.gapi||{}).client||{}).request?i():s(Error("CORS_UNSUPPORTED"))};var c=Ch(VN,{onload:gm});RN(Ml(c),function(){s(Error("CORS_UNSUPPORTED"))})}}hn.prototype.s=function(i,s,c,f,d){var y=this;Vl.then(function(){window.gapi.client.setApiKey(y.c);var _=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:i,method:c,body:f,headers:d,authType:"none",callback:function(E){window.gapi.auth.setToken(_),s&&s(E)}})}).o(function(_){s&&s({error:{message:_&&_.message||"CORS_UNSUPPORTED"}})})};function jN(i,s){return new ot(function(c,f){s.grant_type=="refresh_token"&&s.refresh_token||s.grant_type=="authorization_code"&&s.code?ym(i,i.l+"?key="+encodeURIComponent(i.c),function(d){d?d.error?f(Ql(d)):d.access_token&&d.refresh_token?c(d):f(new S("internal-error")):f(new S("network-request-failed"))},"POST",ig(s).toString(),i.g,i.m.get()):f(new S("internal-error"))})}function mm(i,s,c,f,d,y,_){var E=Ce(s+c);Ft(E,"key",i.c),_&&Ft(E,"cb",Fr().toString());var A=f=="GET";if(A)for(var O in d)d.hasOwnProperty(O)&&Ft(E,O,d[O]);return new ot(function(J,mt){ym(i,E.toString(),function(pt){pt?pt.error?mt(Ql(pt,y||{})):J(pt):mt(new S("network-request-failed"))},f,A?void 0:ug(gg(d)),i.a,i.v.get())})}function ti(i){if(i=i.email,typeof i!="string"||!GS.test(i))throw new S("invalid-email")}function _m(i){"email"in i&&ti(i)}function BN(i,s){return ut(i,XN,{identifier:s,continueUri:oa()?us():"http://localhost"}).then(function(c){return c.signinMethods||[]})}function qN(i){return ut(i,c1,{}).then(function(s){return s.authorizedDomains||[]})}function Re(i){if(!i[ln])throw i.mfaPendingCredential?new S("multi-factor-auth-required",null,tr(i)):new S("internal-error")}function jl(i){if(i.phoneNumber||i.temporaryProof){if(!i.phoneNumber||!i.temporaryProof)throw new S("internal-error")}else{if(!i.sessionInfo)throw new S("missing-verification-id");if(!i.code)throw new S("missing-verification-code")}}hn.prototype.zb=function(){return ut(this,p1,{})},hn.prototype.Bb=function(i,s){return ut(this,Em,{idToken:i,email:s})},hn.prototype.Cb=function(i,s){return ut(this,Im,{idToken:i,password:s})};var WN={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};e=hn.prototype,e.Db=function(i,s){var c={idToken:i},f=[];return hy(WN,function(d,y){var _=s[y];_===null?f.push(d):y in s&&(c[y]=_)}),f.length&&(c.deleteAttribute=f),ut(this,Em,c)},e.vb=function(i,s){return i={requestType:"PASSWORD_RESET",email:i},Se(i,s),ut(this,a1,i)},e.wb=function(i,s){return i={requestType:"EMAIL_SIGNIN",email:i},Se(i,s),ut(this,o1,i)},e.ub=function(i,s){return i={requestType:"VERIFY_EMAIL",idToken:i},Se(i,s),ut(this,s1,i)},e.Eb=function(i,s,c){return i={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:i,newEmail:s},Se(i,c),ut(this,u1,i)};function GN(i,s){return ut(i,f1,s)}e.fb=function(i){return ut(this,w1,i)};function HN(i,s){return ut(i,d1,s).then(function(c){return c.phoneSessionInfo.sessionInfo})}function wm(i){if(!i.phoneVerificationInfo)throw new S("internal-error");if(!i.phoneVerificationInfo.sessionInfo)throw new S("missing-verification-id");if(!i.phoneVerificationInfo.code)throw new S("missing-verification-code")}function zN(i,s){return ut(i,v1,s).then(function(c){return c.phoneResponseInfo.sessionInfo})}function QN(i,s,c){return ut(i,ZN,{idToken:s,deleteProvider:c})}function Bl(i){if(!i.requestUri||!i.sessionId&&!i.postBody&&!i.pendingToken)throw new S("internal-error")}function ql(i,s){return s.oauthIdToken&&s.providerId&&s.providerId.indexOf("oidc.")==0&&!s.pendingToken&&(i.sessionId?s.nonce=i.sessionId:i.postBody&&(i=new Gr(i.postBody),$h(i,"nonce")&&(s.nonce=i.get("nonce")))),s}function bm(i){var s=null;if(i.needConfirmation?(i.code="account-exists-with-different-credential",s=da(i)):i.errorMessage=="FEDERATED_USER_ID_ALREADY_LINKED"?(i.code="credential-already-in-use",s=da(i)):i.errorMessage=="EMAIL_EXISTS"?(i.code="email-already-in-use",s=da(i)):i.errorMessage&&(s=Sm(i.errorMessage)),s)throw s;Re(i)}function Wl(i,s){return s.returnIdpCredential=!0,ut(i,y1,s)}function Gl(i,s){return s.returnIdpCredential=!0,ut(i,m1,s)}function Hl(i,s){return s.returnIdpCredential=!0,s.autoCreate=!1,ut(i,g1,s)}function zl(i){if(!i.oobCode)throw new S("invalid-action-code")}e.nb=function(i,s){return ut(this,l1,{oobCode:i,newPassword:s})},e.Ra=function(i){return ut(this,YN,{oobCode:i})},e.jb=function(i){return ut(this,KN,{oobCode:i})};var KN={endpoint:"setAccountInfo",A:zl,Z:"email",B:!0},YN={endpoint:"resetPassword",A:zl,G:function(i){var s=i.requestType;if(!s||!i.email&&s!="EMAIL_SIGNIN"&&s!="VERIFY_AND_CHANGE_EMAIL")throw new S("internal-error")},B:!0},$N={endpoint:"signupNewUser",A:function(i){if(ti(i),!i.password)throw new S("weak-password")},G:Re,V:!0,B:!0},XN={endpoint:"createAuthUri",B:!0},JN={endpoint:"deleteAccount",N:["idToken"]},ZN={endpoint:"setAccountInfo",N:["idToken","deleteProvider"],A:function(i){if(!Array.isArray(i.deleteProvider))throw new S("internal-error")}},t1={endpoint:"emailLinkSignin",N:["email","oobCode"],A:ti,G:Re,V:!0,B:!0},e1={endpoint:"emailLinkSignin",N:["idToken","email","oobCode"],A:ti,G:Re,V:!0},n1={endpoint:"accounts/mfaEnrollment:finalize",N:["idToken","phoneVerificationInfo"],A:wm,G:Re,B:!0,Na:!0},r1={endpoint:"accounts/mfaSignIn:finalize",N:["mfaPendingCredential","phoneVerificationInfo"],A:wm,G:Re,B:!0,Na:!0},i1={endpoint:"getAccountInfo"},o1={endpoint:"getOobConfirmationCode",N:["requestType"],A:function(i){if(i.requestType!="EMAIL_SIGNIN")throw new S("internal-error");ti(i)},Z:"email",B:!0},s1={endpoint:"getOobConfirmationCode",N:["idToken","requestType"],A:function(i){if(i.requestType!="VERIFY_EMAIL")throw new S("internal-error")},Z:"email",B:!0},u1={endpoint:"getOobConfirmationCode",N:["idToken","newEmail","requestType"],A:function(i){if(i.requestType!="VERIFY_AND_CHANGE_EMAIL")throw new S("internal-error")},Z:"email",B:!0},a1={endpoint:"getOobConfirmationCode",N:["requestType"],A:function(i){if(i.requestType!="PASSWORD_RESET")throw new S("internal-error");ti(i)},Z:"email",B:!0},c1={lb:!0,endpoint:"getProjectConfig",Ub:"GET"},h1={lb:!0,endpoint:"getRecaptchaParam",Ub:"GET",G:function(i){if(!i.recaptchaSiteKey)throw new S("internal-error")}},l1={endpoint:"resetPassword",A:zl,Z:"email",B:!0},f1={endpoint:"sendVerificationCode",N:["phoneNumber","recaptchaToken"],Z:"sessionInfo",B:!0},Em={endpoint:"setAccountInfo",N:["idToken"],A:_m,V:!0},Im={endpoint:"setAccountInfo",N:["idToken"],A:function(i){if(_m(i),!i.password)throw new S("weak-password")},G:Re,V:!0},p1={endpoint:"signupNewUser",G:Re,V:!0,B:!0},d1={endpoint:"accounts/mfaEnrollment:start",N:["idToken","phoneEnrollmentInfo"],A:function(i){if(!i.phoneEnrollmentInfo)throw new S("internal-error");if(!i.phoneEnrollmentInfo.phoneNumber)throw new S("missing-phone-number");if(!i.phoneEnrollmentInfo.recaptchaToken)throw new S("missing-app-credential")},G:function(i){if(!i.phoneSessionInfo||!i.phoneSessionInfo.sessionInfo)throw new S("internal-error")},B:!0,Na:!0},v1={endpoint:"accounts/mfaSignIn:start",N:["mfaPendingCredential","mfaEnrollmentId","phoneSignInInfo"],A:function(i){if(!i.phoneSignInInfo||!i.phoneSignInInfo.recaptchaToken)throw new S("missing-app-credential")},G:function(i){if(!i.phoneResponseInfo||!i.phoneResponseInfo.sessionInfo)throw new S("internal-error")},B:!0,Na:!0},y1={endpoint:"verifyAssertion",A:Bl,Ya:ql,G:bm,V:!0,B:!0},g1={endpoint:"verifyAssertion",A:Bl,Ya:ql,G:function(i){if(i.errorMessage&&i.errorMessage=="USER_NOT_FOUND")throw new S("user-not-found");if(i.errorMessage)throw Sm(i.errorMessage);Re(i)},V:!0,B:!0},m1={endpoint:"verifyAssertion",A:function(i){if(Bl(i),!i.idToken)throw new S("internal-error")},Ya:ql,G:bm,V:!0},_1={endpoint:"verifyCustomToken",A:function(i){if(!i.token)throw new S("invalid-custom-token")},G:Re,V:!0,B:!0},Tm={endpoint:"verifyPassword",A:function(i){if(ti(i),!i.password)throw new S("wrong-password")},G:Re,V:!0,B:!0},w1={endpoint:"verifyPhoneNumber",A:jl,G:Re,B:!0},b1={endpoint:"verifyPhoneNumber",A:function(i){if(!i.idToken)throw new S("internal-error");jl(i)},G:function(i){if(i.temporaryProof)throw i.code="credential-already-in-use",da(i);Re(i)}},E1={Hb:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",A:jl,G:Re,B:!0},I1={endpoint:"accounts/mfaEnrollment:withdraw",N:["idToken","mfaEnrollmentId"],G:function(i){if(!!i[ln]^!!i.refreshToken)throw new S("internal-error")},B:!0,Na:!0};function ut(i,s,c){if(!XS(c,s.N))return At(new S("internal-error"));var f=!!s.Na,d=s.Ub||"POST",y;return z(c).then(s.A).then(function(){return s.V&&(c.returnSecureToken=!0),s.B&&i.b&&typeof c.tenantId>"u"&&(c.tenantId=i.b),f?mm(i,i.i,s.endpoint,d,c,s.Hb,s.lb||!1):mm(i,i.h,s.endpoint,d,c,s.Hb,s.lb||!1)}).then(function(_){return y=_,s.Ya?s.Ya(c,y):y}).then(s.G).then(function(){if(!s.Z)return y;if(!(s.Z in y))throw new S("internal-error");return y[s.Z]})}function Sm(i){return Ql({error:{errors:[{message:i}],code:400,message:i}})}function Ql(i,s){var c=(i.error&&i.error.errors&&i.error.errors[0]||{}).reason||"",f={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(c=f[c]?new S(f[c]):null)return c;c=i.error&&i.error.message||"",f={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash",UNSUPPORTED_TENANT_OPERATION:"unsupported-tenant-operation",INVALID_TENANT_ID:"invalid-tenant-id",TENANT_ID_MISMATCH:"tenant-id-mismatch",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",EMAIL_CHANGE_NEEDS_VERIFICATION:"email-change-needs-verification",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",UNSUPPORTED_FIRST_FACTOR:"unsupported-first-factor",UNVERIFIED_EMAIL:"unverified-email"},Se(f,s||{}),s=(s=c.match(/^[^\s]+\s*:\s*([\s\S]*)$/))&&1<s.length?s[1]:void 0;for(var d in f)if(c.indexOf(d)===0)return new S(f[d],s);return!s&&i&&(s=cs(i)),new S("internal-error",s)}function T1(i){this.b=i,this.a=null,this.rb=S1(this)}function S1(i){return k1().then(function(){return new ot(function(s,c){Ct("gapi.iframes.getContext")().open({where:document.body,url:i.b,messageHandlersFilter:Ct("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},function(f){function d(){clearTimeout(y),s()}i.a=f,i.a.restyle({setHideOnLeave:!1});var y=setTimeout(function(){c(Error("Network Error"))},O1.get());f.ping(d).then(d,function(){c(Error("Network Error"))})})})})}function N1(i,s){return i.rb.then(function(){return new ot(function(c){i.a.send(s.type,s,c,Ct("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})})}function A1(i,s){i.rb.then(function(){i.a.register("authEvent",s,Ct("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})}var C1=new wn(Hu,"https://apis.google.com/js/api.js?onload=%{onload}"),R1=new ir(3e4,6e4),O1=new ir(5e3,15e3),Aa=null;function k1(){return Aa||(Aa=new ot(function(i,s){function c(){_g(),Ct("gapi.load")("gapi.iframes",{callback:i,ontimeout:function(){_g(),s(Error("Network Error"))},timeout:R1.get()})}if(Ct("gapi.iframes.Iframe"))i();else if(Ct("gapi.load"))c();else{var f="__iframefcb"+Math.floor(1e6*Math.random()).toString();l[f]=function(){Ct("gapi.load")?c():s(Error("Network Error"))},f=Ch(C1,{onload:f}),z(Ml(f)).o(function(){s(Error("Network Error"))})}}).o(function(i){throw Aa=null,i}))}function Nm(i,s,c,f){this.l=i,this.h=s,this.i=c,this.g=f,this.f=null,this.g?(i=Ce(this.g.url),i=ra(i.c,i.a,i.g,"/emulator/auth/iframe")):i=ra("https",this.l,null,"/__/auth/iframe"),this.a=i,Ft(this.a,"apiKey",this.h),Ft(this.a,"appName",this.i),this.b=null,this.c=[]}Nm.prototype.toString=function(){return this.f?Ft(this.a,"v",this.f):bn(this.a.b,"v"),this.b?Ft(this.a,"eid",this.b):bn(this.a.b,"eid"),this.c.length?Ft(this.a,"fw",this.c.join(",")):bn(this.a.b,"fw"),this.a.toString()};function Kl(i,s,c,f,d,y){this.u=i,this.s=s,this.c=c,this.m=f,this.v=y,this.i=this.g=this.l=null,this.a=d,this.h=this.f=null}Kl.prototype.yb=function(i){return this.h=i,this},Kl.prototype.toString=function(){if(this.v){var i=Ce(this.v.url);i=ra(i.c,i.a,i.g,"/emulator/auth/handler")}else i=ra("https",this.u,null,"/__/auth/handler");if(Ft(i,"apiKey",this.s),Ft(i,"appName",this.c),Ft(i,"authType",this.m),this.a.isOAuthProvider){var s=this.a;try{var c=Q.app(this.c).auth().la()}catch{c=null}s.ob=c,Ft(i,"providerId",this.a.providerId),c=this.a,s=gg(c.Ib);for(var f in s)s[f]=s[f].toString();f=c.Qc,s=tr(s);for(var d=0;d<f.length;d++){var y=f[d];y in s&&delete s[y]}c.pb&&c.ob&&!s[c.pb]&&(s[c.pb]=c.ob),Ur(s)||Ft(i,"customParameters",cs(s))}if(typeof this.a.Qb=="function"&&(c=this.a.Qb(),c.length&&Ft(i,"scopes",c.join(","))),this.l?Ft(i,"redirectUrl",this.l):bn(i.b,"redirectUrl"),this.g?Ft(i,"eventId",this.g):bn(i.b,"eventId"),this.i?Ft(i,"v",this.i):bn(i.b,"v"),this.b)for(var _ in this.b)this.b.hasOwnProperty(_)&&!Je(i,_)&&Ft(i,_,this.b[_]);return this.h?Ft(i,"tid",this.h):bn(i.b,"tid"),this.f?Ft(i,"eid",this.f):bn(i.b,"eid"),_=Yl(this.c),_.length&&Ft(i,"fw",_.join(",")),i.toString()};function Yl(i){try{return Q.app(i).auth().Ga()}catch{return[]}}function Am(i,s,c,f,d,y){this.s=i,this.g=s,this.b=c,this.f=y,this.c=f||null,this.i=d||null,this.l=this.u=this.C=null,this.h=[],this.m=this.a=null}function Cm(i){var s=us();return qN(i).then(function(c){t:{var f=Ce(s),d=f.c;f=f.a;for(var y=0;y<c.length;y++){var _=c[y],E=f,A=d;if(_.indexOf("chrome-extension://")==0?E=Ce(_).a==E&&A=="chrome-extension":A!="http"&&A!="https"?E=!1:WS.test(_)?E=E==_:(_=_.split(".").join("\\."),E=new RegExp("^(.+\\."+_+"|"+_+")$","i").test(E)),E){c=!0;break t}}c=!1}if(!c)throw new Nl(us())})}function Rm(i){return i.m||(i.m=ia().then(function(){if(!i.u){var s=i.c,c=i.i,f=Yl(i.b),d=new Nm(i.s,i.g,i.b,i.f);d.f=s,d.b=c,d.c=Vr(f||[]),i.u=d.toString()}i.v=new T1(i.u),D1(i)})),i.m}e=Am.prototype,e.Ob=function(i,s,c){var f=new S("popup-closed-by-user"),d=new S("web-storage-unsupported"),y=this,_=!1;return this.ma().then(function(){P1(y).then(function(E){E||(i&&Hr(i),s(d),_=!0)})}).o(function(){}).then(function(){if(!_)return qS(i)}).then(function(){if(!_)return Ui(c).then(function(){s(f)})})},e.Xb=function(){var i=ne();return!as(i)&&!mg(i)},e.Tb=function(){return!1},e.Mb=function(i,s,c,f,d,y,_,E){if(!i)return At(new S("popup-blocked"));if(_&&!as())return this.ma().o(function(O){Hr(i),d(O)}),f(),z();this.a||(this.a=Cm(Om(this)));var A=this;return this.a.then(function(){var O=A.ma().o(function(J){throw Hr(i),d(J),J});return f(),O}).then(function(){if(Tl(c),!_){var O=Ss(A.s,A.g,A.b,s,c,null,y,A.c,void 0,A.i,E,A.f);hg(O,i)}}).o(function(O){throw O.code=="auth/network-request-failed"&&(A.a=null),O})};function Om(i){return i.l||(i.C=i.c?Wi(i.c,Yl(i.b)):null,i.l=new hn(i.g,Xo(i.i),i.C),i.f&&Yi(i.l,i.f)),i.l}e.Nb=function(i,s,c,f){this.a||(this.a=Cm(Om(this)));var d=this;return this.a.then(function(){Tl(s);var y=Ss(d.s,d.g,d.b,i,s,us(),c,d.c,void 0,d.i,f,d.f);hg(y)}).o(function(y){throw y.code=="auth/network-request-failed"&&(d.a=null),y})},e.ma=function(){var i=this;return Rm(this).then(function(){return i.v.rb}).o(function(){throw i.a=null,new S("network-request-failed")})},e.$b=function(){return!0};function Ss(i,s,c,f,d,y,_,E,A,O,J,mt){return i=new Kl(i,s,c,f,d,mt),i.l=y,i.g=_,i.i=E,i.b=tr(A||null),i.f=O,i.yb(J).toString()}function D1(i){if(!i.v)throw Error("IfcHandler must be initialized!");A1(i.v,function(s){var c={};if(s&&s.authEvent){var f=!1;for(s=Zg(s.authEvent),c=0;c<i.h.length;c++)f=i.h[c](s)||f;return c={},c.status=f?"ACK":"ERROR",z(c)}return c.status="ERROR",z(c)})}function P1(i){var s={type:"webStorageSupport"};return Rm(i).then(function(){return N1(i.v,s)}).then(function(c){if(c&&c.length&&typeof c[0].webStorageSupport<"u")return c[0].webStorageSupport;throw Error()})}e.Ea=function(i){this.h.push(i)},e.Sa=function(i){sn(this.h,function(s){return s==i})};function km(i){if(this.a=i||Q.INTERNAL.reactNative&&Q.INTERNAL.reactNative.AsyncStorage,!this.a)throw new S("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}e=km.prototype,e.get=function(i){return z(this.a.getItem(i)).then(function(s){return s&&Hi(s)})},e.set=function(i,s){return z(this.a.setItem(i,cs(s)))},e.U=function(i){return z(this.a.removeItem(i))},e.ca=function(){},e.ia=function(){};function Dm(i){this.b=i,this.a={},this.f=P(this.c,this)}var Pm=[];function x1(){var i=an()?self:null;if(kt(Pm,function(c){c.b==i&&(s=c)}),!s){var s=new Dm(i);Pm.push(s)}return s}Dm.prototype.c=function(i){var s=i.data.eventType,c=i.data.eventId,f=this.a[s];if(f&&0<f.length){i.ports[0].postMessage({status:"ack",eventId:c,eventType:s,response:null});var d=[];kt(f,function(y){d.push(z().then(function(){return y(i.origin,i.data.data)}))}),Fy(d).then(function(y){var _=[];kt(y,function(E){_.push({fulfilled:E.Pb,value:E.value,reason:E.reason?E.reason.message:void 0})}),kt(_,function(E){for(var A in E)typeof E[A]>"u"&&delete E[A]}),i.ports[0].postMessage({status:"done",eventId:c,eventType:s,response:_})})}};function xm(i,s,c){Ur(i.a)&&i.b.addEventListener("message",i.f),typeof i.a[s]>"u"&&(i.a[s]=[]),i.a[s].push(c)}function Lm(i){this.a=i}Lm.prototype.postMessage=function(i,s){this.a.postMessage(i,s)};function Mm(i){this.c=i,this.b=!1,this.a=[]}function Fm(i,s,c,f){var d,y=c||{},_,E,A,O=null;if(i.b)return At(Error("connection_unavailable"));var J=f?800:50,mt=typeof MessageChannel<"u"?new MessageChannel:null;return new ot(function(pt,Jt){mt?(d=Math.floor(Math.random()*Math.pow(10,20)).toString(),mt.port1.start(),E=setTimeout(function(){Jt(Error("unsupported_event"))},J),_=function(qn){qn.data.eventId===d&&(qn.data.status==="ack"?(clearTimeout(E),A=setTimeout(function(){Jt(Error("timeout"))},3e3)):qn.data.status==="done"?(clearTimeout(A),typeof qn.data.response<"u"?pt(qn.data.response):Jt(Error("unknown_error"))):(clearTimeout(E),clearTimeout(A),Jt(Error("invalid_response"))))},O={messageChannel:mt,onMessage:_},i.a.push(O),mt.port1.addEventListener("message",_),i.c.postMessage({eventType:s,eventId:d,data:y},[mt.port2])):Jt(Error("connection_unavailable"))}).then(function(pt){return $l(i,O),pt}).o(function(pt){throw $l(i,O),pt})}function $l(i,s){if(s){var c=s.messageChannel,f=s.onMessage;c&&(c.port1.removeEventListener("message",f),c.port1.close()),sn(i.a,function(d){return d==s})}}Mm.prototype.close=function(){for(;0<this.a.length;)$l(this,this.a[0]);this.b=!0};function Vm(){if(!Zl())throw new S("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.m=l.indexedDB,this.type="indexedDB",this.g=this.v=this.f=this.l=null,this.s=!1,this.h=null;var i=this;an()&&self?(this.v=x1(),xm(this.v,"keyChanged",function(s,c){return Bm(i).then(function(f){return 0<f.length&&kt(i.a,function(d){d(f)}),{keyProcessed:Fn(f,c.key)}})}),xm(this.v,"ping",function(){return z(["keyChanged"])})):YS().then(function(s){(i.h=s)&&(i.g=new Mm(new Lm(s)),Fm(i.g,"ping",null,!0).then(function(c){c[0].fulfilled&&Fn(c[0].value,"keyChanged")&&(i.s=!0)}).o(function(){}))})}var Xl;function L1(i){return new ot(function(s,c){var f=i.m.deleteDatabase("firebaseLocalStorageDb");f.onsuccess=function(){s()},f.onerror=function(d){c(Error(d.target.error))}})}function Um(i){return new ot(function(s,c){var f=i.m.open("firebaseLocalStorageDb",1);f.onerror=function(d){try{d.preventDefault()}catch{}c(Error(d.target.error))},f.onupgradeneeded=function(d){d=d.target.result;try{d.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(y){c(y)}},f.onsuccess=function(d){d=d.target.result,d.objectStoreNames.contains("firebaseLocalStorage")?s(d):L1(i).then(function(){return Um(i)}).then(function(y){s(y)}).o(function(y){c(y)})}})}function Jl(i){return i.i||(i.i=Um(i)),i.i}function Ca(i,s){function c(d,y){Jl(i).then(s).then(d).o(function(_){if(3<++f)y(_);else return Jl(i).then(function(E){return E.close(),i.i=void 0,c(d,y)}).o(function(E){y(E)})})}var f=0;return new ot(c)}function Zl(){try{return!!l.indexedDB}catch{return!1}}function Ns(i){return i.objectStore("firebaseLocalStorage")}function As(i,s){return i.transaction(["firebaseLocalStorage"],s?"readwrite":"readonly")}function $i(i){return new ot(function(s,c){i.onsuccess=function(f){f&&f.target?s(f.target.result):s()},i.onerror=function(f){c(f.target.error)}})}e=Vm.prototype,e.set=function(i,s){var c=this,f=!1;return Ca(this,function(d){return d=Ns(As(d,!0)),$i(d.get(i))}).then(function(d){return Ca(c,function(y){if(y=Ns(As(y,!0)),d)return d.value=s,$i(y.put(d));c.b++,f=!0;var _={};return _.fbase_key=i,_.value=s,$i(y.add(_))})}).then(function(){return c.c[i]=s,jm(c,i)}).oa(function(){f&&c.b--})};function jm(i,s){return i.g&&i.h&&KS()===i.h?Fm(i.g,"keyChanged",{key:s},i.s).then(function(){}).o(function(){}):z()}e.get=function(i){return Ca(this,function(s){return $i(Ns(As(s,!1)).get(i))}).then(function(s){return s&&s.value})},e.U=function(i){var s=this,c=!1;return Ca(this,function(f){return c=!0,s.b++,$i(Ns(As(f,!0)).delete(i))}).then(function(){return delete s.c[i],jm(s,i)}).oa(function(){c&&s.b--})};function Bm(i){return Jl(i).then(function(s){var c=Ns(As(s,!1));return c.getAll?$i(c.getAll()):new ot(function(f,d){var y=[],_=c.openCursor();_.onsuccess=function(E){(E=E.target.result)?(y.push(E.value),E.continue()):f(y)},_.onerror=function(E){d(E.target.error)}})}).then(function(s){var c={},f=[];if(i.b==0){for(f=0;f<s.length;f++)c[s[f].fbase_key]=s[f].value;f=lg(i.c,c),i.c=c}return f})}e.ca=function(i){this.a.length==0&&M1(this),this.a.push(i)},e.ia=function(i){sn(this.a,function(s){return s==i}),this.a.length==0&&qm(this)};function M1(i){function s(){i.f=setTimeout(function(){i.l=Bm(i).then(function(c){0<c.length&&kt(i.a,function(f){f(c)})}).then(function(){s()}).o(function(c){c.message!="STOP_EVENT"&&s()})},800)}qm(i),s()}function qm(i){i.l&&i.l.cancel("STOP_EVENT"),i.f&&(clearTimeout(i.f),i.f=null)}function Wm(i){var s=this,c=null;this.a=[],this.type="indexedDB",this.c=i,this.b=z().then(function(){if(Zl()){var f=Qr(),d="__sak"+f;return Xl||(Xl=new Vm),c=Xl,c.set(d,f).then(function(){return c.get(d)}).then(function(y){if(y!==f)throw Error("indexedDB not supported!");return c.U(d)}).then(function(){return c}).o(function(){return s.c})}return s.c}).then(function(f){return s.type=f.type,f.ca(function(d){kt(s.a,function(y){y(d)})}),f})}e=Wm.prototype,e.get=function(i){return this.b.then(function(s){return s.get(i)})},e.set=function(i,s){return this.b.then(function(c){return c.set(i,s)})},e.U=function(i){return this.b.then(function(s){return s.U(i)})},e.ca=function(i){this.a.push(i)},e.ia=function(i){sn(this.a,function(s){return s==i})};function Cs(){this.a={},this.type="inMemory"}e=Cs.prototype,e.get=function(i){return z(this.a[i])},e.set=function(i,s){return this.a[i]=s,z()},e.U=function(i){return delete this.a[i],z()},e.ca=function(){},e.ia=function(){};function Ra(){if(!F1())throw En()=="Node"?new S("internal-error","The LocalStorage compatibility library was not found."):new S("web-storage-unsupported");this.a=Gm()||Q.INTERNAL.node.localStorage,this.type="localStorage"}function Gm(){try{var i=l.localStorage,s=Qr();return i&&(i.setItem(s,"1"),i.removeItem(s)),i}catch{return null}}function F1(){var i=En()=="Node";if(i=Gm()||i&&Q.INTERNAL.node&&Q.INTERNAL.node.localStorage,!i)return!1;try{return i.setItem("__sak","1"),i.removeItem("__sak"),!0}catch{return!1}}e=Ra.prototype,e.get=function(i){var s=this;return z().then(function(){var c=s.a.getItem(i);return Hi(c)})},e.set=function(i,s){var c=this;return z().then(function(){var f=cs(s);f===null?c.U(i):c.a.setItem(i,f)})},e.U=function(i){var s=this;return z().then(function(){s.a.removeItem(i)})},e.ca=function(i){l.window&&Xe(l.window,"storage",i)},e.ia=function(i){l.window&&Ve(l.window,"storage",i)};function tf(){this.type="nullStorage"}e=tf.prototype,e.get=function(){return z(null)},e.set=function(){return z()},e.U=function(){return z()},e.ca=function(){},e.ia=function(){};function ef(){if(!V1())throw En()=="Node"?new S("internal-error","The SessionStorage compatibility library was not found."):new S("web-storage-unsupported");this.a=Hm()||Q.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function Hm(){try{var i=l.sessionStorage,s=Qr();return i&&(i.setItem(s,"1"),i.removeItem(s)),i}catch{return null}}function V1(){var i=En()=="Node";if(i=Hm()||i&&Q.INTERNAL.node&&Q.INTERNAL.node.sessionStorage,!i)return!1;try{return i.setItem("__sak","1"),i.removeItem("__sak"),!0}catch{return!1}}e=ef.prototype,e.get=function(i){var s=this;return z().then(function(){var c=s.a.getItem(i);return Hi(c)})},e.set=function(i,s){var c=this;return z().then(function(){var f=cs(s);f===null?c.U(i):c.a.setItem(i,f)})},e.U=function(i){var s=this;return z().then(function(){s.a.removeItem(i)})},e.ca=function(){},e.ia=function(){};function U1(){var i={};i.Browser=j1,i.Node=B1,i.ReactNative=q1,i.Worker=W1,this.a=i[En()]}var nf,j1={F:Ra,bb:ef},B1={F:Ra,bb:ef},q1={F:km,bb:tf},W1={F:Ra,bb:tf},Xi={rd:"local",NONE:"none",td:"session"};function G1(i){var s=new S("invalid-persistence-type"),c=new S("unsupported-persistence-type");t:{for(f in Xi)if(Xi[f]==i){var f=!0;break t}f=!1}if(!f||typeof i!="string")throw s;switch(En()){case"ReactNative":if(i==="session")throw c;break;case"Node":if(i!=="none")throw c;break;case"Worker":if(i==="session"||!Zl()&&i!=="none")throw c;break;default:if(!nl()&&i!=="none")throw c}}function zm(){var i=!!(!mg(ne())&&tl()),s=as(),c=nl();this.m=i,this.h=s,this.l=c,this.a={},nf||(nf=new U1),i=nf;try{this.g=!Jh()&&wg()||!l.indexedDB?new i.a.F:new Wm(an()?new Cs:new i.a.F)}catch{this.g=new Cs,this.h=!0}try{this.i=new i.a.bb}catch{this.i=new Cs}this.v=new Cs,this.f=P(this.Yb,this),this.b={}}var rf;function Rs(){return rf||(rf=new zm),rf}function ei(i,s){switch(s){case"session":return i.i;case"none":return i.v;default:return i.g}}function Ji(i,s){return"firebase:"+i.name+(s?":"+s:"")}function H1(i,s,c){var f=Ji(s,c),d=ei(i,s.F);return i.get(s,c).then(function(y){var _=null;try{_=Hi(l.localStorage.getItem(f))}catch{}if(_&&!y)return l.localStorage.removeItem(f),i.set(s,_,c);_&&y&&d.type!="localStorage"&&l.localStorage.removeItem(f)})}e=zm.prototype,e.get=function(i,s){return ei(this,i.F).get(Ji(i,s))};function Zi(i,s,c){return c=Ji(s,c),s.F=="local"&&(i.b[c]=null),ei(i,s.F).U(c)}e.set=function(i,s,c){var f=Ji(i,c),d=this,y=ei(this,i.F);return y.set(f,s).then(function(){return y.get(f)}).then(function(_){i.F=="local"&&(d.b[f]=_)})},e.addListener=function(i,s,c){i=Ji(i,s),this.l&&(this.b[i]=l.localStorage.getItem(i)),Ur(this.a)&&(ei(this,"local").ca(this.f),this.h||(Jh()||!wg())&&l.indexedDB||!this.l||z1(this)),this.a[i]||(this.a[i]=[]),this.a[i].push(c)},e.removeListener=function(i,s,c){i=Ji(i,s),this.a[i]&&(sn(this.a[i],function(f){return f==c}),this.a[i].length==0&&delete this.a[i]),Ur(this.a)&&(ei(this,"local").ia(this.f),of(this))};function z1(i){of(i),i.c=setInterval(function(){for(var s in i.a){var c=l.localStorage.getItem(s),f=i.b[s];c!=f&&(i.b[s]=c,c=new qr({type:"storage",key:s,target:window,oldValue:f,newValue:c,a:!0}),i.Yb(c))}},1e3)}function of(i){i.c&&(clearInterval(i.c),i.c=null)}e.Yb=function(i){if(i&&i.g){var s=i.a.key;if(s==null)for(var c in this.a){var f=this.b[c];typeof f>"u"&&(f=null);var d=l.localStorage.getItem(c);d!==f&&(this.b[c]=d,this.mb(c))}else if(s.indexOf("firebase:")==0&&this.a[s]){if(typeof i.a.a<"u"?ei(this,"local").ia(this.f):of(this),this.m){if(c=l.localStorage.getItem(s),f=i.a.newValue,f!==c)f!==null?l.localStorage.setItem(s,f):l.localStorage.removeItem(s);else if(this.b[s]===f&&typeof i.a.a>"u")return}var y=this;c=function(){(typeof i.a.a<"u"||y.b[s]!==l.localStorage.getItem(s))&&(y.b[s]=l.localStorage.getItem(s),y.mb(s))},un&&er&&er==10&&l.localStorage.getItem(s)!==i.a.newValue&&i.a.newValue!==i.a.oldValue?setTimeout(c,10):c()}}else kt(i,P(this.mb,this))},e.mb=function(i){this.a[i]&&kt(this.a[i],function(s){s()})};function Q1(i){this.a=i,this.b=Rs()}var sf={name:"authEvent",F:"local"};function K1(i){return i.b.get(sf,i.a).then(function(s){return Zg(s)})}function Y1(){this.a=Rs()}function $1(){this.b=-1}function Oa(i,s){this.b=Qm,this.f=l.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=i,this.h=s,this.l=l.Int32Array?new Int32Array(64):Array(64),ka===void 0&&(l.Int32Array?ka=new Int32Array($m):ka=$m),this.reset()}var ka;X(Oa,$1);for(var Qm=64,X1=Qm-1,Km=[],uf=0;uf<X1;uf++)Km[uf]=0;var Ym=Sh(128,Km);Oa.prototype.reset=function(){this.g=this.c=0,this.a=l.Int32Array?new Int32Array(this.h):Vr(this.h)};function af(i){for(var s=i.f,c=i.l,f=0,d=0;d<s.length;)c[f++]=s[d]<<24|s[d+1]<<16|s[d+2]<<8|s[d+3],d=4*f;for(s=16;64>s;s++){d=c[s-15]|0,f=c[s-2]|0;var y=(c[s-16]|0)+((d>>>7|d<<25)^(d>>>18|d<<14)^d>>>3)|0,_=(c[s-7]|0)+((f>>>17|f<<15)^(f>>>19|f<<13)^f>>>10)|0;c[s]=y+_|0}f=i.a[0]|0,d=i.a[1]|0;var E=i.a[2]|0,A=i.a[3]|0,O=i.a[4]|0,J=i.a[5]|0,mt=i.a[6]|0;for(y=i.a[7]|0,s=0;64>s;s++){var pt=((f>>>2|f<<30)^(f>>>13|f<<19)^(f>>>22|f<<10))+(f&d^f&E^d&E)|0;_=O&J^~O&mt,y=y+((O>>>6|O<<26)^(O>>>11|O<<21)^(O>>>25|O<<7))|0,_=_+(ka[s]|0)|0,_=y+(_+(c[s]|0)|0)|0,y=mt,mt=J,J=O,O=A+_|0,A=E,E=d,d=f,f=_+pt|0}i.a[0]=i.a[0]+f|0,i.a[1]=i.a[1]+d|0,i.a[2]=i.a[2]+E|0,i.a[3]=i.a[3]+A|0,i.a[4]=i.a[4]+O|0,i.a[5]=i.a[5]+J|0,i.a[6]=i.a[6]+mt|0,i.a[7]=i.a[7]+y|0}function cf(i,s,c){c===void 0&&(c=s.length);var f=0,d=i.c;if(typeof s=="string")for(;f<c;)i.f[d++]=s.charCodeAt(f++),d==i.b&&(af(i),d=0);else if(b(s))for(;f<c;){var y=s[f++];if(!(typeof y=="number"&&0<=y&&255>=y&&y==(y|0)))throw Error("message must be a byte array");i.f[d++]=y,d==i.b&&(af(i),d=0)}else throw Error("message must be string or array");i.c=d,i.g+=c}var $m=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function Xm(){Oa.call(this,8,J1)}X(Xm,Oa);var J1=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function Jm(i,s,c,f,d,y){this.v=i,this.i=s,this.l=c,this.m=f||null,this.u=d||null,this.s=y,this.h=s+":"+c,this.C=new Y1,this.g=new Q1(this.h),this.f=null,this.b=[],this.a=this.c=null}function Da(i){return new S("invalid-cordova-configuration",i)}e=Jm.prototype,e.ma=function(){return this.Ia?this.Ia:this.Ia=HS().then(function(){if(typeof Ct("universalLinks.subscribe",l)!="function")throw Da("cordova-universal-links-plugin-fix is not installed");if(typeof Ct("BuildInfo.packageName",l)>"u")throw Da("cordova-plugin-buildinfo is not installed");if(typeof Ct("cordova.plugins.browsertab.openUrl",l)!="function")throw Da("cordova-plugin-browsertab is not installed");if(typeof Ct("cordova.InAppBrowser.open",l)!="function")throw Da("cordova-plugin-inappbrowser is not installed")},function(){throw new S("cordova-not-ready")})};function Z1(){for(var i=20,s=[];0<i;)s.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),i--;return s.join("")}function tA(i){var s=new Xm;cf(s,i),i=[];var c=8*s.g;56>s.c?cf(s,Ym,56-s.c):cf(s,Ym,s.b-(s.c-56));for(var f=63;56<=f;f--)s.f[f]=c&255,c/=256;for(af(s),f=c=0;f<s.i;f++)for(var d=24;0<=d;d-=8)i[c++]=s.a[f]>>d&255;return lN(i)}e.Ob=function(i,s){return s(new S("operation-not-supported-in-this-environment")),z()},e.Mb=function(){return At(new S("operation-not-supported-in-this-environment"))},e.$b=function(){return!1},e.Xb=function(){return!0},e.Tb=function(){return!0},e.Nb=function(i,s,c,f){if(this.c)return At(new S("redirect-operation-pending"));var d=this,y=l.document,_=null,E=null,A=null,O=null;return this.c=z().then(function(){return Tl(s),t_(d)}).then(function(){return eA(d,i,s,c,f)}).then(function(){return new ot(function(J,mt){E=function(){var pt=Ct("cordova.plugins.browsertab.close",l);return J(),typeof pt=="function"&&pt(),d.a&&typeof d.a.close=="function"&&(d.a.close(),d.a=null),!1},d.Ea(E),A=function(){_||(_=Ui(2e3).then(function(){mt(new S("redirect-cancelled-by-user"))}))},O=function(){rl()&&A()},y.addEventListener("resume",A,!1),ne().toLowerCase().match(/android/)||y.addEventListener("visibilitychange",O,!1)}).o(function(J){return hf(d).then(function(){throw J})})}).oa(function(){A&&y.removeEventListener("resume",A,!1),O&&y.removeEventListener("visibilitychange",O,!1),_&&_.cancel(),E&&d.Sa(E),d.c=null})};function eA(i,s,c,f,d){var y=Z1(),_=new cn(s,f,null,y,new S("no-auth-event"),null,d),E=Ct("BuildInfo.packageName",l);if(typeof E!="string")throw new S("invalid-cordova-configuration");var A=Ct("BuildInfo.displayName",l),O={};if(ne().toLowerCase().match(/iphone|ipad|ipod/))O.ibi=E;else if(ne().toLowerCase().match(/android/))O.apn=E;else return At(new S("operation-not-supported-in-this-environment"));A&&(O.appDisplayName=A),y=tA(y),O.sessionId=y;var J=Ss(i.v,i.i,i.l,s,c,null,f,i.m,O,i.u,d,i.s);return i.ma().then(function(){var mt=i.h;return i.C.a.set(sf,_.w(),mt)}).then(function(){var mt=Ct("cordova.plugins.browsertab.isAvailable",l);if(typeof mt!="function")throw new S("invalid-cordova-configuration");var pt=null;mt(function(Jt){if(Jt){if(pt=Ct("cordova.plugins.browsertab.openUrl",l),typeof pt!="function")throw new S("invalid-cordova-configuration");pt(J)}else{if(pt=Ct("cordova.InAppBrowser.open",l),typeof pt!="function")throw new S("invalid-cordova-configuration");Jt=ne(),i.a=pt(J,Jt.match(/(iPad|iPhone|iPod).*OS 7_\d/i)||Jt.match(/(iPad|iPhone|iPod).*OS 8_\d/i)?"_blank":"_system","location=yes")}})})}function Zm(i,s){for(var c=0;c<i.b.length;c++)try{i.b[c](s)}catch{}}function t_(i){return i.f||(i.f=i.ma().then(function(){return new ot(function(s){function c(f){return s(f),i.Sa(c),!1}i.Ea(c),nA(i)})})),i.f}function hf(i){var s=null;return K1(i.g).then(function(c){return s=c,c=i.g,Zi(c.b,sf,c.a)}).then(function(){return s})}function nA(i){function s(_){f=!0,d&&d.cancel(),hf(i).then(function(E){var A=c;if(E&&_&&_.url){var O=null;A=Hg(_.url),A.indexOf("/__/auth/callback")!=-1&&(O=Ce(A),O=Hi(Je(O,"firebaseError")||null),O=(O=typeof O=="object"?ey(O):null)?new cn(E.c,E.b,null,null,O,null,E.T()):new cn(E.c,E.b,A,E.f,null,null,E.T())),A=O||c}Zm(i,A)})}var c=new cn("unknown",null,null,null,new S("no-auth-event")),f=!1,d=Ui(500).then(function(){return hf(i).then(function(){f||Zm(i,c)})}),y=l.handleOpenURL;l.handleOpenURL=function(_){if(_.toLowerCase().indexOf(Ct("BuildInfo.packageName",l).toLowerCase()+"://")==0&&s({url:_}),typeof y=="function")try{y(_)}catch(E){console.error(E)}},Sl||(Sl=new _N),wN(s)}e.Ea=function(i){this.b.push(i),t_(this).o(function(s){s.code==="auth/invalid-cordova-configuration"&&(s=new cn("unknown",null,null,null,new S("no-auth-event")),i(s))})},e.Sa=function(i){sn(this.b,function(s){return s==i})};function rA(i){this.a=i,this.b=Rs()}var lf={name:"pendingRedirect",F:"session"};function iA(i){return i.b.set(lf,"pending",i.a)}function ff(i){return Zi(i.b,lf,i.a)}function oA(i){return i.b.get(lf,i.a).then(function(s){return s=="pending"})}function Pa(i,s,c,f){this.i={},this.u=0,this.D=i,this.v=s,this.m=c,this.J=f,this.h=[],this.f=!1,this.l=P(this.s,this),this.b=new xa,this.C=new f_,this.g=new rA(a_(this.v,this.m)),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.C,this.c.linkViaPopup=this.C,this.c.reauthViaPopup=this.C,this.a=e_(this.D,this.v,this.m,Jo,this.J)}function e_(i,s,c,f,d){var y=Q.SDK_VERSION||null;return Zh()?new Jm(i,s,c,y,f,d):new Am(i,s,c,y,f,d)}Pa.prototype.reset=function(){this.f=!1,this.a.Sa(this.l),this.a=e_(this.D,this.v,this.m,null,this.J),this.i={}};function n_(i){i.f||(i.f=!0,i.a.Ea(i.l));var s=i.a;return i.a.ma().o(function(c){throw i.a==s&&i.reset(),c})}function r_(i){i.a.Xb()&&n_(i).o(function(s){var c=new cn("unknown",null,null,null,new S("operation-not-supported-in-this-environment"));df(s)&&i.s(c)}),i.a.Tb()||h_(i.b)}function pf(i,s){Fn(i.h,s)||i.h.push(s),i.f||oA(i.g).then(function(c){c?ff(i.g).then(function(){n_(i).o(function(f){var d=new cn("unknown",null,null,null,new S("operation-not-supported-in-this-environment"));df(f)&&i.s(d)})}):r_(i)}).o(function(){r_(i)})}function i_(i,s){sn(i.h,function(c){return c==s})}Pa.prototype.s=function(i){if(!i)throw new S("invalid-auth-event");if(6e5<=Fr()-this.u&&(this.i={},this.u=0),i&&i.getUid()&&this.i.hasOwnProperty(i.getUid()))return!1;for(var s=!1,c=0;c<this.h.length;c++){var f=this.h[c];if(f.Fb(i.c,i.b)){(s=this.c[i.c])&&(s.h(i,f),i&&(i.f||i.b)&&(this.i[i.getUid()]=!0,this.u=Fr())),s=!0;break}}return h_(this.b),s};var sA=new ir(2e3,1e4),uA=new ir(3e4,6e4);Pa.prototype.qa=function(){return this.b.qa()};function o_(i,s,c,f,d,y,_){return i.a.Mb(s,c,f,function(){i.f||(i.f=!0,i.a.Ea(i.l))},function(){i.reset()},d,y,_)}function df(i){return!!(i&&i.code=="auth/cordova-not-ready")}function s_(i,s,c,f,d){var y;return iA(i.g).then(function(){return i.a.Nb(s,c,f,d).o(function(_){if(df(_))throw new S("operation-not-supported-in-this-environment");return y=_,ff(i.g).then(function(){throw y})}).then(function(){return i.a.$b()?new ot(function(){}):ff(i.g).then(function(){return i.qa()}).then(function(){}).o(function(){})})})}function u_(i,s,c,f,d){return i.a.Ob(f,function(y){s.na(c,null,y,d)},sA.get())}var vf={};function a_(i,s,c){return i=i+":"+s,c&&(i=i+":"+c.url),i}function c_(i,s,c,f){var d=a_(s,c,f);return vf[d]||(vf[d]=new Pa(i,s,c,f)),vf[d]}function xa(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}xa.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},xa.prototype.h=function(i,s){if(i){this.reset(),this.g=!0;var c=i.c,f=i.b,d=i.a&&i.a.code=="auth/web-storage-unsupported",y=i.a&&i.a.code=="auth/operation-not-supported-in-this-environment";this.i=!(!d&&!y),c!="unknown"||d||y?i.a?(ni(this,!0,null,i.a),z()):s.Fa(c,f)?aA(this,i,s):At(new S("invalid-auth-event")):(ni(this,!1,null,null),z())}else At(new S("invalid-auth-event"))};function h_(i){i.g||(i.g=!0,ni(i,!1,null,null))}function La(i){i.g&&!i.i&&ni(i,!1,null,null)}function aA(i,s,c){c=c.Fa(s.c,s.b);var f=s.g,d=s.f,y=s.i,_=s.T(),E=!!s.c.match(/Redirect$/);c(f,d,_,y).then(function(A){ni(i,E,A,null)}).o(function(A){ni(i,E,null,A)})}function cA(i,s){if(i.b=function(){return At(s)},i.c.length)for(var c=0;c<i.c.length;c++)i.c[c](s)}function l_(i,s){if(i.b=function(){return z(s)},i.f.length)for(var c=0;c<i.f.length;c++)i.f[c](s)}function ni(i,s,c,f){s?f?cA(i,f):l_(i,c):l_(i,{user:null}),i.f=[],i.c=[]}xa.prototype.qa=function(){var i=this;return new ot(function(s,c){i.b?i.b().then(s,c):(i.f.push(s),i.c.push(c),hA(i))})};function hA(i){var s=new S("timeout");i.a&&i.a.cancel(),i.a=Ui(uA.get()).then(function(){i.b||(i.g=!0,ni(i,!0,null,s))})}function f_(){}f_.prototype.h=function(i,s){if(i){var c=i.c,f=i.b;i.a?(s.na(i.c,null,i.a,i.b),z()):s.Fa(c,f)?lA(i,s):At(new S("invalid-auth-event"))}else At(new S("invalid-auth-event"))};function lA(i,s){var c=i.b,f=i.c;s.Fa(f,c)(i.g,i.f,i.T(),i.i).then(function(d){s.na(f,d,null,c)}).o(function(d){s.na(f,null,d,c)})}function p_(){this.ib=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.ib},set:function(i){this.ib=i},enumerable:!1})}function yf(i,s){this.a=s,q(this,"verificationId",i)}yf.prototype.confirm=function(i){return i=Jg(this.verificationId,i),this.a(i)};function gf(i,s,c,f){return new jn(i).fb(s,c).then(function(d){return new yf(d,f)})}function fA(i){var s=Fg(i);if(!(s&&s.exp&&s.auth_time&&s.iat))throw new S("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");ve(this,{token:i,expirationTime:hs(1e3*s.exp),authTime:hs(1e3*s.auth_time),issuedAtTime:hs(1e3*s.iat),signInProvider:s.firebase&&s.firebase.sign_in_provider?s.firebase.sign_in_provider:null,signInSecondFactor:s.firebase&&s.firebase.sign_in_second_factor?s.firebase.sign_in_second_factor:null,claims:s})}function mf(i,s,c){var f=s&&s[v_];if(!f)throw new S("argument-error","Internal assert: Invalid MultiFactorResolver");this.a=i,this.f=tr(s),this.g=c,this.c=new fa(null,f),this.b=[];var d=this;kt(s[d_]||[],function(y){(y=cl(y))&&d.b.push(y)}),q(this,"auth",this.a),q(this,"session",this.c),q(this,"hints",this.b)}var d_="mfaInfo",v_="mfaPendingCredential";mf.prototype.Rc=function(i){var s=this;return i.sb(this.a.a,this.c).then(function(c){var f=tr(s.f);return delete f[d_],delete f[v_],Se(f,c),s.g(f)})};function _f(i,s,c,f){S.call(this,"multi-factor-auth-required",f,s),this.b=new mf(i,s,c),q(this,"resolver",this.b)}X(_f,S);function y_(i,s,c){if(i&&T(i.serverResponse)&&i.code==="auth/multi-factor-auth-required")try{return new _f(s,i.serverResponse,c,i.message)}catch{}return null}function g_(){}g_.prototype.sb=function(i,s,c){return s.type==ds?pA(this,i,s,c):dA(this,i,s)};function pA(i,s,c,f){return c.Ha().then(function(d){return d={idToken:d},typeof f<"u"&&(d.displayName=f),Se(d,{phoneVerificationInfo:vs(i.a)}),ut(s,n1,d)})}function dA(i,s,c){return c.Ha().then(function(f){return f={mfaPendingCredential:f},Se(f,{phoneVerificationInfo:vs(i.a)}),ut(s,r1,f)})}function wf(i){q(this,"factorId",i.fa),this.a=i}X(wf,g_);function m_(i){if(wf.call(this,i),this.a.fa!=jn.PROVIDER_ID)throw new S("argument-error","firebase.auth.PhoneMultiFactorAssertion requires a valid firebase.auth.PhoneAuthCredential")}X(m_,wf);function to(i,s){Ae.call(this,i);for(var c in s)this[c]=s[c]}X(to,Ae);function bf(i,s){this.a=i,this.b=[],this.c=P(this.yc,this),Xe(this.a,"userReloaded",this.c);var c=[];s&&s.multiFactor&&s.multiFactor.enrolledFactors&&kt(s.multiFactor.enrolledFactors,function(f){var d=null,y={};if(f){f.uid&&(y[ll]=f.uid),f.displayName&&(y[Eg]=f.displayName),f.enrollmentTime&&(y[hl]=new Date(f.enrollmentTime).toISOString()),f.phoneNumber&&(y[fl]=f.phoneNumber);try{d=new ls(y)}catch{}f=d}else f=null;f&&c.push(f)}),Ma(this,c)}function vA(i){var s=[];return kt(i.mfaInfo||[],function(c){(c=cl(c))&&s.push(c)}),s}e=bf.prototype,e.yc=function(i){Ma(this,vA(i.hd))};function Ma(i,s){i.b=s,q(i,"enrolledFactors",s)}e.Rb=function(){return this.a.I().then(function(i){return new fa(i,null)})},e.fc=function(i,s){var c=this,f=this.a.a;return this.Rb().then(function(d){return i.sb(f,d,s)}).then(function(d){return Sn(c.a,d),c.a.reload()})},e.bd=function(i){var s=this,c=typeof i=="string"?i:i.uid,f=this.a.a;return this.a.I().then(function(d){return ut(f,I1,{idToken:d,mfaEnrollmentId:c})}).then(function(d){var y=zT(s.b,function(_){return _.uid!=c});return Ma(s,y),Sn(s.a,d),s.a.reload().o(function(_){if(_.code!="auth/user-token-expired")throw _})})},e.w=function(){return{multiFactor:{enrolledFactors:Wu(this.b,function(i){return i.w()})}}};function Ef(i,s,c){if(this.h=i,this.i=s,this.g=c,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}Ef.prototype.start=function(){this.a=this.c,If(this,!0)};function yA(i,s){return s?(i.a=i.c,i.g()):(s=i.a,i.a*=2,i.a>i.f&&(i.a=i.f),s)}function If(i,s){i.stop(),i.b=Ui(yA(i,s)).then(function(){return QS()}).then(function(){return i.h()}).then(function(){If(i,!0)}).o(function(c){i.i(c)&&If(i,!1)})}Ef.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)};function Tf(i){this.f=i,this.b=this.a=null,this.c=Date.now()}Tf.prototype.w=function(){return{apiKey:this.f.c,refreshToken:this.a,accessToken:this.b&&this.b.toString(),expirationTime:this.c}};function __(i,s){typeof s>"u"&&(i.b?(s=i.b,s=s.a-s.g):s=0),i.c=Date.now()+1e3*s}function w_(i,s){i.b=ha(s[ln]||""),i.a=s.refreshToken,s=s.expiresIn,__(i,typeof s<"u"?Number(s):void 0)}function gA(i,s){i.b=s.b,i.a=s.a,i.c=s.c}function mA(i,s){return jN(i.f,s).then(function(c){return i.b=ha(c.access_token),i.a=c.refresh_token,__(i,c.expires_in),{accessToken:i.b.toString(),refreshToken:i.a}}).o(function(c){throw c.code=="auth/user-token-expired"&&(i.a=null),c})}Tf.prototype.getToken=function(i){return i=!!i,this.b&&!this.a?At(new S("user-token-expired")):i||!this.b||Date.now()>this.c-3e4?this.a?mA(this,{grant_type:"refresh_token",refresh_token:this.a}):z(null):z({accessToken:this.b.toString(),refreshToken:this.a})};function Fa(i,s){this.a=i||null,this.b=s||null,ve(this,{lastSignInTime:hs(s||null),creationTime:hs(i||null)})}function _A(i){return new Fa(i.a,i.b)}Fa.prototype.w=function(){return{lastLoginAt:this.b,createdAt:this.a}};function wA(i,s,c,f,d,y){ve(this,{uid:i,displayName:f||null,photoURL:d||null,email:c||null,phoneNumber:y||null,providerId:s})}function je(i,s,c){this.J=[],this.l=i.apiKey,this.m=i.appName,this.s=i.authDomain||null;var f=Q.SDK_VERSION?Wi(Q.SDK_VERSION):null;this.a=new hn(this.l,Xo(Jo),f),i.emulatorConfig&&Yi(this.a,i.emulatorConfig),this.b=new Tf(this.a),Of(this,s[ln]),w_(this.b,s),q(this,"refreshToken",this.b.a),E_(this,c||{}),de.call(this),this.R=!1,this.s&&zr()&&(this.i=c_(this.s,this.l,this.m)),this.S=[],this.h=null,this.u=bA(this),this.aa=P(this.hb,this);var d=this;this.ya=null,this.Oa=function(y){d.wa(y.h)},this.ja=null,this.Aa=function(y){Yi(d.a,y.c)},this.X=null,this.$=[],this.Ba=function(y){Os(d,y.f)},this.ba=null,this.O=new bf(this,c),q(this,"multiFactor",this.O)}X(je,de),je.prototype.wa=function(i){this.ya=i,dm(this.a,i)},je.prototype.la=function(){return this.ya};function Sf(i,s){i.ja&&Ve(i.ja,"languageCodeChanged",i.Oa),(i.ja=s)&&Xe(s,"languageCodeChanged",i.Oa)}function Nf(i,s){i.X&&Ve(i.X,"emulatorConfigChanged",i.Aa),(i.X=s)&&Xe(s,"emulatorConfigChanged",i.Aa)}function Os(i,s){i.$=s,vm(i.a,Q.SDK_VERSION?Wi(Q.SDK_VERSION,i.$):null)}je.prototype.Ga=function(){return Vr(this.$)};function Af(i,s){i.ba&&Ve(i.ba,"frameworkChanged",i.Ba),(i.ba=s)&&Xe(s,"frameworkChanged",i.Ba)}je.prototype.hb=function(){this.u.b&&(this.u.stop(),this.u.start())};function Cf(i){try{return Q.app(i.m).auth()}catch{throw new S("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+i.m+"'!")}}function bA(i){return new Ef(function(){return i.I(!0)},function(s){return!!(s&&s.code=="auth/network-request-failed")},function(){var s=i.b.c-Date.now()-3e5;return 0<s?s:0})}function b_(i){i.D||i.u.b||(i.u.start(),Ve(i,"tokenChanged",i.aa),Xe(i,"tokenChanged",i.aa))}function Rf(i){Ve(i,"tokenChanged",i.aa),i.u.stop()}function Of(i,s){i.za=s,q(i,"_lat",s)}function EA(i,s){sn(i.S,function(c){return c==s})}function ri(i){for(var s=[],c=0;c<i.S.length;c++)s.push(i.S[c](i));return Fy(s).then(function(){return i})}function ks(i){i.i&&!i.R&&(i.R=!0,pf(i.i,i))}function E_(i,s){ve(i,{uid:s.uid,displayName:s.displayName||null,photoURL:s.photoURL||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,isAnonymous:s.isAnonymous||!1,tenantId:s.tenantId||null,metadata:new Fa(s.createdAt,s.lastLoginAt),providerData:[]}),i.a.b=i.tenantId}q(je.prototype,"providerId","firebase");function I_(){}function kf(i){return z().then(function(){if(i.D)throw new S("app-deleted")})}function Df(i){return Wu(i.providerData,function(s){return s.providerId})}function Pf(i,s){s&&(T_(i,s.providerId),i.providerData.push(s))}function T_(i,s){sn(i.providerData,function(c){return c.providerId==s})}function ur(i,s,c){(s!="uid"||c)&&i.hasOwnProperty(s)&&q(i,s,c)}function Va(i,s){i!=s&&(ve(i,{uid:s.uid,displayName:s.displayName,photoURL:s.photoURL,email:s.email,emailVerified:s.emailVerified,phoneNumber:s.phoneNumber,isAnonymous:s.isAnonymous,tenantId:s.tenantId,providerData:[]}),s.metadata?q(i,"metadata",_A(s.metadata)):q(i,"metadata",new Fa),kt(s.providerData,function(c){Pf(i,c)}),gA(i.b,s.b),q(i,"refreshToken",i.b.a),Ma(i.O,s.O.b))}e=je.prototype,e.reload=function(){var i=this;return zt(this,kf(this).then(function(){return xf(i).then(function(){return ri(i)}).then(I_)}))};function xf(i){return i.I().then(function(s){var c=i.isAnonymous;return IA(i,s).then(function(){return c||ur(i,"isAnonymous",!1),s})})}e.oc=function(i){return this.I(i).then(function(s){return new fA(s)})},e.I=function(i){var s=this;return zt(this,kf(this).then(function(){return s.b.getToken(i)}).then(function(c){if(!c)throw new S("internal-error");return c.accessToken!=s.za&&(Of(s,c.accessToken),s.dispatchEvent(new to("tokenChanged"))),ur(s,"refreshToken",c.refreshToken),c.accessToken}))};function Sn(i,s){s[ln]&&i.za!=s[ln]&&(w_(i.b,s),i.dispatchEvent(new to("tokenChanged")),Of(i,s[ln]),ur(i,"refreshToken",i.b.a))}function IA(i,s){return ut(i.a,i1,{idToken:s}).then(P(i.Kc,i))}e.Kc=function(i){if(i=i.users,!i||!i.length)throw new S("internal-error");i=i[0],E_(this,{uid:i.localId,displayName:i.displayName,photoURL:i.photoUrl,email:i.email,emailVerified:!!i.emailVerified,phoneNumber:i.phoneNumber,lastLoginAt:i.lastLoginAt,createdAt:i.createdAt,tenantId:i.tenantId});for(var s=TA(i),c=0;c<s.length;c++)Pf(this,s[c]);ur(this,"isAnonymous",!(this.email&&i.passwordHash)&&!(this.providerData&&this.providerData.length)),this.dispatchEvent(new to("userReloaded",{hd:i}))};function TA(i){return(i=i.providerUserInfo)&&i.length?Wu(i,function(s){return new wA(s.rawId,s.providerId,s.email,s.displayName,s.photoUrl,s.phoneNumber)}):[]}e.Lc=function(i){return il("firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead."),this.tb(i)},e.tb=function(i){var s=this,c=null;return zt(this,i.c(this.a,this.uid).then(function(f){return Sn(s,f),c=Ds(s,f,"reauthenticate"),s.h=null,s.reload()}).then(function(){return c}),!0)};function Ua(i,s){return xf(i).then(function(){if(Fn(Df(i),s))return ri(i).then(function(){throw new S("provider-already-linked")})})}e.Cc=function(i){return il("firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead."),this.qb(i)},e.qb=function(i){var s=this,c=null;return zt(this,Ua(this,i.providerId).then(function(){return s.I()}).then(function(f){return i.b(s.a,f)}).then(function(f){return c=Ds(s,f,"link"),S_(s,f)}).then(function(){return c}))},e.Dc=function(i,s){var c=this;return zt(this,Ua(this,"phone").then(function(){return gf(Cf(c),i,s,P(c.qb,c))}))},e.Mc=function(i,s){var c=this;return zt(this,z().then(function(){return gf(Cf(c),i,s,P(c.tb,c))}),!0)};function Ds(i,s,c){var f=Il(s);return s=Ug(s),In({user:i,credential:f,additionalUserInfo:s,operationType:c})}function S_(i,s){return Sn(i,s),i.reload().then(function(){return i})}e.Bb=function(i){var s=this;return zt(this,this.I().then(function(c){return s.a.Bb(c,i)}).then(function(c){return Sn(s,c),s.reload()}))},e.ed=function(i){var s=this;return zt(this,this.I().then(function(c){return i.b(s.a,c)}).then(function(c){return Sn(s,c),s.reload()}))},e.Cb=function(i){var s=this;return zt(this,this.I().then(function(c){return s.a.Cb(c,i)}).then(function(c){return Sn(s,c),s.reload()}))},e.Db=function(i){if(i.displayName===void 0&&i.photoURL===void 0)return kf(this);var s=this;return zt(this,this.I().then(function(c){return s.a.Db(c,{displayName:i.displayName,photoUrl:i.photoURL})}).then(function(c){return Sn(s,c),ur(s,"displayName",c.displayName||null),ur(s,"photoURL",c.photoUrl||null),kt(s.providerData,function(f){f.providerId==="password"&&(q(f,"displayName",s.displayName),q(f,"photoURL",s.photoURL))}),ri(s)}).then(I_))},e.cd=function(i){var s=this;return zt(this,xf(this).then(function(c){return Fn(Df(s),i)?QN(s.a,c,[i]).then(function(f){var d={};return kt(f.providerUserInfo||[],function(y){d[y.providerId]=!0}),kt(Df(s),function(y){d[y]||T_(s,y)}),d[jn.PROVIDER_ID]||q(s,"phoneNumber",null),ri(s)}):ri(s).then(function(){throw new S("no-such-provider")})}))},e.delete=function(){var i=this;return zt(this,this.I().then(function(s){return ut(i.a,JN,{idToken:s})}).then(function(){i.dispatchEvent(new to("userDeleted"))})).then(function(){for(var s=0;s<i.J.length;s++)i.J[s].cancel("app-deleted");Sf(i,null),Nf(i,null),Af(i,null),i.J=[],i.D=!0,Rf(i),q(i,"refreshToken",null),i.i&&i_(i.i,i)})},e.Fb=function(i,s){return!!(i=="linkViaPopup"&&(this.g||null)==s&&this.f||i=="reauthViaPopup"&&(this.g||null)==s&&this.f||i=="linkViaRedirect"&&(this.ga||null)==s||i=="reauthViaRedirect"&&(this.ga||null)==s)},e.na=function(i,s,c,f){i!="linkViaPopup"&&i!="reauthViaPopup"||f!=(this.g||null)||(c&&this.C?this.C(c):s&&!c&&this.f&&this.f(s),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},e.Fa=function(i,s){return i=="linkViaPopup"&&s==(this.g||null)?P(this.Kb,this):i=="reauthViaPopup"&&s==(this.g||null)?P(this.Lb,this):i=="linkViaRedirect"&&(this.ga||null)==s?P(this.Kb,this):i=="reauthViaRedirect"&&(this.ga||null)==s?P(this.Lb,this):null},e.Ec=function(i){var s=this;return N_(this,"linkViaPopup",i,function(){return Ua(s,i.providerId).then(function(){return ri(s)})},!1)},e.Nc=function(i){return N_(this,"reauthViaPopup",i,function(){return z()},!0)};function N_(i,s,c,f,d){if(!zr())return At(new S("operation-not-supported-in-this-environment"));if(i.h&&!d)return At(i.h);var y=gl(c.providerId),_=Qr(i.uid+":::"),E=null;(!as()||tl())&&i.s&&c.isOAuthProvider&&(E=Ss(i.s,i.l,i.m,s,c,null,_,Q.SDK_VERSION||null,null,null,i.tenantId));var A=pg(E,y&&y.ua,y&&y.ta);return f=f().then(function(){if(C_(i),!d)return i.I().then(function(){})}).then(function(){return o_(i.i,A,s,c,_,!!E,i.tenantId)}).then(function(){return new ot(function(O,J){i.na(s,null,new S("cancelled-popup-request"),i.g||null),i.f=O,i.C=J,i.g=_,i.c=u_(i.i,i,s,A,_)})}).then(function(O){return A&&Hr(A),O?In(O):null}).o(function(O){throw A&&Hr(A),O}),zt(i,f,d)}e.Fc=function(i){var s=this;return A_(this,"linkViaRedirect",i,function(){return Ua(s,i.providerId)},!1)},e.Oc=function(i){return A_(this,"reauthViaRedirect",i,function(){return z()},!0)};function A_(i,s,c,f,d){if(!zr())return At(new S("operation-not-supported-in-this-environment"));if(i.h&&!d)return At(i.h);var y=null,_=Qr(i.uid+":::");return f=f().then(function(){if(C_(i),!d)return i.I().then(function(){})}).then(function(){return i.ga=_,ri(i)}).then(function(E){return i.ha&&(E=i.ha,E=E.b.set(Lf,i.w(),E.a)),E}).then(function(){return s_(i.i,s,c,_,i.tenantId)}).o(function(E){if(y=E,i.ha)return O_(i.ha);throw y}).then(function(){if(y)throw y}),zt(i,f,d)}function C_(i){if(!i.i||!i.R)throw i.i&&!i.R?new S("internal-error"):new S("auth-domain-config-required")}e.Kb=function(i,s,c,f){var d=this;this.c&&(this.c.cancel(),this.c=null);var y=null;return c=this.I().then(function(_){return Gl(d.a,{requestUri:i,postBody:f,sessionId:s,idToken:_})}).then(function(_){return y=Ds(d,_,"link"),S_(d,_)}).then(function(){return y}),zt(this,c)},e.Lb=function(i,s,c,f){var d=this;this.c&&(this.c.cancel(),this.c=null);var y=null,_=z().then(function(){return Qi(Hl(d.a,{requestUri:i,sessionId:s,postBody:f,tenantId:c}),d.uid)}).then(function(E){return y=Ds(d,E,"reauthenticate"),Sn(d,E),d.h=null,d.reload()}).then(function(){return y});return zt(this,_,!0)},e.ub=function(i){var s=this,c=null;return zt(this,this.I().then(function(f){return c=f,typeof i>"u"||Ur(i)?{}:aa(new ua(i))}).then(function(f){return s.a.ub(c,f)}).then(function(f){if(s.email!=f)return s.reload()}).then(function(){}))},e.Eb=function(i,s){var c=this,f=null;return zt(this,this.I().then(function(d){return f=d,typeof s>"u"||Ur(s)?{}:aa(new ua(s))}).then(function(d){return c.a.Eb(f,i,d)}).then(function(d){if(c.email!=d)return c.reload()}).then(function(){}))};function zt(i,s,c){var f=SA(i,s,c);return i.J.push(f),f.oa(function(){Gu(i.J,f)}),f.o(function(d){var y=null;throw d&&d.code==="auth/multi-factor-auth-required"&&(y=y_(d.w(),Cf(i),P(i.jc,i))),y||d})}e.jc=function(i){var s=null,c=this;return i=Qi(z(i),c.uid).then(function(f){return s=Ds(c,f,"reauthenticate"),Sn(c,f),c.h=null,c.reload()}).then(function(){return s}),zt(this,i,!0)};function SA(i,s,c){return i.h&&!c?(s.cancel(),At(i.h)):s.o(function(f){throw!f||f.code!="auth/user-disabled"&&f.code!="auth/user-token-expired"||(i.h||i.dispatchEvent(new to("userInvalidated")),i.h=f),f})}e.toJSON=function(){return this.w()},e.w=function(){var i={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,tenantId:this.tenantId,providerData:[],apiKey:this.l,appName:this.m,authDomain:this.s,stsTokenManager:this.b.w(),redirectEventId:this.ga||null};return this.metadata&&Se(i,this.metadata.w()),kt(this.providerData,function(s){i.providerData.push($S(s))}),Se(i,this.O.w()),i};function R_(i){if(!i.apiKey)return null;var s={apiKey:i.apiKey,authDomain:i.authDomain,appName:i.appName,emulatorConfig:i.emulatorConfig},c={};if(i.stsTokenManager&&i.stsTokenManager.accessToken){c[ln]=i.stsTokenManager.accessToken,c.refreshToken=i.stsTokenManager.refreshToken||null;var f=i.stsTokenManager.expirationTime;f&&(c.expiresIn=(f-Date.now())/1e3)}else return null;var d=new je(s,c,i);return i.providerData&&kt(i.providerData,function(y){y&&Pf(d,In(y))}),i.redirectEventId&&(d.ga=i.redirectEventId),d}function NA(i,s,c,f){var d=new je(i,s);return c&&(d.ha=c),f&&Os(d,f),d.reload().then(function(){return d})}function AA(i,s,c,f){var d=i.b,y={};return y[ln]=d.b&&d.b.toString(),y.refreshToken=d.a,s=new je(s||{apiKey:i.l,authDomain:i.s,appName:i.m},y),c&&(s.ha=c),f&&Os(s,f),Va(s,i),s}function CA(i){this.a=i,this.b=Rs()}var Lf={name:"redirectUser",F:"session"};function O_(i){return Zi(i.b,Lf,i.a)}function RA(i,s){return i.b.get(Lf,i.a).then(function(c){return c&&s&&(c.authDomain=s),R_(c||{})})}function Mf(i){this.a=i,this.b=Rs(),this.c=null,this.f=OA(this),this.b.addListener(Nn("local"),this.a,P(this.g,this))}Mf.prototype.g=function(){var i=this,s=Nn("local");eo(this,function(){return z().then(function(){return i.c&&i.c.F!="local"?i.b.get(s,i.a):null}).then(function(c){if(c)return Ff(i,"local").then(function(){i.c=s})})})};function Ff(i,s){var c=[],f;for(f in Xi)Xi[f]!==s&&c.push(Zi(i.b,Nn(Xi[f]),i.a));return c.push(Zi(i.b,Vf,i.a)),_S(c)}function OA(i){var s=Nn("local"),c=Nn("session"),f=Nn("none");return H1(i.b,s,i.a).then(function(){return i.b.get(c,i.a)}).then(function(d){return d?c:i.b.get(f,i.a).then(function(y){return y?f:i.b.get(s,i.a).then(function(_){return _?s:i.b.get(Vf,i.a).then(function(E){return E?Nn(E):s})})})}).then(function(d){return i.c=d,Ff(i,d.F)}).o(function(){i.c||(i.c=s)})}var Vf={name:"persistence",F:"session"};function Nn(i){return{name:"authUser",F:i}}Mf.prototype.xb=function(i){var s=null,c=this;return G1(i),eo(this,function(){return i!=c.c.F?c.b.get(c.c,c.a).then(function(f){return s=f,Ff(c,i)}).then(function(){if(c.c=Nn(i),s)return c.b.set(c.c,s,c.a)}):z()})};function kA(i){return eo(i,function(){return i.b.set(Vf,i.c.F,i.a)})}function k_(i,s){return eo(i,function(){return i.b.set(i.c,s.w(),i.a)})}function D_(i){return eo(i,function(){return Zi(i.b,i.c,i.a)})}function P_(i,s,c){return eo(i,function(){return i.b.get(i.c,i.a).then(function(f){return f&&s&&(f.authDomain=s),f&&c&&(f.emulatorConfig=c),R_(f||{})})})}function eo(i,s){return i.f=i.f.then(s,s),i.f}function fn(i){if(this.l=!1,q(this,"settings",new p_),q(this,"app",i),wt(this).options&&wt(this).options.apiKey)i=Q.SDK_VERSION?Wi(Q.SDK_VERSION):null,this.a=new hn(wt(this).options&&wt(this).options.apiKey,Xo(Jo),i);else throw new S("invalid-api-key");this.R=[],this.s=[],this.O=[],this.hb=Q.INTERNAL.createSubscribe(P(this.zc,this)),this.X=void 0,this.bc=Q.INTERNAL.createSubscribe(P(this.Ac,this)),no(this,null),this.i=new Mf(wt(this).options.apiKey+":"+wt(this).name),this.D=new CA(wt(this).options.apiKey+":"+wt(this).name),this.$=Lt(this,FA(this)),this.h=Lt(this,VA(this)),this.ba=!1,this.ja=P(this.Zc,this),this.Ba=P(this.da,this),this.ya=P(this.mc,this),this.za=P(this.wc,this),this.Aa=P(this.xc,this),this.b=null,xA(this),this.INTERNAL={},this.INTERNAL.delete=P(this.delete,this),this.INTERNAL.logFramework=P(this.Gc,this),this.u=0,de.call(this),PA(this),this.J=[],this.P=null}X(fn,de);function x_(i){Ae.call(this,"languageCodeChanged"),this.h=i}X(x_,Ae);function L_(i){Ae.call(this,"emulatorConfigChanged"),this.c=i}X(L_,Ae);function M_(i){Ae.call(this,"frameworkChanged"),this.f=i}X(M_,Ae),e=fn.prototype,e.xb=function(i){return i=this.i.xb(i),Lt(this,i)},e.wa=function(i){this.aa===i||this.l||(this.aa=i,dm(this.a,this.aa),this.dispatchEvent(new x_(this.la())))},e.la=function(){return this.aa},e.fd=function(){var i=l.navigator;this.wa(i&&(i.languages&&i.languages[0]||i.language||i.userLanguage)||null)},e.gd=function(i,s){if(!this.P){if(!/^https?:\/\//.test(i))throw new S("argument-error","Emulator URL must start with a valid scheme (http:// or https://).");s=s?!!s.disableWarnings:!1,DA(s),this.P={url:i,ec:s},this.settings.ib=!0,Yi(this.a,this.P),this.dispatchEvent(new L_(this.P))}};function DA(i){typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),l.document&&!i&&ia().then(function(){var s=l.document.createElement("div");s.innerText="Running in emulator mode. Do not use with production credentials.",s.style.position="fixed",s.style.width="100%",s.style.backgroundColor="#ffffff",s.style.border=".1em solid #000000",s.style.color="#ff0000",s.style.bottom="0px",s.style.left="0px",s.style.margin="0px",s.style.zIndex=1e4,s.style.textAlign="center",s.classList.add("firebase-emulator-warning"),l.document.body.appendChild(s)})}e.Gc=function(i){this.J.push(i),vm(this.a,Q.SDK_VERSION?Wi(Q.SDK_VERSION,this.J):null),this.dispatchEvent(new M_(this.J))},e.Ga=function(){return Vr(this.J)},e.yb=function(i){this.S===i||this.l||(this.S=i,this.a.b=this.S)},e.T=function(){return this.S};function PA(i){Object.defineProperty(i,"lc",{get:function(){return this.la()},set:function(s){this.wa(s)},enumerable:!1}),i.aa=null,Object.defineProperty(i,"ti",{get:function(){return this.T()},set:function(s){this.yb(s)},enumerable:!1}),i.S=null,Object.defineProperty(i,"emulatorConfig",{get:function(){if(this.P){var s=Ce(this.P.url);s=In({protocol:s.c,host:s.a,port:s.g,options:In({disableWarnings:this.P.ec})})}else s=null;return s},enumerable:!1})}e.toJSON=function(){return{apiKey:wt(this).options.apiKey,authDomain:wt(this).options.authDomain,appName:wt(this).name,currentUser:et(this)&&et(this).w()}};function Uf(i){return i.Oa||At(new S("auth-domain-config-required"))}function xA(i){var s=wt(i).options.authDomain,c=wt(i).options.apiKey;s&&zr()&&(i.Oa=i.$.then(function(){if(!i.l){if(i.b=c_(s,c,wt(i).name,i.P),pf(i.b,i),et(i)&&ks(et(i)),i.m){ks(i.m);var f=i.m;f.wa(i.la()),Sf(f,i),f=i.m,Os(f,i.J),Af(f,i),f=i.m,Yi(f.a,i.P),Nf(f,i),i.m=null}return i.b}}))}e.Fb=function(i,s){switch(i){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.g==s&&!!this.f;default:return!1}},e.na=function(i,s,c,f){i=="signInViaPopup"&&this.g==f&&(c&&this.C?this.C(c):s&&!c&&this.f&&this.f(s),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},e.Fa=function(i,s){return i=="signInViaRedirect"||i=="signInViaPopup"&&this.g==s&&this.f?P(this.ic,this):null},e.ic=function(i,s,c,f){var d=this,y={requestUri:i,postBody:f,sessionId:s,tenantId:c};return this.c&&(this.c.cancel(),this.c=null),d.$.then(function(){return ii(d,Wl(d.a,y))})},e.Xc=function(i){if(!zr())return At(new S("operation-not-supported-in-this-environment"));var s=this,c=gl(i.providerId),f=Qr(),d=null;(!as()||tl())&&wt(this).options.authDomain&&i.isOAuthProvider&&(d=Ss(wt(this).options.authDomain,wt(this).options.apiKey,wt(this).name,"signInViaPopup",i,null,f,Q.SDK_VERSION||null,null,null,this.T(),this.P));var y=pg(d,c&&c.ua,c&&c.ta);return c=Uf(this).then(function(_){return o_(_,y,"signInViaPopup",i,f,!!d,s.T())}).then(function(){return new ot(function(_,E){s.na("signInViaPopup",null,new S("cancelled-popup-request"),s.g),s.f=_,s.C=E,s.g=f,s.c=u_(s.b,s,"signInViaPopup",y,f)})}).then(function(_){return y&&Hr(y),_?In(_):null}).o(function(_){throw y&&Hr(y),_}),Lt(this,c)},e.Yc=function(i){if(!zr())return At(new S("operation-not-supported-in-this-environment"));var s=this,c=Uf(this).then(function(){return kA(s.i)}).then(function(){return s_(s.b,"signInViaRedirect",i,void 0,s.T())});return Lt(this,c)};function F_(i){if(!zr())return At(new S("operation-not-supported-in-this-environment"));var s=Uf(i).then(function(){return i.b.qa()}).then(function(c){return c?In(c):null});return Lt(i,s)}e.qa=function(){var i=this;return F_(this).then(function(s){return i.b&&La(i.b.b),s}).o(function(s){throw i.b&&La(i.b.b),s})},e.dd=function(i){if(!i)return At(new S("null-user"));if(this.S!=i.tenantId)return At(new S("tenant-id-mismatch"));var s=this,c={};c.apiKey=wt(this).options.apiKey,c.authDomain=wt(this).options.authDomain,c.appName=wt(this).name;var f=AA(i,c,s.D,s.Ga());return Lt(this,this.h.then(function(){if(wt(s).options.apiKey!=i.l)return f.reload()}).then(function(){return et(s)&&i.uid==et(s).uid?(Va(et(s),i),s.da(i)):(no(s,f),ks(f),s.da(f))}).then(function(){Ps(s)}))};function LA(i,s){var c={};return c.apiKey=wt(i).options.apiKey,c.authDomain=wt(i).options.authDomain,c.appName=wt(i).name,i.P&&(c.emulatorConfig=i.P),i.$.then(function(){return NA(c,s,i.D,i.Ga())}).then(function(f){return et(i)&&f.uid==et(i).uid?(Va(et(i),f),i.da(f)):(no(i,f),ks(f),i.da(f))}).then(function(){Ps(i)})}function no(i,s){et(i)&&(EA(et(i),i.Ba),Ve(et(i),"tokenChanged",i.ya),Ve(et(i),"userDeleted",i.za),Ve(et(i),"userInvalidated",i.Aa),Rf(et(i))),s&&(s.S.push(i.Ba),Xe(s,"tokenChanged",i.ya),Xe(s,"userDeleted",i.za),Xe(s,"userInvalidated",i.Aa),0<i.u&&b_(s)),q(i,"currentUser",s),s&&(s.wa(i.la()),Sf(s,i),Os(s,i.J),Af(s,i),Yi(s.a,i.P),Nf(s,i))}e.Ab=function(){var i=this,s=this.h.then(function(){return i.b&&La(i.b.b),et(i)?(no(i,null),D_(i.i).then(function(){Ps(i)})):z()});return Lt(this,s)};function MA(i){var s=RA(i.D,wt(i).options.authDomain).then(function(c){return(i.m=c)&&(c.ha=i.D),O_(i.D)});return Lt(i,s)}function FA(i){var s=wt(i).options.authDomain,c=MA(i).then(function(){return P_(i.i,s,i.P)}).then(function(f){return f?(f.ha=i.D,i.m&&(i.m.ga||null)==(f.ga||null)?f:f.reload().then(function(){return k_(i.i,f).then(function(){return f})}).o(function(d){return d.code=="auth/network-request-failed"?f:D_(i.i)})):null}).then(function(f){no(i,f||null)});return Lt(i,c)}function VA(i){return i.$.then(function(){return F_(i)}).o(function(){}).then(function(){if(!i.l)return i.ja()}).o(function(){}).then(function(){if(!i.l){i.ba=!0;var s=i.i;s.b.addListener(Nn("local"),s.a,i.ja)}})}e.Zc=function(){var i=this;return P_(this.i,wt(this).options.authDomain).then(function(s){if(!i.l){var c;if(c=et(i)&&s){c=et(i).uid;var f=s.uid;c=c==null||c===""||f===void 0||f===null||f===""?!1:c==f}if(c)return Va(et(i),s),et(i).I();(et(i)||s)&&(no(i,s),s&&(ks(s),s.ha=i.D),i.b&&pf(i.b,i),Ps(i))}})},e.da=function(i){return k_(this.i,i)},e.mc=function(){Ps(this),this.da(et(this))},e.wc=function(){this.Ab()},e.xc=function(){this.Ab()};function ii(i,s){var c=null,f=null;return Lt(i,s.then(function(d){return c=Il(d),f=Ug(d),LA(i,d)},function(d){var y=null;throw d&&d.code==="auth/multi-factor-auth-required"&&(y=y_(d.w(),i,P(i.kc,i))),y||d}).then(function(){return In({user:et(i),credential:c,additionalUserInfo:f,operationType:"signIn"})}))}e.kc=function(i){var s=this;return this.h.then(function(){return ii(s,z(i))})},e.zc=function(i){var s=this;this.addAuthTokenListener(function(){i.next(et(s))})},e.Ac=function(i){var s=this;UA(this,function(){i.next(et(s))})},e.Ic=function(i,s,c){var f=this;return this.ba&&Promise.resolve().then(function(){typeof i=="function"?i(et(f)):typeof i.next=="function"&&i.next(et(f))}),this.hb(i,s,c)},e.Hc=function(i,s,c){var f=this;return this.ba&&Promise.resolve().then(function(){f.X=f.getUid(),typeof i=="function"?i(et(f)):typeof i.next=="function"&&i.next(et(f))}),this.bc(i,s,c)},e.nc=function(i){var s=this,c=this.h.then(function(){return et(s)?et(s).I(i).then(function(f){return{accessToken:f}}):null});return Lt(this,c)},e.Tc=function(i){var s=this;return this.h.then(function(){return ii(s,ut(s.a,_1,{token:i}))}).then(function(c){var f=c.user;return ur(f,"isAnonymous",!1),s.da(f),c})},e.Uc=function(i,s){var c=this;return this.h.then(function(){return ii(c,ut(c.a,Tm,{email:i,password:s}))})},e.dc=function(i,s){var c=this;return this.h.then(function(){return ii(c,ut(c.a,$N,{email:i,password:s}))})},e.$a=function(i){var s=this;return this.h.then(function(){return ii(s,i.ka(s.a))})},e.Sc=function(i){return il("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead."),this.$a(i)},e.zb=function(){var i=this;return this.h.then(function(){var s=et(i);if(s&&s.isAnonymous){var c=In({providerId:null,isNewUser:!1});return In({user:s,credential:null,additionalUserInfo:c,operationType:"signIn"})}return ii(i,i.a.zb()).then(function(f){var d=f.user;return ur(d,"isAnonymous",!0),i.da(d),f})})};function wt(i){return i.app}function et(i){return i.currentUser}e.getUid=function(){return et(this)&&et(this).uid||null};function ja(i){return et(i)&&et(i)._lat||null}function Ps(i){if(i.ba){for(var s=0;s<i.s.length;s++)i.s[s]&&i.s[s](ja(i));if(i.X!==i.getUid()&&i.O.length)for(i.X=i.getUid(),s=0;s<i.O.length;s++)i.O[s]&&i.O[s](ja(i))}}e.cc=function(i){this.addAuthTokenListener(i),this.u++,0<this.u&&et(this)&&b_(et(this))},e.Pc=function(i){var s=this;kt(this.s,function(c){c==i&&s.u--}),0>this.u&&(this.u=0),this.u==0&&et(this)&&Rf(et(this)),this.removeAuthTokenListener(i)},e.addAuthTokenListener=function(i){var s=this;this.s.push(i),Lt(this,this.h.then(function(){s.l||Fn(s.s,i)&&i(ja(s))}))},e.removeAuthTokenListener=function(i){sn(this.s,function(s){return s==i})};function UA(i,s){i.O.push(s),Lt(i,i.h.then(function(){!i.l&&Fn(i.O,s)&&i.X!==i.getUid()&&(i.X=i.getUid(),s(ja(i)))}))}e.delete=function(){this.l=!0;for(var i=0;i<this.R.length;i++)this.R[i].cancel("app-deleted");return this.R=[],this.i&&(i=this.i,i.b.removeListener(Nn("local"),i.a,this.ja)),this.b&&(i_(this.b,this),La(this.b.b)),Promise.resolve()};function Lt(i,s){return i.R.push(s),s.oa(function(){Gu(i.R,s)}),s}e.hc=function(i){return Lt(this,BN(this.a,i))},e.Bc=function(i){return!!El(i)},e.wb=function(i,s){var c=this;return Lt(this,z().then(function(){var f=new ua(s);if(!f.c)throw new S("argument-error",vl+" must be true when sending sign in link to email");return aa(f)}).then(function(f){return c.a.wb(i,f)}).then(function(){}))},e.jd=function(i){return this.Ra(i).then(function(s){return s.data.email})},e.nb=function(i,s){return Lt(this,this.a.nb(i,s).then(function(){}))},e.Ra=function(i){return Lt(this,this.a.Ra(i).then(function(s){return new JS(s)}))},e.jb=function(i){return Lt(this,this.a.jb(i).then(function(){}))},e.vb=function(i,s){var c=this;return Lt(this,z().then(function(){return typeof s>"u"||Ur(s)?{}:aa(new ua(s))}).then(function(f){return c.a.vb(i,f)}).then(function(){}))},e.Wc=function(i,s){return Lt(this,gf(this,i,s,P(this.$a,this)))},e.Vc=function(i,s){var c=this;return Lt(this,z().then(function(){var f=s||us(),d=Xg(i,f);if(f=El(f),!f)throw new S("argument-error","Invalid email link!");if(f.tenantId!==c.T())throw new S("tenant-id-mismatch");return c.$a(d)}))};function xs(){}xs.prototype.render=function(){},xs.prototype.reset=function(){},xs.prototype.getResponse=function(){},xs.prototype.execute=function(){};function ro(){this.a={},this.b=1e12}var jf=null;ro.prototype.render=function(i,s){return this.a[this.b.toString()]=new Ba(i,s),this.b++},ro.prototype.reset=function(i){var s=Bf(this,i);i=V_(i),s&&i&&(s.delete(),delete this.a[i])},ro.prototype.getResponse=function(i){return(i=Bf(this,i))?i.getResponse():null},ro.prototype.execute=function(i){(i=Bf(this,i))&&i.execute()};function Bf(i,s){return(s=V_(s))&&i.a[s]||null}function V_(i){return(i=typeof i>"u"?1e12:i)?i.toString():null}function Ba(i,s){this.g=!1,this.c=s,this.a=this.b=null,this.h=this.c.size!=="invisible",this.f=ts(i);var c=this;this.i=function(){c.execute()},this.h?this.execute():Xe(this.f,"click",this.i)}Ba.prototype.getResponse=function(){return qf(this),this.b},Ba.prototype.execute=function(){qf(this);var i=this;this.a||(this.a=setTimeout(function(){i.b=zS();var s=i.c.callback,c=i.c["expired-callback"];if(s)try{s(i.b)}catch{}i.a=setTimeout(function(){if(i.a=null,i.b=null,c)try{c()}catch{}i.h&&i.execute()},6e4)},500))},Ba.prototype.delete=function(){qf(this),this.g=!0,clearTimeout(this.a),this.a=null,Ve(this.f,"click",this.i)};function qf(i){if(i.g)throw Error("reCAPTCHA mock was already deleted!")}function Wf(){}q(Wf,"FACTOR_ID","phone");function Gf(){}Gf.prototype.g=function(){return jf||(jf=new ro),z(jf)},Gf.prototype.c=function(){};var Hf=null;function zf(){this.b=l.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}var jA=new wn(Hu,"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),BA=new ir(3e4,6e4);zf.prototype.g=function(i){var s=this;return new ot(function(c,f){var d=setTimeout(function(){f(new S("network-request-failed"))},BA.get());if(!l.grecaptcha||i!==s.f&&!s.b){l[s.a]=function(){if(l.grecaptcha){s.f=i;var _=l.grecaptcha.render;l.grecaptcha.render=function(E,A){return E=_(E,A),s.b++,E},clearTimeout(d),c(l.grecaptcha)}else clearTimeout(d),f(new S("internal-error"));delete l[s.a]};var y=Ch(jA,{onload:s.a,hl:i||""});z(Ml(y)).o(function(){clearTimeout(d),f(new S("internal-error","Unable to load external reCAPTCHA dependencies!"))})}else clearTimeout(d),c(l.grecaptcha)})},zf.prototype.c=function(){this.b--};var Qf=null;function Kf(i,s,c,f,d,y,_){if(q(this,"type","recaptcha"),this.c=this.f=null,this.D=!1,this.v=s,this.g=null,_?(Hf||(Hf=new Gf),_=Hf):(Qf||(Qf=new zf),_=Qf),this.m=_,this.a=c||{theme:"light",type:"image"},this.h=[],this.a[B_])throw new S("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i=this.a[qA]==="invisible",!l.document)throw new S("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!ts(s)||!this.i&&ts(s).hasChildNodes())throw new S("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.s=new hn(i,y||null,d||null),this.u=f||function(){return null};var E=this;this.l=[];var A=this.a[U_];this.a[U_]=function(J){if(q_(E,J),typeof A=="function")A(J);else if(typeof A=="string"){var mt=Ct(A,l);typeof mt=="function"&&mt(J)}};var O=this.a[j_];this.a[j_]=function(){if(q_(E,null),typeof O=="function")O();else if(typeof O=="string"){var J=Ct(O,l);typeof J=="function"&&J()}}}var U_="callback",j_="expired-callback",B_="sitekey",qA="size";function q_(i,s){for(var c=0;c<i.l.length;c++)try{i.l[c](s)}catch{}}function WA(i,s){sn(i.l,function(c){return c==s})}function Yf(i,s){return i.h.push(s),s.oa(function(){Gu(i.h,s)}),s}e=Kf.prototype,e.Ia=function(){var i=this;return this.f?this.f:this.f=Yf(this,z().then(function(){if(oa()&&!an())return ia();throw new S("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")}).then(function(){return i.m.g(i.u())}).then(function(s){return i.g=s,ut(i.s,h1,{})}).then(function(s){i.a[B_]=s.recaptchaSiteKey}).o(function(s){throw i.f=null,s}))},e.render=function(){qa(this);var i=this;return Yf(this,this.Ia().then(function(){if(i.c===null){var s=i.v;if(!i.i){var c=ts(s);s=vS("DIV"),c.appendChild(s)}i.c=i.g.render(s,i.a)}return i.c}))},e.verify=function(){qa(this);var i=this;return Yf(this,this.render().then(function(s){return new ot(function(c){var f=i.g.getResponse(s);if(f)c(f);else{var d=function(y){y&&(WA(i,d),c(y))};i.l.push(d),i.i&&i.g.execute(i.c)}})}))},e.reset=function(){qa(this),this.c!==null&&this.g.reset(this.c)};function qa(i){if(i.D)throw new S("internal-error","RecaptchaVerifier instance has been destroyed.")}e.clear=function(){qa(this),this.D=!0,this.m.c();for(var i=0;i<this.h.length;i++)this.h[i].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i){i=ts(this.v);for(var s;s=i.firstChild;)i.removeChild(s)}};function $f(i,s,c){var f=!1;try{this.b=c||Q.app()}catch{throw new S("argument-error","No firebase.app.App instance is currently initialized.")}if(this.b.options&&this.b.options.apiKey)c=this.b.options.apiKey;else throw new S("invalid-api-key");var d=this,y=null;try{y=this.b.auth().Ga()}catch{}try{f=this.b.auth().settings.appVerificationDisabledForTesting}catch{}y=Q.SDK_VERSION?Wi(Q.SDK_VERSION,y):null,Kf.call(this,c,i,s,function(){try{var _=d.b.auth().la()}catch{_=null}return _},y,Xo(Jo),f)}X($f,Kf);function W_(i,s,c,f){t:{c=Array.prototype.slice.call(c);for(var d=0,y=!1,_=0;_<s.length;_++)if(s[_].optional)y=!0;else{if(y)throw new S("internal-error","Argument validator encountered a required argument after an optional argument.");d++}if(y=s.length,c.length<d||y<c.length)f="Expected "+(d==y?d==1?"1 argument":d+" arguments":d+"-"+y+" arguments")+" but got "+c.length+".";else{for(d=0;d<c.length;d++)if(y=s[d].optional&&c[d]===void 0,!s[d].M(c[d])&&!y){if(s=s[d],0>d||d>=G_.length)throw new S("internal-error","Argument validator received an unsupported number of arguments.");c=G_[d],f=(f?"":c+" argument ")+(s.name?'"'+s.name+'" ':"")+"must be "+s.K+".";break t}f=null}}if(f)throw new S("argument-error",i+" failed: "+f)}var G_="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function B(i,s){return{name:i||"",K:"a valid string",optional:!!s,M:function(c){return typeof c=="string"}}}function Xf(i,s){return{name:i||"",K:"a boolean",optional:!!s,M:function(c){return typeof c=="boolean"}}}function jt(i,s){return{name:i||"",K:"a valid object",optional:!!s,M:T}}function io(i,s){return{name:i||"",K:"a function",optional:!!s,M:function(c){return typeof c=="function"}}}function An(i,s){return{name:i||"",K:"null",optional:!!s,M:function(c){return c===null}}}function GA(){return{name:"",K:"an HTML element",optional:!1,M:function(i){return!!(i&&i instanceof Element)}}}function HA(){return{name:"auth",K:"an instance of Firebase Auth",optional:!0,M:function(i){return!!(i&&i instanceof fn)}}}function zA(){return{name:"app",K:"an instance of Firebase App",optional:!0,M:function(i){return!!(i&&i instanceof Q.app.App)}}}function ar(i){return{name:i?i+"Credential":"credential",K:i?"a valid "+i+" credential":"a valid credential",optional:!1,M:function(s){if(!s)return!1;var c=!i||s.providerId===i;return!(!s.ka||!c)}}}function H_(){return{name:"multiFactorAssertion",K:"a valid multiFactorAssertion",optional:!1,M:function(i){return i?!!i.sb:!1}}}function oo(){return{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(i){return!!(i&&i.providerId&&i.hasOwnProperty&&i.hasOwnProperty("isOAuthProvider"))}}}function Jf(i,s){return T(i)&&typeof i.type=="string"&&i.type===s&&typeof i.Ha=="function"}function z_(i){return T(i)&&typeof i.uid=="string"}function Wa(){return{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(i){return!(!i||typeof i.type!="string"||typeof i.verify!="function")}}}function Vt(i,s,c,f){return{name:c||"",K:i.K+" or "+s.K,optional:!!f,M:function(d){return i.M(d)||s.M(d)}}}function Dt(i,s){for(var c in s){var f=s[c].name;i[f]=K_(f,i[c],s[c].j)}}function Q_(i,s){for(var c in s){var f=s[c].name;f!==c&&Object.defineProperty(i,f,{get:_t(function(d){return this[d]},c),set:_t(function(d,y,_,E){W_(d,[_],[E],!0),this[y]=E},f,c,s[c].kb),enumerable:!0})}}function Ut(i,s,c,f){i[s]=K_(s,c,f)}function K_(i,s,c){function f(){var _=Array.prototype.slice.call(arguments);return W_(d,c,_),s.apply(this,_)}if(!c)return s;var d=QA(i),y;for(y in s)f[y]=s[y];for(y in s.prototype)f.prototype[y]=s.prototype[y];return f}function QA(i){return i=i.split("."),i[i.length-1]}Dt(fn.prototype,{jb:{name:"applyActionCode",j:[B("code")]},Ra:{name:"checkActionCode",j:[B("code")]},nb:{name:"confirmPasswordReset",j:[B("code"),B("newPassword")]},dc:{name:"createUserWithEmailAndPassword",j:[B("email"),B("password")]},hc:{name:"fetchSignInMethodsForEmail",j:[B("email")]},qa:{name:"getRedirectResult",j:[]},Bc:{name:"isSignInWithEmailLink",j:[B("emailLink")]},Hc:{name:"onAuthStateChanged",j:[Vt(jt(),io(),"nextOrObserver"),io("opt_error",!0),io("opt_completed",!0)]},Ic:{name:"onIdTokenChanged",j:[Vt(jt(),io(),"nextOrObserver"),io("opt_error",!0),io("opt_completed",!0)]},vb:{name:"sendPasswordResetEmail",j:[B("email"),Vt(jt("opt_actionCodeSettings",!0),An(null,!0),"opt_actionCodeSettings",!0)]},wb:{name:"sendSignInLinkToEmail",j:[B("email"),jt("actionCodeSettings")]},xb:{name:"setPersistence",j:[B("persistence")]},Sc:{name:"signInAndRetrieveDataWithCredential",j:[ar()]},zb:{name:"signInAnonymously",j:[]},$a:{name:"signInWithCredential",j:[ar()]},Tc:{name:"signInWithCustomToken",j:[B("token")]},Uc:{name:"signInWithEmailAndPassword",j:[B("email"),B("password")]},Vc:{name:"signInWithEmailLink",j:[B("email"),B("emailLink",!0)]},Wc:{name:"signInWithPhoneNumber",j:[B("phoneNumber"),Wa()]},Xc:{name:"signInWithPopup",j:[oo()]},Yc:{name:"signInWithRedirect",j:[oo()]},dd:{name:"updateCurrentUser",j:[Vt(function(i){return{name:"user",K:"an instance of Firebase User",optional:!!i,M:function(s){return!!(s&&s instanceof je)}}}(),An(),"user")]},Ab:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[B(null,!0)]},fd:{name:"useDeviceLanguage",j:[]},gd:{name:"useEmulator",j:[B("url"),jt("options",!0)]},jd:{name:"verifyPasswordResetCode",j:[B("code")]}}),Q_(fn.prototype,{lc:{name:"languageCode",kb:Vt(B(),An(),"languageCode")},ti:{name:"tenantId",kb:Vt(B(),An(),"tenantId")}}),fn.Persistence=Xi,fn.Persistence.LOCAL="local",fn.Persistence.SESSION="session",fn.Persistence.NONE="none",Dt(je.prototype,{delete:{name:"delete",j:[]},oc:{name:"getIdTokenResult",j:[Xf("opt_forceRefresh",!0)]},I:{name:"getIdToken",j:[Xf("opt_forceRefresh",!0)]},Cc:{name:"linkAndRetrieveDataWithCredential",j:[ar()]},qb:{name:"linkWithCredential",j:[ar()]},Dc:{name:"linkWithPhoneNumber",j:[B("phoneNumber"),Wa()]},Ec:{name:"linkWithPopup",j:[oo()]},Fc:{name:"linkWithRedirect",j:[oo()]},Lc:{name:"reauthenticateAndRetrieveDataWithCredential",j:[ar()]},tb:{name:"reauthenticateWithCredential",j:[ar()]},Mc:{name:"reauthenticateWithPhoneNumber",j:[B("phoneNumber"),Wa()]},Nc:{name:"reauthenticateWithPopup",j:[oo()]},Oc:{name:"reauthenticateWithRedirect",j:[oo()]},reload:{name:"reload",j:[]},ub:{name:"sendEmailVerification",j:[Vt(jt("opt_actionCodeSettings",!0),An(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[B(null,!0)]},cd:{name:"unlink",j:[B("provider")]},Bb:{name:"updateEmail",j:[B("email")]},Cb:{name:"updatePassword",j:[B("password")]},ed:{name:"updatePhoneNumber",j:[ar("phone")]},Db:{name:"updateProfile",j:[jt("profile")]},Eb:{name:"verifyBeforeUpdateEmail",j:[B("email"),Vt(jt("opt_actionCodeSettings",!0),An(null,!0),"opt_actionCodeSettings",!0)]}}),Dt(ro.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),Dt(xs.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),Dt(ot.prototype,{oa:{name:"finally"},o:{name:"catch"},then:{name:"then"}}),Q_(p_.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",kb:Xf("appVerificationDisabledForTesting")}}),Dt(yf.prototype,{confirm:{name:"confirm",j:[B("verificationCode")]}}),Ut(zi,"fromJSON",function(i){i=typeof i=="string"?JSON.parse(i):i;for(var s,c=[yN,gN,mN,vN],f=0;f<c.length;f++)if(s=c[f](i))return s;return null},[Vt(B(),jt(),"json")]),Ut(Ze,"credential",function(i,s){return new or(i,s)},[B("email"),B("password")]),Dt(or.prototype,{w:{name:"toJSON",j:[B(null,!0)]}}),Dt($r.prototype,{Ca:{name:"addScope",j:[B("scope")]},Ka:{name:"setCustomParameters",j:[jt("customOAuthParameters")]}}),Ut($r,"credential",Qg,[Vt(B(),jt(),"token")]),Ut(Ze,"credentialWithLink",Xg,[B("email"),B("emailLink")]),Dt(Xr.prototype,{Ca:{name:"addScope",j:[B("scope")]},Ka:{name:"setCustomParameters",j:[jt("customOAuthParameters")]}}),Ut(Xr,"credential",Kg,[Vt(B(),jt(),"token")]),Dt(Jr.prototype,{Ca:{name:"addScope",j:[B("scope")]},Ka:{name:"setCustomParameters",j:[jt("customOAuthParameters")]}}),Ut(Jr,"credential",Yg,[Vt(B(),Vt(jt(),An()),"idToken"),Vt(B(),An(),"accessToken",!0)]),Dt(Ki.prototype,{Ka:{name:"setCustomParameters",j:[jt("customOAuthParameters")]}}),Ut(Ki,"credential",$g,[Vt(B(),jt(),"token"),B("secret",!0)]),Dt(Ue.prototype,{Ca:{name:"addScope",j:[B("scope")]},credential:{name:"credential",j:[Vt(B(),Vt(jt(),An()),"optionsOrIdToken"),Vt(B(),An(),"accessToken",!0)]},Ka:{name:"setCustomParameters",j:[jt("customOAuthParameters")]}}),Dt(Un.prototype,{w:{name:"toJSON",j:[B(null,!0)]}}),Dt(Kr.prototype,{w:{name:"toJSON",j:[B(null,!0)]}}),Ut(jn,"credential",Jg,[B("verificationId"),B("verificationCode")]),Dt(jn.prototype,{fb:{name:"verifyPhoneNumber",j:[Vt(B(),function(i,s){return{name:i||"phoneInfoOptions",K:"valid phone info options",optional:!!s,M:function(c){return c?c.session&&c.phoneNumber?Jf(c.session,ds)&&typeof c.phoneNumber=="string":c.session&&c.multiFactorHint?Jf(c.session,pa)&&z_(c.multiFactorHint):c.session&&c.multiFactorUid?Jf(c.session,pa)&&typeof c.multiFactorUid=="string":c.phoneNumber?typeof c.phoneNumber=="string":!1:!1}}}(),"phoneInfoOptions"),Wa()]}}),Dt(sr.prototype,{w:{name:"toJSON",j:[B(null,!0)]}}),Dt(S.prototype,{toJSON:{name:"toJSON",j:[B(null,!0)]}}),Dt(ys.prototype,{toJSON:{name:"toJSON",j:[B(null,!0)]}}),Dt(Nl.prototype,{toJSON:{name:"toJSON",j:[B(null,!0)]}}),Dt(_f.prototype,{toJSON:{name:"toJSON",j:[B(null,!0)]}}),Dt(mf.prototype,{Rc:{name:"resolveSignIn",j:[H_()]}}),Dt(bf.prototype,{Rb:{name:"getSession",j:[]},fc:{name:"enroll",j:[H_(),B("displayName",!0)]},bd:{name:"unenroll",j:[Vt({name:"multiFactorInfo",K:"a valid multiFactorInfo",optional:!1,M:z_},B(),"multiFactorInfoIdentifier")]}}),Dt($f.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),Ut(dl,"parseLink",Rg,[B("link")]),Ut(Wf,"assertion",function(i){return new m_(i)},[ar("phone")]),function(){if(typeof Q<"u"&&Q.INTERNAL&&Q.INTERNAL.registerComponent){var i={ActionCodeInfo:{Operation:{EMAIL_SIGNIN:sa,PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:pl,VERIFY_AND_CHANGE_EMAIL:fs,VERIFY_EMAIL:"VERIFY_EMAIL"}},Auth:fn,AuthCredential:zi,Error:S};Ut(i,"EmailAuthProvider",Ze,[]),Ut(i,"FacebookAuthProvider",$r,[]),Ut(i,"GithubAuthProvider",Xr,[]),Ut(i,"GoogleAuthProvider",Jr,[]),Ut(i,"TwitterAuthProvider",Ki,[]),Ut(i,"OAuthProvider",Ue,[B("providerId")]),Ut(i,"SAMLAuthProvider",zg,[B("providerId")]),Ut(i,"PhoneAuthProvider",jn,[HA()]),Ut(i,"RecaptchaVerifier",$f,[Vt(B(),GA(),"recaptchaContainer"),jt("recaptchaParameters",!0),zA()]),Ut(i,"ActionCodeURL",dl,[]),Ut(i,"PhoneMultiFactorGenerator",Wf,[]),Q.INTERNAL.registerComponent({name:"auth",instanceFactory:function(s){return s=s.getProvider("app").getImmediate(),new fn(s)},multipleInstances:!1,serviceProps:i,instantiationMode:"LAZY",type:"PUBLIC"}),Q.INTERNAL.registerComponent({name:"auth-internal",instanceFactory:function(s){return s=s.getProvider("auth").getImmediate(),{getUid:P(s.getUid,s),getToken:P(s.nc,s),addAuthTokenListener:P(s.cc,s),removeAuthTokenListener:P(s.Pc,s)}},multipleInstances:!1,instantiationMode:"LAZY",type:"PRIVATE"}),Q.registerVersion("@firebase/auth","0.16.4"),Q.INTERNAL.extendNamespace({User:je})}else throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.")}()}).apply(typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var PD=function(){function e(t){this.domStorage_=t,this.prefix_="firebase:"}return e.prototype.set=function(t,n){n==null?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),Qt(n))},e.prototype.get=function(t){var n=this.domStorage_.getItem(this.prefixedName_(t));return n==null?null:Xs(n)},e.prototype.remove=function(t){this.domStorage_.removeItem(this.prefixedName_(t))},e.prototype.prefixedName_=function(t){return this.prefix_+t},e.prototype.toString=function(){return this.domStorage_.toString()},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xD=function(){function e(){this.cache_={},this.isInMemoryStorage=!0}return e.prototype.set=function(t,n){n==null?delete this.cache_[t]:this.cache_[t]=n},e.prototype.get=function(t){return xe(this.cache_,t)?this.cache_[t]:null},e.prototype.remove=function(t){delete this.cache_[t]},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var YI=function(e){try{if(typeof window<"u"&&typeof window[e]<"u"){var t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new PD(t)}}catch{}return new xD},fi=YI("localStorage"),ud=YI("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _o=new Sd("@firebase/database"),$I=function(){var e=1;return function(){return e++}}(),XI=function(e){var t=dC(e),n=new hC;n.update(t);var r=n.digest();return bd.encodeByteArray(r)},ju=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n="",r=0;r<e.length;r++){var o=e[r];Array.isArray(o)||o&&typeof o=="object"&&typeof o.length=="number"?n+=ju.apply(null,o):typeof o=="object"?n+=Qt(o):n+=o,n+=" "}return n},yi=null,_0=!0,JI=function(e,t){L(!t||e===!0||e===!1,"Can't turn on custom loggers persistently."),e===!0?(_o.logLevel=ft.VERBOSE,yi=_o.log.bind(_o),t&&ud.set("logging_enabled",!0)):typeof e=="function"?yi=e:(yi=null,ud.remove("logging_enabled"))},re=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(_0===!0&&(_0=!1,yi===null&&ud.get("logging_enabled")===!0&&JI(!0)),yi){var n=ju.apply(null,e);yi(n)}},Bu=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];re.apply(void 0,Ti([e],t))}},ad=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n="FIREBASE INTERNAL ERROR: "+ju.apply(void 0,Ti(e));_o.error(n)},kn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n="FIREBASE FATAL ERROR: "+ju.apply(void 0,Ti(e));throw _o.error(n),new Error(n)},fe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n="FIREBASE WARNING: "+ju.apply(void 0,Ti(e));_o.warn(n)},LD=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&fe("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},gh=function(e){return typeof e=="number"&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},MD=function(e){if(document.readyState==="complete")e();else{var t=!1,n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}t||(t=!0,e())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",function(){document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},Jn="[MIN_NAME]",Ln="[MAX_NAME]",Di=function(e,t){if(e===t)return 0;if(e===Jn||t===Ln)return-1;if(t===Jn||e===Ln)return 1;var n=Uc(e),r=Uc(t);return n!==null?r!==null?n-r===0?e.length-t.length:n-r:-1:r!==null?1:e<t?-1:1},FD=function(e,t){return e===t?0:e<t?-1:1},Fs=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+Qt(t))},qv=function(e){if(typeof e!="object"||e===null)return Qt(e);var t=[];for(var n in e)t.push(n);t.sort();for(var r="{",o=0;o<t.length;o++)o!==0&&(r+=","),r+=Qt(t[o]),r+=":",r+=qv(e[t[o]]);return r+="}",r},ZI=function(e,t){var n=e.length;if(n<=t)return[e];for(var r=[],o=0;o<n;o+=t)o+t>n?r.push(e.substring(o,n)):r.push(e.substring(o,o+t));return r};function Yt(e,t){for(var n in e)e.hasOwnProperty(n)&&t(n,e[n])}var tT=function(e){L(!gh(e),"Invalid JSON number");var t=11,n=52,r=(1<<t-1)-1,o,u,a,h,l;e===0?(u=0,a=0,o=1/e===-1/0?1:0):(o=e<0,e=Math.abs(e),e>=Math.pow(2,1-r)?(h=Math.min(Math.floor(Math.log(e)/Math.LN2),r),u=h+r,a=Math.round(e*Math.pow(2,n-h)-Math.pow(2,n))):(u=0,a=Math.round(e/Math.pow(2,1-r-n))));var p=[];for(l=n;l;l-=1)p.push(a%2?1:0),a=Math.floor(a/2);for(l=t;l;l-=1)p.push(u%2?1:0),u=Math.floor(u/2);p.push(o?1:0),p.reverse();var v=p.join(""),g="";for(l=0;l<64;l+=8){var m=parseInt(v.substr(l,8),2).toString(16);m.length===1&&(m="0"+m),g=g+m}return g.toLowerCase()},VD=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},UD=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"},jD=function(e,t){var n="Unknown Error";e==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":e==="permission_denied"?n="Client doesn't have permission to access the desired data.":e==="unavailable"&&(n="The service is unavailable");var r=new Error(e+" at "+t.path.toString()+": "+n);return r.code=e.toUpperCase(),r},BD=new RegExp("^-?(0*)\\d{1,10}$"),eT=-2147483648,Wv=2147483647,Uc=function(e){if(BD.test(e)){var t=Number(e);if(t>=eT&&t<=Wv)return t}return null},yo=function(e){try{e()}catch(t){setTimeout(function(){var n=t.stack||"";throw fe("Exception was thrown by user callback.",n),t},Math.floor(0))}},qD=function(){var e=typeof window=="object"&&window.navigator&&window.navigator.userAgent||"";return e.search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Ks=function(e,t){var n=setTimeout(e,t);return typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var yt=function(){function e(t,n){if(n===void 0){this.pieces_=t.split("/");for(var r=0,o=0;o<this.pieces_.length;o++)this.pieces_[o].length>0&&(this.pieces_[r]=this.pieces_[o],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=n}return e.prototype.toString=function(){for(var t="",n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(t+="/"+this.pieces_[n]);return t||"/"},e}();function dt(){return new yt("")}function it(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function Or(e){return e.pieces_.length-e.pieceNum_}function bt(e){var t=e.pieceNum_;return t<e.pieces_.length&&t++,new yt(e.pieces_,t)}function Gv(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function WD(e){for(var t="",n=e.pieceNum_;n<e.pieces_.length;n++)e.pieces_[n]!==""&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}function vu(e,t){return t===void 0&&(t=0),e.pieces_.slice(e.pieceNum_+t)}function nT(e){if(e.pieceNum_>=e.pieces_.length)return null;for(var t=[],n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new yt(t,0)}function Ot(e,t){for(var n=[],r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);if(t instanceof yt)for(var r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);else for(var o=t.split("/"),r=0;r<o.length;r++)o[r].length>0&&n.push(o[r]);return new yt(n,0)}function rt(e){return e.pieceNum_>=e.pieces_.length}function we(e,t){var n=it(e),r=it(t);if(n===null)return t;if(n===r)return we(bt(e),bt(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function GD(e,t){for(var n=vu(e,0),r=vu(t,0),o=0;o<n.length&&o<r.length;o++){var u=Di(n[o],r[o]);if(u!==0)return u}return n.length===r.length?0:n.length<r.length?-1:1}function Hv(e,t){if(Or(e)!==Or(t))return!1;for(var n=e.pieceNum_,r=t.pieceNum_;n<=e.pieces_.length;n++,r++)if(e.pieces_[n]!==t.pieces_[r])return!1;return!0}function nn(e,t){var n=e.pieceNum_,r=t.pieceNum_;if(Or(e)>Or(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[r])return!1;++n,++r}return!0}var HD=function(){function e(t,n){this.errorPrefix_=n,this.parts_=vu(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(var r=0;r<this.parts_.length;r++)this.byteLength_+=rc(this.parts_[r]);this.checkValid_()}return Object.defineProperty(e,"MAX_PATH_DEPTH",{get:function(){return 32},enumerable:!1,configurable:!0}),Object.defineProperty(e,"MAX_PATH_LENGTH_BYTES",{get:function(){return 768},enumerable:!1,configurable:!0}),e.prototype.push=function(t){this.parts_.length>0&&(this.byteLength_+=1),this.parts_.push(t),this.byteLength_+=rc(t),this.checkValid_()},e.prototype.pop=function(){var t=this.parts_.pop();this.byteLength_-=rc(t),this.parts_.length>0&&(this.byteLength_-=1)},e.prototype.checkValid_=function(){if(this.byteLength_>e.MAX_PATH_LENGTH_BYTES)throw new Error(this.errorPrefix_+"has a key path longer than "+e.MAX_PATH_LENGTH_BYTES+" bytes ("+this.byteLength_+").");if(this.parts_.length>e.MAX_PATH_DEPTH)throw new Error(this.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+e.MAX_PATH_DEPTH+") or object contains a cycle "+this.toErrorString())},e.prototype.toErrorString=function(){return this.parts_.length===0?"":"in property '"+this.parts_.join(".")+"'"},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var zv="5",rT="v",iT="s",oT="r",sT="f",uT=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,aT="ls",zD="p",cT="websocket",hT="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Qv=function(){function e(t,n,r,o,u,a,h){u===void 0&&(u=!1),a===void 0&&(a=""),h===void 0&&(h=!1),this.secure=n,this.namespace=r,this.webSocketOnly=o,this.nodeAdmin=u,this.persistenceKey=a,this.includeNamespaceInQueryParams=h,this.host=t.toLowerCase(),this.domain=this.host.substr(this.host.indexOf(".")+1),this.internalHost=fi.get("host:"+t)||this.host}return e.prototype.needsQueryParam=function(){return this.host!==this.internalHost||this.isCustomHost()||this.includeNamespaceInQueryParams},e.prototype.isCacheableHost=function(){return this.internalHost.substr(0,2)==="s-"},e.prototype.isDemoHost=function(){return this.domain==="firebaseio-demo.com"},e.prototype.isCustomHost=function(){return this.domain!=="firebaseio.com"&&this.domain!=="firebaseio-demo.com"},e.prototype.updateHost=function(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&fi.set("host:"+this.host,this.internalHost))},e.prototype.connectionURL=function(t,n){L(typeof t=="string","typeof type must == string"),L(typeof n=="object","typeof params must == object");var r;if(t===cT)r=(this.secure?"wss://":"ws://")+this.internalHost+"/.ws?";else if(t===hT)r=(this.secure?"https://":"http://")+this.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+t);this.needsQueryParam()&&(n.ns=this.namespace);var o=[];return Yt(n,function(u,a){o.push(u+"="+a)}),r+o.join("&")},e.prototype.toString=function(){var t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t},e.prototype.toURLString=function(){var t=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?"?ns="+this.namespace:"";return""+t+this.host+"/"+n},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QD(e){for(var t="",n=e.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var o=n[r];try{o=decodeURIComponent(o.replace(/\+/g," "))}catch{}t+="/"+o}return t}function KD(e){var t,n,r={};e.charAt(0)==="?"&&(e=e.substring(1));try{for(var o=Oe(e.split("&")),u=o.next();!u.done;u=o.next()){var a=u.value;if(a.length!==0){var h=a.split("=");h.length===2?r[decodeURIComponent(h[0])]=decodeURIComponent(h[1]):fe("Invalid query segment '"+a+"' in query '"+e+"'")}}}catch(l){t={error:l}}finally{try{u&&!u.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return r}var cd=function(e,t){var n=YD(e),r=n.namespace;n.domain==="firebase.com"&&kn(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&kn("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||LD();var o=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new Qv(n.host,n.secure,r,t,o,"",r!==n.subdomain),path:new yt(n.pathString)}},YD=function(e){var t="",n="",r="",o="",u="",a=!0,h="https",l=443;if(typeof e=="string"){var p=e.indexOf("//");p>=0&&(h=e.substring(0,p-1),e=e.substring(p+2));var v=e.indexOf("/");v===-1&&(v=e.length);var g=e.indexOf("?");g===-1&&(g=e.length),t=e.substring(0,Math.min(v,g)),v<g&&(o=QD(e.substring(v,g)));var m=KD(e.substring(Math.min(e.length,g)));p=t.indexOf(":"),p>=0?(a=h==="https"||h==="wss",l=parseInt(t.substring(p+1),10)):p=t.length;var w=t.slice(0,p);if(w.toLowerCase()==="localhost")n="localhost";else if(w.split(".").length<=2)n=w;else{var b=t.indexOf(".");r=t.substring(0,b).toLowerCase(),n=t.substring(b+1),u=r}"ns"in m&&(u=m.ns)}return{host:t,port:l,domain:n,subdomain:r,secure:a,scheme:h,pathString:o,namespace:u}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $D=/[\[\].#$\/\u0000-\u001F\u007F]/,XD=/[\[\].#$\u0000-\u001F\u007F]/,dp=10*1024*1024,mh=function(e){return typeof e=="string"&&e.length!==0&&!$D.test(e)},lT=function(e){return typeof e=="string"&&e.length!==0&&!XD.test(e)},JD=function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),lT(e)},yu=function(e){return e===null||typeof e=="string"||typeof e=="number"&&!gh(e)||e&&typeof e=="object"&&xe(e,".sv")},Rn=function(e,t,n,r,o){o&&n===void 0||gu(on(e,t,o),n,r)},gu=function(e,t,n){var r=n instanceof yt?new HD(n,e):n;if(t===void 0)throw new Error(e+"contains undefined "+r.toErrorString());if(typeof t=="function")throw new Error(e+"contains a function "+r.toErrorString()+" with contents = "+t.toString());if(gh(t))throw new Error(e+"contains "+t.toString()+" "+r.toErrorString());if(typeof t=="string"&&t.length>dp/3&&rc(t)>dp)throw new Error(e+"contains a string greater than "+dp+" utf8 bytes "+r.toErrorString()+" ('"+t.substring(0,50)+"...')");if(t&&typeof t=="object"){var o=!1,u=!1;if(Yt(t,function(a,h){if(a===".value")o=!0;else if(a!==".priority"&&a!==".sv"&&(u=!0,!mh(a)))throw new Error(e+" contains an invalid key ("+a+") "+r.toErrorString()+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);r.push(a),gu(e,h,r),r.pop()}),o&&u)throw new Error(e+' contains ".value" child '+r.toErrorString()+" in addition to actual children.")}},ZD=function(e,t){var n,r;for(n=0;n<t.length;n++){r=t[n];for(var o=vu(r),u=0;u<o.length;u++)if(!(o[u]===".priority"&&u===o.length-1)){if(!mh(o[u]))throw new Error(e+"contains an invalid key ("+o[u]+") in path "+r.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}t.sort(GD);var a=null;for(n=0;n<t.length;n++){if(r=t[n],a!==null&&nn(a,r))throw new Error(e+"contains a path "+a.toString()+" that is ancestor of another path "+r.toString());a=r}},fT=function(e,t,n,r,o){if(!(o&&n===void 0)){var u=on(e,t,o);if(!(n&&typeof n=="object")||Array.isArray(n))throw new Error(u+" must be an object containing the children to replace.");var a=[];Yt(n,function(h,l){var p=new yt(h);if(gu(u,l,Ot(r,p)),Gv(p)===".priority"&&!yu(l))throw new Error(u+"contains an invalid value for '"+p.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(p)}),ZD(u,a)}},hd=function(e,t,n,r){if(!(r&&n===void 0)){if(gh(n))throw new Error(on(e,t,r)+"is "+n.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!yu(n))throw new Error(on(e,t,r)+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},vp=function(e,t,n,r){if(!(r&&n===void 0))switch(n){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(on(e,t,r)+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},Vs=function(e,t,n,r){if(!(r&&n===void 0)&&!mh(n))throw new Error(on(e,t,r)+'was an invalid key = "'+n+`".  Firebase keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]").`)},mu=function(e,t,n,r){if(!(r&&n===void 0)&&!lT(n))throw new Error(on(e,t,r)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},tP=function(e,t,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),mu(e,t,n,r)},rn=function(e,t){if(it(t)===".info")throw new Error(e+" failed = Can't modify data under /.info/")},pT=function(e,t,n){var r=n.path.toString();if(typeof n.repoInfo.host!="string"||n.repoInfo.host.length===0||!mh(n.repoInfo.namespace)&&n.repoInfo.host.split(":")[0]!=="localhost"||r.length!==0&&!JD(r))throw new Error(on(e,t,!1)+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)},eP=function(e,t,n,r){if(!(r&&n===void 0)&&typeof n!="boolean")throw new Error(on(e,t,r)+"must be a boolean.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var nP=function(){function e(t,n){this.repo_=t,this.path_=n}return e.prototype.cancel=function(t){K("OnDisconnect.cancel",0,1,arguments.length),te("OnDisconnect.cancel",1,t,!0);var n=new ke;return this.repo_.onDisconnectCancel(this.path_,n.wrapCallback(t)),n.promise},e.prototype.remove=function(t){K("OnDisconnect.remove",0,1,arguments.length),rn("OnDisconnect.remove",this.path_),te("OnDisconnect.remove",1,t,!0);var n=new ke;return this.repo_.onDisconnectSet(this.path_,null,n.wrapCallback(t)),n.promise},e.prototype.set=function(t,n){K("OnDisconnect.set",1,2,arguments.length),rn("OnDisconnect.set",this.path_),Rn("OnDisconnect.set",1,t,this.path_,!1),te("OnDisconnect.set",2,n,!0);var r=new ke;return this.repo_.onDisconnectSet(this.path_,t,r.wrapCallback(n)),r.promise},e.prototype.setWithPriority=function(t,n,r){K("OnDisconnect.setWithPriority",2,3,arguments.length),rn("OnDisconnect.setWithPriority",this.path_),Rn("OnDisconnect.setWithPriority",1,t,this.path_,!1),hd("OnDisconnect.setWithPriority",2,n,!1),te("OnDisconnect.setWithPriority",3,r,!0);var o=new ke;return this.repo_.onDisconnectSetWithPriority(this.path_,t,n,o.wrapCallback(r)),o.promise},e.prototype.update=function(t,n){if(K("OnDisconnect.update",1,2,arguments.length),rn("OnDisconnect.update",this.path_),Array.isArray(t)){for(var r={},o=0;o<t.length;++o)r[""+o]=t[o];t=r,fe("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}fT("OnDisconnect.update",1,t,this.path_,!1),te("OnDisconnect.update",2,n,!0);var u=new ke;return this.repo_.onDisconnectUpdate(this.path_,t,u.wrapCallback(n)),u.promise},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var rP=function(){function e(t,n){this.committed=t,this.snapshot=n}return e.prototype.toJSON=function(){return K("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Fo="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",ld="-",dT="z",vT=786,iP=function(){var e=0,t=[];return function(n){var r=n===e;e=n;var o,u=new Array(8);for(o=7;o>=0;o--)u[o]=Fo.charAt(n%64),n=Math.floor(n/64);L(n===0,"Cannot push at time == 0");var a=u.join("");if(r){for(o=11;o>=0&&t[o]===63;o--)t[o]=0;t[o]++}else for(o=0;o<12;o++)t[o]=Math.floor(Math.random()*64);for(o=0;o<12;o++)a+=Fo.charAt(t[o]);return L(a.length===20,"nextPushId: Length should be 20."),a}}(),w0=function(e){if(e===""+Wv)return ld;var t=Uc(e);if(t!=null)return""+(t+1);for(var n=new Array(e.length),r=0;r<n.length;r++)n[r]=e.charAt(r);if(n.length<vT)return n.push(ld),n.join("");for(var o=n.length-1;o>=0&&n[o]===dT;)o--;if(o===-1)return Ln;var u=n[o],a=Fo.charAt(Fo.indexOf(u)+1);return n[o]=a,n.slice(0,o+1).join("")},b0=function(e){if(e===""+eT)return Jn;var t=Uc(e);if(t!=null)return""+(t-1);for(var n=new Array(e.length),r=0;r<n.length;r++)n[r]=e.charAt(r);return n[n.length-1]===ld?n.length===1?""+Wv:(delete n[n.length-1],n.join("")):(n[n.length-1]=Fo.charAt(Fo.indexOf(n[n.length-1])-1),n.join("")+dT.repeat(vT-n.length))};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ct=function(){function e(t,n){this.name=t,this.node=n}return e.Wrap=function(t,n){return new e(t,n)},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _h=function(){function e(){}return e.prototype.getCompare=function(){return this.compare.bind(this)},e.prototype.indexedValueChanged=function(t,n){var r=new ct(Jn,t),o=new ct(Jn,n);return this.compare(r,o)!==0},e.prototype.minPost=function(){return ct.MIN},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ja,yT=function(e){U(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(t,"__EMPTY_NODE",{get:function(){return Ja},set:function(n){Ja=n},enumerable:!1,configurable:!0}),t.prototype.compare=function(n,r){return Di(n.name,r.name)},t.prototype.isDefinedOn=function(n){throw jo("KeyIndex.isDefinedOn not expected to be called.")},t.prototype.indexedValueChanged=function(n,r){return!1},t.prototype.minPost=function(){return ct.MIN},t.prototype.maxPost=function(){return new ct(Ln,Ja)},t.prototype.makePost=function(n,r){return L(typeof n=="string","KeyIndex indexValue must always be a string."),new ct(n,Ja)},t.prototype.toString=function(){return".key"},t}(_h),Dn=new yT;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var fd;function oP(e){fd=e}var gT=function(e){return typeof e=="number"?"number:"+tT(e):"string:"+e},mT=function(e){if(e.isLeafNode()){var t=e.val();L(typeof t=="string"||typeof t=="number"||typeof t=="object"&&xe(t,".sv"),"Priority must be a string or number.")}else L(e===fd||e.isEmpty(),"priority of unexpected type.");L(e===fd||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var E0,Vo=function(){function e(t,n){n===void 0&&(n=e.__childrenNodeConstructor.EMPTY_NODE),this.value_=t,this.priorityNode_=n,this.lazyHash_=null,L(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),mT(this.priorityNode_)}return Object.defineProperty(e,"__childrenNodeConstructor",{get:function(){return E0},set:function(t){E0=t},enumerable:!1,configurable:!0}),e.prototype.isLeafNode=function(){return!0},e.prototype.getPriority=function(){return this.priorityNode_},e.prototype.updatePriority=function(t){return new e(this.value_,t)},e.prototype.getImmediateChild=function(t){return t===".priority"?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE},e.prototype.getChild=function(t){return rt(t)?this:it(t)===".priority"?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE},e.prototype.hasChild=function(){return!1},e.prototype.getPredecessorChildName=function(t,n){return null},e.prototype.updateImmediateChild=function(t,n){return t===".priority"?this.updatePriority(n):n.isEmpty()&&t!==".priority"?this:e.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,n).updatePriority(this.priorityNode_)},e.prototype.updateChild=function(t,n){var r=it(t);return r===null?n:n.isEmpty()&&r!==".priority"?this:(L(r!==".priority"||Or(t)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,e.__childrenNodeConstructor.EMPTY_NODE.updateChild(bt(t),n)))},e.prototype.isEmpty=function(){return!1},e.prototype.numChildren=function(){return 0},e.prototype.forEachChild=function(t,n){return!1},e.prototype.val=function(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},e.prototype.hash=function(){if(this.lazyHash_===null){var t="";this.priorityNode_.isEmpty()||(t+="priority:"+gT(this.priorityNode_.val())+":");var n=typeof this.value_;t+=n+":",n==="number"?t+=tT(this.value_):t+=this.value_,this.lazyHash_=XI(t)}return this.lazyHash_},e.prototype.getValue=function(){return this.value_},e.prototype.compareTo=function(t){return t===e.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof e.__childrenNodeConstructor?-1:(L(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))},e.prototype.compareToLeafNode_=function(t){var n=typeof t.value_,r=typeof this.value_,o=e.VALUE_TYPE_ORDER.indexOf(n),u=e.VALUE_TYPE_ORDER.indexOf(r);return L(o>=0,"Unknown leaf type: "+n),L(u>=0,"Unknown leaf type: "+r),o===u?r==="object"?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:u-o},e.prototype.withIndex=function(){return this},e.prototype.isIndexed=function(){return!0},e.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode()){var n=t;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1},e.VALUE_TYPE_ORDER=["object","boolean","number","string"],e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _T,wT;function sP(e){_T=e}function uP(e){wT=e}var aP=function(e){U(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.compare=function(n,r){var o=n.node.getPriority(),u=r.node.getPriority(),a=o.compareTo(u);return a===0?Di(n.name,r.name):a},t.prototype.isDefinedOn=function(n){return!n.getPriority().isEmpty()},t.prototype.indexedValueChanged=function(n,r){return!n.getPriority().equals(r.getPriority())},t.prototype.minPost=function(){return ct.MIN},t.prototype.maxPost=function(){return new ct(Ln,new Vo("[PRIORITY-POST]",wT))},t.prototype.makePost=function(n,r){var o=_T(n);return new ct(r,new Vo("[PRIORITY-POST]",o))},t.prototype.toString=function(){return".priority"},t}(_h),Et=new aP;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Za=function(){function e(t,n,r,o,u){u===void 0&&(u=null),this.isReverse_=o,this.resultGenerator_=u,this.nodeStack_=[];for(var a=1;!t.isEmpty();)if(t=t,a=n?r(t.key,n):1,o&&(a*=-1),a<0)this.isReverse_?t=t.left:t=t.right;else if(a===0){this.nodeStack_.push(t);break}else this.nodeStack_.push(t),this.isReverse_?t=t.right:t=t.left}return e.prototype.getNext=function(){if(this.nodeStack_.length===0)return null;var t=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(t.key,t.value):n={key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return n},e.prototype.hasNext=function(){return this.nodeStack_.length>0},e.prototype.peek=function(){if(this.nodeStack_.length===0)return null;var t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}},e}(),dn=function(){function e(t,n,r,o,u){this.key=t,this.value=n,this.color=r??e.RED,this.left=o??Gn.EMPTY_NODE,this.right=u??Gn.EMPTY_NODE}return e.prototype.copy=function(t,n,r,o,u){return new e(t??this.key,n??this.value,r??this.color,o??this.left,u??this.right)},e.prototype.count=function(){return this.left.count()+1+this.right.count()},e.prototype.isEmpty=function(){return!1},e.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)},e.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},e.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},e.prototype.minKey=function(){return this.min_().key},e.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},e.prototype.insert=function(t,n,r){var o=this,u=r(t,o.key);return u<0?o=o.copy(null,null,null,o.left.insert(t,n,r),null):u===0?o=o.copy(null,n,null,null,null):o=o.copy(null,null,null,null,o.right.insert(t,n,r)),o.fixUp_()},e.prototype.removeMin_=function(){if(this.left.isEmpty())return Gn.EMPTY_NODE;var t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()},e.prototype.remove=function(t,n){var r,o;if(r=this,n(t,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(t,n),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),n(t,r.key)===0){if(r.right.isEmpty())return Gn.EMPTY_NODE;o=r.right.min_(),r=r.copy(o.key,o.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(t,n))}return r.fixUp_()},e.prototype.isRed_=function(){return this.color},e.prototype.fixUp_=function(){var t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t},e.prototype.moveRedLeft_=function(){var t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t},e.prototype.moveRedRight_=function(){var t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t},e.prototype.rotateLeft_=function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)},e.prototype.rotateRight_=function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)},e.prototype.colorFlip_=function(){var t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)},e.prototype.checkMaxDepth_=function(){var t=this.check_();return Math.pow(2,t)<=this.count()+1},e.prototype.check_=function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)},e.RED=!0,e.BLACK=!1,e}(),cP=function(){function e(){}return e.prototype.copy=function(t,n,r,o,u){return this},e.prototype.insert=function(t,n,r){return new dn(t,n,null)},e.prototype.remove=function(t,n){return this},e.prototype.count=function(){return 0},e.prototype.isEmpty=function(){return!0},e.prototype.inorderTraversal=function(t){return!1},e.prototype.reverseTraversal=function(t){return!1},e.prototype.minKey=function(){return null},e.prototype.maxKey=function(){return null},e.prototype.check_=function(){return 0},e.prototype.isRed_=function(){return!1},e}(),Gn=function(){function e(t,n){n===void 0&&(n=e.EMPTY_NODE),this.comparator_=t,this.root_=n}return e.prototype.insert=function(t,n){return new e(this.comparator_,this.root_.insert(t,n,this.comparator_).copy(null,null,dn.BLACK,null,null))},e.prototype.remove=function(t){return new e(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,dn.BLACK,null,null))},e.prototype.get=function(t){for(var n,r=this.root_;!r.isEmpty();){if(n=this.comparator_(t,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null},e.prototype.getPredecessorKey=function(t){for(var n,r=this.root_,o=null;!r.isEmpty();)if(n=this.comparator_(t,r.key),n===0){if(r.left.isEmpty())return o?o.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(o=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},e.prototype.isEmpty=function(){return this.root_.isEmpty()},e.prototype.count=function(){return this.root_.count()},e.prototype.minKey=function(){return this.root_.minKey()},e.prototype.maxKey=function(){return this.root_.maxKey()},e.prototype.inorderTraversal=function(t){return this.root_.inorderTraversal(t)},e.prototype.reverseTraversal=function(t){return this.root_.reverseTraversal(t)},e.prototype.getIterator=function(t){return new Za(this.root_,null,this.comparator_,!1,t)},e.prototype.getIteratorFrom=function(t,n){return new Za(this.root_,t,this.comparator_,!1,n)},e.prototype.getReverseIteratorFrom=function(t,n){return new Za(this.root_,t,this.comparator_,!0,n)},e.prototype.getReverseIterator=function(t){return new Za(this.root_,null,this.comparator_,!0,t)},e.EMPTY_NODE=new cP,e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var hP=Math.log(2),lP=function(){function e(t){var n=function(u){return parseInt(Math.log(u)/hP,10)},r=function(u){return parseInt(Array(u+1).join("1"),2)};this.count=n(t+1),this.current_=this.count-1;var o=r(this.count);this.bits_=t+1&o}return e.prototype.nextBitIsOne=function(){var t=!(this.bits_&1<<this.current_);return this.current_--,t},e}(),jc=function(e,t,n,r){e.sort(t);var o=function(l,p){var v=p-l,g,m;if(v===0)return null;if(v===1)return g=e[l],m=n?n(g):g,new dn(m,g.node,dn.BLACK,null,null);var w=parseInt(v/2,10)+l,b=o(l,w),I=o(w+1,p);return g=e[w],m=n?n(g):g,new dn(m,g.node,dn.BLACK,b,I)},u=function(l){for(var p=null,v=null,g=e.length,m=function(C,F){var M=g-C,$=g;g-=C;var nt=o(M+1,$),P=e[M],_t=n?n(P):P;w(new dn(_t,P.node,F,null,nt))},w=function(C){p?(p.left=C,p=C):(v=C,p=C)},b=0;b<l.count;++b){var I=l.nextBitIsOne(),T=Math.pow(2,l.count-(b+1));I?m(T,dn.BLACK):(m(T,dn.BLACK),m(T,dn.RED))}return v},a=new lP(e.length),h=u(a);return new Gn(r||t,h)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var yp,ao={},Bc=function(){function e(t,n){this.indexes_=t,this.indexSet_=n}return Object.defineProperty(e,"Default",{get:function(){return L(ao&&Et,"ChildrenNode.ts has not been loaded"),yp=yp||new e({".priority":ao},{".priority":Et}),yp},enumerable:!1,configurable:!0}),e.prototype.get=function(t){var n=vn(this.indexes_,t);if(!n)throw new Error("No index defined for "+t);return n instanceof Gn?n:null},e.prototype.hasIndex=function(t){return xe(this.indexSet_,t.toString())},e.prototype.addIndex=function(t,n){L(t!==Dn,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r=[],o=!1,u=n.getIterator(ct.Wrap),a=u.getNext();a;)o=o||t.isDefinedOn(a.node),r.push(a),a=u.getNext();var h;o?h=jc(r,t.getCompare()):h=ao;var l=t.toString(),p=Ir({},this.indexSet_);p[l]=t;var v=Ir({},this.indexes_);return v[l]=h,new e(v,p)},e.prototype.addToIndexes=function(t,n){var r=this,o=lc(this.indexes_,function(u,a){var h=vn(r.indexSet_,a);if(L(h,"Missing index implementation for "+a),u===ao)if(h.isDefinedOn(t.node)){for(var l=[],p=n.getIterator(ct.Wrap),v=p.getNext();v;)v.name!==t.name&&l.push(v),v=p.getNext();return l.push(t),jc(l,h.getCompare())}else return ao;else{var g=n.get(t.name),m=u;return g&&(m=m.remove(new ct(t.name,g))),m.insert(t,t.node)}});return new e(o,this.indexSet_)},e.prototype.removeFromIndexes=function(t,n){var r=lc(this.indexes_,function(o){if(o===ao)return o;var u=n.get(t.name);return u?o.remove(new ct(t.name,u)):o});return new e(r,this.indexSet_)},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fP(e,t){return Di(e.name,t.name)}function Kv(e,t){return Di(e,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Us,Z=function(){function e(t,n,r){this.children_=t,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&mT(this.priorityNode_),this.children_.isEmpty()&&L(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return Object.defineProperty(e,"EMPTY_NODE",{get:function(){return Us||(Us=new e(new Gn(Kv),null,Bc.Default))},enumerable:!1,configurable:!0}),e.prototype.isLeafNode=function(){return!1},e.prototype.getPriority=function(){return this.priorityNode_||Us},e.prototype.updatePriority=function(t){return this.children_.isEmpty()?this:new e(this.children_,t,this.indexMap_)},e.prototype.getImmediateChild=function(t){if(t===".priority")return this.getPriority();var n=this.children_.get(t);return n===null?Us:n},e.prototype.getChild=function(t){var n=it(t);return n===null?this:this.getImmediateChild(n).getChild(bt(t))},e.prototype.hasChild=function(t){return this.children_.get(t)!==null},e.prototype.updateImmediateChild=function(t,n){if(L(n,"We should always be passing snapshot nodes"),t===".priority")return this.updatePriority(n);var r=new ct(t,n),o=void 0,u=void 0;n.isEmpty()?(o=this.children_.remove(t),u=this.indexMap_.removeFromIndexes(r,this.children_)):(o=this.children_.insert(t,n),u=this.indexMap_.addToIndexes(r,this.children_));var a=o.isEmpty()?Us:this.priorityNode_;return new e(o,a,u)},e.prototype.updateChild=function(t,n){var r=it(t);if(r===null)return n;L(it(t)!==".priority"||Or(t)===1,".priority must be the last token in a path");var o=this.getImmediateChild(r).updateChild(bt(t),n);return this.updateImmediateChild(r,o)},e.prototype.isEmpty=function(){return this.children_.isEmpty()},e.prototype.numChildren=function(){return this.children_.count()},e.prototype.val=function(t){if(this.isEmpty())return null;var n={},r=0,o=0,u=!0;if(this.forEachChild(Et,function(l,p){n[l]=p.val(t),r++,u&&e.INTEGER_REGEXP_.test(l)?o=Math.max(o,Number(l)):u=!1}),!t&&u&&o<2*r){var a=[];for(var h in n)a[h]=n[h];return a}else return t&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n},e.prototype.hash=function(){if(this.lazyHash_===null){var t="";this.getPriority().isEmpty()||(t+="priority:"+gT(this.getPriority().val())+":"),this.forEachChild(Et,function(n,r){var o=r.hash();o!==""&&(t+=":"+n+":"+o)}),this.lazyHash_=t===""?"":XI(t)}return this.lazyHash_},e.prototype.getPredecessorChildName=function(t,n,r){var o=this.resolveIndex_(r);if(o){var u=o.getPredecessorKey(new ct(t,n));return u?u.name:null}else return this.children_.getPredecessorKey(t)},e.prototype.getFirstChildName=function(t){var n=this.resolveIndex_(t);if(n){var r=n.minKey();return r&&r.name}else return this.children_.minKey()},e.prototype.getFirstChild=function(t){var n=this.getFirstChildName(t);return n?new ct(n,this.children_.get(n)):null},e.prototype.getLastChildName=function(t){var n=this.resolveIndex_(t);if(n){var r=n.maxKey();return r&&r.name}else return this.children_.maxKey()},e.prototype.getLastChild=function(t){var n=this.getLastChildName(t);return n?new ct(n,this.children_.get(n)):null},e.prototype.forEachChild=function(t,n){var r=this.resolveIndex_(t);return r?r.inorderTraversal(function(o){return n(o.name,o.node)}):this.children_.inorderTraversal(n)},e.prototype.getIterator=function(t){return this.getIteratorFrom(t.minPost(),t)},e.prototype.getIteratorFrom=function(t,n){var r=this.resolveIndex_(n);if(r)return r.getIteratorFrom(t,function(a){return a});for(var o=this.children_.getIteratorFrom(t.name,ct.Wrap),u=o.peek();u!=null&&n.compare(u,t)<0;)o.getNext(),u=o.peek();return o},e.prototype.getReverseIterator=function(t){return this.getReverseIteratorFrom(t.maxPost(),t)},e.prototype.getReverseIteratorFrom=function(t,n){var r=this.resolveIndex_(n);if(r)return r.getReverseIteratorFrom(t,function(a){return a});for(var o=this.children_.getReverseIteratorFrom(t.name,ct.Wrap),u=o.peek();u!=null&&n.compare(u,t)>0;)o.getNext(),u=o.peek();return o},e.prototype.compareTo=function(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===qu?-1:0},e.prototype.withIndex=function(t){if(t===Dn||this.indexMap_.hasIndex(t))return this;var n=this.indexMap_.addIndex(t,this.children_);return new e(this.children_,this.priorityNode_,n)},e.prototype.isIndexed=function(t){return t===Dn||this.indexMap_.hasIndex(t)},e.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode())return!1;var n=t;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){for(var r=this.getIterator(Et),o=n.getIterator(Et),u=r.getNext(),a=o.getNext();u&&a;){if(u.name!==a.name||!u.node.equals(a.node))return!1;u=r.getNext(),a=o.getNext()}return u===null&&a===null}else return!1;else return!1},e.prototype.resolveIndex_=function(t){return t===Dn?null:this.indexMap_.get(t.toString())},e.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,e}(),pP=function(e){U(t,e);function t(){return e.call(this,new Gn(Kv),Z.EMPTY_NODE,Bc.Default)||this}return t.prototype.compareTo=function(n){return n===this?0:1},t.prototype.equals=function(n){return n===this},t.prototype.getPriority=function(){return this},t.prototype.getImmediateChild=function(n){return Z.EMPTY_NODE},t.prototype.isEmpty=function(){return!1},t}(Z),qu=new pP;Object.defineProperties(ct,{MIN:{value:new ct(Jn,Z.EMPTY_NODE)},MAX:{value:new ct(Ln,qu)}});yT.__EMPTY_NODE=Z.EMPTY_NODE;Vo.__childrenNodeConstructor=Z;oP(qu);uP(qu);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var dP=!0;function Pt(e,t){if(t===void 0&&(t=null),e===null)return Z.EMPTY_NODE;if(typeof e=="object"&&".priority"in e&&(t=e[".priority"]),L(t===null||typeof t=="string"||typeof t=="number"||typeof t=="object"&&".sv"in t,"Invalid priority type found: "+typeof t),typeof e=="object"&&".value"in e&&e[".value"]!==null&&(e=e[".value"]),typeof e!="object"||".sv"in e){var n=e;return new Vo(n,Pt(t))}if(!(e instanceof Array)&&dP){var r=[],o=!1,u=e;if(Yt(u,function(p,v){if(p.substring(0,1)!=="."){var g=Pt(v);g.isEmpty()||(o=o||!g.getPriority().isEmpty(),r.push(new ct(p,g)))}}),r.length===0)return Z.EMPTY_NODE;var a=jc(r,fP,function(p){return p.name},Kv);if(o){var h=jc(r,Et.getCompare());return new Z(a,Pt(t),new Bc({".priority":h},{".priority":Et}))}else return new Z(a,Pt(t),Bc.Default)}else{var l=Z.EMPTY_NODE;return Yt(e,function(p,v){if(xe(e,p)&&p.substring(0,1)!=="."){var g=Pt(v);(g.isLeafNode()||!g.isEmpty())&&(l=l.updateImmediateChild(p,g))}}),l.updatePriority(Pt(t))}}sP(Pt);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var vP=function(e){U(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.compare=function(n,r){var o=n.node.compareTo(r.node);return o===0?Di(n.name,r.name):o},t.prototype.isDefinedOn=function(n){return!0},t.prototype.indexedValueChanged=function(n,r){return!n.equals(r)},t.prototype.minPost=function(){return ct.MIN},t.prototype.maxPost=function(){return ct.MAX},t.prototype.makePost=function(n,r){var o=Pt(n);return new ct(r,o)},t.prototype.toString=function(){return".value"},t}(_h),pd=new vP;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var dd=function(e){U(t,e);function t(n){var r=e.call(this)||this;return r.indexPath_=n,L(!rt(n)&&it(n)!==".priority","Can't create PathIndex with empty path or .priority key"),r}return t.prototype.extractChild=function(n){return n.getChild(this.indexPath_)},t.prototype.isDefinedOn=function(n){return!n.getChild(this.indexPath_).isEmpty()},t.prototype.compare=function(n,r){var o=this.extractChild(n.node),u=this.extractChild(r.node),a=o.compareTo(u);return a===0?Di(n.name,r.name):a},t.prototype.makePost=function(n,r){var o=Pt(n),u=Z.EMPTY_NODE.updateChild(this.indexPath_,o);return new ct(r,u)},t.prototype.maxPost=function(){var n=Z.EMPTY_NODE.updateChild(this.indexPath_,qu);return new ct(Ln,n)},t.prototype.toString=function(){return vu(this.indexPath_,0).join("/")},t}(_h);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _r=function(){function e(t,n,r){this.node_=t,this.ref_=n,this.index_=r}return e.prototype.val=function(){return K("DataSnapshot.val",0,0,arguments.length),this.node_.val()},e.prototype.exportVal=function(){return K("DataSnapshot.exportVal",0,0,arguments.length),this.node_.val(!0)},e.prototype.toJSON=function(){return K("DataSnapshot.toJSON",0,1,arguments.length),this.exportVal()},e.prototype.exists=function(){return K("DataSnapshot.exists",0,0,arguments.length),!this.node_.isEmpty()},e.prototype.child=function(t){K("DataSnapshot.child",0,1,arguments.length),t=String(t),mu("DataSnapshot.child",1,t,!1);var n=new yt(t),r=this.ref_.child(n);return new e(this.node_.getChild(n),r,Et)},e.prototype.hasChild=function(t){K("DataSnapshot.hasChild",1,1,arguments.length),mu("DataSnapshot.hasChild",1,t,!1);var n=new yt(t);return!this.node_.getChild(n).isEmpty()},e.prototype.getPriority=function(){return K("DataSnapshot.getPriority",0,0,arguments.length),this.node_.getPriority().val()},e.prototype.forEach=function(t){var n=this;if(K("DataSnapshot.forEach",1,1,arguments.length),te("DataSnapshot.forEach",1,t,!1),this.node_.isLeafNode())return!1;var r=this.node_;return!!r.forEachChild(this.index_,function(o,u){return t(new e(u,n.ref_.child(o),Et))})},e.prototype.hasChildren=function(){return K("DataSnapshot.hasChildren",0,0,arguments.length),this.node_.isLeafNode()?!1:!this.node_.isEmpty()},Object.defineProperty(e.prototype,"key",{get:function(){return this.ref_.getKey()},enumerable:!1,configurable:!0}),e.prototype.numChildren=function(){return K("DataSnapshot.numChildren",0,0,arguments.length),this.node_.numChildren()},e.prototype.getRef=function(){return K("DataSnapshot.ref",0,0,arguments.length),this.ref_},Object.defineProperty(e.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var bT=function(){function e(t,n,r,o){this.eventType=t,this.eventRegistration=n,this.snapshot=r,this.prevName=o}return e.prototype.getPath=function(){var t=this.snapshot.getRef();return this.eventType==="value"?t.path:t.getParent().path},e.prototype.getEventType=function(){return this.eventType},e.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},e.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+Qt(this.snapshot.exportVal())},e}(),ET=function(){function e(t,n,r){this.eventRegistration=t,this.error=n,this.path=r}return e.prototype.getPath=function(){return this.path},e.prototype.getEventType=function(){return"cancel"},e.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},e.prototype.toString=function(){return this.path.toString()+":cancel"},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var I0=function(){function e(t,n,r){this.callback_=t,this.cancelCallback_=n,this.context_=r}return e.prototype.respondsTo=function(t){return t==="value"},e.prototype.createEvent=function(t,n){var r=n.getQueryParams().getIndex();return new bT("value",this,new _r(t.snapshotNode,n.getRef(),r))},e.prototype.getEventRunner=function(t){var n=this.context_;if(t.getEventType()==="cancel"){L(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var r=this.cancelCallback_;return function(){r.call(n,t.error)}}else{var o=this.callback_;return function(){o.call(n,t.snapshot)}}},e.prototype.createCancelEvent=function(t,n){return this.cancelCallback_?new ET(this,t,n):null},e.prototype.matches=function(t){return t instanceof e?!t.callback_||!this.callback_?!0:t.callback_===this.callback_&&t.context_===this.context_:!1},e.prototype.hasAnyCallback=function(){return this.callback_!==null},e}(),T0=function(){function e(t,n,r){this.callbacks_=t,this.cancelCallback_=n,this.context_=r}return e.prototype.respondsTo=function(t){var n=t==="children_added"?"child_added":t;return n=n==="children_removed"?"child_removed":n,xe(this.callbacks_,n)},e.prototype.createCancelEvent=function(t,n){return this.cancelCallback_?new ET(this,t,n):null},e.prototype.createEvent=function(t,n){L(t.childName!=null,"Child events should have a childName.");var r=n.getRef().child(t.childName),o=n.getQueryParams().getIndex();return new bT(t.type,this,new _r(t.snapshotNode,r,o),t.prevName)},e.prototype.getEventRunner=function(t){var n=this.context_;if(t.getEventType()==="cancel"){L(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var r=this.cancelCallback_;return function(){r.call(n,t.error)}}else{var o=this.callbacks_[t.eventType];return function(){o.call(n,t.snapshot,t.prevName)}}},e.prototype.matches=function(t){var n=this;if(t instanceof e){if(!this.callbacks_||!t.callbacks_)return!0;if(this.context_===t.context_){var r=Object.keys(t.callbacks_),o=Object.keys(this.callbacks_),u=r.length,a=o.length;if(u===a)if(u===1){var h=r[0],l=o[0];return l===h&&(!t.callbacks_[h]||!this.callbacks_[l]||t.callbacks_[h]===this.callbacks_[l])}else return o.every(function(p){return t.callbacks_[p]===n.callbacks_[p]})}}return!1},e.prototype.hasAnyCallback=function(){return this.callbacks_!==null},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IT(e){return{type:"value",snapshotNode:e}}function Uo(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function _u(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function wu(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}function yP(e,t){return{type:"child_moved",snapshotNode:t,childName:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Yv=function(){function e(t){this.index_=t}return e.prototype.updateChild=function(t,n,r,o,u,a){L(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");var h=t.getImmediateChild(n);return h.getChild(o).equals(r.getChild(o))&&h.isEmpty()===r.isEmpty()||(a!=null&&(r.isEmpty()?t.hasChild(n)?a.trackChildChange(_u(n,h)):L(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):h.isEmpty()?a.trackChildChange(Uo(n,r)):a.trackChildChange(wu(n,r,h))),t.isLeafNode()&&r.isEmpty())?t:t.updateImmediateChild(n,r).withIndex(this.index_)},e.prototype.updateFullNode=function(t,n,r){return r!=null&&(t.isLeafNode()||t.forEachChild(Et,function(o,u){n.hasChild(o)||r.trackChildChange(_u(o,u))}),n.isLeafNode()||n.forEachChild(Et,function(o,u){if(t.hasChild(o)){var a=t.getImmediateChild(o);a.equals(u)||r.trackChildChange(wu(o,u,a))}else r.trackChildChange(Uo(o,u))})),n.withIndex(this.index_)},e.prototype.updatePriority=function(t,n){return t.isEmpty()?Z.EMPTY_NODE:t.updatePriority(n)},e.prototype.filtersNodes=function(){return!1},e.prototype.getIndexedFilter=function(){return this},e.prototype.getIndex=function(){return this.index_},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var TT=function(){function e(t){this.indexedFilter_=new Yv(t.getIndex()),this.index_=t.getIndex(),this.startPost_=e.getStartPost_(t),this.endPost_=e.getEndPost_(t)}return e.prototype.getStartPost=function(){return this.startPost_},e.prototype.getEndPost=function(){return this.endPost_},e.prototype.matches=function(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0},e.prototype.updateChild=function(t,n,r,o,u,a){return this.matches(new ct(n,r))||(r=Z.EMPTY_NODE),this.indexedFilter_.updateChild(t,n,r,o,u,a)},e.prototype.updateFullNode=function(t,n,r){n.isLeafNode()&&(n=Z.EMPTY_NODE);var o=n.withIndex(this.index_);o=o.updatePriority(Z.EMPTY_NODE);var u=this;return n.forEachChild(Et,function(a,h){u.matches(new ct(a,h))||(o=o.updateImmediateChild(a,Z.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,o,r)},e.prototype.updatePriority=function(t,n){return t},e.prototype.filtersNodes=function(){return!0},e.prototype.getIndexedFilter=function(){return this.indexedFilter_},e.prototype.getIndex=function(){return this.index_},e.getStartPost_=function(t){if(t.hasStart()){var n=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),n)}else return t.getIndex().minPost()},e.getEndPost_=function(t){if(t.hasEnd()){var n=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),n)}else return t.getIndex().maxPost()},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var gP=function(){function e(t){this.rangedFilter_=new TT(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}return e.prototype.updateChild=function(t,n,r,o,u,a){return this.rangedFilter_.matches(new ct(n,r))||(r=Z.EMPTY_NODE),t.getImmediateChild(n).equals(r)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,n,r,o,u,a):this.fullLimitUpdateChild_(t,n,r,u,a)},e.prototype.updateFullNode=function(t,n,r){var o;if(n.isLeafNode()||n.isEmpty())o=Z.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){o=Z.EMPTY_NODE.withIndex(this.index_);var u=void 0;this.reverse_?u=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):u=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var a=0;u.hasNext()&&a<this.limit_;){var h=u.getNext(),l=void 0;if(this.reverse_?l=this.index_.compare(this.rangedFilter_.getStartPost(),h)<=0:l=this.index_.compare(h,this.rangedFilter_.getEndPost())<=0,l)o=o.updateImmediateChild(h.name,h.node),a++;else break}}else{o=n.withIndex(this.index_),o=o.updatePriority(Z.EMPTY_NODE);var p=void 0,v=void 0,g=void 0,u=void 0;if(this.reverse_){u=o.getReverseIterator(this.index_),p=this.rangedFilter_.getEndPost(),v=this.rangedFilter_.getStartPost();var m=this.index_.getCompare();g=function(T,C){return m(C,T)}}else u=o.getIterator(this.index_),p=this.rangedFilter_.getStartPost(),v=this.rangedFilter_.getEndPost(),g=this.index_.getCompare();for(var a=0,w=!1;u.hasNext();){var h=u.getNext();!w&&g(p,h)<=0&&(w=!0);var l=w&&a<this.limit_&&g(h,v)<=0;l?a++:o=o.updateImmediateChild(h.name,Z.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,o,r)},e.prototype.updatePriority=function(t,n){return t},e.prototype.filtersNodes=function(){return!0},e.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},e.prototype.getIndex=function(){return this.index_},e.prototype.fullLimitUpdateChild_=function(t,n,r,o,u){var a;if(this.reverse_){var h=this.index_.getCompare();a=function(F,M){return h(M,F)}}else a=this.index_.getCompare();var l=t;L(l.numChildren()===this.limit_,"");var p=new ct(n,r),v=this.reverse_?l.getFirstChild(this.index_):l.getLastChild(this.index_),g=this.rangedFilter_.matches(p);if(l.hasChild(n)){for(var m=l.getImmediateChild(n),w=o.getChildAfterChild(this.index_,v,this.reverse_);w!=null&&(w.name===n||l.hasChild(w.name));)w=o.getChildAfterChild(this.index_,w,this.reverse_);var b=w==null?1:a(w,p),I=g&&!r.isEmpty()&&b>=0;if(I)return u?.trackChildChange(wu(n,r,m)),l.updateImmediateChild(n,r);u?.trackChildChange(_u(n,m));var T=l.updateImmediateChild(n,Z.EMPTY_NODE),C=w!=null&&this.rangedFilter_.matches(w);return C?(u?.trackChildChange(Uo(w.name,w.node)),T.updateImmediateChild(w.name,w.node)):T}else return r.isEmpty()?t:g&&a(v,p)>=0?(u!=null&&(u.trackChildChange(_u(v.name,v.node)),u.trackChildChange(Uo(n,r))),l.updateImmediateChild(n,r).updateImmediateChild(v.name,Z.EMPTY_NODE)):t},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var mP=function(){function e(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Et}return e.prototype.hasStart=function(){return this.startSet_},e.prototype.hasStartAfter=function(){return this.startAfterSet_},e.prototype.hasEndBefore=function(){return this.endBeforeSet_},e.prototype.isViewFromLeft=function(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"},e.prototype.getIndexStartValue=function(){return L(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},e.prototype.getIndexStartName=function(){return L(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Jn},e.prototype.hasEnd=function(){return this.endSet_},e.prototype.getIndexEndValue=function(){return L(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},e.prototype.getIndexEndName=function(){return L(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Ln},e.prototype.hasLimit=function(){return this.limitSet_},e.prototype.hasAnchoredLimit=function(){return this.limitSet_&&this.viewFrom_!==""},e.prototype.getLimit=function(){return L(this.limitSet_,"Only valid if limit has been set"),this.limit_},e.prototype.getIndex=function(){return this.index_},e.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},e.prototype.isDefault=function(){return this.loadsAllData()&&this.index_===Et},e.prototype.copy=function(){var t=new e;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t},e}();function _P(e){return e.loadsAllData()?new Yv(e.getIndex()):e.hasLimit()?new gP(e):new TT(e)}function wP(e,t){var n=e.copy();return n.limitSet_=!0,n.limit_=t,n.viewFrom_="l",n}function bP(e,t){var n=e.copy();return n.limitSet_=!0,n.limit_=t,n.viewFrom_="r",n}function vd(e,t,n){var r=e.copy();return r.startSet_=!0,t===void 0&&(t=null),r.indexStartValue_=t,n!=null?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r}function EP(e,t,n){var r;if(e.index_===Dn)typeof t=="string"&&(t=w0(t)),r=vd(e,t,n);else{var o=void 0;n==null?o=Ln:o=w0(n),r=vd(e,t,o)}return r.startAfterSet_=!0,r}function yd(e,t,n){var r=e.copy();return r.endSet_=!0,t===void 0&&(t=null),r.indexEndValue_=t,n!==void 0?(r.endNameSet_=!0,r.indexEndName_=n):(r.endNameSet_=!1,r.indexEndName_=""),r}function IP(e,t,n){var r,o;return e.index_===Dn?(typeof t=="string"&&(t=b0(t)),o=yd(e,t,n)):(n==null?r=Jn:r=b0(n),o=yd(e,t,r)),o.endBeforeSet_=!0,o}function tc(e,t){var n=e.copy();return n.index_=t,n}function S0(e){var t={};if(e.isDefault())return t;var n;return e.index_===Et?n="$priority":e.index_===pd?n="$value":e.index_===Dn?n="$key":(L(e.index_ instanceof dd,"Unrecognized index type!"),n=e.index_.toString()),t.orderBy=Qt(n),e.startSet_&&(t.startAt=Qt(e.indexStartValue_),e.startNameSet_&&(t.startAt+=","+Qt(e.indexStartName_))),e.endSet_&&(t.endAt=Qt(e.indexEndValue_),e.endNameSet_&&(t.endAt+=","+Qt(e.indexEndName_))),e.limitSet_&&(e.isViewFromLeft()?t.limitToFirst=e.limit_:t.limitToLast=e.limit_),t}function TP(e){var t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_)),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_)),e.limitSet_){t.l=e.limit_;var n=e.viewFrom_;n===""&&(e.isViewFromLeft()?n="l":n="r"),t.vf=n}return e.index_!==Et&&(t.i=e.index_.toString()),t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var gp,$v=function(){function e(t,n,r,o){this.repo=t,this.path=n,this.queryParams_=r,this.orderByCalled_=o}return Object.defineProperty(e,"__referenceConstructor",{get:function(){return L(gp,"Reference.ts has not been loaded"),gp},set:function(t){gp=t},enumerable:!1,configurable:!0}),e.validateQueryEndpoints_=function(t){var n=null,r=null;if(t.hasStart()&&(n=t.getIndexStartValue()),t.hasEnd()&&(r=t.getIndexEndValue()),t.getIndex()===Dn){var o="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",u="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(t.hasStart()){var a=t.getIndexStartName();if(a!==Jn)throw new Error(o);if(typeof n!="string")throw new Error(u)}if(t.hasEnd()){var h=t.getIndexEndName();if(h!==Ln)throw new Error(o);if(typeof r!="string")throw new Error(u)}}else if(t.getIndex()===Et){if(n!=null&&!yu(n)||r!=null&&!yu(r))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(L(t.getIndex()instanceof dd||t.getIndex()===pd,"unknown index type."),n!=null&&typeof n=="object"||r!=null&&typeof r=="object")throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")},e.validateLimit_=function(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")},e.prototype.validateNoPreviousOrderByCall_=function(t){if(this.orderByCalled_===!0)throw new Error(t+": You can't combine multiple orderBy calls.")},e.prototype.getQueryParams=function(){return this.queryParams_},e.prototype.getRef=function(){return K("Query.ref",0,0,arguments.length),new e.__referenceConstructor(this.repo,this.path)},e.prototype.on=function(t,n,r,o){K("Query.on",2,4,arguments.length),vp("Query.on",1,t,!1),te("Query.on",2,n,!1);var u=e.getCancelAndContextArgs_("Query.on",r,o);if(t==="value")this.onValueEvent(n,u.cancel,u.context);else{var a={};a[t]=n,this.onChildEvent(a,u.cancel,u.context)}return n},e.prototype.onValueEvent=function(t,n,r){var o=new I0(t,n||null,r||null);this.repo.addEventCallbackForQuery(this,o)},e.prototype.onChildEvent=function(t,n,r){var o=new T0(t,n,r);this.repo.addEventCallbackForQuery(this,o)},e.prototype.off=function(t,n,r){K("Query.off",0,3,arguments.length),vp("Query.off",1,t,!0),te("Query.off",2,n,!0),$_("Query.off",3,r,!0);var o=null,u=null;if(t==="value"){var a=n||null;o=new I0(a,null,r||null)}else t&&(n&&(u={},u[t]=n),o=new T0(u,null,r||null));this.repo.removeEventCallbackForQuery(this,o)},e.prototype.get=function(){return this.repo.getValue(this)},e.prototype.once=function(t,n,r,o){var u=this;K("Query.once",1,4,arguments.length),vp("Query.once",1,t,!1),te("Query.once",2,n,!0);var a=e.getCancelAndContextArgs_("Query.once",r,o),h=!0,l=new ke;l.promise.catch(function(){});var p=function(v){h&&(h=!1,u.off(t,p),n&&n.bind(a.context)(v),l.resolve(v))};return this.on(t,p,function(v){u.off(t,p),a.cancel&&a.cancel.bind(a.context)(v),l.reject(v)}),l.promise},e.prototype.limitToFirst=function(t){if(K("Query.limitToFirst",1,1,arguments.length),typeof t!="number"||Math.floor(t)!==t||t<=0)throw new Error("Query.limitToFirst: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToFirst: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new e(this.repo,this.path,wP(this.queryParams_,t),this.orderByCalled_)},e.prototype.limitToLast=function(t){if(K("Query.limitToLast",1,1,arguments.length),typeof t!="number"||Math.floor(t)!==t||t<=0)throw new Error("Query.limitToLast: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToLast: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new e(this.repo,this.path,bP(this.queryParams_,t),this.orderByCalled_)},e.prototype.orderByChild=function(t){if(K("Query.orderByChild",1,1,arguments.length),t==="$key")throw new Error('Query.orderByChild: "$key" is invalid.  Use Query.orderByKey() instead.');if(t==="$priority")throw new Error('Query.orderByChild: "$priority" is invalid.  Use Query.orderByPriority() instead.');if(t==="$value")throw new Error('Query.orderByChild: "$value" is invalid.  Use Query.orderByValue() instead.');mu("Query.orderByChild",1,t,!1),this.validateNoPreviousOrderByCall_("Query.orderByChild");var n=new yt(t);if(rt(n))throw new Error("Query.orderByChild: cannot pass in empty path.  Use Query.orderByValue() instead.");var r=new dd(n),o=tc(this.queryParams_,r);return e.validateQueryEndpoints_(o),new e(this.repo,this.path,o,!0)},e.prototype.orderByKey=function(){K("Query.orderByKey",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByKey");var t=tc(this.queryParams_,Dn);return e.validateQueryEndpoints_(t),new e(this.repo,this.path,t,!0)},e.prototype.orderByPriority=function(){K("Query.orderByPriority",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByPriority");var t=tc(this.queryParams_,Et);return e.validateQueryEndpoints_(t),new e(this.repo,this.path,t,!0)},e.prototype.orderByValue=function(){K("Query.orderByValue",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByValue");var t=tc(this.queryParams_,pd);return e.validateQueryEndpoints_(t),new e(this.repo,this.path,t,!0)},e.prototype.startAt=function(t,n){t===void 0&&(t=null),K("Query.startAt",0,2,arguments.length),Rn("Query.startAt",1,t,this.path,!0),Vs("Query.startAt",2,n,!0);var r=vd(this.queryParams_,t,n);if(e.validateLimit_(r),e.validateQueryEndpoints_(r),this.queryParams_.hasStart())throw new Error("Query.startAt: Starting point was already set (by another call to startAt or equalTo).");return t===void 0&&(t=null,n=null),new e(this.repo,this.path,r,this.orderByCalled_)},e.prototype.startAfter=function(t,n){t===void 0&&(t=null),K("Query.startAfter",0,2,arguments.length),Rn("Query.startAfter",1,t,this.path,!1),Vs("Query.startAfter",2,n,!0);var r=EP(this.queryParams_,t,n);if(e.validateLimit_(r),e.validateQueryEndpoints_(r),this.queryParams_.hasStart())throw new Error("Query.startAfter: Starting point was already set (by another call to startAt, startAfter or equalTo).");return new e(this.repo,this.path,r,this.orderByCalled_)},e.prototype.endAt=function(t,n){t===void 0&&(t=null),K("Query.endAt",0,2,arguments.length),Rn("Query.endAt",1,t,this.path,!0),Vs("Query.endAt",2,n,!0);var r=yd(this.queryParams_,t,n);if(e.validateLimit_(r),e.validateQueryEndpoints_(r),this.queryParams_.hasEnd())throw new Error("Query.endAt: Ending point was already set (by another call to endAt, endBefore, or equalTo).");return new e(this.repo,this.path,r,this.orderByCalled_)},e.prototype.endBefore=function(t,n){t===void 0&&(t=null),K("Query.endBefore",0,2,arguments.length),Rn("Query.endBefore",1,t,this.path,!1),Vs("Query.endBefore",2,n,!0);var r=IP(this.queryParams_,t,n);if(e.validateLimit_(r),e.validateQueryEndpoints_(r),this.queryParams_.hasEnd())throw new Error("Query.endBefore: Ending point was already set (by another call to endAt, endBefore, or equalTo).");return new e(this.repo,this.path,r,this.orderByCalled_)},e.prototype.equalTo=function(t,n){if(K("Query.equalTo",1,2,arguments.length),Rn("Query.equalTo",1,t,this.path,!1),Vs("Query.equalTo",2,n,!0),this.queryParams_.hasStart())throw new Error("Query.equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(this.queryParams_.hasEnd())throw new Error("Query.equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return this.startAt(t,n).endAt(t,n)},e.prototype.toString=function(){return K("Query.toString",0,0,arguments.length),this.repo.toString()+WD(this.path)},e.prototype.toJSON=function(){return K("Query.toJSON",0,1,arguments.length),this.toString()},e.prototype.queryObject=function(){return TP(this.queryParams_)},e.prototype.queryIdentifier=function(){var t=this.queryObject(),n=qv(t);return n==="{}"?"default":n},e.prototype.isEqual=function(t){if(K("Query.isEqual",1,1,arguments.length),!(t instanceof e)){var n="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(n)}var r=this.repo===t.repo,o=Hv(this.path,t.path),u=this.queryIdentifier()===t.queryIdentifier();return r&&o&&u},e.getCancelAndContextArgs_=function(t,n,r){var o={cancel:null,context:null};if(n&&r)o.cancel=n,te(t,3,o.cancel,!0),o.context=r,$_(t,4,o.context,!0);else if(n)if(typeof n=="object"&&n!==null)o.context=n;else if(typeof n=="function")o.cancel=n;else throw new Error(on(t,3,!0)+" must either be a cancel callback or a context object.");return o},Object.defineProperty(e.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var SP=function(){function e(t){this.node_=t}return e.prototype.getImmediateChild=function(t){var n=this.node_.getImmediateChild(t);return new e(n)},e.prototype.node=function(){return this.node_},e}(),NP=function(){function e(t,n){this.syncTree_=t,this.path_=n}return e.prototype.getImmediateChild=function(t){var n=Ot(this.path_,t);return new e(this.syncTree_,n)},e.prototype.node=function(){return this.syncTree_.calcCompleteEventCache(this.path_)},e}(),AP=function(e){return e=e||{},e.timestamp=e.timestamp||new Date().getTime(),e},N0=function(e,t,n){if(!e||typeof e!="object")return e;if(L(".sv"in e,"Unexpected leaf node or priority contents"),typeof e[".sv"]=="string")return CP(e[".sv"],t,n);if(typeof e[".sv"]=="object")return RP(e[".sv"],t);L(!1,"Unexpected server value: "+JSON.stringify(e,null,2))},CP=function(e,t,n){switch(e){case"timestamp":return n.timestamp;default:L(!1,"Unexpected server value: "+e)}},RP=function(e,t,n){e.hasOwnProperty("increment")||L(!1,"Unexpected server value: "+JSON.stringify(e,null,2));var r=e.increment;typeof r!="number"&&L(!1,"Unexpected increment value: "+r);var o=t.node();if(L(o!==null&&typeof o<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!o.isLeafNode())return r;var u=o,a=u.getValue();return typeof a!="number"?r:a+r},A0=function(e,t,n,r){return Xv(t,new NP(n,e),r)},mp=function(e,t,n){return Xv(e,new SP(t),n)};function Xv(e,t,n){var r=e.getPriority().val(),o=N0(r,t.getImmediateChild(".priority"),n),u;if(e.isLeafNode()){var a=e,h=N0(a.getValue(),t,n);return h!==a.getValue()||o!==a.getPriority().val()?new Vo(h,Pt(o)):e}else{var l=e;return u=l,o!==l.getPriority().val()&&(u=u.updatePriority(new Vo(o))),l.forEachChild(Et,function(p,v){var g=Xv(v,t.getImmediateChild(p),n);g!==v&&(u=u.updateImmediateChild(p,g))}),u}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _p=function(){function e(){this.value=null,this.children=new Map}return e.prototype.find=function(t){if(this.value!=null)return this.value.getChild(t);if(!rt(t)&&this.children.size>0){var n=it(t);if(t=bt(t),this.children.has(n)){var r=this.children.get(n);return r.find(t)}else return null}else return null},e.prototype.remember=function(t,n){if(rt(t))this.value=n,this.children.clear();else if(this.value!==null)this.value=this.value.updateChild(t,n);else{var r=it(t);this.children.has(r)||this.children.set(r,new e);var o=this.children.get(r);t=bt(t),o.remember(t,n)}},e.prototype.forget=function(t){if(rt(t))return this.value=null,this.children.clear(),!0;if(this.value!==null){if(this.value.isLeafNode())return!1;var n=this.value;this.value=null;var r=this;return n.forEachChild(Et,function(a,h){r.remember(new yt(a),h)}),this.forget(t)}else if(this.children.size>0){var o=it(t);if(t=bt(t),this.children.has(o)){var u=this.children.get(o).forget(t);u&&this.children.delete(o)}return this.children.size===0}else return!0},e.prototype.forEachTree=function(t,n){this.value!==null?n(t,this.value):this.forEachChild(function(r,o){var u=new yt(t.toString()+"/"+r);o.forEachTree(u,n)})},e.prototype.forEachChild=function(t){this.children.forEach(function(n,r){t(r,n)})},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var yn;(function(e){e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(yn||(yn={}));function gd(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function wp(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function bp(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var OP=function(){function e(t,n,r){this.path=t,this.affectedTree=n,this.revert=r,this.type=yn.ACK_USER_WRITE,this.source=gd()}return e.prototype.operationForChild=function(t){if(rt(this.path)){if(this.affectedTree.value!=null)return L(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new yt(t));return new e(dt(),n,this.revert)}else return L(it(this.path)===t,"operationForChild called for unrelated child."),new e(bt(this.path),this.affectedTree,this.revert)},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ep,kP=function(){return Ep||(Ep=new Gn(FD)),Ep},Ge=function(){function e(t,n){n===void 0&&(n=kP()),this.value=t,this.children=n}return e.fromObject=function(t){var n=new e(null);return Yt(t,function(r,o){n=n.set(new yt(r),o)}),n},e.prototype.isEmpty=function(){return this.value===null&&this.children.isEmpty()},e.prototype.findRootMostMatchingPathAndValue=function(t,n){if(this.value!=null&&n(this.value))return{path:dt(),value:this.value};if(rt(t))return null;var r=it(t),o=this.children.get(r);if(o!==null){var u=o.findRootMostMatchingPathAndValue(bt(t),n);if(u!=null){var a=Ot(new yt(r),u.path);return{path:a,value:u.value}}else return null}else return null},e.prototype.findRootMostValueAndPath=function(t){return this.findRootMostMatchingPathAndValue(t,function(){return!0})},e.prototype.subtree=function(t){if(rt(t))return this;var n=it(t),r=this.children.get(n);return r!==null?r.subtree(bt(t)):new e(null)},e.prototype.set=function(t,n){if(rt(t))return new e(n,this.children);var r=it(t),o=this.children.get(r)||new e(null),u=o.set(bt(t),n),a=this.children.insert(r,u);return new e(this.value,a)},e.prototype.remove=function(t){if(rt(t))return this.children.isEmpty()?new e(null):new e(null,this.children);var n=it(t),r=this.children.get(n);if(r){var o=r.remove(bt(t)),u=void 0;return o.isEmpty()?u=this.children.remove(n):u=this.children.insert(n,o),this.value===null&&u.isEmpty()?new e(null):new e(this.value,u)}else return this},e.prototype.get=function(t){if(rt(t))return this.value;var n=it(t),r=this.children.get(n);return r?r.get(bt(t)):null},e.prototype.setTree=function(t,n){if(rt(t))return n;var r=it(t),o=this.children.get(r)||new e(null),u=o.setTree(bt(t),n),a=void 0;return u.isEmpty()?a=this.children.remove(r):a=this.children.insert(r,u),new e(this.value,a)},e.prototype.fold=function(t){return this.fold_(dt(),t)},e.prototype.fold_=function(t,n){var r={};return this.children.inorderTraversal(function(o,u){r[o]=u.fold_(Ot(t,o),n)}),n(t,this.value,r)},e.prototype.findOnPath=function(t,n){return this.findOnPath_(t,dt(),n)},e.prototype.findOnPath_=function(t,n,r){var o=this.value?r(n,this.value):!1;if(o)return o;if(rt(t))return null;var u=it(t),a=this.children.get(u);return a?a.findOnPath_(bt(t),Ot(n,u),r):null},e.prototype.foreachOnPath=function(t,n){return this.foreachOnPath_(t,dt(),n)},e.prototype.foreachOnPath_=function(t,n,r){if(rt(t))return this;this.value&&r(n,this.value);var o=it(t),u=this.children.get(o);return u?u.foreachOnPath_(bt(t),Ot(n,o),r):new e(null)},e.prototype.foreach=function(t){this.foreach_(dt(),t)},e.prototype.foreach_=function(t,n){this.children.inorderTraversal(function(r,o){o.foreach_(Ot(t,r),n)}),this.value&&n(t,this.value)},e.prototype.foreachChild=function(t){this.children.inorderTraversal(function(n,r){r.value&&t(n,r.value)})},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var C0=function(){function e(t,n){this.source=t,this.path=n,this.type=yn.LISTEN_COMPLETE}return e.prototype.operationForChild=function(t){return rt(this.path)?new e(this.source,dt()):new e(this.source,bt(this.path))},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var hc=function(){function e(t,n,r){this.source=t,this.path=n,this.snap=r,this.type=yn.OVERWRITE}return e.prototype.operationForChild=function(t){return rt(this.path)?new e(this.source,dt(),this.snap.getImmediateChild(t)):new e(this.source,bt(this.path),this.snap)},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ip=function(){function e(t,n,r){this.source=t,this.path=n,this.children=r,this.type=yn.MERGE}return e.prototype.operationForChild=function(t){if(rt(this.path)){var n=this.children.subtree(new yt(t));return n.isEmpty()?null:n.value?new hc(this.source,dt(),n.value):new e(this.source,dt(),n)}else return L(it(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new e(this.source,bt(this.path),this.children)},e.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var kr=function(){function e(t,n,r){this.node_=t,this.fullyInitialized_=n,this.filtered_=r}return e.prototype.isFullyInitialized=function(){return this.fullyInitialized_},e.prototype.isFiltered=function(){return this.filtered_},e.prototype.isCompleteForPath=function(t){if(rt(t))return this.isFullyInitialized()&&!this.filtered_;var n=it(t);return this.isCompleteForChild(n)},e.prototype.isCompleteForChild=function(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)},e.prototype.getNode=function(){return this.node_},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ST=function(){function e(t,n){this.eventCache_=t,this.serverCache_=n}return e.prototype.updateEventSnap=function(t,n,r){return new e(new kr(t,n,r),this.serverCache_)},e.prototype.updateServerSnap=function(t,n,r){return new e(this.eventCache_,new kr(t,n,r))},e.prototype.getEventCache=function(){return this.eventCache_},e.prototype.getCompleteEventSnap=function(){return this.eventCache_.isFullyInitialized()?this.eventCache_.getNode():null},e.prototype.getServerCache=function(){return this.serverCache_},e.prototype.getCompleteServerSnap=function(){return this.serverCache_.isFullyInitialized()?this.serverCache_.getNode():null},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var DP=function(){function e(){this.changeMap=new Map}return e.prototype.trackChildChange=function(t){var n=t.type,r=t.childName;L(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),L(r!==".priority","Only non-priority child changes can be tracked.");var o=this.changeMap.get(r);if(o){var u=o.type;if(n==="child_added"&&u==="child_removed")this.changeMap.set(r,wu(r,t.snapshotNode,o.snapshotNode));else if(n==="child_removed"&&u==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&u==="child_changed")this.changeMap.set(r,_u(r,o.oldSnap));else if(n==="child_changed"&&u==="child_added")this.changeMap.set(r,Uo(r,t.snapshotNode));else if(n==="child_changed"&&u==="child_changed")this.changeMap.set(r,wu(r,t.snapshotNode,o.oldSnap));else throw jo("Illegal combination of changes: "+t+" occurred after "+o)}else this.changeMap.set(r,t)},e.prototype.getChanges=function(){return Array.from(this.changeMap.values())},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var PP=function(){function e(){}return e.prototype.getCompleteChild=function(t){return null},e.prototype.getChildAfterChild=function(t,n,r){return null},e}(),R0=new PP,Tp=function(){function e(t,n,r){r===void 0&&(r=null),this.writes_=t,this.viewCache_=n,this.optCompleteServerCache_=r}return e.prototype.getCompleteChild=function(t){var n=this.viewCache_.getEventCache();if(n.isCompleteForChild(t))return n.getNode().getImmediateChild(t);var r=this.optCompleteServerCache_!=null?new kr(this.optCompleteServerCache_,!0,!1):this.viewCache_.getServerCache();return this.writes_.calcCompleteChild(t,r)},e.prototype.getChildAfterChild=function(t,n,r){var o=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:this.viewCache_.getCompleteServerSnap(),u=this.writes_.calcIndexedSlice(o,n,1,r,t);return u.length===0?null:u[0]},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xP=function(){function e(t,n){this.viewCache=t,this.changes=n}return e}(),LP=function(){function e(t){this.filter_=t}return e.prototype.assertIndexed=function(t){L(t.getEventCache().getNode().isIndexed(this.filter_.getIndex()),"Event snap not indexed"),L(t.getServerCache().getNode().isIndexed(this.filter_.getIndex()),"Server snap not indexed")},e.prototype.applyOperation=function(t,n,r,o){var u=new DP,a,h;if(n.type===yn.OVERWRITE){var l=n;l.source.fromUser?a=this.applyUserOverwrite_(t,l.path,l.snap,r,o,u):(L(l.source.fromServer,"Unknown source."),h=l.source.tagged||t.getServerCache().isFiltered()&&!rt(l.path),a=this.applyServerOverwrite_(t,l.path,l.snap,r,o,h,u))}else if(n.type===yn.MERGE){var p=n;p.source.fromUser?a=this.applyUserMerge_(t,p.path,p.children,r,o,u):(L(p.source.fromServer,"Unknown source."),h=p.source.tagged||t.getServerCache().isFiltered(),a=this.applyServerMerge_(t,p.path,p.children,r,o,h,u))}else if(n.type===yn.ACK_USER_WRITE){var v=n;v.revert?a=this.revertUserWrite_(t,v.path,r,o,u):a=this.ackUserWrite_(t,v.path,v.affectedTree,r,o,u)}else if(n.type===yn.LISTEN_COMPLETE)a=this.listenComplete_(t,n.path,r,u);else throw jo("Unknown operation type: "+n.type);var g=u.getChanges();return e.maybeAddValueEvent_(t,a,g),new xP(a,g)},e.maybeAddValueEvent_=function(t,n,r){var o=n.getEventCache();if(o.isFullyInitialized()){var u=o.getNode().isLeafNode()||o.getNode().isEmpty(),a=t.getCompleteEventSnap();(r.length>0||!t.getEventCache().isFullyInitialized()||u&&!o.getNode().equals(a)||!o.getNode().getPriority().equals(a.getPriority()))&&r.push(IT(n.getCompleteEventSnap()))}},e.prototype.generateEventCacheAfterServerEvent_=function(t,n,r,o,u){var a=t.getEventCache();if(r.shadowingWrite(n)!=null)return t;var h=void 0,l=void 0;if(rt(n))if(L(t.getServerCache().isFullyInitialized(),"If change path is empty, we must have complete server data"),t.getServerCache().isFiltered()){var p=t.getCompleteServerSnap(),v=p instanceof Z?p:Z.EMPTY_NODE,g=r.calcCompleteEventChildren(v);h=this.filter_.updateFullNode(t.getEventCache().getNode(),g,u)}else{var m=r.calcCompleteEventCache(t.getCompleteServerSnap());h=this.filter_.updateFullNode(t.getEventCache().getNode(),m,u)}else{var w=it(n);if(w===".priority"){L(Or(n)===1,"Can't have a priority with additional path components");var b=a.getNode();l=t.getServerCache().getNode();var I=r.calcEventCacheAfterServerOverwrite(n,b,l);I!=null?h=this.filter_.updatePriority(b,I):h=a.getNode()}else{var T=bt(n),C=void 0;if(a.isCompleteForChild(w)){l=t.getServerCache().getNode();var F=r.calcEventCacheAfterServerOverwrite(n,a.getNode(),l);F!=null?C=a.getNode().getImmediateChild(w).updateChild(T,F):C=a.getNode().getImmediateChild(w)}else C=r.calcCompleteChild(w,t.getServerCache());C!=null?h=this.filter_.updateChild(a.getNode(),w,C,T,o,u):h=a.getNode()}}return t.updateEventSnap(h,a.isFullyInitialized()||rt(n),this.filter_.filtersNodes())},e.prototype.applyServerOverwrite_=function(t,n,r,o,u,a,h){var l=t.getServerCache(),p,v=a?this.filter_:this.filter_.getIndexedFilter();if(rt(n))p=v.updateFullNode(l.getNode(),r,null);else if(v.filtersNodes()&&!l.isFiltered()){var g=l.getNode().updateChild(n,r);p=v.updateFullNode(l.getNode(),g,null)}else{var m=it(n);if(!l.isCompleteForPath(n)&&Or(n)>1)return t;var w=bt(n),b=l.getNode().getImmediateChild(m),I=b.updateChild(w,r);m===".priority"?p=v.updatePriority(l.getNode(),I):p=v.updateChild(l.getNode(),m,I,w,R0,null)}var T=t.updateServerSnap(p,l.isFullyInitialized()||rt(n),v.filtersNodes()),C=new Tp(o,T,u);return this.generateEventCacheAfterServerEvent_(T,n,o,C,h)},e.prototype.applyUserOverwrite_=function(t,n,r,o,u,a){var h=t.getEventCache(),l,p,v=new Tp(o,t,u);if(rt(n))p=this.filter_.updateFullNode(t.getEventCache().getNode(),r,a),l=t.updateEventSnap(p,!0,this.filter_.filtersNodes());else{var g=it(n);if(g===".priority")p=this.filter_.updatePriority(t.getEventCache().getNode(),r),l=t.updateEventSnap(p,h.isFullyInitialized(),h.isFiltered());else{var m=bt(n),w=h.getNode().getImmediateChild(g),b=void 0;if(rt(m))b=r;else{var I=v.getCompleteChild(g);I!=null?Gv(m)===".priority"&&I.getChild(nT(m)).isEmpty()?b=I:b=I.updateChild(m,r):b=Z.EMPTY_NODE}if(w.equals(b))l=t;else{var T=this.filter_.updateChild(h.getNode(),g,b,m,v,a);l=t.updateEventSnap(T,h.isFullyInitialized(),this.filter_.filtersNodes())}}}return l},e.cacheHasChild_=function(t,n){return t.getEventCache().isCompleteForChild(n)},e.prototype.applyUserMerge_=function(t,n,r,o,u,a){var h=this,l=t;return r.foreach(function(p,v){var g=Ot(n,p);e.cacheHasChild_(t,it(g))&&(l=h.applyUserOverwrite_(l,g,v,o,u,a))}),r.foreach(function(p,v){var g=Ot(n,p);e.cacheHasChild_(t,it(g))||(l=h.applyUserOverwrite_(l,g,v,o,u,a))}),l},e.prototype.applyMerge_=function(t,n){return n.foreach(function(r,o){t=t.updateChild(r,o)}),t},e.prototype.applyServerMerge_=function(t,n,r,o,u,a,h){var l=this;if(t.getServerCache().getNode().isEmpty()&&!t.getServerCache().isFullyInitialized())return t;var p=t,v;rt(n)?v=r:v=new Ge(null).setTree(n,r);var g=t.getServerCache().getNode();return v.children.inorderTraversal(function(m,w){if(g.hasChild(m)){var b=t.getServerCache().getNode().getImmediateChild(m),I=l.applyMerge_(b,w);p=l.applyServerOverwrite_(p,new yt(m),I,o,u,a,h)}}),v.children.inorderTraversal(function(m,w){var b=!t.getServerCache().isCompleteForChild(m)&&w.value==null;if(!g.hasChild(m)&&!b){var I=t.getServerCache().getNode().getImmediateChild(m),T=l.applyMerge_(I,w);p=l.applyServerOverwrite_(p,new yt(m),T,o,u,a,h)}}),p},e.prototype.ackUserWrite_=function(t,n,r,o,u,a){if(o.shadowingWrite(n)!=null)return t;var h=t.getServerCache().isFiltered(),l=t.getServerCache();if(r.value!=null){if(rt(n)&&l.isFullyInitialized()||l.isCompleteForPath(n))return this.applyServerOverwrite_(t,n,l.getNode().getChild(n),o,u,h,a);if(rt(n)){var p=new Ge(null);return l.getNode().forEachChild(Dn,function(g,m){p=p.set(new yt(g),m)}),this.applyServerMerge_(t,n,p,o,u,h,a)}else return t}else{var v=new Ge(null);return r.foreach(function(g,m){var w=Ot(n,g);l.isCompleteForPath(w)&&(v=v.set(g,l.getNode().getChild(w)))}),this.applyServerMerge_(t,n,v,o,u,h,a)}},e.prototype.listenComplete_=function(t,n,r,o){var u=t.getServerCache(),a=t.updateServerSnap(u.getNode(),u.isFullyInitialized()||rt(n),u.isFiltered());return this.generateEventCacheAfterServerEvent_(a,n,r,R0,o)},e.prototype.revertUserWrite_=function(t,n,r,o,u){var a;if(r.shadowingWrite(n)!=null)return t;var h=new Tp(r,t,o),l=t.getEventCache().getNode(),p=void 0;if(rt(n)||it(n)===".priority"){var v=void 0;if(t.getServerCache().isFullyInitialized())v=r.calcCompleteEventCache(t.getCompleteServerSnap());else{var g=t.getServerCache().getNode();L(g instanceof Z,"serverChildren would be complete if leaf node"),v=r.calcCompleteEventChildren(g)}v=v,p=this.filter_.updateFullNode(l,v,u)}else{var m=it(n),w=r.calcCompleteChild(m,t.getServerCache());w==null&&t.getServerCache().isCompleteForChild(m)&&(w=l.getImmediateChild(m)),w!=null?p=this.filter_.updateChild(l,m,w,bt(n),h,u):t.getEventCache().getNode().hasChild(m)?p=this.filter_.updateChild(l,m,Z.EMPTY_NODE,bt(n),h,u):p=l,p.isEmpty()&&t.getServerCache().isFullyInitialized()&&(a=r.calcCompleteEventCache(t.getCompleteServerSnap()),a.isLeafNode()&&(p=this.filter_.updateFullNode(p,a,u)))}return a=t.getServerCache().isFullyInitialized()||r.shadowingWrite(dt())!=null,t.updateEventSnap(p,a,this.filter_.filtersNodes())},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var MP=function(){function e(t){this.query_=t,this.index_=this.query_.getQueryParams().getIndex()}return e}();function FP(e,t,n,r){var o=[],u=[];return t.forEach(function(a){a.type==="child_changed"&&e.index_.indexedValueChanged(a.oldSnap,a.snapshotNode)&&u.push(yP(a.childName,a.snapshotNode))}),js(e,o,"child_removed",t,r,n),js(e,o,"child_added",t,r,n),js(e,o,"child_moved",u,r,n),js(e,o,"child_changed",t,r,n),js(e,o,"value",t,r,n),o}function js(e,t,n,r,o,u){var a=r.filter(function(h){return h.type===n});a.sort(function(h,l){return UP(e,h,l)}),a.forEach(function(h){var l=VP(e,h,u);o.forEach(function(p){p.respondsTo(h.type)&&t.push(p.createEvent(l,e.query_))})})}function VP(e,t,n){return t.type==="value"||t.type==="child_removed"||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}function UP(e,t,n){if(t.childName==null||n.childName==null)throw jo("Should only compare child_ events.");var r=new ct(t.childName,t.snapshotNode),o=new ct(n.childName,n.snapshotNode);return e.index_.compare(r,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var jP=function(){function e(t,n){this.query_=t,this.eventRegistrations_=[];var r=this.query_.getQueryParams(),o=new Yv(r.getIndex()),u=_P(r);this.processor_=new LP(u);var a=n.getServerCache(),h=n.getEventCache(),l=o.updateFullNode(Z.EMPTY_NODE,a.getNode(),null),p=u.updateFullNode(Z.EMPTY_NODE,h.getNode(),null),v=new kr(l,a.isFullyInitialized(),o.filtersNodes()),g=new kr(p,h.isFullyInitialized(),u.filtersNodes());this.viewCache_=new ST(g,v),this.eventGenerator_=new MP(this.query_)}return e.prototype.getQuery=function(){return this.query_},e.prototype.getServerCache=function(){return this.viewCache_.getServerCache().getNode()},e.prototype.getCompleteNode=function(){return this.viewCache_.getCompleteEventSnap()},e.prototype.getCompleteServerCache=function(t){var n=this.viewCache_.getCompleteServerSnap();return n&&(this.query_.getQueryParams().loadsAllData()||!rt(t)&&!n.getImmediateChild(it(t)).isEmpty())?n.getChild(t):null},e.prototype.isEmpty=function(){return this.eventRegistrations_.length===0},e.prototype.addEventRegistration=function(t){this.eventRegistrations_.push(t)},e.prototype.removeEventRegistration=function(t,n){var r=[];if(n){L(t==null,"A cancel should cancel all event registrations.");var o=this.query_.path;this.eventRegistrations_.forEach(function(l){var p=l.createCancelEvent(n,o);p&&r.push(p)})}if(t){for(var u=[],a=0;a<this.eventRegistrations_.length;++a){var h=this.eventRegistrations_[a];if(!h.matches(t))u.push(h);else if(t.hasAnyCallback()){u=u.concat(this.eventRegistrations_.slice(a+1));break}}this.eventRegistrations_=u}else this.eventRegistrations_=[];return r},e.prototype.applyOperation=function(t,n,r){t.type===yn.MERGE&&t.source.queryId!==null&&(L(this.viewCache_.getCompleteServerSnap(),"We should always have a full cache before handling merges"),L(this.viewCache_.getCompleteEventSnap(),"Missing event cache, even though we have a server cache"));var o=this.viewCache_,u=this.processor_.applyOperation(o,t,n,r);return this.processor_.assertIndexed(u.viewCache),L(u.viewCache.getServerCache().isFullyInitialized()||!o.getServerCache().isFullyInitialized(),"Once a server snap is complete, it should never go back"),this.viewCache_=u.viewCache,this.generateEventsForChanges_(u.changes,u.viewCache.getEventCache().getNode(),null)},e.prototype.getInitialEvents=function(t){var n=this.viewCache_.getEventCache(),r=[];if(!n.getNode().isLeafNode()){var o=n.getNode();o.forEachChild(Et,function(u,a){r.push(Uo(u,a))})}return n.isFullyInitialized()&&r.push(IT(n.getNode())),this.generateEventsForChanges_(r,n.getNode(),t)},e.prototype.generateEventsForChanges_=function(t,n,r){var o=r?[r]:this.eventRegistrations_;return FP(this.eventGenerator_,t,n,o)},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ec,md=function(){function e(){this.views=new Map}return Object.defineProperty(e,"__referenceConstructor",{get:function(){return L(ec,"Reference.ts has not been loaded"),ec},set:function(t){L(!ec,"__referenceConstructor has already been defined"),ec=t},enumerable:!1,configurable:!0}),e.prototype.isEmpty=function(){return this.views.size===0},e.prototype.applyOperation=function(t,n,r){var o,u,a=t.source.queryId;if(a!==null){var h=this.views.get(a);return L(h!=null,"SyncTree gave us an op for an invalid query."),h.applyOperation(t,n,r)}else{var l=[];try{for(var p=Oe(this.views.values()),v=p.next();!v.done;v=p.next()){var h=v.value;l=l.concat(h.applyOperation(t,n,r))}}catch(g){o={error:g}}finally{try{v&&!v.done&&(u=p.return)&&u.call(p)}finally{if(o)throw o.error}}return l}},e.prototype.getView=function(t,n,r,o){var u=t.queryIdentifier(),a=this.views.get(u);if(!a){var h=n.calcCompleteEventCache(o?r:null),l=!1;h?l=!0:r instanceof Z?(h=n.calcCompleteEventChildren(r),l=!1):(h=Z.EMPTY_NODE,l=!1);var p=new ST(new kr(h,l,!1),new kr(r,o,!1));return new jP(t,p)}return a},e.prototype.addEventRegistration=function(t,n,r,o,u){var a=this.getView(t,r,o,u);return this.views.has(t.queryIdentifier())||this.views.set(t.queryIdentifier(),a),a.addEventRegistration(n),a.getInitialEvents(n)},e.prototype.removeEventRegistration=function(t,n,r){var o,u,a=t.queryIdentifier(),h=[],l=[],p=this.hasCompleteView();if(a==="default")try{for(var v=Oe(this.views.entries()),g=v.next();!g.done;g=v.next()){var m=Ys(g.value,2),w=m[0],b=m[1];l=l.concat(b.removeEventRegistration(n,r)),b.isEmpty()&&(this.views.delete(w),b.getQuery().getQueryParams().loadsAllData()||h.push(b.getQuery()))}}catch(I){o={error:I}}finally{try{g&&!g.done&&(u=v.return)&&u.call(v)}finally{if(o)throw o.error}}else{var b=this.views.get(a);b&&(l=l.concat(b.removeEventRegistration(n,r)),b.isEmpty()&&(this.views.delete(a),b.getQuery().getQueryParams().loadsAllData()||h.push(b.getQuery())))}return p&&!this.hasCompleteView()&&h.push(new e.__referenceConstructor(t.repo,t.path)),{removed:h,events:l}},e.prototype.getQueryViews=function(){var t,n,r=[];try{for(var o=Oe(this.views.values()),u=o.next();!u.done;u=o.next()){var a=u.value;a.getQuery().getQueryParams().loadsAllData()||r.push(a)}}catch(h){t={error:h}}finally{try{u&&!u.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return r},e.prototype.getCompleteServerCache=function(t){var n,r,o=null;try{for(var u=Oe(this.views.values()),a=u.next();!a.done;a=u.next()){var h=a.value;o=o||h.getCompleteServerCache(t)}}catch(l){n={error:l}}finally{try{a&&!a.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}return o},e.prototype.viewForQuery=function(t){var n=t.getQueryParams();if(n.loadsAllData())return this.getCompleteView();var r=t.queryIdentifier();return this.views.get(r)},e.prototype.viewExistsForQuery=function(t){return this.viewForQuery(t)!=null},e.prototype.hasCompleteView=function(){return this.getCompleteView()!=null},e.prototype.getCompleteView=function(){var t,n;try{for(var r=Oe(this.views.values()),o=r.next();!o.done;o=r.next()){var u=o.value;if(u.getQuery().getQueryParams().loadsAllData())return u}}catch(a){t={error:a}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}return null},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $n=function(){function e(t){this.writeTree_=t}return e.empty=function(){return new e(new Ge(null))},e}();function Gs(e,t,n){if(rt(t))return new $n(new Ge(n));var r=e.writeTree_.findRootMostValueAndPath(t);if(r!=null){var o=r.path,u=r.value,a=we(o,t);return u=u.updateChild(a,n),new $n(e.writeTree_.set(o,u))}else{var h=new Ge(n),l=e.writeTree_.setTree(t,h);return new $n(l)}}function Sp(e,t,n){var r=e;return Yt(n,function(o,u){r=Gs(r,Ot(t,o),u)}),r}function O0(e,t){if(rt(t))return $n.empty();var n=e.writeTree_.setTree(t,new Ge(null));return new $n(n)}function Np(e,t){return dr(e,t)!=null}function dr(e,t){var n=e.writeTree_.findRootMostValueAndPath(t);return n!=null?e.writeTree_.get(n.path).getChild(we(n.path,t)):null}function k0(e){var t=[],n=e.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(Et,function(r,o){t.push(new ct(r,o))}):e.writeTree_.children.inorderTraversal(function(r,o){o.value!=null&&t.push(new ct(r,o.value))}),t}function fr(e,t){if(rt(t))return e;var n=dr(e,t);return n!=null?new $n(new Ge(n)):new $n(e.writeTree_.subtree(t))}function Ap(e){return e.writeTree_.isEmpty()}function co(e,t){return NT(dt(),e.writeTree_,t)}function NT(e,t,n){if(t.value!=null)return n.updateChild(e,t.value);var r=null;return t.children.inorderTraversal(function(o,u){o===".priority"?(L(u.value!==null,"Priority writes must always be leaf nodes"),r=u.value):n=NT(Ot(e,o),u,n)}),!n.getChild(e).isEmpty()&&r!==null&&(n=n.updateChild(Ot(e,".priority"),r)),n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var BP=function(){function e(){this.visibleWrites_=$n.empty(),this.allWrites_=[],this.lastWriteId_=-1}return e.prototype.childWrites=function(t){return new qP(t,this)},e.prototype.addOverwrite=function(t,n,r,o){L(r>this.lastWriteId_,"Stacking an older write on top of newer ones"),o===void 0&&(o=!0),this.allWrites_.push({path:t,snap:n,writeId:r,visible:o}),o&&(this.visibleWrites_=Gs(this.visibleWrites_,t,n)),this.lastWriteId_=r},e.prototype.addMerge=function(t,n,r){L(r>this.lastWriteId_,"Stacking an older merge on top of newer ones"),this.allWrites_.push({path:t,children:n,writeId:r,visible:!0}),this.visibleWrites_=Sp(this.visibleWrites_,t,n),this.lastWriteId_=r},e.prototype.getWrite=function(t){for(var n=0;n<this.allWrites_.length;n++){var r=this.allWrites_[n];if(r.writeId===t)return r}return null},e.prototype.removeWrite=function(t){var n=this,r=this.allWrites_.findIndex(function(v){return v.writeId===t});L(r>=0,"removeWrite called with nonexistent writeId.");var o=this.allWrites_[r];this.allWrites_.splice(r,1);for(var u=o.visible,a=!1,h=this.allWrites_.length-1;u&&h>=0;){var l=this.allWrites_[h];l.visible&&(h>=r&&this.recordContainsPath_(l,o.path)?u=!1:nn(o.path,l.path)&&(a=!0)),h--}if(u){if(a)return this.resetTree_(),!0;if(o.snap)this.visibleWrites_=O0(this.visibleWrites_,o.path);else{var p=o.children;Yt(p,function(v){n.visibleWrites_=O0(n.visibleWrites_,Ot(o.path,v))})}return!0}else return!1},e.prototype.getCompleteWriteData=function(t){return dr(this.visibleWrites_,t)},e.prototype.calcCompleteEventCache=function(t,n,r,o){if(!r&&!o){var u=dr(this.visibleWrites_,t);if(u!=null)return u;var a=fr(this.visibleWrites_,t);if(Ap(a))return n;if(n==null&&!Np(a,dt()))return null;var h=n||Z.EMPTY_NODE;return co(a,h)}else{var l=fr(this.visibleWrites_,t);if(!o&&Ap(l))return n;if(!o&&n==null&&!Np(l,dt()))return null;var p=function(m){return(m.visible||o)&&(!r||!~r.indexOf(m.writeId))&&(nn(m.path,t)||nn(t,m.path))},v=e.layerTree_(this.allWrites_,p,t),h=n||Z.EMPTY_NODE;return co(v,h)}},e.prototype.calcCompleteEventChildren=function(t,n){var r=Z.EMPTY_NODE,o=dr(this.visibleWrites_,t);if(o)return o.isLeafNode()||o.forEachChild(Et,function(h,l){r=r.updateImmediateChild(h,l)}),r;if(n){var u=fr(this.visibleWrites_,t);return n.forEachChild(Et,function(h,l){var p=co(fr(u,new yt(h)),l);r=r.updateImmediateChild(h,p)}),k0(u).forEach(function(h){r=r.updateImmediateChild(h.name,h.node)}),r}else{var a=fr(this.visibleWrites_,t);return k0(a).forEach(function(h){r=r.updateImmediateChild(h.name,h.node)}),r}},e.prototype.calcEventCacheAfterServerOverwrite=function(t,n,r,o){L(r||o,"Either existingEventSnap or existingServerSnap must exist");var u=Ot(t,n);if(Np(this.visibleWrites_,u))return null;var a=fr(this.visibleWrites_,u);return Ap(a)?o.getChild(n):co(a,o.getChild(n))},e.prototype.calcCompleteChild=function(t,n,r){var o=Ot(t,n),u=dr(this.visibleWrites_,o);if(u!=null)return u;if(r.isCompleteForChild(n)){var a=fr(this.visibleWrites_,o);return co(a,r.getNode().getImmediateChild(n))}else return null},e.prototype.shadowingWrite=function(t){return dr(this.visibleWrites_,t)},e.prototype.calcIndexedSlice=function(t,n,r,o,u,a){var h,l=fr(this.visibleWrites_,t),p=dr(l,dt());if(p!=null)h=p;else if(n!=null)h=co(l,n);else return[];if(h=h.withIndex(a),!h.isEmpty()&&!h.isLeafNode()){for(var v=[],g=a.getCompare(),m=u?h.getReverseIteratorFrom(r,a):h.getIteratorFrom(r,a),w=m.getNext();w&&v.length<o;)g(w,r)!==0&&v.push(w),w=m.getNext();return v}else return[]},e.prototype.recordContainsPath_=function(t,n){if(t.snap)return nn(t.path,n);for(var r in t.children)if(t.children.hasOwnProperty(r)&&nn(Ot(t.path,r),n))return!0;return!1},e.prototype.resetTree_=function(){this.visibleWrites_=e.layerTree_(this.allWrites_,e.DefaultFilter_,dt()),this.allWrites_.length>0?this.lastWriteId_=this.allWrites_[this.allWrites_.length-1].writeId:this.lastWriteId_=-1},e.DefaultFilter_=function(t){return t.visible},e.layerTree_=function(t,n,r){for(var o=$n.empty(),u=0;u<t.length;++u){var a=t[u];if(n(a)){var h=a.path,l=void 0;if(a.snap)nn(r,h)?(l=we(r,h),o=Gs(o,l,a.snap)):nn(h,r)&&(l=we(h,r),o=Gs(o,dt(),a.snap.getChild(l)));else if(a.children){if(nn(r,h))l=we(r,h),o=Sp(o,l,a.children);else if(nn(h,r))if(l=we(h,r),rt(l))o=Sp(o,dt(),a.children);else{var p=vn(a.children,it(l));if(p){var v=p.getChild(bt(l));o=Gs(o,dt(),v)}}}else throw jo("WriteRecord should have .snap or .children")}}return o},e}(),qP=function(){function e(t,n){this.treePath_=t,this.writeTree_=n}return e.prototype.calcCompleteEventCache=function(t,n,r){return this.writeTree_.calcCompleteEventCache(this.treePath_,t,n,r)},e.prototype.calcCompleteEventChildren=function(t){return this.writeTree_.calcCompleteEventChildren(this.treePath_,t)},e.prototype.calcEventCacheAfterServerOverwrite=function(t,n,r){return this.writeTree_.calcEventCacheAfterServerOverwrite(this.treePath_,t,n,r)},e.prototype.shadowingWrite=function(t){return this.writeTree_.shadowingWrite(Ot(this.treePath_,t))},e.prototype.calcIndexedSlice=function(t,n,r,o,u){return this.writeTree_.calcIndexedSlice(this.treePath_,t,n,r,o,u)},e.prototype.calcCompleteChild=function(t,n){return this.writeTree_.calcCompleteChild(this.treePath_,t,n)},e.prototype.child=function(t){return new e(Ot(this.treePath_,t),this.writeTree_)},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var D0=function(){function e(t){this.listenProvider_=t,this.syncPointTree_=new Ge(null),this.pendingWriteTree_=new BP,this.tagToQueryMap=new Map,this.queryToTagMap=new Map}return e.prototype.applyUserOverwrite=function(t,n,r,o){return this.pendingWriteTree_.addOverwrite(t,n,r,o),o?this.applyOperationToSyncPoints_(new hc(gd(),t,n)):[]},e.prototype.applyUserMerge=function(t,n,r){this.pendingWriteTree_.addMerge(t,n,r);var o=Ge.fromObject(n);return this.applyOperationToSyncPoints_(new Ip(gd(),t,o))},e.prototype.ackUserWrite=function(t,n){n===void 0&&(n=!1);var r=this.pendingWriteTree_.getWrite(t),o=this.pendingWriteTree_.removeWrite(t);if(o){var u=new Ge(null);return r.snap!=null?u=u.set(dt(),!0):Yt(r.children,function(a){u=u.set(new yt(a),!0)}),this.applyOperationToSyncPoints_(new OP(r.path,u,n))}else return[]},e.prototype.applyServerOverwrite=function(t,n){return this.applyOperationToSyncPoints_(new hc(wp(),t,n))},e.prototype.applyServerMerge=function(t,n){var r=Ge.fromObject(n);return this.applyOperationToSyncPoints_(new Ip(wp(),t,r))},e.prototype.applyListenComplete=function(t){return this.applyOperationToSyncPoints_(new C0(wp(),t))},e.prototype.applyTaggedQueryOverwrite=function(t,n,r){var o=this.queryKeyForTag_(r);if(o!=null){var u=e.parseQueryKey_(o),a=u.path,h=u.queryId,l=we(a,t),p=new hc(bp(h),l,n);return this.applyTaggedOperation_(a,p)}else return[]},e.prototype.applyTaggedQueryMerge=function(t,n,r){var o=this.queryKeyForTag_(r);if(o){var u=e.parseQueryKey_(o),a=u.path,h=u.queryId,l=we(a,t),p=Ge.fromObject(n),v=new Ip(bp(h),l,p);return this.applyTaggedOperation_(a,v)}else return[]},e.prototype.applyTaggedListenComplete=function(t,n){var r=this.queryKeyForTag_(n);if(r){var o=e.parseQueryKey_(r),u=o.path,a=o.queryId,h=we(u,t),l=new C0(bp(a),h);return this.applyTaggedOperation_(u,l)}else return[]},e.prototype.addEventRegistration=function(t,n){var r=t.path,o=null,u=!1;this.syncPointTree_.foreachOnPath(r,function(I,T){var C=we(I,r);o=o||T.getCompleteServerCache(C),u=u||T.hasCompleteView()});var a=this.syncPointTree_.get(r);a?(u=u||a.hasCompleteView(),o=o||a.getCompleteServerCache(dt())):(a=new md,this.syncPointTree_=this.syncPointTree_.set(r,a));var h;if(o!=null)h=!0;else{h=!1,o=Z.EMPTY_NODE;var l=this.syncPointTree_.subtree(r);l.foreachChild(function(I,T){var C=T.getCompleteServerCache(dt());C&&(o=o.updateImmediateChild(I,C))})}var p=a.viewExistsForQuery(t);if(!p&&!t.getQueryParams().loadsAllData()){var v=e.makeQueryKey_(t);L(!this.queryToTagMap.has(v),"View does not exist, but we have a tag");var g=e.getNextQueryTag_();this.queryToTagMap.set(v,g),this.tagToQueryMap.set(g,v)}var m=this.pendingWriteTree_.childWrites(r),w=a.addEventRegistration(t,n,m,o,h);if(!p&&!u){var b=a.viewForQuery(t);w=w.concat(this.setupListener_(t,b))}return w},e.prototype.removeEventRegistration=function(t,n,r){var o=this,u=t.path,a=this.syncPointTree_.get(u),h=[];if(a&&(t.queryIdentifier()==="default"||a.viewExistsForQuery(t))){var l=a.removeEventRegistration(t,n,r);a.isEmpty()&&(this.syncPointTree_=this.syncPointTree_.remove(u));var p=l.removed;h=l.events;var v=p.findIndex(function(M){return M.getQueryParams().loadsAllData()})!==-1,g=this.syncPointTree_.findOnPath(u,function(M,$){return $.hasCompleteView()});if(v&&!g){var m=this.syncPointTree_.subtree(u);if(!m.isEmpty())for(var w=this.collectDistinctViewsForSubTree_(m),b=0;b<w.length;++b){var I=w[b],T=I.getQuery(),C=this.createListenerForView_(I);this.listenProvider_.startListening(e.queryForListening_(T),this.tagForQuery_(T),C.hashFn,C.onComplete)}}if(!g&&p.length>0&&!r)if(v){var F=null;this.listenProvider_.stopListening(e.queryForListening_(t),F)}else p.forEach(function(M){var $=o.queryToTagMap.get(e.makeQueryKey_(M));o.listenProvider_.stopListening(e.queryForListening_(M),$)});this.removeTags_(p)}return h},e.prototype.calcCompleteEventCache=function(t,n){var r=!0,o=this.pendingWriteTree_,u=this.syncPointTree_.findOnPath(t,function(a,h){var l=we(a,t),p=h.getCompleteServerCache(l);if(p)return p});return o.calcCompleteEventCache(t,u,n,r)},e.prototype.getServerValue=function(t){var n=t.path,r=null;this.syncPointTree_.foreachOnPath(n,function(p,v){var g=we(p,n);r=r||v.getCompleteServerCache(g)});var o=this.syncPointTree_.get(n);o?r=r||o.getCompleteServerCache(dt()):(o=new md,this.syncPointTree_=this.syncPointTree_.set(n,o));var u=r!=null,a=u?new kr(r,!0,!1):null,h=this.pendingWriteTree_.childWrites(t.path),l=o.getView(t,h,u?a.getNode():Z.EMPTY_NODE,u);return l.getCompleteNode()},e.prototype.collectDistinctViewsForSubTree_=function(t){return t.fold(function(n,r,o){if(r&&r.hasCompleteView()){var u=r.getCompleteView();return[u]}else{var a=[];return r&&(a=r.getQueryViews()),Yt(o,function(h,l){a=a.concat(l)}),a}})},e.prototype.removeTags_=function(t){for(var n=0;n<t.length;++n){var r=t[n];if(!r.getQueryParams().loadsAllData()){var o=e.makeQueryKey_(r),u=this.queryToTagMap.get(o);this.queryToTagMap.delete(o),this.tagToQueryMap.delete(u)}}},e.queryForListening_=function(t){return t.getQueryParams().loadsAllData()&&!t.getQueryParams().isDefault()?t.getRef():t},e.prototype.setupListener_=function(t,n){var r=t.path,o=this.tagForQuery_(t),u=this.createListenerForView_(n),a=this.listenProvider_.startListening(e.queryForListening_(t),o,u.hashFn,u.onComplete),h=this.syncPointTree_.subtree(r);if(o)L(!h.value.hasCompleteView(),"If we're adding a query, it shouldn't be shadowed");else for(var l=h.fold(function(g,m,w){if(!rt(g)&&m&&m.hasCompleteView())return[m.getCompleteView().getQuery()];var b=[];return m&&(b=b.concat(m.getQueryViews().map(function(I){return I.getQuery()}))),Yt(w,function(I,T){b=b.concat(T)}),b}),p=0;p<l.length;++p){var v=l[p];this.listenProvider_.stopListening(e.queryForListening_(v),this.tagForQuery_(v))}return a},e.prototype.createListenerForView_=function(t){var n=this,r=t.getQuery(),o=this.tagForQuery_(r);return{hashFn:function(){var u=t.getServerCache()||Z.EMPTY_NODE;return u.hash()},onComplete:function(u){if(u==="ok")return o?n.applyTaggedListenComplete(r.path,o):n.applyListenComplete(r.path);var a=jD(u,r);return n.removeEventRegistration(r,null,a)}}},e.makeQueryKey_=function(t){return t.path.toString()+"$"+t.queryIdentifier()},e.parseQueryKey_=function(t){var n=t.indexOf("$");return L(n!==-1&&n<t.length-1,"Bad queryKey."),{queryId:t.substr(n+1),path:new yt(t.substr(0,n))}},e.prototype.queryKeyForTag_=function(t){return this.tagToQueryMap.get(t)},e.prototype.tagForQuery_=function(t){var n=e.makeQueryKey_(t);return this.queryToTagMap.get(n)},e.getNextQueryTag_=function(){return e.nextQueryTag_++},e.prototype.applyTaggedOperation_=function(t,n){var r=this.syncPointTree_.get(t);L(r,"Missing sync point for query tag that we're tracking");var o=this.pendingWriteTree_.childWrites(t);return r.applyOperation(n,o,null)},e.prototype.applyOperationToSyncPoints_=function(t){return this.applyOperationHelper_(t,this.syncPointTree_,null,this.pendingWriteTree_.childWrites(dt()))},e.prototype.applyOperationHelper_=function(t,n,r,o){if(rt(t.path))return this.applyOperationDescendantsHelper_(t,n,r,o);var u=n.get(dt());r==null&&u!=null&&(r=u.getCompleteServerCache(dt()));var a=[],h=it(t.path),l=t.operationForChild(h),p=n.children.get(h);if(p&&l){var v=r?r.getImmediateChild(h):null,g=o.child(h);a=a.concat(this.applyOperationHelper_(l,p,v,g))}return u&&(a=a.concat(u.applyOperation(t,o,r))),a},e.prototype.applyOperationDescendantsHelper_=function(t,n,r,o){var u=this,a=n.get(dt());r==null&&a!=null&&(r=a.getCompleteServerCache(dt()));var h=[];return n.children.inorderTraversal(function(l,p){var v=r?r.getImmediateChild(l):null,g=o.child(l),m=t.operationForChild(l);m&&(h=h.concat(u.applyOperationDescendantsHelper_(m,p,v,g)))}),a&&(h=h.concat(a.applyOperation(t,o,r))),h},e.nextQueryTag_=1,e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var WP=function(){function e(){this.rootNode_=Z.EMPTY_NODE}return e.prototype.getNode=function(t){return this.rootNode_.getChild(t)},e.prototype.updateSnapshot=function(t,n){this.rootNode_=this.rootNode_.updateChild(t,n)},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var GP=function(){function e(){this.counters_={}}return e.prototype.incrementCounter=function(t,n){n===void 0&&(n=1),xe(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=n},e.prototype.get=function(){return K0(this.counters_)},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qc=function(){function e(){}return e.getCollection=function(t){var n=t.toString();return this.collections_[n]||(this.collections_[n]=new GP),this.collections_[n]},e.getOrCreateReporter=function(t,n){var r=t.toString();return this.reporters_[r]||(this.reporters_[r]=n()),this.reporters_[r]},e.collections_={},e.reporters_={},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var AT=function(){function e(t){this.collection_=t,this.last_=null}return e.prototype.get=function(){var t=this.collection_.get(),n=Ir({},t);return this.last_&&Yt(this.last_,function(r,o){n[r]=n[r]-o}),this.last_=t,n},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var P0=10*1e3,HP=30*1e3,zP=5*60*1e3,QP=function(){function e(t,n){this.server_=n,this.statsToReport_={},this.statsListener_=new AT(t);var r=P0+(HP-P0)*Math.random();Ks(this.reportStats_.bind(this),Math.floor(r))}return e.prototype.includeStat=function(t){this.statsToReport_[t]=!0},e.prototype.reportStats_=function(){var t=this,n=this.statsListener_.get(),r={},o=!1;Yt(n,function(u,a){a>0&&xe(t.statsToReport_,u)&&(r[u]=a,o=!0)}),o&&this.server_.reportStats(r),Ks(this.reportStats_.bind(this),Math.floor(Math.random()*2*zP))},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var KP=function(){function e(){this.eventLists_=[],this.recursionDepth_=0}return e}();function Wc(e,t){for(var n=null,r=0;r<t.length;r++){var o=t[r],u=o.getPath();n!==null&&!Hv(u,n.path)&&(e.eventLists_.push(n),n=null),n===null&&(n={events:[],path:u}),n.events.push(o)}n&&e.eventLists_.push(n)}function Cp(e,t,n){Wc(e,n),CT(e,function(r){return Hv(r,t)})}function en(e,t,n){Wc(e,n),CT(e,function(r){return nn(r,t)||nn(t,r)})}function CT(e,t){e.recursionDepth_++;for(var n=!0,r=0;r<e.eventLists_.length;r++){var o=e.eventLists_[r];if(o){var u=o.path;t(u)?(YP(e.eventLists_[r]),e.eventLists_[r]=null):n=!1}}n&&(e.eventLists_=[]),e.recursionDepth_--}function YP(e){for(var t=0;t<e.events.length;t++){var n=e.events[t];if(n!==null){e.events[t]=null;var r=n.getEventRunner();yi&&re("event: "+n.toString()),yo(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var RT=function(){function e(t){this.allowedEvents_=t,this.listeners_={},L(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return e.prototype.trigger=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];if(Array.isArray(this.listeners_[t]))for(var o=Ti(this.listeners_[t]),u=0;u<o.length;u++)o[u].callback.apply(o[u].context,n)},e.prototype.on=function(t,n,r){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:n,context:r});var o=this.getInitialEvent(t);o&&n.apply(r,o)},e.prototype.off=function(t,n,r){this.validateEventType_(t);for(var o=this.listeners_[t]||[],u=0;u<o.length;u++)if(o[u].callback===n&&(!r||r===o[u].context)){o.splice(u,1);return}},e.prototype.validateEventType_=function(t){L(this.allowedEvents_.find(function(n){return n===t}),"Unknown event: "+t)},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $P=function(e){U(t,e);function t(){var n=e.call(this,["visible"])||this,r,o;return typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(o="visibilitychange",r="hidden"):typeof document.mozHidden<"u"?(o="mozvisibilitychange",r="mozHidden"):typeof document.msHidden<"u"?(o="msvisibilitychange",r="msHidden"):typeof document.webkitHidden<"u"&&(o="webkitvisibilitychange",r="webkitHidden")),n.visible_=!0,o&&document.addEventListener(o,function(){var u=!document[r];u!==n.visible_&&(n.visible_=u,n.trigger("visible",u))},!1),n}return t.getInstance=function(){return new t},t.prototype.getInitialEvent=function(n){return L(n==="visible","Unknown event type: "+n),[this.visible_]},t}(RT);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var x0=function(e){U(t,e);function t(){var n=e.call(this,["online"])||this;return n.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Ed()&&(window.addEventListener("online",function(){n.online_||(n.online_=!0,n.trigger("online",!0))},!1),window.addEventListener("offline",function(){n.online_&&(n.online_=!1,n.trigger("online",!1))},!1)),n}return t.getInstance=function(){return new t},t.prototype.getInitialEvent=function(n){return L(n==="online","Unknown event type: "+n),[this.online_]},t.prototype.currentlyOnline=function(){return this.online_},t}(RT);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var XP=function(){function e(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return e.prototype.closeAfter=function(t,n){this.closeAfterResponse=t,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},e.prototype.handleResponse=function(t,n){var r=this;this.pendingResponses[t]=n;for(var o=function(){var h=u.pendingResponses[u.currentResponseNum];delete u.pendingResponses[u.currentResponseNum];for(var l=function(v){h[v]&&yo(function(){r.onMessage_(h[v])})},p=0;p<h.length;++p)l(p);if(u.currentResponseNum===u.closeAfterResponse)return u.onClose&&(u.onClose(),u.onClose=null),"break";u.currentResponseNum++},u=this;this.pendingResponses[this.currentResponseNum];){var a=o();if(a==="break")break}},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var L0="start",JP="close",ZP="pLPCommand",tx="pRTLPCB",OT="id",kT="pw",DT="ser",ex="cb",nx="seg",rx="ts",ix="d",ox="dframe",PT=1870,xT=30,sx=PT-xT,ux=25e3,ax=3e4,Jv=function(){function e(t,n,r,o,u){this.connId=t,this.repoInfo=n,this.applicationId=r,this.transportSessionId=o,this.lastSessionId=u,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Bu(t),this.stats_=qc.getCollection(n),this.urlFn=function(a){return n.connectionURL(hT,a)}}return e.prototype.open=function(t,n){var r=this;this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new XP(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(function(){r.log_("Timed out trying to connect."),r.onClosed_(),r.connectTimeoutTimer_=null},Math.floor(ax)),MD(function(){if(!r.isClosed_){r.scriptTagHolder=new cx(function(){for(var a=[],h=0;h<arguments.length;h++)a[h]=arguments[h];var l=Ys(a,5),p=l[0],v=l[1],g=l[2];if(l[3],l[4],r.incrementIncomingBytes_(a),!!r.scriptTagHolder)if(r.connectTimeoutTimer_&&(clearTimeout(r.connectTimeoutTimer_),r.connectTimeoutTimer_=null),r.everConnected_=!0,p===L0)r.id=v,r.password=g;else if(p===JP)v?(r.scriptTagHolder.sendNewPolls=!1,r.myPacketOrderer.closeAfter(v,function(){r.onClosed_()})):r.onClosed_();else throw new Error("Unrecognized command received: "+p)},function(){for(var a=[],h=0;h<arguments.length;h++)a[h]=arguments[h];var l=Ys(a,2),p=l[0],v=l[1];r.incrementIncomingBytes_(a),r.myPacketOrderer.handleResponse(p,v)},function(){r.onClosed_()},r.urlFn);var o={};o[L0]="t",o[DT]=Math.floor(Math.random()*1e8),r.scriptTagHolder.uniqueCallbackIdentifier&&(o[ex]=r.scriptTagHolder.uniqueCallbackIdentifier),o[rT]=zv,r.transportSessionId&&(o[iT]=r.transportSessionId),r.lastSessionId&&(o[aT]=r.lastSessionId),r.applicationId&&(o[zD]=r.applicationId),typeof location<"u"&&location.hostname&&uT.test(location.hostname)&&(o[oT]=sT);var u=r.urlFn(o);r.log_("Connecting via long-poll to "+u),r.scriptTagHolder.addTag(u,function(){})}})},e.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},e.forceAllow=function(){e.forceAllow_=!0},e.forceDisallow=function(){e.forceDisallow_=!0},e.isAvailable=function(){return e.forceAllow_?!0:!e.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!VD()&&!UD()},e.prototype.markConnectionHealthy=function(){},e.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},e.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},e.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},e.prototype.send=function(t){var n=Qt(t);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);for(var r=YA(n),o=ZI(r,sx),u=0;u<o.length;u++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,o.length,o[u]),this.curSegmentNum++},e.prototype.addDisconnectPingFrame=function(t,n){this.myDisconnFrame=document.createElement("iframe");var r={};r[ox]="t",r[OT]=t,r[kT]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)},e.prototype.incrementIncomingBytes_=function(t){var n=Qt(t).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)},e}(),cx=function(){function e(t,n,r,o){this.onDisconnect=r,this.urlFn=o,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=$I(),window[ZP+this.uniqueCallbackIdentifier]=t,window[tx+this.uniqueCallbackIdentifier]=n,this.myIFrame=e.createIFrame_();var u="";if(this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"){var a=document.domain;u='<script>document.domain="'+a+'";<\/script>'}var h="<html><body>"+u+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(h),this.myIFrame.doc.close()}catch(l){re("frame writing exception"),l.stack&&re(l.stack),re(l)}}}return e.createIFrame_=function(){var t=document.createElement("iframe");if(t.style.display="none",document.body){document.body.appendChild(t);try{var n=t.contentWindow.document;n||re("No IE domain setting required")}catch{var r=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t},e.prototype.close=function(){var t=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(function(){t.myIFrame!==null&&(document.body.removeChild(t.myIFrame),t.myIFrame=null)},Math.floor(0)));var n=this.onDisconnect;n&&(this.onDisconnect=null,n())},e.prototype.startLongPoll=function(t,n){for(this.myID=t,this.myPW=n,this.alive=!0;this.newRequest_(););},e.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var t={};t[OT]=this.myID,t[kT]=this.myPW,t[DT]=this.currentSerial;for(var n=this.urlFn(t),r="",o=0;this.pendingSegs.length>0;){var u=this.pendingSegs[0];if(u.d.length+xT+r.length<=PT){var a=this.pendingSegs.shift();r=r+"&"+nx+o+"="+a.seg+"&"+rx+o+"="+a.ts+"&"+ix+o+"="+a.d,o++}else break}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1},e.prototype.enqueueSegment=function(t,n,r){this.pendingSegs.push({seg:t,ts:n,d:r}),this.alive&&this.newRequest_()},e.prototype.addLongPollTag_=function(t,n){var r=this;this.outstandingRequests.add(n);var o=function(){r.outstandingRequests.delete(n),r.newRequest_()},u=setTimeout(o,Math.floor(ux)),a=function(){clearTimeout(u),o()};this.addTag(t,a)},e.prototype.addTag=function(t,n){var r=this;setTimeout(function(){try{if(!r.sendNewPolls)return;var o=r.myIFrame.doc.createElement("script");o.type="text/javascript",o.async=!0,o.src=t,o.onload=o.onreadystatechange=function(){var u=o.readyState;(!u||u==="loaded"||u==="complete")&&(o.onload=o.onreadystatechange=null,o.parentNode&&o.parentNode.removeChild(o),n())},o.onerror=function(){re("Long-poll script failed to load: "+t),r.sendNewPolls=!1,r.close()},r.myIFrame.doc.body.appendChild(o)}catch{}},Math.floor(1))},e}();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var LT="";function MT(e){LT=e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var hx=16384,lx=45e3,Gc=null;typeof MozWebSocket<"u"?Gc=MozWebSocket:typeof WebSocket<"u"&&(Gc=WebSocket);var ai=function(){function e(t,n,r,o,u){this.connId=t,this.applicationId=r,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Bu(this.connId),this.stats_=qc.getCollection(n),this.connURL=e.connectionURL_(n,o,u),this.nodeAdmin=n.nodeAdmin}return e.connectionURL_=function(t,n,r){var o={};return o[rT]=zv,typeof location<"u"&&location.hostname&&uT.test(location.hostname)&&(o[oT]=sT),n&&(o[iT]=n),r&&(o[aT]=r),t.connectionURL(cT,o)},e.prototype.open=function(t,n){var r=this;this.onDisconnect=n,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,fi.set("previous_websocket_failure",!0);try{var o,u,a,h;if(!$0()){var u={headers:{"X-Firebase-GMPID":this.applicationId||""}};this.mySock=new Gc(this.connURL,[],u)}}catch(p){this.log_("Error instantiating WebSocket.");var l=p.message||p.data;l&&this.log_(l),this.onClosed_();return}this.mySock.onopen=function(){r.log_("Websocket connected."),r.everConnected_=!0},this.mySock.onclose=function(){r.log_("Websocket connection was disconnected."),r.mySock=null,r.onClosed_()},this.mySock.onmessage=function(p){r.handleIncomingFrame(p)},this.mySock.onerror=function(p){r.log_("WebSocket error.  Closing connection.");var v=p.message||p.data;v&&r.log_(v),r.onClosed_()}},e.prototype.start=function(){},e.forceDisallow=function(){e.forceDisallow_=!0},e.isAvailable=function(){var t=!1;if(typeof navigator<"u"&&navigator.userAgent){var n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(t=!0)}return!t&&Gc!==null&&!e.forceDisallow_},e.previouslyFailed=function(){return fi.isInMemoryStorage||fi.get("previous_websocket_failure")===!0},e.prototype.markConnectionHealthy=function(){fi.remove("previous_websocket_failure")},e.prototype.appendFrame_=function(t){if(this.frames.push(t),this.frames.length===this.totalFrames){var n=this.frames.join("");this.frames=null;var r=Xs(n);this.onMessage(r)}},e.prototype.handleNewFrameCount_=function(t){this.totalFrames=t,this.frames=[]},e.prototype.extractFrameCount_=function(t){if(L(this.frames===null,"We already have a frame buffer"),t.length<=6){var n=Number(t);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),t},e.prototype.handleIncomingFrame=function(t){if(this.mySock!==null){var n=t.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{var r=this.extractFrameCount_(n);r!==null&&this.appendFrame_(r)}}},e.prototype.send=function(t){this.resetKeepAlive();var n=Qt(t);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);var r=ZI(n,hx);r.length>1&&this.sendString_(String(r.length));for(var o=0;o<r.length;o++)this.sendString_(r[o])},e.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},e.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},e.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},e.prototype.resetKeepAlive=function(){var t=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(function(){t.mySock&&t.sendString_("0"),t.resetKeepAlive()},Math.floor(lx))},e.prototype.sendString_=function(t){try{this.mySock.send(t)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},e.responsesRequiredToBeHealthy=2,e.healthyTimeout=3e4,e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var fx=function(){function e(t){this.initTransports_(t)}return Object.defineProperty(e,"ALL_TRANSPORTS",{get:function(){return[Jv,ai]},enumerable:!1,configurable:!0}),e.prototype.initTransports_=function(t){var n,r,o=ai&&ai.isAvailable(),u=o&&!ai.previouslyFailed();if(t.webSocketOnly&&(o||fe("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),u=!0),u)this.transports_=[ai];else{var a=this.transports_=[];try{for(var h=Oe(e.ALL_TRANSPORTS),l=h.next();!l.done;l=h.next()){var p=l.value;p&&p.isAvailable()&&a.push(p)}}catch(v){n={error:v}}finally{try{l&&!l.done&&(r=h.return)&&r.call(h)}finally{if(n)throw n.error}}}},e.prototype.initialTransport=function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")},e.prototype.upgradeTransport=function(){return this.transports_.length>1?this.transports_[1]:null},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var px=6e4,dx=5e3,vx=10*1024,yx=100*1024,Rp="t",M0="d",gx="s",F0="r",mx="e",V0="o",U0="a",j0="n",B0="p",_x="h",FT=function(){function e(t,n,r,o,u,a,h,l){this.id=t,this.repoInfo_=n,this.applicationId_=r,this.onMessage_=o,this.onReady_=u,this.onDisconnect_=a,this.onKill_=h,this.lastSessionId=l,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Bu("c:"+this.id+":"),this.transportManager_=new fx(n),this.log_("Connection created"),this.start_()}return e.prototype.start_=function(){var t=this,n=this.transportManager_.initialTransport();this.conn_=new n(this.nextTransportId_(),this.repoInfo_,this.applicationId_,void 0,this.lastSessionId),this.primaryResponsesRequired_=n.responsesRequiredToBeHealthy||0;var r=this.connReceiver_(this.conn_),o=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(function(){t.conn_&&t.conn_.open(r,o)},Math.floor(0));var u=n.healthyTimeout||0;u>0&&(this.healthyTimeout_=Ks(function(){t.healthyTimeout_=null,t.isHealthy_||(t.conn_&&t.conn_.bytesReceived>yx?(t.log_("Connection exceeded healthy timeout but has received "+t.conn_.bytesReceived+" bytes.  Marking connection healthy."),t.isHealthy_=!0,t.conn_.markConnectionHealthy()):t.conn_&&t.conn_.bytesSent>vx?t.log_("Connection exceeded healthy timeout but has sent "+t.conn_.bytesSent+" bytes.  Leaving connection alive."):(t.log_("Closing unhealthy connection after timeout."),t.close()))},Math.floor(u)))},e.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},e.prototype.disconnReceiver_=function(t){var n=this;return function(r){t===n.conn_?n.onConnectionLost_(r):t===n.secondaryConn_?(n.log_("Secondary connection lost."),n.onSecondaryConnectionLost_()):n.log_("closing an old connection")}},e.prototype.connReceiver_=function(t){var n=this;return function(r){n.state_!==2&&(t===n.rx_?n.onPrimaryMessageReceived_(r):t===n.secondaryConn_?n.onSecondaryMessageReceived_(r):n.log_("message on old connection"))}},e.prototype.sendRequest=function(t){var n={t:"d",d:t};this.sendData_(n)},e.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},e.prototype.onSecondaryControl_=function(t){if(Rp in t){var n=t[Rp];n===U0?this.upgradeIfSecondaryHealthy_():n===F0?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===V0&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},e.prototype.onSecondaryMessageReceived_=function(t){var n=Fs("t",t),r=Fs("d",t);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)},e.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:B0,d:{}}}))},e.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:U0,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:j0,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},e.prototype.onPrimaryMessageReceived_=function(t){var n=Fs("t",t),r=Fs("d",t);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)},e.prototype.onDataMessage_=function(t){this.onPrimaryResponse_(),this.onMessage_(t)},e.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},e.prototype.onControl_=function(t){var n=Fs(Rp,t);if(M0 in t){var r=t[M0];if(n===_x)this.onHandshake_(r);else if(n===j0){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var o=0;o<this.pendingDataMessages.length;++o)this.onDataMessage_(this.pendingDataMessages[o]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===gx?this.onConnectionShutdown_(r):n===F0?this.onReset_(r):n===mx?ad("Server Error: "+r):n===V0?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):ad("Unknown control packet command: "+n)}},e.prototype.onHandshake_=function(t){var n=t.ts,r=t.v,o=t.h;this.sessionId=t.s,this.repoInfo_.updateHost(o),this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),zv!==r&&fe("Protocol version mismatch detected"),this.tryStartUpgrade_())},e.prototype.tryStartUpgrade_=function(){var t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)},e.prototype.startUpgrade_=function(t){var n=this;this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var r=this.connReceiver_(this.secondaryConn_),o=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(r,o),Ks(function(){n.secondaryConn_&&(n.log_("Timed out trying to upgrade."),n.secondaryConn_.close())},Math.floor(px))},e.prototype.onReset_=function(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.updateHost(t),this.state_===1?this.close():(this.closeConnections_(),this.start_())},e.prototype.onConnectionEstablished_=function(t,n){var r=this;this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Ks(function(){r.sendPingOnPrimaryIfNecessary_()},Math.floor(dx))},e.prototype.sendPingOnPrimaryIfNecessary_=function(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:B0,d:{}}}))},e.prototype.onSecondaryConnectionLost_=function(){var t=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===t||this.rx_===t)&&this.close()},e.prototype.onConnectionLost_=function(t){this.conn_=null,!t&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(fi.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()},e.prototype.onConnectionShutdown_=function(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()},e.prototype.sendData_=function(t){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(t)},e.prototype.close=function(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},e.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var VT=function(){function e(){}return e.prototype.put=function(t,n,r,o){},e.prototype.merge=function(t,n,r,o){},e.prototype.refreshAuthToken=function(t){},e.prototype.onDisconnectPut=function(t,n,r){},e.prototype.onDisconnectMerge=function(t,n,r){},e.prototype.onDisconnectCancel=function(t,n){},e.prototype.reportStats=function(t){},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Bs=1e3,wx=60*5*1e3,bx=3*1e3,q0=30*1e3,Ex=1.3,Ix=3e4,Tx="server_kill",Sx=3,gi=function(e){U(t,e);function t(n,r,o,u,a,h,l){var p=e.call(this)||this;if(p.repoInfo_=n,p.applicationId_=r,p.onDataUpdate_=o,p.onConnectStatus_=u,p.onServerInfoUpdate_=a,p.authTokenProvider_=h,p.authOverride_=l,p.id=t.nextPersistentConnectionId_++,p.log_=Bu("p:"+p.id+":"),p.interruptReasons_={},p.listens=new Map,p.outstandingPuts_=[],p.outstandingGets_=[],p.outstandingPutCount_=0,p.outstandingGetCount_=0,p.onDisconnectRequestQueue_=[],p.connected_=!1,p.reconnectDelay_=Bs,p.maxReconnectDelay_=wx,p.securityDebugCallback_=null,p.lastSessionId=null,p.establishConnectionTimer_=null,p.visible_=!1,p.requestCBHash_={},p.requestNumber_=0,p.realtime_=null,p.authToken_=null,p.forceTokenRefresh_=!1,p.invalidAuthTokenCount_=0,p.firstConnection_=!0,p.lastConnectionAttemptTime_=null,p.lastConnectionEstablishedTime_=null,l&&!$0())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return p.scheduleConnect_(0),$P.getInstance().on("visible",p.onVisible_,p),n.host.indexOf("fblocal")===-1&&x0.getInstance().on("online",p.onOnline_,p),p}return t.prototype.sendRequest=function(n,r,o){var u=++this.requestNumber_,a={r:u,a:n,b:r};this.log_(Qt(a)),L(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(a),o&&(this.requestCBHash_[u]=o)},t.prototype.get=function(n){var r=this,o=new ke,u={p:n.path.toString(),q:n.queryObject()},a={action:"g",request:u,onComplete:function(l){var p=l.d;l.s==="ok"?(r.onDataUpdate_(u.p,p,!1,null),o.resolve(p)):o.reject(p)}};this.outstandingGets_.push(a),this.outstandingGetCount_++;var h=this.outstandingGets_.length-1;return this.connected_||setTimeout(function(){var l=r.outstandingGets_[h];l===void 0||a!==l||(delete r.outstandingGets_[h],r.outstandingGetCount_--,r.outstandingGetCount_===0&&(r.outstandingGets_=[]),r.log_("get "+h+" timed out on connection"),o.reject(new Error("Client is offline.")))},bx),this.connected_&&this.sendGet_(h),o.promise},t.prototype.listen=function(n,r,o,u){var a=n.queryIdentifier(),h=n.path.toString();this.log_("Listen called for "+h+" "+a),this.listens.has(h)||this.listens.set(h,new Map),L(n.getQueryParams().isDefault()||!n.getQueryParams().loadsAllData(),"listen() called for non-default but complete query"),L(!this.listens.get(h).has(a),"listen() called twice for same path/queryId.");var l={onComplete:u,hashFn:r,query:n,tag:o};this.listens.get(h).set(a,l),this.connected_&&this.sendListen_(l)},t.prototype.sendGet_=function(n){var r=this,o=this.outstandingGets_[n];this.sendRequest("g",o.request,function(u){delete r.outstandingGets_[n],r.outstandingGetCount_--,r.outstandingGetCount_===0&&(r.outstandingGets_=[]),o.onComplete&&o.onComplete(u)})},t.prototype.sendListen_=function(n){var r=this,o=n.query,u=o.path.toString(),a=o.queryIdentifier();this.log_("Listen on "+u+" for "+a);var h={p:u},l="q";n.tag&&(h.q=o.queryObject(),h.t=n.tag),h.h=n.hashFn(),this.sendRequest(l,h,function(p){var v=p.d,g=p.s;t.warnOnListenWarnings_(v,o);var m=r.listens.get(u)&&r.listens.get(u).get(a);m===n&&(r.log_("listen response",p),g!=="ok"&&r.removeListen_(u,a),n.onComplete&&n.onComplete(g,v))})},t.warnOnListenWarnings_=function(n,r){if(n&&typeof n=="object"&&xe(n,"w")){var o=vn(n,"w");if(Array.isArray(o)&&~o.indexOf("no_index")){var u='".indexOn": "'+r.getQueryParams().getIndex().toString()+'"',a=r.path.toString();fe("Using an unspecified index. Your data will be downloaded and "+("filtered on the client. Consider adding "+u+" at ")+(a+" to your security rules for better performance."))}}},t.prototype.refreshAuthToken=function(n){this.authToken_=n,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},function(){}),this.reduceReconnectDelayIfAdminCredential_(n)},t.prototype.reduceReconnectDelayIfAdminCredential_=function(n){var r=n&&n.length===40;(r||aC(n))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=q0)},t.prototype.tryAuth=function(){var n=this;if(this.connected_&&this.authToken_){var r=this.authToken_,o=uC(r)?"auth":"gauth",u={cred:r};this.authOverride_===null?u.noauth=!0:typeof this.authOverride_=="object"&&(u.authvar=this.authOverride_),this.sendRequest(o,u,function(a){var h=a.s,l=a.d||"error";n.authToken_===r&&(h==="ok"?n.invalidAuthTokenCount_=0:n.onAuthRevoked_(h,l))})}},t.prototype.unlisten=function(n,r){var o=n.path.toString(),u=n.queryIdentifier();this.log_("Unlisten called for "+o+" "+u),L(n.getQueryParams().isDefault()||!n.getQueryParams().loadsAllData(),"unlisten() called for non-default but complete query");var a=this.removeListen_(o,u);a&&this.connected_&&this.sendUnlisten_(o,u,n.queryObject(),r)},t.prototype.sendUnlisten_=function(n,r,o,u){this.log_("Unlisten on "+n+" for "+r);var a={p:n},h="n";u&&(a.q=o,a.t=u),this.sendRequest(h,a)},t.prototype.onDisconnectPut=function(n,r,o){this.connected_?this.sendOnDisconnect_("o",n,r,o):this.onDisconnectRequestQueue_.push({pathString:n,action:"o",data:r,onComplete:o})},t.prototype.onDisconnectMerge=function(n,r,o){this.connected_?this.sendOnDisconnect_("om",n,r,o):this.onDisconnectRequestQueue_.push({pathString:n,action:"om",data:r,onComplete:o})},t.prototype.onDisconnectCancel=function(n,r){this.connected_?this.sendOnDisconnect_("oc",n,null,r):this.onDisconnectRequestQueue_.push({pathString:n,action:"oc",data:null,onComplete:r})},t.prototype.sendOnDisconnect_=function(n,r,o,u){var a={p:r,d:o};this.log_("onDisconnect "+n,a),this.sendRequest(n,a,function(h){u&&setTimeout(function(){u(h.s,h.d)},Math.floor(0))})},t.prototype.put=function(n,r,o,u){this.putInternal("p",n,r,o,u)},t.prototype.merge=function(n,r,o,u){this.putInternal("m",n,r,o,u)},t.prototype.putInternal=function(n,r,o,u,a){var h={p:r,d:o};a!==void 0&&(h.h=a),this.outstandingPuts_.push({action:n,request:h,onComplete:u}),this.outstandingPutCount_++;var l=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(l):this.log_("Buffering put: "+r)},t.prototype.sendPut_=function(n){var r=this,o=this.outstandingPuts_[n].action,u=this.outstandingPuts_[n].request,a=this.outstandingPuts_[n].onComplete;this.outstandingPuts_[n].queued=this.connected_,this.sendRequest(o,u,function(h){r.log_(o+" response",h),delete r.outstandingPuts_[n],r.outstandingPutCount_--,r.outstandingPutCount_===0&&(r.outstandingPuts_=[]),a&&a(h.s,h.d)})},t.prototype.reportStats=function(n){var r=this;if(this.connected_){var o={c:n};this.log_("reportStats",o),this.sendRequest("s",o,function(u){var a=u.s;if(a!=="ok"){var h=u.d;r.log_("reportStats","Error sending stats: "+h)}})}},t.prototype.onDataMessage_=function(n){if("r"in n){this.log_("from server: "+Qt(n));var r=n.r,o=this.requestCBHash_[r];o&&(delete this.requestCBHash_[r],o(n.b))}else{if("error"in n)throw"A server-side error has occurred: "+n.error;"a"in n&&this.onDataPush_(n.a,n.b)}},t.prototype.onDataPush_=function(n,r){this.log_("handleServerMessage",n,r),n==="d"?this.onDataUpdate_(r.p,r.d,!1,r.t):n==="m"?this.onDataUpdate_(r.p,r.d,!0,r.t):n==="c"?this.onListenRevoked_(r.p,r.q):n==="ac"?this.onAuthRevoked_(r.s,r.d):n==="sd"?this.onSecurityDebugPacket_(r):ad("Unrecognized action received from server: "+Qt(n)+`
Are you using the latest client?`)},t.prototype.onReady_=function(n,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(n),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},t.prototype.scheduleConnect_=function(n){var r=this;L(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(function(){r.establishConnectionTimer_=null,r.establishConnection_()},Math.floor(n))},t.prototype.onVisible_=function(n){n&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Bs,this.realtime_||this.scheduleConnect_(0)),this.visible_=n},t.prototype.onOnline_=function(n){n?(this.log_("Browser went online."),this.reconnectDelay_=Bs,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},t.prototype.onRealtimeDisconnect_=function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(!this.visible_)this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime();else if(this.lastConnectionEstablishedTime_){var n=new Date().getTime()-this.lastConnectionEstablishedTime_;n>Ix&&(this.reconnectDelay_=Bs),this.lastConnectionEstablishedTime_=null}var r=new Date().getTime()-this.lastConnectionAttemptTime_,o=Math.max(0,this.reconnectDelay_-r);o=Math.random()*o,this.log_("Trying to reconnect in "+o+"ms"),this.scheduleConnect_(o),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*Ex)}this.onConnectStatus_(!1)},t.prototype.establishConnection_=function(){var n=this;if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;var r=this.onDataMessage_.bind(this),o=this.onReady_.bind(this),u=this.onRealtimeDisconnect_.bind(this),a=this.id+":"+t.nextConnectionId_++,h=this,l=this.lastSessionId,p=!1,v=null,g=function(){v?v.close():(p=!0,u())},m=function(b){L(v,"sendRequest call when we're not connected not allowed."),v.sendRequest(b)};this.realtime_={close:g,sendRequest:m};var w=this.forceTokenRefresh_;this.forceTokenRefresh_=!1,this.authTokenProvider_.getToken(w).then(function(b){p?re("getToken() completed but was canceled"):(re("getToken() completed. Creating connection."),h.authToken_=b&&b.accessToken,v=new FT(a,h.repoInfo_,h.applicationId_,r,o,u,function(I){fe(I+" ("+h.repoInfo_.toString()+")"),h.interrupt(Tx)},l))}).then(null,function(b){h.log_("Failed to get token: "+b),p||(n.repoInfo_.nodeAdmin&&fe(b),g())})}},t.prototype.interrupt=function(n){re("Interrupting connection for reason: "+n),this.interruptReasons_[n]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},t.prototype.resume=function(n){re("Resuming connection for reason: "+n),delete this.interruptReasons_[n],Pp(this.interruptReasons_)&&(this.reconnectDelay_=Bs,this.realtime_||this.scheduleConnect_(0))},t.prototype.handleTimestamp_=function(n){var r=n-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:r})},t.prototype.cancelSentTransactions_=function(){for(var n=0;n<this.outstandingPuts_.length;n++){var r=this.outstandingPuts_[n];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[n],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])},t.prototype.onListenRevoked_=function(n,r){var o;r?o=r.map(function(a){return qv(a)}).join("$"):o="default";var u=this.removeListen_(n,o);u&&u.onComplete&&u.onComplete("permission_denied")},t.prototype.removeListen_=function(n,r){var o=new yt(n).toString(),u;if(this.listens.has(o)){var a=this.listens.get(o);u=a.get(r),a.delete(r),a.size===0&&this.listens.delete(o)}else u=void 0;return u},t.prototype.onAuthRevoked_=function(n,r){re("Auth token revoked: "+n+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(n==="invalid_token"||n==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=Sx&&(this.reconnectDelay_=q0,this.authTokenProvider_.notifyForInvalidToken()))},t.prototype.onSecurityDebugPacket_=function(n){this.securityDebugCallback_?this.securityDebugCallback_(n):"msg"in n&&console.log("FIREBASE: "+n.msg.replace(`
`,`
FIREBASE: `))},t.prototype.restoreState_=function(){var n,r,o,u;this.tryAuth();try{for(var a=Oe(this.listens.values()),h=a.next();!h.done;h=a.next()){var l=h.value;try{for(var p=(o=void 0,Oe(l.values())),v=p.next();!v.done;v=p.next()){var g=v.value;this.sendListen_(g)}}catch(b){o={error:b}}finally{try{v&&!v.done&&(u=p.return)&&u.call(p)}finally{if(o)throw o.error}}}}catch(b){n={error:b}}finally{try{h&&!h.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}for(var m=0;m<this.outstandingPuts_.length;m++)this.outstandingPuts_[m]&&this.sendPut_(m);for(;this.onDisconnectRequestQueue_.length;){var w=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(w.action,w.pathString,w.data,w.onComplete)}for(var m=0;m<this.outstandingGets_.length;m++)this.outstandingGets_[m]&&this.sendGet_(m)},t.prototype.sendConnectStats_=function(){var n={},r="js";n["sdk."+r+"."+LT.replace(/\./g,"-")]=1,Ed()?n["framework.cordova"]=1:Y0()&&(n["framework.reactnative"]=1),this.reportStats(n)},t.prototype.shouldReconnect_=function(){var n=x0.getInstance().currentlyOnline();return Pp(this.interruptReasons_)&&n},t.nextPersistentConnectionId_=0,t.nextConnectionId_=0,t}(VT);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Nx=function(e){U(t,e);function t(n,r,o){var u=e.call(this)||this;return u.repoInfo_=n,u.onDataUpdate_=r,u.authTokenProvider_=o,u.log_=Bu("p:rest:"),u.listens_={},u}return t.prototype.reportStats=function(n){throw new Error("Method not implemented.")},t.getListenId_=function(n,r){return r!==void 0?"tag$"+r:(L(n.getQueryParams().isDefault(),"should have a tag if it's not a default query."),n.path.toString())},t.prototype.listen=function(n,r,o,u){var a=this,h=n.path.toString();this.log_("Listen called for "+h+" "+n.queryIdentifier());var l=t.getListenId_(n,o),p={};this.listens_[l]=p;var v=S0(n.getQueryParams());this.restRequest_(h+".json",v,function(g,m){var w=m;if(g===404&&(w=null,g=null),g===null&&a.onDataUpdate_(h,w,!1,o),vn(a.listens_,l)===p){var b;g?g===401?b="permission_denied":b="rest_error:"+g:b="ok",u(b,null)}})},t.prototype.unlisten=function(n,r){var o=t.getListenId_(n,r);delete this.listens_[o]},t.prototype.get=function(n){var r=this,o=S0(n.getQueryParams()),u=n.path.toString(),a=new ke;return this.restRequest_(u+".json",o,function(h,l){var p=l;h===404&&(p=null,h=null),h===null?(r.onDataUpdate_(u,p,!1,null),a.resolve(p)):a.reject(new Error(p))}),a.promise},t.prototype.refreshAuthToken=function(n){},t.prototype.restRequest_=function(n,r,o){var u=this;r===void 0&&(r={}),r.format="export",this.authTokenProvider_.getToken(!1).then(function(a){var h=a&&a.accessToken;h&&(r.auth=h);var l=(u.repoInfo_.secure?"https://":"http://")+u.repoInfo_.host+n+"?ns="+u.repoInfo_.namespace+cC(r);u.log_("Sending REST request for "+l);var p=new XMLHttpRequest;p.onreadystatechange=function(){if(o&&p.readyState===4){u.log_("REST Response for "+l+" received. status:",p.status,"response:",p.responseText);var v=null;if(p.status>=200&&p.status<300){try{v=Xs(p.responseText)}catch{fe("Failed to parse JSON response for "+l+": "+p.responseText)}o(null,v)}else p.status!==401&&p.status!==404&&fe("Got unsuccessful REST response for "+l+" Status: "+p.status),o(p.status);o=null}},p.open("GET",l,!0),p.send()})},t}(VT);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var W0=function(){function e(){this.children={},this.childCount=0,this.value=null}return e}(),Ax=function(){function e(t,n,r){t===void 0&&(t=""),n===void 0&&(n=null),r===void 0&&(r=new W0),this.name_=t,this.parent_=n,this.node_=r}return e.prototype.subTree=function(t){for(var n=t instanceof yt?t:new yt(t),r=this,o=it(n);o!==null;){var u=vn(r.node_.children,o)||new W0;r=new e(o,r,u),n=bt(n),o=it(n)}return r},e.prototype.getValue=function(){return this.node_.value},e.prototype.setValue=function(t){L(typeof t<"u","Cannot set value to undefined"),this.node_.value=t,this.updateParents_()},e.prototype.clear=function(){this.node_.value=null,this.node_.children={},this.node_.childCount=0,this.updateParents_()},e.prototype.hasChildren=function(){return this.node_.childCount>0},e.prototype.isEmpty=function(){return this.getValue()===null&&!this.hasChildren()},e.prototype.forEachChild=function(t){var n=this;Yt(this.node_.children,function(r,o){t(new e(r,n,o))})},e.prototype.forEachDescendant=function(t,n,r){n&&!r&&t(this),this.forEachChild(function(o){o.forEachDescendant(t,!0,r)}),n&&r&&t(this)},e.prototype.forEachAncestor=function(t,n){for(var r=n?this:this.parent();r!==null;){if(t(r))return!0;r=r.parent()}return!1},e.prototype.forEachImmediateDescendantWithValue=function(t){this.forEachChild(function(n){n.getValue()!==null?t(n):n.forEachImmediateDescendantWithValue(t)})},e.prototype.path=function(){return new yt(this.parent_===null?this.name_:this.parent_.path()+"/"+this.name_)},e.prototype.name=function(){return this.name_},e.prototype.parent=function(){return this.parent_},e.prototype.updateParents_=function(){this.parent_!==null&&this.parent_.updateChild_(this.name_,this)},e.prototype.updateChild_=function(t,n){var r=n.isEmpty(),o=xe(this.node_.children,t);r&&o?(delete this.node_.children[t],this.node_.childCount--,this.updateParents_()):!r&&!o&&(this.node_.children[t]=n.node_,this.node_.childCount++,this.updateParents_())},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var G0="repo_interrupt",Cx=25,Bt;(function(e){e[e.RUN=0]="RUN",e[e.SENT=1]="SENT",e[e.COMPLETED=2]="COMPLETED",e[e.SENT_NEEDS_ABORT=3]="SENT_NEEDS_ABORT",e[e.NEEDS_ABORT=4]="NEEDS_ABORT"})(Bt||(Bt={}));var Zv=function(){function e(t,n,r,o){this.repoInfo_=t,this.forceRestClient_=n,this.app=r,this.authTokenProvider_=o,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new KP,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=new _p,this.transactionQueueTree_=new Ax,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return e.prototype.start=function(){var t=this;if(this.stats_=qc.getCollection(this.repoInfo_),this.forceRestClient_||qD())this.server_=new Nx(this.repoInfo_,this.onDataUpdate_.bind(this),this.authTokenProvider_),setTimeout(this.onConnectStatus_.bind(this,!0),0);else{var n=this.app.options.databaseAuthVariableOverride;if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Qt(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}this.persistentConnection_=new gi(this.repoInfo_,this.app.options.appId,this.onDataUpdate_.bind(this),this.onConnectStatus_.bind(this),this.onServerInfoUpdate_.bind(this),this.authTokenProvider_,n),this.server_=this.persistentConnection_}this.authTokenProvider_.addTokenChangeListener(function(r){t.server_.refreshAuthToken(r)}),this.statsReporter_=qc.getOrCreateReporter(this.repoInfo_,function(){return new QP(t.stats_,t.server_)}),this.infoData_=new WP,this.infoSyncTree_=new D0({startListening:function(r,o,u,a){var h=[],l=t.infoData_.getNode(r.path);return l.isEmpty()||(h=t.infoSyncTree_.applyServerOverwrite(r.path,l),setTimeout(function(){a("ok")},0)),h},stopListening:function(){}}),this.updateInfo_("connected",!1),this.serverSyncTree_=new D0({startListening:function(r,o,u,a){return t.server_.listen(r,u,o,function(h,l){var p=a(h,l);en(t.eventQueue_,r.path,p)}),[]},stopListening:function(r,o){t.server_.unlisten(r,o)}})},e.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},e.prototype.name=function(){return this.repoInfo_.namespace},e.prototype.serverTime=function(){var t=this.infoData_.getNode(new yt(".info/serverTimeOffset")),n=t.val()||0;return new Date().getTime()+n},e.prototype.generateServerValues=function(){return AP({timestamp:this.serverTime()})},e.prototype.onDataUpdate_=function(t,n,r,o){this.dataUpdateCount++;var u=new yt(t);n=this.interceptServerDataCallback_?this.interceptServerDataCallback_(t,n):n;var a=[];if(o)if(r){var h=lc(n,function(m){return Pt(m)});a=this.serverSyncTree_.applyTaggedQueryMerge(u,h,o)}else{var l=Pt(n);a=this.serverSyncTree_.applyTaggedQueryOverwrite(u,l,o)}else if(r){var p=lc(n,function(m){return Pt(m)});a=this.serverSyncTree_.applyServerMerge(u,p)}else{var v=Pt(n);a=this.serverSyncTree_.applyServerOverwrite(u,v)}var g=u;a.length>0&&(g=this.rerunTransactions_(u)),en(this.eventQueue_,g,a)},e.prototype.interceptServerData_=function(t){this.interceptServerDataCallback_=t},e.prototype.onConnectStatus_=function(t){this.updateInfo_("connected",t),t===!1&&this.runOnDisconnectEvents_()},e.prototype.onServerInfoUpdate_=function(t){var n=this;Yt(t,function(r,o){n.updateInfo_(r,o)})},e.prototype.updateInfo_=function(t,n){var r=new yt("/.info/"+t),o=Pt(n);this.infoData_.updateSnapshot(r,o);var u=this.infoSyncTree_.applyServerOverwrite(r,o);en(this.eventQueue_,r,u)},e.prototype.getNextWriteId_=function(){return this.nextWriteId_++},e.prototype.getValue=function(t){var n=this,r=this.serverSyncTree_.getServerValue(t);return r!=null?Promise.resolve(new _r(r,t.getRef(),t.getQueryParams().getIndex())):this.server_.get(t).then(function(o){var u=Pt(o),a=n.serverSyncTree_.applyServerOverwrite(t.path,u);return Cp(n.eventQueue_,t.path,a),Promise.resolve(new _r(u,t.getRef(),t.getQueryParams().getIndex()))},function(o){return n.log_("get for query "+Qt(t)+" failed: "+o),Promise.reject(new Error(o))})},e.prototype.setWithPriority=function(t,n,r,o){var u=this;this.log_("set",{path:t.toString(),value:n,priority:r});var a=this.generateServerValues(),h=Pt(n,r),l=this.serverSyncTree_.calcCompleteEventCache(t),p=mp(h,l,a),v=this.getNextWriteId_(),g=this.serverSyncTree_.applyUserOverwrite(t,p,v,!0);Wc(this.eventQueue_,g),this.server_.put(t.toString(),h.val(!0),function(w,b){var I=w==="ok";I||fe("set at "+t+" failed: "+w);var T=u.serverSyncTree_.ackUserWrite(v,!I);en(u.eventQueue_,t,T),u.callOnCompleteCallback(o,w,b)});var m=this.abortTransactions_(t);this.rerunTransactions_(m),en(this.eventQueue_,m,[])},e.prototype.update=function(t,n,r){var o=this;this.log_("update",{path:t.toString(),value:n});var u=!0,a=this.generateServerValues(),h={};if(Yt(n,function(v,g){u=!1,h[v]=A0(Ot(t,v),Pt(g),o.serverSyncTree_,a)}),u)re("update() called with empty data.  Don't do anything."),this.callOnCompleteCallback(r,"ok");else{var l=this.getNextWriteId_(),p=this.serverSyncTree_.applyUserMerge(t,h,l);Wc(this.eventQueue_,p),this.server_.merge(t.toString(),n,function(v,g){var m=v==="ok";m||fe("update at "+t+" failed: "+v);var w=o.serverSyncTree_.ackUserWrite(l,!m),b=w.length>0?o.rerunTransactions_(t):t;en(o.eventQueue_,b,w),o.callOnCompleteCallback(r,v,g)}),Yt(n,function(v){var g=o.abortTransactions_(Ot(t,v));o.rerunTransactions_(g)}),en(this.eventQueue_,t,[])}},e.prototype.runOnDisconnectEvents_=function(){var t=this;this.log_("onDisconnectEvents");var n=this.generateServerValues(),r=new _p;this.onDisconnect_.forEachTree(dt(),function(u,a){var h=A0(u,a,t.serverSyncTree_,n);r.remember(u,h)});var o=[];r.forEachTree(dt(),function(u,a){o=o.concat(t.serverSyncTree_.applyServerOverwrite(u,a));var h=t.abortTransactions_(u);t.rerunTransactions_(h)}),this.onDisconnect_=new _p,en(this.eventQueue_,dt(),o)},e.prototype.onDisconnectCancel=function(t,n){var r=this;this.server_.onDisconnectCancel(t.toString(),function(o,u){o==="ok"&&r.onDisconnect_.forget(t),r.callOnCompleteCallback(n,o,u)})},e.prototype.onDisconnectSet=function(t,n,r){var o=this,u=Pt(n);this.server_.onDisconnectPut(t.toString(),u.val(!0),function(a,h){a==="ok"&&o.onDisconnect_.remember(t,u),o.callOnCompleteCallback(r,a,h)})},e.prototype.onDisconnectSetWithPriority=function(t,n,r,o){var u=this,a=Pt(n,r);this.server_.onDisconnectPut(t.toString(),a.val(!0),function(h,l){h==="ok"&&u.onDisconnect_.remember(t,a),u.callOnCompleteCallback(o,h,l)})},e.prototype.onDisconnectUpdate=function(t,n,r){var o=this;if(Pp(n)){re("onDisconnect().update() called with empty data.  Don't do anything."),this.callOnCompleteCallback(r,"ok");return}this.server_.onDisconnectMerge(t.toString(),n,function(u,a){u==="ok"&&Yt(n,function(h,l){var p=Pt(l);o.onDisconnect_.remember(Ot(t,h),p)}),o.callOnCompleteCallback(r,u,a)})},e.prototype.addEventCallbackForQuery=function(t,n){var r;it(t.path)===".info"?r=this.infoSyncTree_.addEventRegistration(t,n):r=this.serverSyncTree_.addEventRegistration(t,n),Cp(this.eventQueue_,t.path,r)},e.prototype.removeEventCallbackForQuery=function(t,n){var r;it(t.path)===".info"?r=this.infoSyncTree_.removeEventRegistration(t,n):r=this.serverSyncTree_.removeEventRegistration(t,n),Cp(this.eventQueue_,t.path,r)},e.prototype.interrupt=function(){this.persistentConnection_&&this.persistentConnection_.interrupt(G0)},e.prototype.resume=function(){this.persistentConnection_&&this.persistentConnection_.resume(G0)},e.prototype.stats=function(t){if(t===void 0&&(t=!1),!(typeof console>"u")){var n;t?(this.statsListener_||(this.statsListener_=new AT(this.stats_)),n=this.statsListener_.get()):n=this.stats_.get();var r=Object.keys(n).reduce(function(o,u){return Math.max(u.length,o)},0);Yt(n,function(o,u){for(var a=o,h=o.length;h<r+2;h++)a+=" ";console.log(a+u)})}},e.prototype.statsIncrementCounter=function(t){this.stats_.incrementCounter(t),this.statsReporter_.includeStat(t)},e.prototype.log_=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r="";this.persistentConnection_&&(r=this.persistentConnection_.id+":"),re.apply(void 0,Ti([r],t))},e.prototype.callOnCompleteCallback=function(t,n,r){t&&yo(function(){if(n==="ok")t(null);else{var o=(n||"error").toUpperCase(),u=o;r&&(u+=": "+r);var a=new Error(u);a.code=o,t(a)}})},Object.defineProperty(e.prototype,"database",{get:function(){return this.__database||(this.__database=new ty(this))},enumerable:!1,configurable:!0}),e.prototype.startTransaction=function(t,n,r,o){this.log_("transaction on "+t);var u=function(){},a=new Hn(this,t);a.on("value",u);var h=function(){a.off("value",u)},l={path:t,update:n,onComplete:r,status:null,order:$I(),applyLocally:o,retryCount:0,unwatcher:h,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},p=this.getLatestState_(t);l.currentInputSnapshot=p;var v=l.update(p.val());if(v===void 0){if(l.unwatcher(),l.currentOutputSnapshotRaw=null,l.currentOutputSnapshotResolved=null,l.onComplete){var g=new _r(l.currentInputSnapshot,new Hn(this,l.path),Et);l.onComplete(null,!1,g)}}else{gu("transaction failed: Data returned ",v,l.path),l.status=Bt.RUN;var m=this.transactionQueueTree_.subTree(t),w=m.getValue()||[];w.push(l),m.setValue(w);var b=void 0;if(typeof v=="object"&&v!==null&&xe(v,".priority"))b=vn(v,".priority"),L(yu(b),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.");else{var I=this.serverSyncTree_.calcCompleteEventCache(t)||Z.EMPTY_NODE;b=I.getPriority().val()}var T=this.generateServerValues(),C=Pt(v,b),F=mp(C,p,T);l.currentOutputSnapshotRaw=C,l.currentOutputSnapshotResolved=F,l.currentWriteId=this.getNextWriteId_();var M=this.serverSyncTree_.applyUserOverwrite(t,F,l.currentWriteId,l.applyLocally);en(this.eventQueue_,t,M),this.sendReadyTransactions_()}},e.prototype.getLatestState_=function(t,n){return this.serverSyncTree_.calcCompleteEventCache(t,n)||Z.EMPTY_NODE},e.prototype.sendReadyTransactions_=function(t){var n=this;if(t===void 0&&(t=this.transactionQueueTree_),t||this.pruneCompletedTransactionsBelowNode_(t),t.getValue()!==null){var r=this.buildTransactionQueue_(t);L(r.length>0,"Sending zero length transaction queue");var o=r.every(function(u){return u.status===Bt.RUN});o&&this.sendTransactionQueue_(t.path(),r)}else t.hasChildren()&&t.forEachChild(function(u){n.sendReadyTransactions_(u)})},e.prototype.sendTransactionQueue_=function(t,n){for(var r=this,o=n.map(function(w){return w.currentWriteId}),u=this.getLatestState_(t,o),a=u,h=u.hash(),l=0;l<n.length;l++){var p=n[l];L(p.status===Bt.RUN,"tryToSendTransactionQueue_: items in queue should all be run."),p.status=Bt.SENT,p.retryCount++;var v=we(t,p.path);a=a.updateChild(v,p.currentOutputSnapshotRaw)}var g=a.val(!0),m=t;this.server_.put(m.toString(),g,function(w){r.log_("transaction put response",{path:m.toString(),status:w});var b=[];if(w==="ok"){for(var I=[],T=0;T<n.length;T++){if(n[T].status=Bt.COMPLETED,b=b.concat(r.serverSyncTree_.ackUserWrite(n[T].currentWriteId)),n[T].onComplete){var C=n[T].currentOutputSnapshotResolved,F=new Hn(r,n[T].path),M=new _r(C,F,Et);I.push(n[T].onComplete.bind(null,null,!0,M))}n[T].unwatcher()}r.pruneCompletedTransactionsBelowNode_(r.transactionQueueTree_.subTree(t)),r.sendReadyTransactions_(),en(r.eventQueue_,t,b);for(var T=0;T<I.length;T++)yo(I[T])}else{if(w==="datastale")for(var T=0;T<n.length;T++)n[T].status===Bt.SENT_NEEDS_ABORT?n[T].status=Bt.NEEDS_ABORT:n[T].status=Bt.RUN;else{fe("transaction at "+m.toString()+" failed: "+w);for(var T=0;T<n.length;T++)n[T].status=Bt.NEEDS_ABORT,n[T].abortReason=w}r.rerunTransactions_(t)}},h)},e.prototype.rerunTransactions_=function(t){var n=this.getAncestorTransactionNode_(t),r=n.path(),o=this.buildTransactionQueue_(n);return this.rerunTransactionQueue_(o,r),r},e.prototype.rerunTransactionQueue_=function(t,n){if(t.length!==0){for(var r=[],o=[],u=t.filter(function(P){return P.status===Bt.RUN}),a=u.map(function(P){return P.currentWriteId}),h=0;h<t.length;h++){var l=t[h],p=we(n,l.path),v=!1,g=void 0;if(L(p!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),l.status===Bt.NEEDS_ABORT)v=!0,g=l.abortReason,o=o.concat(this.serverSyncTree_.ackUserWrite(l.currentWriteId,!0));else if(l.status===Bt.RUN)if(l.retryCount>=Cx)v=!0,g="maxretry",o=o.concat(this.serverSyncTree_.ackUserWrite(l.currentWriteId,!0));else{var m=this.getLatestState_(l.path,a);l.currentInputSnapshot=m;var w=t[h].update(m.val());if(w!==void 0){gu("transaction failed: Data returned ",w,l.path);var b=Pt(w),I=typeof w=="object"&&w!=null&&xe(w,".priority");I||(b=b.updatePriority(m.getPriority()));var T=l.currentWriteId,C=this.generateServerValues(),F=mp(b,m,C);l.currentOutputSnapshotRaw=b,l.currentOutputSnapshotResolved=F,l.currentWriteId=this.getNextWriteId_(),a.splice(a.indexOf(T),1),o=o.concat(this.serverSyncTree_.applyUserOverwrite(l.path,F,l.currentWriteId,l.applyLocally)),o=o.concat(this.serverSyncTree_.ackUserWrite(T,!0))}else v=!0,g="nodata",o=o.concat(this.serverSyncTree_.ackUserWrite(l.currentWriteId,!0))}if(en(this.eventQueue_,n,o),o=[],v&&(t[h].status=Bt.COMPLETED,function(P){setTimeout(P,Math.floor(0))}(t[h].unwatcher),t[h].onComplete))if(g==="nodata"){var M=new Hn(this,t[h].path),$=t[h].currentInputSnapshot,nt=new _r($,M,Et);r.push(t[h].onComplete.bind(null,null,!1,nt))}else r.push(t[h].onComplete.bind(null,new Error(g),!1,null))}this.pruneCompletedTransactionsBelowNode_(this.transactionQueueTree_);for(var h=0;h<r.length;h++)yo(r[h]);this.sendReadyTransactions_()}},e.prototype.getAncestorTransactionNode_=function(t){var n,r=this.transactionQueueTree_;for(n=it(t);n!==null&&r.getValue()===null;)r=r.subTree(n),t=bt(t),n=it(t);return r},e.prototype.buildTransactionQueue_=function(t){var n=[];return this.aggregateTransactionQueuesForNode_(t,n),n.sort(function(r,o){return r.order-o.order}),n},e.prototype.aggregateTransactionQueuesForNode_=function(t,n){var r=this,o=t.getValue();if(o!==null)for(var u=0;u<o.length;u++)n.push(o[u]);t.forEachChild(function(a){r.aggregateTransactionQueuesForNode_(a,n)})},e.prototype.pruneCompletedTransactionsBelowNode_=function(t){var n=this,r=t.getValue();if(r){for(var o=0,u=0;u<r.length;u++)r[u].status!==Bt.COMPLETED&&(r[o]=r[u],o++);r.length=o,t.setValue(r.length>0?r:null)}t.forEachChild(function(a){n.pruneCompletedTransactionsBelowNode_(a)})},e.prototype.abortTransactions_=function(t){var n=this,r=this.getAncestorTransactionNode_(t).path(),o=this.transactionQueueTree_.subTree(t);return o.forEachAncestor(function(u){n.abortTransactionsOnNode_(u)}),this.abortTransactionsOnNode_(o),o.forEachDescendant(function(u){n.abortTransactionsOnNode_(u)}),r},e.prototype.abortTransactionsOnNode_=function(t){var n=t.getValue();if(n!==null){for(var r=[],o=[],u=-1,a=0;a<n.length;a++)if(n[a].status!==Bt.SENT_NEEDS_ABORT){if(n[a].status===Bt.SENT)L(u===a-1,"All SENT items should be at beginning of queue."),u=a,n[a].status=Bt.SENT_NEEDS_ABORT,n[a].abortReason="set";else if(L(n[a].status===Bt.RUN,"Unexpected transaction status in abort"),n[a].unwatcher(),o=o.concat(this.serverSyncTree_.ackUserWrite(n[a].currentWriteId,!0)),n[a].onComplete){var h=null;r.push(n[a].onComplete.bind(null,new Error("set"),!1,h))}}u===-1?t.setValue(null):n.length=u+1,en(this.eventQueue_,t.path(),o);for(var a=0;a<r.length;a++)yo(r[a])}},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Hn=function(e){U(t,e);function t(n,r){var o=this;if(!(n instanceof Zv))throw new Error("new Reference() no longer supported - use app.database().");return o=e.call(this,n,r,new mP,!1)||this,o}return t.prototype.getKey=function(){return K("Reference.key",0,0,arguments.length),rt(this.path)?null:Gv(this.path)},t.prototype.child=function(n){return K("Reference.child",1,1,arguments.length),typeof n=="number"?n=String(n):n instanceof yt||(it(this.path)===null?tP("Reference.child",1,n,!1):mu("Reference.child",1,n,!1)),new t(this.repo,Ot(this.path,n))},t.prototype.getParent=function(){K("Reference.parent",0,0,arguments.length);var n=nT(this.path);return n===null?null:new t(this.repo,n)},t.prototype.getRoot=function(){K("Reference.root",0,0,arguments.length);for(var n=this;n.getParent()!==null;)n=n.getParent();return n},t.prototype.databaseProp=function(){return this.repo.database},t.prototype.set=function(n,r){K("Reference.set",1,2,arguments.length),rn("Reference.set",this.path),Rn("Reference.set",1,n,this.path,!1),te("Reference.set",2,r,!0);var o=new ke;return this.repo.setWithPriority(this.path,n,null,o.wrapCallback(r)),o.promise},t.prototype.update=function(n,r){if(K("Reference.update",1,2,arguments.length),rn("Reference.update",this.path),Array.isArray(n)){for(var o={},u=0;u<n.length;++u)o[""+u]=n[u];n=o,fe("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}fT("Reference.update",1,n,this.path,!1),te("Reference.update",2,r,!0);var a=new ke;return this.repo.update(this.path,n,a.wrapCallback(r)),a.promise},t.prototype.setWithPriority=function(n,r,o){if(K("Reference.setWithPriority",2,3,arguments.length),rn("Reference.setWithPriority",this.path),Rn("Reference.setWithPriority",1,n,this.path,!1),hd("Reference.setWithPriority",2,r,!1),te("Reference.setWithPriority",3,o,!0),this.getKey()===".length"||this.getKey()===".keys")throw"Reference.setWithPriority failed: "+this.getKey()+" is a read-only object.";var u=new ke;return this.repo.setWithPriority(this.path,n,r,u.wrapCallback(o)),u.promise},t.prototype.remove=function(n){return K("Reference.remove",0,1,arguments.length),rn("Reference.remove",this.path),te("Reference.remove",1,n,!0),this.set(null,n)},t.prototype.transaction=function(n,r,o){if(K("Reference.transaction",1,3,arguments.length),rn("Reference.transaction",this.path),te("Reference.transaction",1,n,!1),te("Reference.transaction",2,r,!0),eP("Reference.transaction",3,o,!0),this.getKey()===".length"||this.getKey()===".keys")throw"Reference.transaction failed: "+this.getKey()+" is a read-only object.";o===void 0&&(o=!0);var u=new ke;typeof r=="function"&&u.promise.catch(function(){});var a=function(h,l,p){h?u.reject(h):u.resolve(new rP(l,p)),typeof r=="function"&&r(h,l,p)};return this.repo.startTransaction(this.path,n,a,o),u.promise},t.prototype.setPriority=function(n,r){K("Reference.setPriority",1,2,arguments.length),rn("Reference.setPriority",this.path),hd("Reference.setPriority",1,n,!1),te("Reference.setPriority",2,r,!0);var o=new ke;return this.repo.setWithPriority(Ot(this.path,".priority"),n,null,o.wrapCallback(r)),o.promise},t.prototype.push=function(n,r){K("Reference.push",0,2,arguments.length),rn("Reference.push",this.path),Rn("Reference.push",1,n,this.path,!0),te("Reference.push",2,r,!0);var o=this.repo.serverTime(),u=iP(o),a=this.child(u),h=this.child(u),l;return n!=null?l=a.set(n,r).then(function(){return h}):l=Promise.resolve(h),a.then=l.then.bind(l),a.catch=l.then.bind(l,void 0),typeof r=="function"&&l.catch(function(){}),a},t.prototype.onDisconnect=function(){return rn("Reference.onDisconnect",this.path),new nP(this.repo,this.path)},Object.defineProperty(t.prototype,"database",{get:function(){return this.databaseProp()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"key",{get:function(){return this.getKey()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return this.getParent()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"root",{get:function(){return this.getRoot()},enumerable:!1,configurable:!0}),t}($v);$v.__referenceConstructor=Hn;md.__referenceConstructor=Hn;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Rx=function(){function e(t,n){var r=this;this.app_=t,this.authProvider_=n,this.auth_=null,this.auth_=n.getImmediate({optional:!0}),this.auth_||n.get().then(function(o){return r.auth_=o})}return e.prototype.getToken=function(t){return this.auth_?this.auth_.getToken(t).catch(function(n){return n&&n.code==="auth/token-not-initialized"?(re("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)}):Promise.resolve(null)},e.prototype.addTokenChangeListener=function(t){this.auth_?this.auth_.addAuthTokenListener(t):(setTimeout(function(){return t(null)},0),this.authProvider_.get().then(function(n){return n.addAuthTokenListener(t)}))},e.prototype.removeTokenChangeListener=function(t){this.authProvider_.get().then(function(n){return n.removeAuthTokenListener(t)})},e.prototype.notifyForInvalidToken=function(){var t='Provided authentication credentials for the app named "'+this.app_.name+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.app_.options?t+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.app_.options?t+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':t+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',fe(t)},e}(),H0=function(){function e(){}return e.prototype.getToken=function(t){return Promise.resolve({accessToken:e.EMULATOR_AUTH_TOKEN})},e.prototype.addTokenChangeListener=function(t){t(e.EMULATOR_AUTH_TOKEN)},e.prototype.removeTokenChangeListener=function(t){},e.prototype.notifyForInvalidToken=function(){},e.EMULATOR_AUTH_TOKEN="owner",e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ox="FIREBASE_DATABASE_EMULATOR_HOST",Op,bu=function(){function e(){this.repos_={},this.useRestClient_=!1}return e.getInstance=function(){return Op||(Op=new e),Op},e.prototype.interrupt=function(){var t,n,r,o;try{for(var u=Oe(Object.keys(this.repos_)),a=u.next();!a.done;a=u.next()){var h=a.value;try{for(var l=(r=void 0,Oe(Object.keys(this.repos_[h]))),p=l.next();!p.done;p=l.next()){var v=p.value;this.repos_[h][v].interrupt()}}catch(g){r={error:g}}finally{try{p&&!p.done&&(o=l.return)&&o.call(l)}finally{if(r)throw r.error}}}}catch(g){t={error:g}}finally{try{a&&!a.done&&(n=u.return)&&n.call(u)}finally{if(t)throw t.error}}},e.prototype.resume=function(){var t,n,r,o;try{for(var u=Oe(Object.keys(this.repos_)),a=u.next();!a.done;a=u.next()){var h=a.value;try{for(var l=(r=void 0,Oe(Object.keys(this.repos_[h]))),p=l.next();!p.done;p=l.next()){var v=p.value;this.repos_[h][v].resume()}}catch(g){r={error:g}}finally{try{p&&!p.done&&(o=l.return)&&o.call(l)}finally{if(r)throw r.error}}}}catch(g){t={error:g}}finally{try{a&&!a.done&&(n=u.return)&&n.call(u)}finally{if(t)throw t.error}}},e.prototype.applyEmulatorSettings=function(t,n,r){t.repoInfo_=new Qv(n+":"+r,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams),t.repoInfo_.nodeAdmin&&(t.authTokenProvider_=new H0)},e.prototype.databaseFromApp=function(t,n,r,o){var u=r||t.options.databaseURL;u===void 0&&(t.options.projectId||kn("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),re("Using default host for project ",t.options.projectId),u=t.options.projectId+"-default-rtdb.firebaseio.com");var a=cd(u,o),h=a.repoInfo,l,p=void 0;typeof process<"u"&&(p=process.env[Ox]),p?(l=!0,u="http://"+p+"?ns="+h.namespace,a=cd(u,o),h=a.repoInfo):l=!a.repoInfo.secure;var v=o&&l?new H0:new Rx(t,n);pT("Invalid Firebase Database URL",1,a),rt(a.path)||kn("Database URL must point to the root of a Firebase Database (not including a child path).");var g=this.createRepo(h,t,v);return g.database},e.prototype.deleteRepo=function(t){var n=vn(this.repos_,t.app.name);(!n||vn(n,t.key)!==t)&&kn("Database "+t.app.name+"("+t.repoInfo_+") has already been deleted."),t.interrupt(),delete n[t.key]},e.prototype.createRepo=function(t,n,r){var o=vn(this.repos_,n.name);o||(o={},this.repos_[n.name]=o);var u=vn(o,t.toURLString());return u&&kn("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),u=new Zv(t,this.useRestClient_,n,r),o[t.toURLString()]=u,u},e.prototype.forceRestClient=function(t){this.useRestClient_=t},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ty=function(){function e(t){var n=this;this.repoInternal_=t,this.instanceStarted_=!1,this.INTERNAL={delete:function(){return k(n,void 0,void 0,function(){return R(this,function(r){return this.checkDeleted_("delete"),bu.getInstance().deleteRepo(this.repo_),this.repoInternal_=null,this.rootInternal_=null,[2]})})}},t instanceof Zv||kn("Don't call new Database() directly - please use firebase.database().")}return Object.defineProperty(e.prototype,"repo_",{get:function(){return this.instanceStarted_||(this.repoInternal_.start(),this.instanceStarted_=!0),this.repoInternal_},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"root_",{get:function(){return this.rootInternal_||(this.rootInternal_=new Hn(this.repo_,dt())),this.rootInternal_},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"app",{get:function(){return this.repo_.app},enumerable:!1,configurable:!0}),e.prototype.useEmulator=function(t,n){if(this.checkDeleted_("useEmulator"),this.instanceStarted_){kn("Cannot call useEmulator() after instance has already been initialized.");return}bu.getInstance().applyEmulatorSettings(this.repoInternal_,t,n)},e.prototype.ref=function(t){return this.checkDeleted_("ref"),K("database.ref",0,1,arguments.length),t instanceof Hn?this.refFromURL(t.toString()):t!==void 0?this.root_.child(t):this.root_},e.prototype.refFromURL=function(t){var n="database.refFromURL";this.checkDeleted_(n),K(n,1,1,arguments.length);var r=cd(t,this.repo_.repoInfo_.nodeAdmin);pT(n,1,r);var o=r.repoInfo;return!this.repo_.repoInfo_.isCustomHost()&&o.host!==this.repo_.repoInfo_.host&&kn(n+": Host name does not match the current database: (found "+o.host+" but expected "+this.repo_.repoInfo_.host+")"),this.ref(r.path.toString())},e.prototype.checkDeleted_=function(t){this.repoInternal_===null&&kn("Cannot call "+t+" on a deleted database.")},e.prototype.goOffline=function(){K("database.goOffline",0,0,arguments.length),this.checkDeleted_("goOffline"),this.repo_.interrupt()},e.prototype.goOnline=function(){K("database.goOnline",0,0,arguments.length),this.checkDeleted_("goOnline"),this.repo_.resume()},e.ServerValue={TIMESTAMP:{".sv":"timestamp"},increment:function(t){return{".sv":{increment:t}}}},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var kx=function(){ai.forceDisallow(),Jv.forceAllow()},Dx=function(){Jv.forceDisallow()},Px=function(){return ai.isAvailable()},xx=function(e,t){e.repo.persistentConnection_.securityDebugCallback_=t},Lx=function(e,t){e.repo.stats(t)},Mx=function(e,t){e.repo.statsIncrementCounter(t)},Fx=function(e){return e.repo.dataUpdateCount},Vx=function(e,t){return e.repo.interceptServerData_(t)};function Ux(e){var t=e.app,n=e.url,r=e.version,o=e.customAuthImpl,u=e.namespace,a=e.nodeAdmin,h=a===void 0?!1:a;MT(r);var l=new J0("auth-internal",new Z0("database-standalone"));return l.setComponent(new Bo("auth-internal",function(){return o},"PRIVATE")),{instance:bu.getInstance().databaseFromApp(t,l,n,h),namespace:u}}var jx=Object.freeze({__proto__:null,forceLongPolling:kx,forceWebSockets:Dx,isWebSocketsAvailable:Px,setSecurityDebugCallback:xx,stats:Lx,statsIncrementCounter:Mx,dataUpdateCount:Fx,interceptServerData:Vx,initStandalone:Ux});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Bx=gi;gi.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)};gi.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};var qx=FT,Wx=function(e){var t=gi.prototype.put;return gi.prototype.put=function(n,r,o,u){u!==void 0&&(u=e()),t.call(this,n,r,o,u)},function(){gi.prototype.put=t}},Gx=Qv,Hx=function(e){return e.queryIdentifier()},zx=function(e){bu.getInstance().forceRestClient(e)},Qx=Object.freeze({__proto__:null,DataConnection:Bx,RealTimeConnection:qx,hijackHash:Wx,ConnectionTarget:Gx,queryIdentifier:Hx,forceRestClient:zx}),Kx="@firebase/database",Yx="0.9.4";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $x=ty.ServerValue;function Xx(e){MT(e.SDK_VERSION),e.INTERNAL.registerComponent(new Bo("database",function(t,n){var r=t.getProvider("app").getImmediate(),o=t.getProvider("auth-internal");return bu.getInstance().databaseFromApp(r,o,n)},"PUBLIC").setServiceProps({Reference:Hn,Query:$v,Database:ty,DataSnapshot:_r,enableLogging:JI,INTERNAL:jx,ServerValue:$x,TEST_ACCESS:Qx}).setMultipleInstances(!0)),e.registerVersion(Kx,Yx)}Xx(Q);var _d=[];setTimeout(async()=>{for(let e=0;e<_d.length;e++)await Q.firestore().collection("calls").doc("s74ceZA9JwMJUR6t1yJA5P3WX3i2").collection("offerCandidates").doc(_d[e]).delete();window.location.reload()},1e3*60*15);const Jx={apiKey:"AIzaSyA-M8mIeugRVIlY3FRGQpm0hg6vouwELp0",authDomain:"cat-webrtc.firebaseapp.com",projectId:"cat-webrtc",storageBucket:"cat-webrtc.firebasestorage.app",messagingSenderId:"416637700614",appId:"1:416637700614:web:5d76d45b6a530fecb89187"};Q.apps.length||Q.initializeApp(Jx);const UT=Q.firestore(),jT=Q.database(),wh=Q.auth(),BT=document.getElementById("room-light");jT.ref("/isLightOn").get().then(e=>{console.log(e.toJSON()),BT.checked=e.toJSON()});BT.addEventListener("change",async function(){await jT.ref("/isLightOn").set(this.checked?1:0)});let wd=wh.currentUser?.uid;console.log("USER ID: ",wd);const Zx={iceServers:[{urls:["stun:stun1.l.google.com:19302","stun:stun2.l.google.com:19302"]}],iceCandidatePoolSize:10},be=new RTCPeerConnection(Zx);be.oniceconnectionstatechange=function(){be.iceConnectionState=="disconnected"&&(console.log("Disconnected"),window.location.reload()),console.log("Something happened")};let nc=null,kp=null;document.getElementById("webcamButton");const tL=document.getElementById("webcamVideo");document.getElementById("callButton");document.getElementById("callInput");const qT=document.getElementById("answerButton"),eL=document.getElementById("submitPassword");document.getElementById("signout").onclick=async()=>await wh.signOut();const nL=document.getElementById("remoteVideo");document.getElementById("hangupButton");wh.onAuthStateChanged(e=>{e&&(wd=e.uid,console.log("USER ID: ",wd))});eL.onclick=async()=>{try{await wh.signInWithEmailAndPassword("kitty@gmail.com",document.getElementById("passwordInput").value),document.getElementById("signOnNews").innerHTML="Noice, logged in bro"}catch(e){console.log("shit bro"),document.getElementById("signOnNews").innerHTML=JSON.parse(e.message).error.message}};try{nc=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"},audio:!0}),console.log(await navigator.mediaDevices.enumerateDevices()),kp=new MediaStream,nc.getTracks().forEach(e=>{be.addTrack(e,nc)}),be.ontrack=e=>{e.streams[0].getTracks().forEach(t=>{kp.addTrack(t)})},tL.srcObject=nc,nL.srcObject=kp,qT.disabled=!1}catch(e){console.error("Error accessing the webcam:",e),alert(e)}if(document.URL.includes("broadcaster")){console.log("this is the broadcaster");const e=UT.collection("calls").doc("s74ceZA9JwMJUR6t1yJA5P3WX3i2");e.delete();const t=e.collection("offerCandidates"),n=e.collection("answerCandidates");be.onicecandidate=async u=>{if(u.candidate){const a=await t.add(u.candidate.toJSON());_d.push(a.id)}};const r=await be.createOffer();await be.setLocalDescription(r);const o={sdp:r.sdp,type:r.type};await e.set({offer:o}),e.onSnapshot(u=>{const a=u.data();if(!be.currentRemoteDescription&&a?.answer){const h=new RTCSessionDescription(a.answer);be.setRemoteDescription(h)}}),n.onSnapshot(u=>{u.docChanges().forEach(a=>{if(a.type==="added"){const h=new RTCIceCandidate(a.doc.data());be.addIceCandidate(h);const l=a.doc.id;n.doc(l).delete()}})})}document.URL.includes("receiver")&&(qT.onclick=async()=>{const e=UT.collection("calls").doc("s74ceZA9JwMJUR6t1yJA5P3WX3i2"),t=e.collection("answerCandidates"),n=e.collection("offerCandidates");be.onicecandidate=h=>{h.candidate&&t.add(h.candidate.toJSON())};const o=(await e.get()).data().offer;await be.setRemoteDescription(new RTCSessionDescription(o));const u=await be.createAnswer();await be.setLocalDescription(u);const a={type:u.type,sdp:u.sdp};await e.update({answer:a}),n.onSnapshot(h=>{h.docChanges().forEach(l=>{if(console.log(l),l.type==="added"){let p=l.doc.data();be.addIceCandidate(new RTCIceCandidate(p));const v=l.doc.id;n.doc(v).delete()}})})});
